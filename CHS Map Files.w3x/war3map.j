globals
//globals from Raw2s:
constant boolean LIBRARY_Raw2s=true
string array sOutput
//endglobals from Raw2s
    // User-defined
unit array udg_units01
integer udg_integer01= 0
integer array udg_integers01
integer array udg_integers02
integer udg_integer02= 0
integer udg_integer03= 0
integer udg_integer04= 0
rect array udg_rects01
integer udg_integer05= 0
integer udg_integer06= 0
integer udg_integer07= 0
integer udg_integer08= 0
real udg_real01= 0
integer udg_integer09= 0
integer udg_integer10= 0
integer udg_integer11= 0
integer udg_integer12= 0
player udg_player01= null
integer udg_integer13= 0
unit array udg_units02
force udg_force01= null
boolean udg_boolean01= false
force udg_force02= null
group udg_group01= null
unit array udg_units03
integer udg_integer14= 0
integer array udg_integers03
integer array udg_integers04
group udg_group02= null
group udg_group03= null
integer udg_integer15= 0
integer udg_integer16= 0
boolean array udg_booleans01
boolean udg_boolean02= false
integer array udg_integers05
boolean array udg_booleans02
integer udg_integer17= 0
integer udg_integer18= 0
item array udg_items01
boolean array udg_booleans03
force udg_force03= null
location udg_location01= null
integer udg_integer19= 0
integer udg_integer20= 0
real udg_real02= 0
unit udg_unit01= null
integer array udg_integers06
dialog udg_dialog01= null
button array udg_buttons01
integer array udg_integers07
integer udg_integer21= 0
integer udg_integer22= 0
integer udg_integer23= 0
integer udg_integer24= 0
integer udg_integer25= 0
integer array udg_integers08
integer array udg_integers09
integer udg_integer26= 0
integer udg_integer27= 0
integer udg_integer28= 0
group udg_group04= null
integer udg_integer29= 0
integer udg_integer30= 0
boolean udg_boolean03= false
boolean udg_boolean04= false
dialog udg_dialog02= null
integer udg_integer31= 0
boolean udg_boolean05= false
dialog udg_dialog03= null
player udg_player02= null
integer udg_integer32= 0
integer udg_integer33= 0
integer udg_integer34= 0
boolean udg_boolean06= false
location array udg_locations01
integer udg_integer35= 0
integer array udg_integers10
integer udg_integer36= 0
integer udg_integer37= 0
dialog array udg_dialogs01
button array udg_buttons02
force udg_force04= null
force udg_force05= null
boolean array udg_booleans04
boolean array udg_booleans05
integer array udg_integers11
string udg_string01
integer udg_integer38= 0
boolean udg_boolean07= false
force udg_force06= null
string array udg_strings01
integer array udg_integers12
boolean udg_boolean08= false
integer udg_integer39= 0
dialog udg_dialog04= null
button array udg_buttons03
group udg_group05= null
integer udg_integer40= 0
boolean udg_boolean09= false
integer udg_integer41= 0
boolean udg_boolean10= false
boolean udg_boolean11= false
integer udg_integer42= 0
integer udg_integer43= 0
integer udg_integer44= 0
integer udg_integer45= 0
integer udg_integer46= 0
integer udg_integer47= 0
force udg_force07= null
boolean udg_boolean12= false
integer udg_integer48= 0
integer udg_integer49= 0
integer udg_integer50= 0
integer udg_integer51= 0
integer udg_integer52= 0
integer array udg_integers13
integer udg_integer53= 0
effect array udg_effects01
effect array udg_effects02
group udg_group06= null
integer udg_integer54= 0
integer udg_integer55= 0
integer udg_integer56= 0
group udg_group07= null
sound array udg_sounds01
group udg_group08= null
real udg_real03= 0
unit udg_unit02= null
integer array udg_integers14
integer udg_integer57= 0
integer udg_integer58= 0
integer udg_integer59= 0
integer udg_integer60= 0
integer udg_integer61= 0
dialog udg_dialog05= null
boolean udg_boolean13= false
boolean udg_boolean14= false
dialog udg_dialog06= null
button array udg_buttons04
boolean udg_boolean15= false
player udg_player03= null
dialog udg_dialog07= null
boolean udg_boolean16= false
integer array udg_integers15
integer array udg_integers16
integer udg_integer62= 0
real udg_real04= 0
boolean udg_boolean17= false
string array udg_strings02
unit udg_unit03= null
group udg_group09= null
location udg_location02= null
unit udg_unit04= null
boolean udg_boolean18= false
unit udg_unit05= null
integer udg_integer63= 0
rect udg_rect01= null
rect udg_rect02= null
rect udg_rect03= null
rect udg_rect04= null
rect udg_rect05= null
rect udg_rect06= null
rect udg_rect07= null
rect udg_rect08= null
rect udg_rect09= null
camerasetup udg_camerasetup01= null
sound udg_sound01= null
sound udg_sound02= null
sound udg_sound03= null
sound udg_sound04= null
sound udg_sound05= null
sound udg_sound06= null
sound udg_sound07= null
sound udg_sound08= null
sound udg_sound09= null
sound udg_sound10= null
sound udg_sound11= null
sound udg_sound12= null
sound udg_sound13= null
sound udg_sound14= null
sound udg_sound15= null
sound udg_sound16= null
sound udg_sound17= null
sound udg_sound18= null
sound udg_sound19= null
sound udg_sound20= null
sound udg_sound21= null
sound udg_sound22= null
sound udg_sound23= null
sound udg_sound24= null
sound udg_sound25= null
trigger udg_trigger01= null
trigger udg_trigger02= null
trigger udg_trigger03= null
trigger udg_trigger04= null
trigger udg_trigger05= null
trigger udg_trigger06= null
trigger udg_trigger07= null
trigger udg_trigger08= null
trigger udg_trigger09= null
trigger udg_trigger10= null
trigger udg_trigger11= null
trigger udg_trigger12= null
trigger udg_trigger13= null
trigger udg_trigger14= null
trigger udg_trigger15= null
trigger udg_trigger16= null
trigger udg_trigger17= null
trigger udg_trigger18= null
trigger udg_trigger19= null
trigger udg_trigger20= null
trigger udg_trigger21= null
trigger udg_trigger22= null
trigger udg_trigger23= null
trigger udg_trigger24= null
trigger udg_trigger25= null
trigger udg_trigger26= null
trigger udg_trigger27= null
trigger udg_trigger28= null
trigger udg_trigger29= null
trigger udg_trigger30= null
trigger udg_trigger31= null
trigger udg_trigger32= null
trigger udg_trigger33= null
trigger udg_trigger34= null
trigger udg_trigger35= null
trigger udg_trigger36= null
trigger udg_trigger37= null
trigger udg_trigger38= null
trigger udg_trigger39= null
trigger udg_trigger40= null
trigger udg_trigger41= null
trigger udg_trigger42= null
trigger udg_trigger43= null
trigger udg_trigger44= null
trigger udg_trigger45= null
trigger udg_trigger46= null
trigger udg_trigger47= null
trigger udg_trigger48= null
trigger udg_trigger49= null
trigger udg_trigger50= null
trigger udg_trigger51= null
trigger udg_trigger52= null
trigger udg_trigger53= null
trigger udg_trigger54= null
trigger udg_trigger55= null
trigger udg_trigger56= null
trigger udg_trigger57= null
trigger udg_trigger58= null
trigger udg_trigger59= null
trigger udg_trigger60= null
trigger udg_trigger61= null
trigger udg_trigger62= null
trigger udg_trigger63= null
trigger udg_trigger64= null
trigger udg_trigger65= null
trigger udg_trigger66= null
trigger udg_trigger67= null
trigger udg_trigger68= null
trigger udg_trigger69= null
trigger udg_trigger70= null
trigger udg_trigger71= null
trigger udg_trigger72= null
trigger udg_trigger73= null
trigger udg_trigger74= null
trigger udg_trigger75= null
trigger udg_trigger76= null
trigger udg_trigger77= null
trigger udg_trigger78= null
trigger udg_trigger79= null
trigger udg_trigger80= null
trigger udg_trigger81= null
trigger udg_trigger82= null
trigger udg_trigger83= null
trigger udg_trigger84= null
trigger udg_trigger85= null
trigger udg_trigger86= null
trigger udg_trigger87= null
trigger udg_trigger88= null
trigger udg_trigger89= null
trigger udg_trigger90= null
trigger udg_trigger91= null
trigger udg_trigger92= null
trigger udg_trigger93= null
trigger udg_trigger94= null
trigger udg_trigger95= null
trigger udg_trigger96= null
trigger udg_trigger97= null
trigger udg_trigger98= null
trigger udg_trigger99= null
trigger udg_trigger100= null
trigger udg_trigger101= null
trigger udg_trigger102= null
trigger udg_trigger103= null
trigger udg_trigger104= null
trigger udg_trigger105= null
trigger udg_trigger106= null
trigger udg_trigger107= null
trigger udg_trigger108= null
trigger udg_trigger109= null
trigger udg_trigger110= null
trigger udg_trigger111= null
trigger udg_trigger112= null
trigger udg_trigger113= null
trigger udg_trigger114= null
trigger udg_trigger115= null
trigger udg_trigger116= null
trigger udg_trigger117= null
trigger udg_trigger118= null
trigger udg_trigger119= null
trigger udg_trigger120= null
trigger udg_trigger121= null
trigger udg_trigger122= null
trigger udg_trigger123= null
trigger udg_trigger124= null
trigger udg_trigger125= null
trigger udg_trigger126= null
trigger udg_trigger127= null
trigger udg_trigger128= null
trigger udg_trigger129= null
trigger udg_trigger130= null
trigger udg_trigger131= null
trigger udg_trigger132= null
trigger udg_trigger133= null
trigger udg_trigger134= null
trigger udg_trigger135= null
trigger udg_trigger136= null
trigger udg_trigger137= null
trigger udg_trigger138= null
trigger udg_trigger139= null
trigger udg_trigger140= null
trigger udg_trigger141= null
trigger udg_trigger142= null
trigger udg_trigger143= null
trigger udg_trigger144= null
trigger udg_trigger145= null
trigger udg_trigger146= null
trigger udg_trigger147= null
trigger udg_trigger148= null
trigger udg_trigger149= null
trigger udg_trigger150= null
trigger udg_trigger151= null
trigger udg_trigger152= null
trigger udg_trigger153= null
unit udg_unit06= null
unit udg_unit07= null
unit udg_unit08= null
unit udg_unit09= null
unit udg_unit10= null
unit udg_unit11= null
unit udg_unit12= null
unit udg_unit13= null
unit udg_unit14= null
unit udg_unit15= null
unit udg_unit16= null
unit udg_unit17= null
unit udg_unit18= null
unit udg_unit19= null
unit udg_unit20= null
unit udg_unit21= null
unit udg_unit22= null
unit udg_unit23= null
unit udg_unit24= null
unit udg_unit25= null
unit udg_unit26= null
unit udg_unit27= null
unit udg_unit28= null
unit udg_unit29= null
unit udg_unit30= null
unit udg_unit31= null
unit udg_unit32= null
unit udg_unit33= null
unit udg_unit34= null
unit udg_unit35= null
unit udg_unit36= null
unit udg_unit37= null
unit udg_unit38= null
trigger udg_trigger154= null
integer array udg_Skill
string array udg_Description
integer array udg_Items
integer array udg_skills
integer udg_Ingredients= 0
integer array udg_RecipeFactor
boolean array udg_FactorCleared
real udg_Camera_Distance= 0
integer udg_PlayerLumber= 0
integer udg_WhirlwindDamage= 0
integer udg_SaveSkillLevel= 0
integer udg_MaxStr= 0
integer udg_MaxInt= 0
integer udg_MaxAgi= 0
integer udg_BaseInt= 0
integer udg_BaseStr= 0
integer udg_BaseAgi= 0
integer udg_MaxStat= 0
integer udg_MaxBaseStat= 0
integer udg_StatDifference= 0
integer udg_WhirlwindLevel= 0
integer udg_WhirlwindLevelMultiplier= 0
integer udg_TrueshotMultiplier= 0
integer udg_CommandMultiplier= 0
integer udg_WarDrumsMultiplier= 0
integer udg_WarDrumsDamage= 0
integer udg_TrueShotDamage= 0
integer udg_CommandDamage= 0
integer udg_WhirlwindBaseDamage= 0
unit udg_DrainAuraTarget= null
integer udg_DrainDamage= 0
unit udg_DrainAuraUser= null

    // Generated
rect gg_rct_Region_000= null
rect gg_rct_Region_001= null
rect gg_rct_Region_002= null
rect gg_rct_grom_spawn= null
rect gg_rct_EntireMapVariable= null
rect gg_rct_Region_005= null
sound gg_snd_HealingWave= null
string gg_snd_HealingWave01
sound gg_snd_Mainscreen= null
trigger gg_trg_InitDescription= null
trigger gg_trg_Storm_bolt= null
trigger gg_trg_Inner_fire= null
trigger gg_trg_Holy_Light= null
trigger gg_trg_Flame_Strike= null
trigger gg_trg_Fog= null
trigger gg_trg_Blizzard= null
trigger gg_trg_Thunder_Clap= null
trigger gg_trg_Banish= null
trigger gg_trg_Divine_Shield= null
trigger gg_trg_Avatar= null
trigger gg_trg_Summon_Water_Elemental= null
trigger gg_trg_Phoenix= null
trigger gg_trg_Multishot= null
trigger gg_trg_Devation_Aura= null
trigger gg_trg_Brilliance_Aura= null
trigger gg_trg_War_Stomp= null
trigger gg_trg_Berserk= null
trigger gg_trg_War_Drums= null
trigger gg_trg_Pilage= null
trigger gg_trg_Shockwave= null
trigger gg_trg_Spirit_Link= null
trigger gg_trg_Chain_Lightning= null
trigger gg_trg_HealingWave= null
trigger gg_trg_Slow_Aura= null
trigger gg_trg_Endurance_Aura= null
trigger gg_trg_Feral_Spirit= null
trigger gg_trg_Serpent_Ward= null
trigger gg_trg_Mirror_Image= null
trigger gg_trg_Critical_Strike= null
trigger gg_trg_Big_Bad_Voodoo= null
trigger gg_trg_Wind_Walk= null
trigger gg_trg_Bloodlust= null
trigger gg_trg_Healing_Ward= null
trigger gg_trg_Stasis_Trap= null
trigger gg_trg_Pulverize= null
trigger gg_trg_Vampirism= null
trigger gg_trg_Carrion_Beetles= null
trigger gg_trg_Inferno= null
trigger gg_trg_Carrion_Swarm= null
trigger gg_trg_Death_and_Decay= null
trigger gg_trg_Death_Pact= null
trigger gg_trg_Frost_Armor= null
trigger gg_trg_Frost_Nova= null
trigger gg_trg_Impale= null
trigger gg_trg_Spiked_Carapace= null
trigger gg_trg_Unholy_Aura= null
trigger gg_trg_AntiMagic_Shell= null
trigger gg_trg_Curse= null
trigger gg_trg_Raise_Dead= null
trigger gg_trg_Unholy_Frenzy= null
trigger gg_trg_Blink= null
trigger gg_trg_Entangling_Roots= null
trigger gg_trg_Rejuvenation= null
trigger gg_trg_Tranquility= null
trigger gg_trg_Thorns= null
trigger gg_trg_Evasion= null
trigger gg_trg_Fan_of_Knives= null
trigger gg_trg_Immolation= null
trigger gg_trg_Searing_Arrows= null
trigger gg_trg_Shadow_Strike= null
trigger gg_trg_Starfall= null
trigger gg_trg_Summon_Mountain_Giant= null
trigger gg_trg_Trueshot_Aura= null
trigger gg_trg_Faerie_Fire= null
trigger gg_trg_Hardened_Skin= null
trigger gg_trg_Phase_Shift= null
trigger gg_trg_DamageAbilty= null
trigger gg_trg_InitSpells= null
trigger gg_trg_test= null
trigger gg_trg_Abil= null
trigger gg_trg_Untitled_Trigger_002= null
trigger gg_trg_UnitStateSys= null
trigger gg_trg_LossHp= null
trigger gg_trg_HealController= null
trigger gg_trg_VampirsmController= null
trigger gg_trg_AOE_DMG= null
trigger gg_trg_Glory= null
trigger gg_trg_Functions= null
trigger gg_trg_StartFunction= null
trigger gg_trg_Toms= null
trigger gg_trg_Event_lich= null
trigger gg_trg_Vers= null
trigger gg_trg_Untitled_Trigger_005= null
trigger gg_trg_E= null
trigger gg_trg_bonus1= null
trigger gg_trg_Init= null
trigger gg_trg_UpdateFrame= null
trigger gg_trg_InitAbility_Copy= null
trigger gg_trg_AbsoluteAbilityUpgrade_Copy= null
trigger gg_trg_Timer_Copy= null
trigger gg_trg_Key_Copy= null
trigger gg_trg_Cooldown_Copy= null
trigger gg_trg_functions_Copy= null
trigger gg_trg_InAl_Copy= null
trigger gg_trg_FixUnit_Copy= null
trigger gg_trg_InitHash_Copy= null
trigger gg_trg_Whirlwind_Damage_Copy= null
trigger gg_trg_reset_cooldown_spell_Copy= null
trigger gg_trg_axe_recipe_Copy= null
trigger gg_trg_ring_recipe_Copy= null
trigger gg_trg_pitlord_passive_cleave_Copy= null
trigger gg_trg_Zoom_Copy= null
trigger gg_trg_AttackController_Copy= null
trigger gg_trg_EvaryChk_Copy_Copy= null
trigger gg_trg_HeroLvl_Copy= null
trigger gg_trg_AbilityCast_Copy= null
trigger gg_trg_Effect_Copy= null
trigger gg_trg_init_Copy= null
trigger gg_trg_InitData_Copy= null
trigger gg_trg_A044_Copy= null
trigger gg_trg_AutoCastSpells_Copy= null
trigger gg_trg_RbAbil_Copy= null
trigger gg_trg_AbilS_Copy= null
trigger gg_trg_RaAbil_Copy= null
trigger gg_trg_Untitled_Trigger_004_Copy= null
trigger gg_trg_AbilDragonStaff_Copy= null
trigger gg_trg_AbilityData= null
trigger gg_trg_Spell_Death_Pact= null
trigger gg_trg_Spell_Holy_Light= null
trigger gg_trg_Spell_Tranquility= null
trigger gg_trg_Spell_Rejuvination= null
trigger gg_trg_Abil_Healing_Ward= null
trigger gg_trg_Abil_Healing_Wave= null
trigger gg_trg_Cast= null
trigger gg_trg_Multicast_Copy= null
trigger gg_trg_AEah_Thorns= null
trigger gg_trg_AUts_Spiked_Carapace= null
trigger gg_trg_I05G_MagicNecklaceOfAbsorption= null
trigger gg_trg_I07O_BoneArmor= null
trigger gg_trg_Astu_Copy= null
trigger gg_trg_Crit_Copy= null
trigger gg_trg_PhysDmg_Copy= null
trigger gg_trg_MagicDmg_Copy= null
trigger gg_trg_Damage_Controller_After_Copy= null
trigger gg_trg_Damage_Controller_Befor_Copy= null
trigger gg_trg_ItemBonus_Copy= null
trigger gg_trg_EvaryChk_Copy_2= null
trigger gg_trg_Killing_Copy= null
trigger gg_trg_It_Copy_3= null
trigger gg_trg_It_Copy_Copy= null
trigger gg_trg_It_Copy_2_Copy= null
trigger gg_trg_ElementStartAbility= null
trigger gg_trg_InitElements= null
trigger gg_trg_RuneCast= null
trigger gg_trg_MyRune= null
trigger gg_trg_RuneState= null
trigger gg_trg_RuneEvent= null
trigger gg_trg_RuneOfAttack= null
trigger gg_trg_RuneOfEarth= null
trigger gg_trg_RuneOfPower= null
trigger gg_trg_RuneOfHealing= null
trigger gg_trg_RuneOfLife= null
trigger gg_trg_RuneOfMagic= null
trigger gg_trg_RuneOfFire= null
trigger gg_trg_RuneOfChaos= null
trigger gg_trg_RuneOfStorm= null
trigger gg_trg_RuneOfAir= null
trigger gg_trg_InitRune= null
trigger gg_trg_InitRuneTrigger= null
trigger gg_trg_InitBoolx= null
trigger gg_trg_EffectInit= null

integer array SpellCP
integer Global_i= 0
unit Global_u= null
    


boolean EffectVisible= true
string LastBreathAnim= "Abilities\\Spells\\Undead\\Unsummon\\UnsummonTarget.mdl"

unit GLOB_DEBUF= null

hashtable HT_abilsys= InitHashtable()
    
integer STOP_0
integer STOPING= 0
    

constant real NULL= - 9999.999
constant string DEESCRIPTION_LEVEL= "!LVL!"
    
constant string DEESCRIPTION_COOLDOWN= "!CD!"
    
constant string DEESCRIPTION_DURATION1= "!DUR1!"
constant string DEESCRIPTION_DURATION2= "!DUR2!"
constant string DEESCRIPTION_DURATION3= "!DUR3!"
 
constant string DEESCRIPTION_DURATION1_HERO= "!DURH1!"
constant string DEESCRIPTION_DURATION2_HERO= "!DURH2!"
constant string DEESCRIPTION_DURATION3_HERO= "!DURH3!"
    
constant string DEESCRIPTION_AREA1= "!AREA1!"
constant string DEESCRIPTION_AREA2= "!AREA2!"
constant string DEESCRIPTION_AREA3= "!AREA3!"
    
constant string DEESCRIPTION_RANGE1= "!RANGE1!"
constant string DEESCRIPTION_RANGE2= "!RANGE2!"
constant string DEESCRIPTION_RANGE3= "!RANGE3!"
    
constant string DEESCRIPTION_Damage1= "!DMG1!"
constant string DEESCRIPTION_Damage2= "!DMG2!"
constant string DEESCRIPTION_Damage3= "!DMG3!"
    
constant string DEESCRIPTION_Casting1= "!CST1!"
constant string DEESCRIPTION_Casting2= "!CST2!"
constant string DEESCRIPTION_Casting3= "!CST3!"
    
constant string DEESCRIPTION_Cooldown1= "!CD1!"
constant string DEESCRIPTION_Cooldown2= "!CD2!"
constant string DEESCRIPTION_Cooldown3= "!CD3!"

constant string DEESCRIPTION_Manacost1= "!MANA1!"
constant string DEESCRIPTION_Manacost2= "!MANA2!"
constant string DEESCRIPTION_Manacost3= "!MANA3!"
    
constant string DEESCRIPTION_Param1= "!PAR1!"
constant string DEESCRIPTION_Param2= "!PAR2!"
constant string DEESCRIPTION_Param3= "!PAR3!"
constant string DEESCRIPTION_Param4= "!PAR4!"
constant string DEESCRIPTION_Param5= "!PAR5!"
constant string DEESCRIPTION_Param6= "!PAR6!"

    
hashtable HT_des= InitHashtable()

constant integer IdBuffAbility= 'A06H'
constant integer IdDeBuffAbility= 'A06I'
constant integer IdBuffUnit= 'h015'
    
integer array BufLvl
integer array DeBufLvl
integer array DeBufLvlA
hashtable HT_buff= InitHashtable()
integer TypeDmg_b= 0
constant integer Buff_Type_passive= 2
string array OrderString
hashtable HTInfoSpell= InitHashtable()
hashtable HT_unitstate= InitHashtable()

integer array Income
integer array Lives

integer array NumberOfUnit

integer BonusNeutral= 0

integer array BonusNeutralPlayer


boolean isReforged
    
framehandle unitInfo
framehandle parent
    
framehandle tooltipBox
framehandle tooltipText
    
    
framehandle array UnitPanels
    
    
string array DataIcon
string array DataDesc
string array DataLabel
string array CustomInfoT1



framehandle array ButtonUI
framehandle array ToolTipUI
framehandle array ToolTextUI
framehandle array IconUI
framehandle array TextUI
framehandle array TooltipTextUI
    


group gUI= CreateGroup()
unit UnitInfoUnit= null
    
string ToolTipA= ""
unit array UnitArrayUpdate
string array ClassAbil


integer GLOBAL_HERO_A= 0
unit GLOBAL_HERO_U= null
real GLOBAL_HERO_LVL= 0
    
integer PARAMETR_DMG= 0
integer PARAMETR_DMG2= 0
integer PARAMETR_DMG3= 0
string PARAMETR_TOOLTIP= null
string PARAMETR_NAME= null
group GLOB_gr= CreateGroup()
boolexpr GLOB_boolCyclone
unit GLOB_unitCyclone= null
real GLOB_damageCyclone= 0
integer array SkeletonDefender
boolean array bnos_a
group Area_group= CreateGroup()
unit Sourse_unit= null
real Dmg_ef= 0
integer ABILGLOB= 0
integer Attack_AbilId= 0
    
boolexpr array BoolArray
boolean GLOB_LIFESTEAL= false
integer GLOB_typeDmg= 0
    
unit Drain

real array Glory
framehandle ResPlayer= null
integer array WinCount
hashtable HT_SpellPlayer= InitHashtable()

hashtable HT_timerSpell= InitHashtable()

real array MagicProt
real array MagicPwr
real array PvpBonus


hashtable DataUnitHT= InitHashtable()

hashtable HT_data= InitHashtable()
 
framehandle gameUI
framehandle SkillFrame
framehandle SkillFrame1
framehandle SkillBoxTooltip
framehandle array Ability
framehandle array AbilitySC
   
trigger SPEL_DFF= null
  
framehandle ToolBoxSpels= null
framehandle ToolBoxSpelsT= null
 
integer MaxSpell= 11

boolean array ShowAbButton
 
 
framehandle array SpellFR
framehandle array SpellUP
framehandle array SpellTT
 
hashtable HtSpell= InitHashtable()

integer array NumPlayerLast


integer array Absolute_item
integer array Absolute_ability
    
hashtable ITEM_SPELL= InitHashtable()

integer Glob_time= 0
hashtable HT_SPELC= InitHashtable()
unit GLOB_ABSOLUTE_COLD_U= null
real GLOB_ABSOLUTE_COLD_DMG= 0
hashtable HT= InitHashtable()
integer array LastLvlHero
integer array BRL_BONUS
boolean array Bonus25l
boolean array Bonus50l
boolean array Bonus75l
boolean array Bonus100l
boolean array Bonus125l
boolean array Bonus150l
boolean array Bonus175l
boolean array Bonus200l
unit array CicrleUnit
boolean ModeNoDeath= false
integer MorePvp= 1
 
integer array ItemN1
    
integer array ItemN2
    
integer array ItemN3
        
    
 

integer array ListAAT
integer CountAAT
    
    
integer array HolyShieldS
integer CountHolyShieldS


integer array AbilSpellRB1
integer AbilSRB1_count= 0
integer array AbilSpellRB2
integer AbilSRB2_count= 0
    
integer array AbilSpellRB3
integer AbilSRB3_count= 0

hashtable HT_AbilityData= InitHashtable()

integer array AbilSpellRA1
integer AbilSRA1_count= 0
integer array AbilSpellRA2
integer AbilSRA2_count= 0
    
integer array AbilSpellRA3
integer AbilSRA3_count= 0
unit GLOB_AB_CH= null
unit GLOB_TR_CH= null
real GLOB_X1_CH= 0
real GLOB_Y1_CH= 0
integer GLOB_LV_CH= 0
integer GLOB_ID_CH= 0
    

hashtable HT_it= InitHashtable()

group AbilTranquilityGroup= CreateGroup()
conditionfunc TranquilityBoolexpr= null
    
unit GLOB_TRANQUILITY_U= null
real GLOB_TRANQUILITY_HEAL= 0

group AbilHealingWardGroup= CreateGroup()
conditionfunc HealingWardBoolexpr= null
    
unit GLOB_HEALING_WARD_U= null
unit GLOB_HEALING_WARD_U2= null
real GLOB_HEALING_WARD_HEAL= 0
integer GLOB_HW_I= 0
integer GLOB_HW_COUNT= 0
unit GLOB_HW_U1= null
unit GLOB_HW_U2= null
real GLOB_HW_DMG= 0
real GLOB_HW_HEAL= 0
group GLOB_HW_G= null
boolean GLOB_HW_ACTIVE= false
real GLOB_HW_X= 0
real GLOB_HW_Y= 0


hashtable HY2= InitHashtable()

hashtable ShateHT= InitHashtable()
boolean GLOB_cuttting= false
integer GLOB_ABIL_ID= 0
integer IdDamage= 0
hashtable HTi= InitHashtable()
unit GLOB_ELEM_U= null
integer GLOB_ELEM_I= 0
hashtable Elem= InitHashtable()
unit GLOB_RUNE_U= null
real GLOB_RUNE_POWER= 0

constant real RuneOfAttack_base= 15
constant real RuneOfLife_base= 150
constant real RuneOfMagic_base= 10
constant real RuneOfFire_base_dmg= 4000
constant real RuneOfFire_base_range= 650
group GL_GR= CreateGroup()
boolexpr RuneOfChaos_b
integer GLOB_LVL_abil= 0
boolexpr RuneOfStorm_b
boolexpr RuneOfWinds_b
integer array Runes
trigger array RunesTriggers
string array RunesName
integer RuneCount= 0
    

conditionfunc PULV1
conditionfunc PULV2
conditionfunc AbsoluteIceFuncBool
conditionfunc AbsoluteColdBool
 
conditionfunc HealingWave1

trigger l__library_init

//JASSHelper struct globals:
constant integer si__AbilityData=1
integer si__AbilityData_F=0
integer si__AbilityData_I=0
integer array si__AbilityData_V
integer array s__AbilityData_id
real array s__AbilityData_Level
real array s__AbilityData_DurationNormal1
real array s__AbilityData_DurationNormal2
real array s__AbilityData_DurationNormal3
real array s__AbilityData_DurationHero1
real array s__AbilityData_DurationHero2
real array s__AbilityData_DurationHero3
real array s__AbilityData_CastingTime1
real array s__AbilityData_Area1
real array s__AbilityData_Area2
real array s__AbilityData_Area3
real array s__AbilityData_Damage1
real array s__AbilityData_Damage2
real array s__AbilityData_Damage3
real array s__AbilityData_Param1
real array s__AbilityData_Param2
real array s__AbilityData_Param3
real array s__AbilityData_Param4
real array s__AbilityData_Param5
real array s__AbilityData_Param6
integer array s__AbilityData_Param1Field
integer array s__AbilityData_Param2Field
integer array s__AbilityData_Param3Field
integer array s__AbilityData_Param4Field
integer array s__AbilityData_Param5Field
integer array s__AbilityData_Param6Field
integer array s__AbilityData_Param1FieldType
integer array s__AbilityData_Param2FieldType
integer array s__AbilityData_Param3FieldType
integer array s__AbilityData_Param4FieldType
integer array s__AbilityData_Param5FieldType
integer array s__AbilityData_Param6FieldType
boolean array s__AbilityData_Param1Chance
boolean array s__AbilityData_Param2Chance
boolean array s__AbilityData_Param3Chance
boolean array s__AbilityData_Param4Chance
boolean array s__AbilityData_Param5Chance
boolean array s__AbilityData_Param6Chance
real array s__AbilityData_Cooldown1
real array s__AbilityData_Cooldown2
real array s__AbilityData_Cooldown3
real array s__AbilityData_Cost1
real array s__AbilityData_Cost2
real array s__AbilityData_Cost3
real array s__AbilityData_Range1
real array s__AbilityData_Range2
real array s__AbilityData_Range3
integer array s__AbilityData_SummonId1
integer array s__AbilityData_SummonId2
real array s__AbilityData_BonusLevel
real array s__AbilityData_BonusDurationNormal1
real array s__AbilityData_BonusDurationNormal2
real array s__AbilityData_BonusDurationNormal3
real array s__AbilityData_BonusDurationHero1
real array s__AbilityData_BonusDurationHero2
real array s__AbilityData_BonusDurationHero3
real array s__AbilityData_BonusCastingTime1
real array s__AbilityData_BonusArea1
real array s__AbilityData_BonusArea2
real array s__AbilityData_BonusArea3
real array s__AbilityData_BonusDamage1
real array s__AbilityData_BonusDamage2
real array s__AbilityData_BonusDamage3
real array s__AbilityData_BonusParam1
real array s__AbilityData_BonusParam2
real array s__AbilityData_BonusParam3
real array s__AbilityData_BonusParam4
real array s__AbilityData_BonusParam5
real array s__AbilityData_BonusParam6
real array s__AbilityData_BonusCooldown1
real array s__AbilityData_BonusCooldown2
real array s__AbilityData_BonusCooldown3
real array s__AbilityData_BonusCost1
real array s__AbilityData_BonusCost2
real array s__AbilityData_BonusCost3
real array s__AbilityData_BonusRange1
real array s__AbilityData_BonusRange2
real array s__AbilityData_BonusRange3
boolean array s__AbilityData_isDestroy
constant integer si__DamageAbility=2
integer si__DamageAbility_F=0
integer si__DamageAbility_I=0
integer array si__DamageAbility_V
integer array s__DamageAbility_id
integer array s__DamageAbility_number
trigger st__AbilityData_GedLevel
integer f__arg_this
real f__result_real

endglobals


//Generated method caller for AbilityData.GedLevel
function sc__AbilityData_GedLevel takes integer this returns real
        return s__AbilityData_Level[this] + s__AbilityData_BonusLevel[this]
endfunction

//Generated allocator of AbilityData
function s__AbilityData__allocate takes nothing returns integer
 local integer this=si__AbilityData_F
    if (this!=0) then
        set si__AbilityData_F=si__AbilityData_V[this]
    else
        set si__AbilityData_I=si__AbilityData_I+1
        set this=si__AbilityData_I
    endif
    if (this>8190) then
        return 0
    endif

   set s__AbilityData_Level[this]= 0
   set s__AbilityData_DurationNormal1[this]= NULL
   set s__AbilityData_DurationNormal2[this]= NULL
   set s__AbilityData_DurationNormal3[this]= NULL
   set s__AbilityData_DurationHero1[this]= NULL
   set s__AbilityData_DurationHero2[this]= NULL
   set s__AbilityData_DurationHero3[this]= NULL
   set s__AbilityData_CastingTime1[this]= NULL
   set s__AbilityData_Area1[this]= NULL
   set s__AbilityData_Area2[this]= NULL
   set s__AbilityData_Area3[this]= NULL
   set s__AbilityData_Damage1[this]= NULL
   set s__AbilityData_Damage2[this]= NULL
   set s__AbilityData_Damage3[this]= NULL
   set s__AbilityData_Param1[this]= NULL
   set s__AbilityData_Param2[this]= NULL
   set s__AbilityData_Param3[this]= NULL
   set s__AbilityData_Param4[this]= NULL
   set s__AbilityData_Param5[this]= NULL
   set s__AbilityData_Param6[this]= NULL
   set s__AbilityData_Param1Field[this]= 0
   set s__AbilityData_Param2Field[this]= 0
   set s__AbilityData_Param3Field[this]= 0
   set s__AbilityData_Param4Field[this]= 0
   set s__AbilityData_Param5Field[this]= 0
   set s__AbilityData_Param6Field[this]= 0
   set s__AbilityData_Param1FieldType[this]= 0
   set s__AbilityData_Param2FieldType[this]= 0
   set s__AbilityData_Param3FieldType[this]= 0
   set s__AbilityData_Param4FieldType[this]= 0
   set s__AbilityData_Param5FieldType[this]= 0
   set s__AbilityData_Param6FieldType[this]= 0
   set s__AbilityData_Param1Chance[this]= false
   set s__AbilityData_Param2Chance[this]= false
   set s__AbilityData_Param3Chance[this]= false
   set s__AbilityData_Param4Chance[this]= false
   set s__AbilityData_Param5Chance[this]= false
   set s__AbilityData_Param6Chance[this]= false
   set s__AbilityData_Cooldown1[this]= NULL
   set s__AbilityData_Cooldown2[this]= NULL
   set s__AbilityData_Cooldown3[this]= NULL
   set s__AbilityData_Cost1[this]= NULL
   set s__AbilityData_Cost2[this]= NULL
   set s__AbilityData_Cost3[this]= NULL
   set s__AbilityData_Range1[this]= NULL
   set s__AbilityData_Range2[this]= NULL
   set s__AbilityData_Range3[this]= NULL
   set s__AbilityData_SummonId1[this]= 0
   set s__AbilityData_SummonId2[this]= 0
   set s__AbilityData_BonusDurationNormal1[this]= 0
   set s__AbilityData_BonusDurationNormal2[this]= 0
   set s__AbilityData_BonusDurationNormal3[this]= 0
   set s__AbilityData_BonusDurationHero1[this]= 0
   set s__AbilityData_BonusDurationHero2[this]= 0
   set s__AbilityData_BonusDurationHero3[this]= 0
   set s__AbilityData_BonusCastingTime1[this]= 0
   set s__AbilityData_BonusArea1[this]= 0
   set s__AbilityData_BonusArea2[this]= 0
   set s__AbilityData_BonusArea3[this]= 0
   set s__AbilityData_BonusDamage1[this]= 0
   set s__AbilityData_BonusDamage2[this]= 0
   set s__AbilityData_BonusDamage3[this]= 0
   set s__AbilityData_BonusParam1[this]= 0
   set s__AbilityData_BonusParam2[this]= 0
   set s__AbilityData_BonusParam3[this]= 0
   set s__AbilityData_BonusParam4[this]= 0
   set s__AbilityData_BonusParam5[this]= 0
   set s__AbilityData_BonusParam6[this]= 0
   set s__AbilityData_BonusCooldown1[this]= 0
   set s__AbilityData_BonusCooldown2[this]= 0
   set s__AbilityData_BonusCooldown3[this]= 0
   set s__AbilityData_BonusCost1[this]= 0
   set s__AbilityData_BonusCost2[this]= 0
   set s__AbilityData_BonusCost3[this]= 0
   set s__AbilityData_BonusRange1[this]= 0
   set s__AbilityData_BonusRange2[this]= 0
   set s__AbilityData_BonusRange3[this]= 0
   set s__AbilityData_isDestroy[this]= false
    set si__AbilityData_V[this]=-1
 return this
endfunction

//Generated destructor of AbilityData
function s__AbilityData_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__AbilityData_V[this]!=-1) then
        return
    endif
    set si__AbilityData_V[this]=si__AbilityData_F
    set si__AbilityData_F=this
endfunction

//Generated allocator of DamageAbility
function s__DamageAbility__allocate takes nothing returns integer
 local integer this=si__DamageAbility_F
    if (this!=0) then
        set si__DamageAbility_F=si__DamageAbility_V[this]
    else
        set si__DamageAbility_I=si__DamageAbility_I+1
        set this=si__DamageAbility_I
    endif
    if (this>8190) then
        return 0
    endif

   set s__DamageAbility_id[this]= 0
   set s__DamageAbility_number[this]= 0
    set si__DamageAbility_V[this]=-1
 return this
endfunction

//Generated destructor of DamageAbility
function s__DamageAbility_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__DamageAbility_V[this]!=-1) then
        return
    endif
    set si__DamageAbility_V[this]=si__DamageAbility_F
    set si__DamageAbility_F=this
endfunction

//library Raw2s:


    function InitStringArray takes nothing returns nothing
        set sOutput['0']="0"
        set sOutput['1']="1"
        set sOutput['2']="2"
        set sOutput['3']="3"
        set sOutput['4']="4"
        set sOutput['5']="5"
        set sOutput['6']="6"
        set sOutput['7']="7"
        set sOutput['8']="8"
        set sOutput['9']="9"
        set sOutput['a']="a"
        set sOutput['b']="b"
        set sOutput['c']="c"
        set sOutput['d']="d"
        set sOutput['e']="e"
        set sOutput['f']="f"
        set sOutput['g']="g"
        set sOutput['h']="h"
        set sOutput['i']="i"
        set sOutput['j']="j"
        set sOutput['k']="k"
        set sOutput['l']="l"
        set sOutput['m']="m"
        set sOutput['n']="n"
        set sOutput['o']="o"
        set sOutput['p']="p"
        set sOutput['q']="q"
        set sOutput['r']="r"
        set sOutput['s']="s"
        set sOutput['t']="t"
        set sOutput['u']="u"
        set sOutput['v']="v"
        set sOutput['w']="w"
        set sOutput['x']="x"
        set sOutput['y']="y"
        set sOutput['z']="z"
        set sOutput['A']="A"
        set sOutput['B']="B"
        set sOutput['C']="C"
        set sOutput['D']="D"
        set sOutput['E']="E"
        set sOutput['F']="F"
        set sOutput['G']="G"
        set sOutput['H']="H"
        set sOutput['I']="I"
        set sOutput['J']="J"
        set sOutput['K']="K"
        set sOutput['L']="L"
        set sOutput['M']="M"
        set sOutput['N']="N"
        set sOutput['O']="O"
        set sOutput['P']="P"
        set sOutput['Q']="Q"
        set sOutput['R']="R"
        set sOutput['S']="S"
        set sOutput['T']="T"
        set sOutput['U']="U"
        set sOutput['V']="V"
        set sOutput['W']="W"
        set sOutput['X']="X"
        set sOutput['Y']="Y"
        set sOutput['Z']="Z"
    endfunction

    function raw2s takes integer raw returns string
        local string s= ""
        loop
            set s=sOutput[raw - ( raw / 256 ) * 256] + s
            set raw=raw / 256
        exitwhen raw == 0
        endloop
        return s
    endfunction


//library Raw2s ends
//===========================================================================
// 
// CHS 1.9.28f reforged 30LVL
// 
//   Warcraft III map script
//   Generated by the Warcraft III World Editor
//   Map Author: Adduxor, Snowww, BLOKKADE
// 
//===========================================================================

//***************************************************************************
//*
//*  Global Variables
//*
//***************************************************************************


function InitGlobals takes nothing returns nothing
    local integer i= 0
    set udg_integer01=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers01[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers02[i]=0
        set i=i + 1
    endloop

    set udg_integer02=0
    set udg_integer03=0
    set udg_integer04=0
    set udg_integer05=0
    set udg_integer06=0
    set udg_integer07=0
    set udg_integer08=0
    set udg_real01=0
    set udg_integer09=0
    set udg_integer10=0
    set udg_integer11=0
    set udg_integer12=0
    set udg_integer13=0
    set udg_force01=CreateForce()
    set udg_boolean01=false
    set udg_force02=CreateForce()
    set udg_group01=CreateGroup()
    set udg_integer14=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers03[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers04[i]=0
        set i=i + 1
    endloop

    set udg_group02=CreateGroup()
    set udg_group03=CreateGroup()
    set udg_integer15=0
    set udg_integer16=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_booleans01[i]=false
        set i=i + 1
    endloop

    set udg_boolean02=false
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers05[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_booleans02[i]=false
        set i=i + 1
    endloop

    set udg_integer17=0
    set udg_integer18=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_booleans03[i]=false
        set i=i + 1
    endloop

    set udg_force03=CreateForce()
    set udg_integer19=0
    set udg_integer20=0
    set udg_real02=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers06[i]=0
        set i=i + 1
    endloop

    set udg_dialog01=DialogCreate()
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers07[i]=0
        set i=i + 1
    endloop

    set udg_integer21=0
    set udg_integer22=0
    set udg_integer23=0
    set udg_integer24=0
    set udg_integer25=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers08[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers09[i]=0
        set i=i + 1
    endloop

    set udg_integer26=0
    set udg_integer27=0
    set udg_integer28=0
    set udg_group04=CreateGroup()
    set udg_integer29=0
    set udg_integer30=0
    set udg_boolean03=false
    set udg_boolean04=false
    set udg_dialog02=DialogCreate()
    set udg_integer31=0
    set udg_boolean05=false
    set udg_dialog03=DialogCreate()
    set udg_integer32=0
    set udg_integer33=0
    set udg_integer34=0
    set udg_boolean06=false
    set udg_integer35=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers10[i]=0
        set i=i + 1
    endloop

    set udg_integer36=0
    set udg_integer37=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_dialogs01[i]=DialogCreate()
        set i=i + 1
    endloop

    set udg_force04=CreateForce()
    set udg_force05=CreateForce()
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_booleans04[i]=false
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_booleans05[i]=false
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers11[i]=0
        set i=i + 1
    endloop

    set udg_string01=""
    set udg_integer38=0
    set udg_boolean07=false
    set udg_force06=CreateForce()
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_strings01[i]=""
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers12[i]=0
        set i=i + 1
    endloop

    set udg_boolean08=false
    set udg_integer39=0
    set udg_dialog04=DialogCreate()
    set udg_group05=CreateGroup()
    set udg_integer40=0
    set udg_boolean09=false
    set udg_integer41=0
    set udg_boolean10=false
    set udg_boolean11=false
    set udg_integer42=0
    set udg_integer43=0
    set udg_integer44=0
    set udg_integer45=0
    set udg_integer46=0
    set udg_integer47=0
    set udg_force07=CreateForce()
    set udg_boolean12=false
    set udg_integer48=0
    set udg_integer49=0
    set udg_integer50=0
    set udg_integer51=0
    set udg_integer52=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers13[i]=0
        set i=i + 1
    endloop

    set udg_integer53=0
    set udg_group06=CreateGroup()
    set udg_integer54=0
    set udg_integer55=0
    set udg_integer56=0
    set udg_group07=CreateGroup()
    set udg_group08=CreateGroup()
    set udg_real03=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers14[i]=0
        set i=i + 1
    endloop

    set udg_integer57=0
    set udg_integer58=0
    set udg_integer59=0
    set udg_integer60=0
    set udg_integer61=0
    set udg_dialog05=DialogCreate()
    set udg_boolean13=false
    set udg_boolean14=false
    set udg_dialog06=DialogCreate()
    set udg_boolean15=false
    set udg_dialog07=DialogCreate()
    set udg_boolean16=false
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers15[i]=0
        set i=i + 1
    endloop

    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_integers16[i]=0
        set i=i + 1
    endloop

    set udg_integer62=0
    set udg_real04=0
    set udg_boolean17=false
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_strings02[i]=""
        set i=i + 1
    endloop

    set udg_group09=CreateGroup()
    set udg_boolean18=false
    set udg_integer63=0
    set i=0
    loop
        exitwhen ( i > 1 )
        set udg_Description[i]=""
        set i=i + 1
    endloop

    set udg_Ingredients=0
    set i=0
    loop
        exitwhen ( i > 2 )
        set udg_FactorCleared[i]=false
        set i=i + 1
    endloop

    set udg_Camera_Distance=0
    set udg_PlayerLumber=0
    set udg_WhirlwindDamage=0
    set udg_SaveSkillLevel=0
    set udg_MaxStr=0
    set udg_MaxInt=0
    set udg_MaxAgi=0
    set udg_BaseInt=0
    set udg_BaseStr=0
    set udg_BaseAgi=0
    set udg_MaxStat=0
    set udg_MaxBaseStat=0
    set udg_StatDifference=0
    set udg_WhirlwindLevel=0
    set udg_WhirlwindLevelMultiplier=0
    set udg_TrueshotMultiplier=0
    set udg_CommandMultiplier=0
    set udg_WarDrumsMultiplier=0
    set udg_WarDrumsDamage=0
    set udg_TrueShotDamage=0
    set udg_CommandDamage=0
    set udg_WhirlwindBaseDamage=0
    set udg_DrainDamage=0
endfunction

//***************************************************************************
//*
//*  Custom Script Code
//*
//***************************************************************************
//***************************************************************************
//*  Main

function EndTextTagTimer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local texttag tt= LoadTextTagHandle(HT_timerSpell, GetHandleId(t), 1)
    
    call FlushChildHashtable(HT_timerSpell, GetHandleId(t))
    call DestroyTextTag(tt)
    call DestroyTimer(t)
    set t=null
    set tt=null
endfunction





function CreateTextTagTimer takes string Text,real Height,real x1,real y1,real z1,real time returns nothing
    local texttag tt= CreateTextTag()
    local timer t= CreateTimer()
    
    call SetTextTagText(tt, Text, Height * 0.023)
    call SetTextTagPos(tt, x1, y1, z1)
    call SetTextTagColor(tt, 255, 255, 120, 128)
    
    call SetTextTagVelocity(tt, 0.01, 0.04)
    
    call SaveTextTagHandle(HT_timerSpell, GetHandleId(t), 1, tt)
    

    call TimerStart(t, time, false, function EndTextTagTimer)
    
    set tt=null
    set t=null
endfunction

function CreateTextTagTimerColor takes string Text,real Height,real x1,real y1,real z1,real time,integer iR,integer iG,integer iB returns nothing
    local texttag tt= CreateTextTag()
    local timer t= CreateTimer()
    
    call SetTextTagText(tt, Text, Height * 0.023)
    call SetTextTagPos(tt, x1, y1, z1)
    call SetTextTagColor(tt, iR, iG, iB, 128)
    
    call SetTextTagVelocity(tt, 0.01, 0.04)
    
    call SaveTextTagHandle(HT_timerSpell, GetHandleId(t), 1, tt)
    

    call TimerStart(t, time, false, function EndTextTagTimer)
    
    set tt=null
    set t=null
endfunction



function UnitHasItemS takes unit u,integer id returns boolean

	if GetItemTypeId(UnitItemInSlot(u, 0)) == id then
	    return true
	endif
	if GetItemTypeId(UnitItemInSlot(u, 1)) == id then
	    return true
	endif
	if GetItemTypeId(UnitItemInSlot(u, 2)) == id then
	    return true
	endif
	if GetItemTypeId(UnitItemInSlot(u, 3)) == id then
	    return true
	endif
 	if GetItemTypeId(UnitItemInSlot(u, 4)) == id then
	    return true
	endif
	if GetItemTypeId(UnitItemInSlot(u, 5)) == id then
	    return true
	endif

	return false

endfunction


function UnitHasItemI takes unit u,integer id returns integer
 local integer i= 0
	if GetItemTypeId(UnitItemInSlot(u, 0)) == id then
	    set i=i + 1
	endif
	if GetItemTypeId(UnitItemInSlot(u, 1)) == id then
	    set i=i + 1
	endif
	if GetItemTypeId(UnitItemInSlot(u, 2)) == id then
	    set i=i + 1
	endif
	if GetItemTypeId(UnitItemInSlot(u, 3)) == id then
	    set i=i + 1
	endif
 	if GetItemTypeId(UnitItemInSlot(u, 4)) == id then
	    set i=i + 1
	endif
	if GetItemTypeId(UnitItemInSlot(u, 5)) == id then
	    set i=i + 1
	endif

	return i

endfunction


function EndHeroTempAgi takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer value= LoadInteger(HT, GetHandleId(t), 1)
    local unit u= LoadUnitHandle(HT, GetHandleId(t), 2)
    
    call SetHeroAgi(u, GetHeroAgi(u, false) - value, false)

    call FlushChildHashtable(HT, GetHandleId(t))
    call DestroyTimer(t)
    set t=null
    set u=null
endfunction

function AddHeroTempAgi takes unit u,integer value,real time returns nothing
    local timer t= CreateTimer()
    
    call SetHeroAgi(u, GetHeroAgi(u, false) + value, false)
    call SaveInteger(HT, GetHandleId(t), 1, value)
    call SaveUnitHandle(HT, GetHandleId(t), 2, u)
    call TimerStart(t, time, false, function EndHeroTempAgi)
    set t=null
endfunction




function UnitHasFullItems takes unit u returns boolean
    if UnitItemInSlot(u, 0) != null and UnitItemInSlot(u, 1) != null and UnitItemInSlot(u, 2) != null and UnitItemInSlot(u, 3) != null and UnitItemInSlot(u, 4) != null and UnitItemInSlot(u, 5) != null then
        return true
    endif
    return false
endfunction


function DebufEx takes nothing returns nothing
    local unit Un= GLOB_DEBUF
    call UnitRemoveAbility(Un, 'Bclf')
    call UnitRemoveAbility(Un, 'Bply')
    call UnitRemoveAbility(Un, 'Bslo')
    call UnitRemoveAbility(Un, 'BHbd')
    call UnitRemoveAbility(Un, 'BHfs')
    call UnitRemoveAbility(Un, 'BHbn')
    call UnitRemoveAbility(Un, 'Bbof')
    call UnitRemoveAbility(Un, 'Bliq')
    call UnitRemoveAbility(Un, 'Bens')
    call UnitRemoveAbility(Un, 'BOhx')
    call UnitRemoveAbility(Un, 'BOeq')
    call UnitRemoveAbility(Un, 'Bcri')
    call UnitRemoveAbility(Un, 'Bweb')
    call UnitRemoveAbility(Un, 'Bwea')
    call UnitRemoveAbility(Un, 'Bfzr')
    call UnitRemoveAbility(Un, 'Bapl')
    call UnitRemoveAbility(Un, 'BUsl')
    call UnitRemoveAbility(Un, 'BUdd')
    call UnitRemoveAbility(Un, 'Bssd')
    call UnitRemoveAbility(Un, 'Bspo')
    call UnitRemoveAbility(Un, 'Bcor')
    call UnitRemoveAbility(Un, 'Bfae')
    call UnitRemoveAbility(Un, 'BEer')
    call UnitRemoveAbility(Un, 'BEsh')
    call UnitRemoveAbility(Un, 'Bpsd')
    call UnitRemoveAbility(Un, 'Bpoi')
    call UnitRemoveAbility(Un, 'BNba')
    call UnitRemoveAbility(Un, 'BNdh')
    call UnitRemoveAbility(Un, 'BNht')
    call UnitRemoveAbility(Un, 'Basl')
    call UnitRemoveAbility(Un, 'BNdo')
    call UnitRemoveAbility(Un, 'BNbf')
    call UnitRemoveAbility(Un, 'BNrd')
    call UnitRemoveAbility(Un, 'BSTN')
    call UnitRemoveAbility(Un, 'BNpm')
    call UnitRemoveAbility(Un, 'BPpa')
    call UnitRemoveAbility(Un, 'BNrd')
    call UnitRemoveAbility(Un, 'BPSE')
    call UnitRemoveAbility(Un, 'BSTN')
    call UnitRemoveAbility(Un, 'BNsi')
    call UnitRemoveAbility(Un, 'Bcsd')
    call UnitRemoveAbility(Un, 'BHca')
    call UnitRemoveAbility(Un, 'BNht')
    call UnitRemoveAbility(Un, 'BCbf')
    call UnitRemoveAbility(Un, 'Bfro')
    call UnitRemoveAbility(Un, 'Blcb')
    call UnitRemoveAbility(Un, 'BNso')
    call UnitRemoveAbility(Un, 'BNab')
    call UnitRemoveAbility(Un, 'BNic')
    call UnitRemoveAbility(Un, 'BNvc')
    call UnitRemoveAbility(Un, 'B00J')
    call UnitRemoveAbility(Un, 'B00H')
    call UnitRemoveAbility(Un, 'B001')
    call UnitRemoveAbility(Un, 'B005')
    call UnitRemoveAbility(Un, 'B00V')
    call UnitRemoveAbility(Un, 'B017')
    call UnitRemoveAbility(Un, 'A06L')
    call UnitRemoveAbility(Un, 'A06P')
    call UnitRemoveAbility(Un, 'A06R')
    call UnitRemoveAbility(Un, 'B014')
    call UnitRemoveAbility(Un, 'B015')
    call UnitRemoveAbility(Un, 'B016')
    set Un=null
endfunction

function Debuf takes nothing returns nothing
    local timer t= GetExpiredTimer()
    set GLOB_DEBUF=LoadUnitHandle(HT, GetHandleId(t), 1)
    call DebufEx()
    call FlushChildHashtable(HT, GetHandleId(t))
    call DestroyTimer(t)
    set t=null
endfunction

function RemoveDebuff takes unit Un returns nothing
    local timer t= CreateTimer()
    set GLOB_DEBUF=Un
    call DebufEx()
    call SaveUnitHandle(HT, GetHandleId(t), 1, Un)
    call TimerStart(t, 0, false, function Debuf)
    set t=null
endfunction


function UsOrderUTimer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local unit u1= LoadUnitHandle(HT, i, 1)
    local unit u2= LoadUnitHandle(HT, i, 2)
    local real x=  LoadReal(HT, i, 3)
    local real y=  LoadReal(HT, i, 4)
    local integer idsp=  LoadInteger(HT, i, 5)
    local string ordstr=  LoadStr(HT, i, 6)
    local real life_1= LoadReal(HT, i, 7)
    local abilityreallevelfield REALF= ConvertAbilityRealLevelField(LoadInteger(HT, i, 8))
    local unit Caster1= CreateUnit(GetOwningPlayer(u1), 'h015', x, y, Rad2Deg(Atan2(GetUnitY(u2) - y, GetUnitX(u2) - x)))
    call DestroyTimer(t)
    call FlushChildHashtable(HT, i)
    set t=null
    call UnitAddAbility(Caster1, idsp)
    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(Caster1, idsp), REALF, 0, life_1)
    call IssueTargetOrder(Caster1, ordstr, u2)
    call UnitApplyTimedLife(Caster1, 'B000', 6)
    set Caster1=null
    set u1=null
    set u2=null
endfunction

function UsOrderU takes unit u1,unit u2,real x,real y,integer idsp,string ordstr,real life_1,abilityreallevelfield REALF returns nothing
    local timer t= CreateTimer()
    local integer i= GetHandleId(t)
    call SaveUnitHandle(HT, i, 1, u1)
    call SaveUnitHandle(HT, i, 2, u2)
    call SaveReal(HT, i, 3, x)
    call SaveReal(HT, i, 4, y)
    call SaveInteger(HT, i, 5, idsp)
    call SaveStr(HT, i, 6, ordstr)
    call SaveReal(HT, i, 7, life_1)
    call SaveInteger(HT, i, 8, GetHandleId(REALF))
    call TimerStart(t, 0, false, function UsOrderUTimer)
    set u1=null
    set u2=null

endfunction


function UsOrderU2Timer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local unit u1= LoadUnitHandle(HT, i, 1)
    local unit u2= LoadUnitHandle(HT, i, 2)
    local real x=  LoadReal(HT, i, 3)
    local real y=  LoadReal(HT, i, 4)
    local integer idsp=  LoadInteger(HT, i, 5)
    local string ordstr=  LoadStr(HT, i, 6)
    local real life_1= LoadReal(HT, i, 7)
    local abilityreallevelfield REALF1= ConvertAbilityRealLevelField(LoadInteger(HT, i, 8))
    local real life_2= LoadReal(HT, i, 9)
    local abilityreallevelfield REALF2= ConvertAbilityRealLevelField(LoadInteger(HT, i, 10))
    local unit Caster1= CreateUnit(GetOwningPlayer(u1), 'h015', x, y, Rad2Deg(Atan2(GetUnitY(u2) - y, GetUnitX(u2) - x)))
    
    
    call UnitAddAbility(Caster1, idsp)
    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(Caster1, idsp), REALF1, 0, life_1)
    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(Caster1, idsp), REALF2, 0, life_2)
    call IssueTargetOrder(Caster1, ordstr, u2)
    call UnitApplyTimedLife(Caster1, 'B000', 6)
    
    
    call DestroyTimer(t)
    call FlushChildHashtable(HT, i)
    set Caster1=null
    set t=null
    set u1=null
endfunction



function UsOrderU2 takes unit u1,unit u2,real x,real y,integer idsp,string ordstr,real Field1,real Field2,abilityreallevelfield RealField1,abilityreallevelfield RealField2 returns nothing
    local timer t= CreateTimer()
    local integer i= GetHandleId(t)
    call SaveUnitHandle(HT, i, 1, u1)
    call SaveUnitHandle(HT, i, 2, u2)
    call SaveReal(HT, i, 3, x)
    call SaveReal(HT, i, 4, y)
    call SaveInteger(HT, i, 5, idsp)
    call SaveStr(HT, i, 6, ordstr)
    call SaveReal(HT, i, 7, Field1)
    call SaveInteger(HT, i, 8, GetHandleId(RealField1))
    call SaveReal(HT, i, 9, Field2)
    call SaveInteger(HT, i, 10, GetHandleId(RealField2))

    
    call TimerStart(t, 0, false, function UsOrderU2Timer)


    set u1=null
    set t=null
endfunction

function GetUnitLuck takes unit u returns real
    return LoadReal(HT_unitstate, GetHandleId(u), 5) + 1
endfunction

function ElemFuncStart takes unit u,integer id returns nothing
    set GLOB_ELEM_U=u
    set GLOB_ELEM_I=id
    call ExecuteFunc("ElementStartAbilityS")
endfunction 


function AbilStartCD takes unit u,integer id,real cd returns real
    local real ResCD= 1
    local real luck= GetUnitLuck(u)
 
         
    if GetUnitAbilityLevel(u, 'A03P') >= 1 then
         set ResCD=ResCD * ( 1 - 0.01 * I2R(GetUnitAbilityLevel(u, 'A03P')) )
    endif
    

    if ( UnitHasItemS(u , 'I03P') or GetUnitTypeId(u) == 'H01D' ) and GetRandomReal(0, 100) <= 25 * luck then
		set ResCD=0.0
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", u, "origin"))
    endif
    
    if UnitHasItemS(u , 'I08Y') and LoadBoolean(Elem, id, 2) then
        if GetRandomReal(0, 100) <= 40 * luck then
            set ResCD=0.001
        endif
    endif
    
     if UnitHasItemS(u , 'I08Z') and LoadBoolean(Elem, id, 3) then
            set ResCD=ResCD * 0.65
    endif
    


    call ElemFuncStart(u , id)

    call BlzStartUnitAbilityCooldown(u, id, cd * ResCD)
    
    if id != 'A05U' then
        set Global_i=id
        set Global_u=u
        call ExecuteFunc("ResetAbilit_Ec")
    endif

    return cd * ResCD
endfunction

function AddSpecialEffectTargetFix takes string s1,unit u,string s2 returns effect
    local string EffectString= ""

    if EffectVisible then
        set EffectString=s1
    endif

    return AddSpecialEffectTarget(EffectString, u, s2)
endfunction


function EffectEndTimer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    call DestroyEffect(LoadEffectHandle(HT, GetHandleId(t), 1))
    
    call FlushChildHashtable(HT, GetHandleId(t))
    call DestroyTimer(t)
    set t=null
endfunction



function AddSpecialEffectTargetTimer takes string s1,unit u,string s2,real time returns nothing
    local string EffectString= ""
    local timer t= CreateTimer()
    local effect e
    if EffectVisible then
        set EffectString=s1
    endif
    set e=AddSpecialEffectTarget(EffectString, u, s2)
    call SaveEffectHandle(HT, GetHandleId(t), 1, e)
    call TimerStart(t, time, false, function EffectEndTimer)
    set e=null
    set t=null
endfunction

function USOrderATimer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local unit u1= LoadUnitHandle(HT, i, 1)
    local real x=  LoadReal(HT, i, 3)
    local real y=  LoadReal(HT, i, 4)
    local integer idsp=  LoadInteger(HT, i, 5)
    local string ordstr=  LoadStr(HT, i, 6)
    local real life_1= LoadReal(HT, i, 7)
    local abilityreallevelfield REALF= ConvertAbilityRealLevelField(LoadInteger(HT, i, 8))
    local unit Caster1= CreateUnit(GetOwningPlayer(u1), 'h015', x, y, 0)

    call DestroyTimer(t)
    call FlushChildHashtable(HT, i)
    set t=null

    call UnitAddAbility(Caster1, idsp)
    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(Caster1, idsp), REALF, 0, life_1)


    call IssueImmediateOrder(Caster1, ordstr)
    call UnitApplyTimedLife(Caster1, 'B000', 9)


    set Caster1=null
endfunction


function USOrderA takes unit u1,real x,real y,integer idsp,string ordstr,real life_1,abilityreallevelfield REALF returns nothing

    local timer t= CreateTimer()
    local integer i= GetHandleId(t)
    call SaveUnitHandle(HT, i, 1, u1)
    call SaveReal(HT, i, 3, x)
    call SaveReal(HT, i, 4, y)
    call SaveInteger(HT, i, 5, idsp)
    call SaveStr(HT, i, 6, ordstr)
    call SaveReal(HT, i, 7, life_1)
    call SaveInteger(HT, i, 8, GetHandleId(REALF))
    call TimerStart(t, 0, false, function USOrderATimer)
    
endfunction

function GetUnitPowerRune takes unit u returns real
    return LoadReal(HT_unitstate, GetHandleId(u), 6)
endfunction

function CreateRandomRune takes real power,real x,real y,unit owner returns item
    local item i= CreateItem(Runes[GetRandomInt(1, RuneCount)], x, y)
    call SaveReal(HT, GetHandleId(i), 2, power + GetUnitPowerRune(owner) + GetHeroLevel(owner) * 2)
    if GetLocalPlayer() != GetOwningPlayer(owner) then
        call BlzSetItemSkin(i, 'I06F')
    endif
    return i
endfunction 

function CreateRune takes real power,real x,real y,unit owner,integer id returns item
    local item i= CreateItem(Runes[id], x, y)
    call SaveReal(HT, GetHandleId(i), 2, power + GetUnitPowerRune(owner) + GetHeroLevel(owner))
    if GetLocalPlayer() != GetOwningPlayer(owner) then
        call BlzSetItemSkin(i, 'I06F')
    endif
    return i
endfunction


function SetUnitProcHp takes unit u,real bonus returns nothing
    local real BonusOldHp= LoadReal(HT, GetHandleId(u), - 412446)
    local real Hp=   I2R(BlzGetUnitMaxHP(u)) - BonusOldHp
    local real BonusNewHp= Hp * bonus
    call BlzSetUnitMaxHP(u, R2I(Hp + BonusNewHp))
    call SaveReal(HT, GetHandleId(u), - 412446, I2R(R2I(BonusNewHp)))
endfunction


function GetInfoHeroSpell takes unit u,integer num returns integer
    return LoadInteger(HT_SpellPlayer, GetHandleId(u), num)
endfunction

function GetNumHeroSpell takes unit u,integer id returns integer
    return LoadInteger(HT_SpellPlayer, GetHandleId(u), id)
endfunction

function GetClassUnitSpell takes unit u,integer id returns integer
    local integer i1= 1
    local integer i2= 0
    if LoadBoolean(Elem, GetUnitTypeId(u), id) then
        set i2=i2 + 1
    endif
    
    loop
        exitwhen i1 > 20

        if LoadBoolean(Elem, GetInfoHeroSpell(u , i1), id) then
            set i2=i2 + 1
        endif
        set i1=i1 + 1
    endloop
    return i2
endfunction




function AddCooldowns takes unit u,real cd returns nothing
    local integer i1= 1
    local integer id= 0
    loop
        exitwhen i1 > 10
            set id=GetInfoHeroSpell(u , i1)
            call BlzStartUnitAbilityCooldown(u, id, cd + BlzGetUnitAbilityCooldownRemaining(u, id))

        set i1=i1 + 1
    endloop
endfunction
//***************************************************************************
//*  Untitled Script 002
//***************************************************************************
//*  Color
function Green takes string s returns string
    return "|cff00ff00" + s + "|r"
endfunction

function Red takes string s returns string
    return "|cffff0000" + s + "|r"
endfunction

function Gray takes string s returns string
    return "|cff808080" + s + "|r"
endfunction

function Yellow takes string s returns string
    return "|cffffff00" + s + "|r"
endfunction

function Blue takes string s returns string
    return "|cff0000ff" + s + "|r"
endfunction

function Black takes string s returns string
    return "cff000000" + s + "|r"
endfunction


//***************************************************************************
//*  AbilityLvl

function STOP takes nothing returns nothing
    set STOPING=STOP_0
endfunction 


function GetUnitSpell takes unit u,integer id returns real
    local integer A= LoadInteger(HT_abilsys, GetHandleId(u), id)
    if A != 0 and sc__AbilityData_GedLevel(A) != 0 then
        return sc__AbilityData_GedLevel(A)
    endif

    return I2R(GetUnitAbilityLevel(u, id))
endfunction 

function GetAbilityData takes unit u,integer id returns integer
    local integer A=  LoadInteger(HT_abilsys, GetHandleId(u), id)
    if A == 0 then
        call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "ERROR: " + I2S(id))
        call STOP()
    endif
    
    return A
endfunction




    

    
    
    
    
    
    
    
    function s__AbilityData_MayByRemove takes integer this returns nothing
        if s__AbilityData_isDestroy[this] then
            call s__AbilityData_deallocate(this)
        endif
    endfunction

    function s__AbilityData_GetCooldown1 takes integer this returns real
        local real r= s__AbilityData_Cooldown1[this] + s__AbilityData_BonusCooldown1[this]
        if r < 0 then
            return .0
        endif
        
        return r
        
    endfunction
    
    function s__AbilityData_GetCooldown2 takes integer this returns real
        local real r= s__AbilityData_Cooldown2[this] + s__AbilityData_BonusCooldown2[this]
        if r < 0 then
            return .0
        endif
        return r
    endfunction
    
    function s__AbilityData_GetCooldown3 takes integer this returns real
        local real r= s__AbilityData_Cooldown3[this] + s__AbilityData_BonusCooldown3[this]
        if r < 0 then
            return .0
        endif
        return r
    endfunction
    
    function s__AbilityData_GetCastingTime1 takes integer this returns real
        local real r= s__AbilityData_CastingTime1[this] + s__AbilityData_BonusCastingTime1[this]
        if r < 0 then
            return .0
        endif
        
        return r
        
    endfunction
    
    function s__AbilityData_GedLevel takes integer this returns real
        return s__AbilityData_Level[this] + s__AbilityData_BonusLevel[this]
    endfunction 
    
    function s__AbilityData_GetRange1 takes integer this returns real
        return s__AbilityData_Range1[this] + s__AbilityData_BonusRange1[this]
    endfunction
    
    function s__AbilityData_GetRange2 takes integer this returns real
        return s__AbilityData_Range2[this] + s__AbilityData_BonusRange2[this]
    endfunction
    
    function s__AbilityData_GetRange3 takes integer this returns real
        return s__AbilityData_Range3[this] + s__AbilityData_BonusRange3[this]
    endfunction
    
    function s__AbilityData_GetCost1 takes integer this returns real
        return s__AbilityData_Cost1[this] + s__AbilityData_BonusCost1[this]
    endfunction
    
    function s__AbilityData_GetCost2 takes integer this returns real
        return s__AbilityData_Cost2[this] + s__AbilityData_BonusCost2[this]
    endfunction
    
    function s__AbilityData_GetCost3 takes integer this returns real
        return s__AbilityData_Cost3[this] + s__AbilityData_BonusCost3[this]
    endfunction
    
    function s__AbilityData_GetArea1 takes integer this returns real
        return s__AbilityData_Area1[this] + s__AbilityData_BonusArea1[this]
    endfunction
    
    function s__AbilityData_GetArea2 takes integer this returns real
        return s__AbilityData_Area2[this] + s__AbilityData_BonusArea2[this]
    endfunction
    
    function s__AbilityData_GetArea3 takes integer this returns real
        return s__AbilityData_Area3[this] + s__AbilityData_BonusArea3[this]
    endfunction
    
    function s__AbilityData_GetDamage1 takes integer this returns real
        return s__AbilityData_Damage1[this] + s__AbilityData_BonusDamage1[this]
    endfunction
    
    function s__AbilityData_GetDamage2 takes integer this returns real
        return s__AbilityData_Damage2[this] + s__AbilityData_BonusDamage2[this]
    endfunction   
    
    function s__AbilityData_GetDamage3 takes integer this returns real
        return s__AbilityData_Damage3[this] + s__AbilityData_BonusDamage1[this]
    endfunction
    
    function s__AbilityData_GetDurationNormal1 takes integer this returns real
        return s__AbilityData_DurationNormal1[this] + s__AbilityData_BonusDurationNormal1[this]
    endfunction 

    function s__AbilityData_GetDurationNormal2 takes integer this returns real
        return s__AbilityData_DurationNormal2[this] + s__AbilityData_BonusDurationNormal2[this]
    endfunction 
    
    function s__AbilityData_GetDurationNormal3 takes integer this returns real
        return s__AbilityData_DurationNormal3[this] + s__AbilityData_BonusDurationNormal3[this]
    endfunction 

    function s__AbilityData_GetDurationHero1 takes integer this returns real
        return s__AbilityData_DurationHero1[this] + s__AbilityData_BonusDurationHero1[this]
    endfunction 
    function s__AbilityData_GetDurationHero2 takes integer this returns real
        return s__AbilityData_DurationHero2[this] + s__AbilityData_BonusDurationHero2[this]
    endfunction 
    function s__AbilityData_GetDurationHero3 takes integer this returns real
        return s__AbilityData_DurationHero3[this] + s__AbilityData_BonusDurationHero3[this]
    endfunction 
    
    function s__AbilityData_GetParam1 takes integer this returns real
        return s__AbilityData_Param1[this] + s__AbilityData_BonusParam1[this]
    endfunction
    function s__AbilityData_GetParam2 takes integer this returns real
        return s__AbilityData_Param2[this] + s__AbilityData_BonusParam2[this]
    endfunction
    function s__AbilityData_GetParam3 takes integer this returns real
        return s__AbilityData_Param3[this] + s__AbilityData_BonusParam3[this]
    endfunction
    function s__AbilityData_GetParam4 takes integer this returns real
        return s__AbilityData_Param4[this] + s__AbilityData_BonusParam4[this]
    endfunction
        function s__AbilityData_GetParam5 takes integer this returns real
        return s__AbilityData_Param5[this] + s__AbilityData_BonusParam5[this]
    endfunction
        function s__AbilityData_GetParam6 takes integer this returns real
        return s__AbilityData_Param6[this] + s__AbilityData_BonusParam6[this]
    endfunction




//***************************************************************************
//*  Desctiption


function ReplaceText takes string s1,string s2,string s3 returns string
    local integer Lenght= StringLength(s1)
    local integer Lenght3= StringLength(s3)
    local integer lp= 0
    loop
        exitwhen lp > Lenght3
        if SubString(s3, lp, lp + Lenght) == s1 then
            return SubString(s3, 0, lp) + s2 + SubString(s3, lp + Lenght, Lenght3)
        endif
        set lp=lp + 1
    endloop
    return s3
endfunction


function GetDesriptionAbility takes integer id,integer lvl returns string
    if LoadStr(HT_abilsys, id, 4) == null then
        call SaveStr(HT_abilsys, id, 4, BlzGetAbilityExtendedTooltip(id, 0))
    endif
    return LoadStr(HT_abilsys, id, 4)
endfunction




function FixReal takes real r returns string
    if r == I2R(R2I(r)) then
        return I2S(R2I(r))
        
    elseif r * 10 - I2R(R2I(r * 10)) < 0.1 then
        return R2SW(r, 1, 1)
    elseif r * 100 - I2R(R2I(r * 100)) < 0.1 then
        return R2SW(r, 1, 2)
    else
        return R2SW(r, 1, 3)
    endif
endfunction


function ChangeDesctiption1 takes string s,real r1,real r2,string desc returns string
    local string s2
    if r1 != NULL then
        if r2 > 0 then
            set s2=FixReal(r1) + " + " + Green(FixReal(r2))
        elseif r2 < 0 then
            set s2=FixReal(r1) + " - " + Red(FixReal(- r2))
        else
            set s2=FixReal(r1)
        endif
        set s=ReplaceText(desc , s2 , s)
    endif
    return s
endfunction

function ChangeDesctiption2 takes string s,real r1,real r2,string desc returns string
    local string s2
    if r1 != NULL then
        if r2 > 0 then
            set s2=FixReal(r1) + " + " + Red(FixReal(r2))
        elseif r2 < 0 then
            set s2=FixReal(r1) + " - " + Green(FixReal(- r2))
        else
            set s2=FixReal(r1)
        endif
        set s=ReplaceText(desc , s2 , s)
    endif
    return s
endfunction

function ChangeDesctiption3 takes string s,real r1,real r2,boolean chance,string desc returns string
    local string s2
    local real r1New= r1
    local real r2New= r2
    if chance then
        set r1New=r1New * 100
        set r2New=r2New * 100
    endif
    if r1New != NULL then
        if r2New > 0 then
            set s2=FixReal(r1New) + " + " + Red(FixReal(r2New))
        elseif r2New < 0 then
            set s2=FixReal(r1New) + " - " + Green(FixReal(- r2New))
        else
            set s2=FixReal(r1New)
        endif
        set s=ReplaceText(desc , s2 , s)
    endif
    return s
endfunction



//textmacro instance: DesctiptionTextM("Range")
function GetRangeDescription takes integer A returns string
    local string s= FixReal(s__AbilityData_Range1[A])
    
    if s__AbilityData_BonusRange1[A] > 0 then
        set s=s + " + " + Green(FixReal(s__AbilityData_BonusRange1[A]))
    elseif s__AbilityData_BonusRange1[A] < 0 then
        set s=s + " - " + Red(FixReal(- s__AbilityData_BonusRange1[A]))
    endif
    
    if s__AbilityData_Range2[A] != NULL then
        set s=s + "/" + ( FixReal(s__AbilityData_Range2[A]) )
        if s__AbilityData_BonusRange2[A] > 0 then
            set s=s + " + " + Green(FixReal(s__AbilityData_BonusRange2[A]))
        elseif s__AbilityData_BonusRange2[A] < 0 then
            set s=s + " - " + Red(FixReal(- s__AbilityData_BonusRange2[A]))
        endif
    endif
    
    if s__AbilityData_Range3[A] != NULL then
        set s=s + "/" + ( FixReal(s__AbilityData_Range3[A]) )
        if s__AbilityData_BonusRange3[A] > 0 then
            set s=s + " + " + Green(FixReal(s__AbilityData_BonusRange3[A]))
        elseif s__AbilityData_BonusRange3[A] < 0 then
            set s=s + " - " + Red(FixReal(- s__AbilityData_BonusRange3[A]))
        endif
    endif
    
    return s
endfunction
//end of: DesctiptionTextM("Range")
//textmacro instance: DesctiptionTextM("DurationHero")
function GetDurationHeroDescription takes integer A returns string
    local string s= FixReal(s__AbilityData_DurationHero1[A])
    
    if s__AbilityData_BonusDurationHero1[A] > 0 then
        set s=s + " + " + Green(FixReal(s__AbilityData_BonusDurationHero1[A]))
    elseif s__AbilityData_BonusDurationHero1[A] < 0 then
        set s=s + " - " + Red(FixReal(- s__AbilityData_BonusDurationHero1[A]))
    endif
    
    if s__AbilityData_DurationHero2[A] != NULL then
        set s=s + "/" + ( FixReal(s__AbilityData_DurationHero2[A]) )
        if s__AbilityData_BonusDurationHero2[A] > 0 then
            set s=s + " + " + Green(FixReal(s__AbilityData_BonusDurationHero2[A]))
        elseif s__AbilityData_BonusDurationHero2[A] < 0 then
            set s=s + " - " + Red(FixReal(- s__AbilityData_BonusDurationHero2[A]))
        endif
    endif
    
    if s__AbilityData_DurationHero3[A] != NULL then
        set s=s + "/" + ( FixReal(s__AbilityData_DurationHero3[A]) )
        if s__AbilityData_BonusDurationHero3[A] > 0 then
            set s=s + " + " + Green(FixReal(s__AbilityData_BonusDurationHero3[A]))
        elseif s__AbilityData_BonusDurationHero3[A] < 0 then
            set s=s + " - " + Red(FixReal(- s__AbilityData_BonusDurationHero3[A]))
        endif
    endif
    
    return s
endfunction
//end of: DesctiptionTextM("DurationHero")
//textmacro instance: DesctiptionTextM("DurationNormal")
function GetDurationNormalDescription takes integer A returns string
    local string s= FixReal(s__AbilityData_DurationNormal1[A])
    
    if s__AbilityData_BonusDurationNormal1[A] > 0 then
        set s=s + " + " + Green(FixReal(s__AbilityData_BonusDurationNormal1[A]))
    elseif s__AbilityData_BonusDurationNormal1[A] < 0 then
        set s=s + " - " + Red(FixReal(- s__AbilityData_BonusDurationNormal1[A]))
    endif
    
    if s__AbilityData_DurationNormal2[A] != NULL then
        set s=s + "/" + ( FixReal(s__AbilityData_DurationNormal2[A]) )
        if s__AbilityData_BonusDurationNormal2[A] > 0 then
            set s=s + " + " + Green(FixReal(s__AbilityData_BonusDurationNormal2[A]))
        elseif s__AbilityData_BonusDurationNormal2[A] < 0 then
            set s=s + " - " + Red(FixReal(- s__AbilityData_BonusDurationNormal2[A]))
        endif
    endif
    
    if s__AbilityData_DurationNormal3[A] != NULL then
        set s=s + "/" + ( FixReal(s__AbilityData_DurationNormal3[A]) )
        if s__AbilityData_BonusDurationNormal3[A] > 0 then
            set s=s + " + " + Green(FixReal(s__AbilityData_BonusDurationNormal3[A]))
        elseif s__AbilityData_BonusDurationNormal3[A] < 0 then
            set s=s + " - " + Red(FixReal(- s__AbilityData_BonusDurationNormal3[A]))
        endif
    endif
    
    return s
endfunction
//end of: DesctiptionTextM("DurationNormal")
//textmacro instance: DesctiptionTextM("Area")
function GetAreaDescription takes integer A returns string
    local string s= FixReal(s__AbilityData_Area1[A])
    
    if s__AbilityData_BonusArea1[A] > 0 then
        set s=s + " + " + Green(FixReal(s__AbilityData_BonusArea1[A]))
    elseif s__AbilityData_BonusArea1[A] < 0 then
        set s=s + " - " + Red(FixReal(- s__AbilityData_BonusArea1[A]))
    endif
    
    if s__AbilityData_Area2[A] != NULL then
        set s=s + "/" + ( FixReal(s__AbilityData_Area2[A]) )
        if s__AbilityData_BonusArea2[A] > 0 then
            set s=s + " + " + Green(FixReal(s__AbilityData_BonusArea2[A]))
        elseif s__AbilityData_BonusArea2[A] < 0 then
            set s=s + " - " + Red(FixReal(- s__AbilityData_BonusArea2[A]))
        endif
    endif
    
    if s__AbilityData_Area3[A] != NULL then
        set s=s + "/" + ( FixReal(s__AbilityData_Area3[A]) )
        if s__AbilityData_BonusArea3[A] > 0 then
            set s=s + " + " + Green(FixReal(s__AbilityData_BonusArea3[A]))
        elseif s__AbilityData_BonusArea3[A] < 0 then
            set s=s + " - " + Red(FixReal(- s__AbilityData_BonusArea3[A]))
        endif
    endif
    
    return s
endfunction
//end of: DesctiptionTextM("Area")
//textmacro instance: DesctiptionTextM("Cost")
function GetCostDescription takes integer A returns string
    local string s= FixReal(s__AbilityData_Cost1[A])
    
    if s__AbilityData_BonusCost1[A] > 0 then
        set s=s + " + " + Green(FixReal(s__AbilityData_BonusCost1[A]))
    elseif s__AbilityData_BonusCost1[A] < 0 then
        set s=s + " - " + Red(FixReal(- s__AbilityData_BonusCost1[A]))
    endif
    
    if s__AbilityData_Cost2[A] != NULL then
        set s=s + "/" + ( FixReal(s__AbilityData_Cost2[A]) )
        if s__AbilityData_BonusCost2[A] > 0 then
            set s=s + " + " + Green(FixReal(s__AbilityData_BonusCost2[A]))
        elseif s__AbilityData_BonusCost2[A] < 0 then
            set s=s + " - " + Red(FixReal(- s__AbilityData_BonusCost2[A]))
        endif
    endif
    
    if s__AbilityData_Cost3[A] != NULL then
        set s=s + "/" + ( FixReal(s__AbilityData_Cost3[A]) )
        if s__AbilityData_BonusCost3[A] > 0 then
            set s=s + " + " + Green(FixReal(s__AbilityData_BonusCost3[A]))
        elseif s__AbilityData_BonusCost3[A] < 0 then
            set s=s + " - " + Red(FixReal(- s__AbilityData_BonusCost3[A]))
        endif
    endif
    
    return s
endfunction
//end of: DesctiptionTextM("Cost")
//textmacro instance: DesctiptionTextM("Cooldown")
function GetCooldownDescription takes integer A returns string
    local string s= FixReal(s__AbilityData_Cooldown1[A])
    
    if s__AbilityData_BonusCooldown1[A] > 0 then
        set s=s + " + " + Green(FixReal(s__AbilityData_BonusCooldown1[A]))
    elseif s__AbilityData_BonusCooldown1[A] < 0 then
        set s=s + " - " + Red(FixReal(- s__AbilityData_BonusCooldown1[A]))
    endif
    
    if s__AbilityData_Cooldown2[A] != NULL then
        set s=s + "/" + ( FixReal(s__AbilityData_Cooldown2[A]) )
        if s__AbilityData_BonusCooldown2[A] > 0 then
            set s=s + " + " + Green(FixReal(s__AbilityData_BonusCooldown2[A]))
        elseif s__AbilityData_BonusCooldown2[A] < 0 then
            set s=s + " - " + Red(FixReal(- s__AbilityData_BonusCooldown2[A]))
        endif
    endif
    
    if s__AbilityData_Cooldown3[A] != NULL then
        set s=s + "/" + ( FixReal(s__AbilityData_Cooldown3[A]) )
        if s__AbilityData_BonusCooldown3[A] > 0 then
            set s=s + " + " + Green(FixReal(s__AbilityData_BonusCooldown3[A]))
        elseif s__AbilityData_BonusCooldown3[A] < 0 then
            set s=s + " - " + Red(FixReal(- s__AbilityData_BonusCooldown3[A]))
        endif
    endif
    
    return s
endfunction
//end of: DesctiptionTextM("Cooldown")

function UpdateTooltipText takes unit u,integer id returns nothing
    local string s= GetDesriptionAbility(id , 0)
    local string s2= ""
    local string sduration
    local integer A= GetAbilityData(u , id)



    set s=ChangeDesctiption1(s , s__AbilityData_Damage1[A] , s__AbilityData_BonusDamage1[A] , DEESCRIPTION_Damage1)
    set s=ChangeDesctiption1(s , s__AbilityData_Damage2[A] , s__AbilityData_BonusDamage2[A] , DEESCRIPTION_Damage2)
    set s=ChangeDesctiption1(s , s__AbilityData_Damage3[A] , s__AbilityData_BonusDamage3[A] , DEESCRIPTION_Damage3)
    
    set s=ChangeDesctiption3(s , s__AbilityData_Param1[A] , s__AbilityData_BonusParam1[A] , s__AbilityData_Param1Chance[A] , DEESCRIPTION_Param1)
    set s=ChangeDesctiption3(s , s__AbilityData_Param2[A] , s__AbilityData_BonusParam2[A] , s__AbilityData_Param2Chance[A] , DEESCRIPTION_Param2)
    set s=ChangeDesctiption3(s , s__AbilityData_Param3[A] , s__AbilityData_BonusParam3[A] , s__AbilityData_Param3Chance[A] , DEESCRIPTION_Param3)
    set s=ChangeDesctiption3(s , s__AbilityData_Param4[A] , s__AbilityData_BonusParam4[A] , s__AbilityData_Param4Chance[A] , DEESCRIPTION_Param4)
    set s=ChangeDesctiption3(s , s__AbilityData_Param5[A] , s__AbilityData_BonusParam5[A] , s__AbilityData_Param5Chance[A] , DEESCRIPTION_Param5)
    set s=ChangeDesctiption3(s , s__AbilityData_Param6[A] , s__AbilityData_BonusParam6[A] , s__AbilityData_Param6Chance[A] , DEESCRIPTION_Param6)
    
    set s=s + "\n"
    
    if s__AbilityData_Range1[A] != NULL then
        set s=s + "\n|cffd45e3aRange|r: " + GetRangeDescription(A)
    endif
    
    if s__AbilityData_GetDurationHero1(A) == s__AbilityData_GetDurationNormal1(A) and s__AbilityData_GetDurationHero2(A) == s__AbilityData_GetDurationNormal2(A) and s__AbilityData_GetDurationHero3(A) == s__AbilityData_GetDurationNormal3(A) then
        if s__AbilityData_DurationNormal1[A] != NULL then
            if s__AbilityData_DurationNormal1[A] == 1 then
                set sduration=" second"
            else
                set sduration=" seconds"
            endif
            set s=s + "\n|cffff5e44Duration|r: " + GetDurationNormalDescription(A) + sduration
        endif
    else
        if s__AbilityData_DurationHero1[A] != NULL then
            if s__AbilityData_DurationHero1[A] == 1 then
                set sduration=" second"
            else
                set sduration=" seconds"
            endif
            set s=s + "\n|cffff5e44Duration(Hero)|r: " + GetDurationHeroDescription(A) + sduration
        endif
        if s__AbilityData_DurationNormal1[A] != NULL then
            if s__AbilityData_DurationNormal1[A] == 1 then
                set sduration=" second"
            else
                set sduration=" seconds"
            endif
            set s=s + "\n|cffff5e44Duration(Normal)|r: " + GetDurationNormalDescription(A) + sduration
        endif
    endif
    
    
    if s__AbilityData_Area1[A] != NULL then
        set s=s + "\n|cffd11e3aArea|r: " + GetAreaDescription(A)
    endif
    if s__AbilityData_Cooldown1[A] != NULL then
        set s=s + "\n|cffd49696Cooldown|r: " + GetCooldownDescription(A)
    endif
    
  //  cffd45e3aRange|r: !RANGE1! |n|cffff5e44Duration|r: !DUR1!/!DUR1H! seconds |n|cffd49696Cooldown|r:!CD1! seconds
    
 //   set s = ChangeDesctiption1(s,A.Area1,A.BonusArea1,DEESCRIPTION_AREA1)
 //   set s = ChangeDesctiption1(s,A.Area2,A.BonusArea2,DEESCRIPTION_AREA2)
 //   set s = ChangeDesctiption1(s,A.Area3,A.BonusArea3,DEESCRIPTION_AREA3)    
 //   set s = ChangeDesctiption2(s,A.Cooldown1,A.BonusCooldown1,DEESCRIPTION_Cooldown1)
 //   set s = ChangeDesctiption2(s,A.Cooldown2,A.BonusCooldown2,DEESCRIPTION_Cooldown2)
 //   set s = ChangeDesctiption2(s,A.Cooldown3,A.BonusCooldown3,DEESCRIPTION_Cooldown3)
 //   set s = ChangeDesctiption1(s,A.Area1,A.BonusArea1,DEESCRIPTION_AREA1)
 //   set s = ChangeDesctiption1(s,A.Area2,A.BonusArea2,DEESCRIPTION_AREA2)
 //   set s = ChangeDesctiption1(s,A.Area3,A.BonusArea3,DEESCRIPTION_AREA3)        
 //   set s = ChangeDesctiption1(s,A.DurationNormal1,A.BonusDurationNormal1,DEESCRIPTION_DURATION1)
 //   set s = ChangeDesctiption1(s,A.DurationHero1,A.BonusDurationHero1,DEESCRIPTION_DURATION1_HERO)    
 //   set s = ChangeDesctiption1(s,A.Range1,A.BonusRange1,DEESCRIPTION_RANGE1)   
    
    

    call BlzSetAbilityExtendedTooltip(id, s, 0)
    
    
    call BlzSetAbilityTooltip(id, LoadStr(HT_abilsys, id, 5) + " - [|cffffcc00Level " + FixReal(s__AbilityData_Level[A]) + "|r]", 0)


endfunction


function GetClassification takes integer id returns string
    local string s= ""
    local integer i= 1
    loop
        exitwhen i > 15
        if LoadBoolean(Elem, id, i) then
            set s=s + ClassAbil[i]
        endif
        set i=i + 1
    endloop
    return s
endfunction
    
//***************************************************************************
//*  Debug


function DebugText takes string s returns nothing
//    call DisplayTextToPlayer(GetLocalPlayer(),0,0,s)
endfunction
//***************************************************************************
//*  Fix
function FixTimerD takes unit U,integer NumTimer returns nothing
    call DestroyTimer(LoadTimerHandle(DataUnitHT, GetHandleId(U), NumTimer))
endfunction

function FixSkeletonDefender takes integer pid returns nothing


    set SkeletonDefender[pid]=SkeletonDefender[pid] - 1


endfunction



function FixUnit takes unit u returns nothing
if IsUnitIllusion(u) then
    call FixTimerD(u , 10001)
    call FixTimerD(u , 10002)
    call FixTimerD(u , 10003)
    call FixTimerD(u , 10101)
    call FixTimerD(u , 10102)
    call FixTimerD(u , 10103)
    call FixTimerD(u , 10201)
    call FixTimerD(u , 10301)
    call FixTimerD(u , 10401)
    call FlushChildHashtable(DataUnitHT, GetHandleId(u))
endif


if IsHeroUnitId(GetUnitTypeId(GetTriggerUnit())) == false then
 call FlushChildHashtable(HT, GetHandleId(GetTriggerUnit()))
endif


if GetUnitTypeId(GetTriggerUnit()) == 'u003' then
    call FixSkeletonDefender(GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
endif
endfunction

function DeleteUnit takes unit u returns nothing


    call FixUnit(u)
    call RemoveUnit(u)
endfunction

//***************************************************************************
//*  Damage
function DamageTimer takes nothing returns nothing
local timer t= GetExpiredTimer()
local unit u1= LoadUnitHandle(HT, GetHandleId(t), 1)
local unit u2= LoadUnitHandle(HT, GetHandleId(t), 2)
local real dmg= LoadReal(HT, GetHandleId(t), 3)


set GLOB_ABIL_ID=LoadInteger(HT, GetHandleId(t), 4)
call UnitDamageTarget(u1, u2, dmg, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)

call FlushChildHashtable(HT, GetHandleId(t))
call DestroyTimer(t)
set t=null
set u1=null
set u2=null
endfunction



function MagicDamage takes unit u1,unit u2,real dmg,integer id returns nothing
    local timer t= CreateTimer()

    call SaveUnitHandle(HT, GetHandleId(t), 1, u1)
    call SaveUnitHandle(HT, GetHandleId(t), 2, u2)
    call SaveReal(HT, GetHandleId(t), 3, dmg)
    call SaveInteger(HT, GetHandleId(t), 4, id)

    call TimerStart(t, 0, false, function DamageTimer)
    set t=null
endfunction
//***************************************************************************
//*  BuffSys

function TimerBuff1 takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local integer abil= LoadInteger(HT, i, 1)
    local integer abilA= LoadInteger(HT, i, 2)
    local unit u= LoadUnitHandle(HT, i, 3)
    

    call UnitRemoveAbility(u, abilA)
    call UnitRemoveAbility(u, abil)
    call SaveTimerHandle(HT, GetHandleId(u), abilA, null)
    
    call FlushChildHashtable(HT, i)
    call DestroyTimer(t)
    set t=null
    set u=null
endfunction



function SetBuff takes unit u,integer level,real time returns nothing

    local timer t= LoadTimerHandle(HT, GetHandleId(u), DeBufLvlA[level])
    if GetUnitAbilityLevel(u, DeBufLvl[level]) == 0 then
        if t == null then
            set t=CreateTimer()

            call SaveInteger(HT, GetHandleId(t), 1, DeBufLvl[level])
            call SaveInteger(HT, GetHandleId(t), 2, DeBufLvlA[level])
            call SaveUnitHandle(HT, GetHandleId(t), 3, u)
            call SaveTimerHandle(HT, GetHandleId(u), DeBufLvlA[level], t)
            call UnitAddAbility(u, DeBufLvlA[level])
           // call BlzUnitHideAbility(u,DeBufLvlA[level],false)
            call BlzUnitDisableAbility(u, DeBufLvlA[level], false, true)
            call TimerStart(t, time, false, function TimerBuff1)
        else
            call SaveInteger(HT, GetHandleId(t), 1, DeBufLvl[level])
            call SaveInteger(HT, GetHandleId(t), 2, DeBufLvlA[level])
            call SaveUnitHandle(HT, GetHandleId(t), 3, u)
            call SaveTimerHandle(HT, GetHandleId(u), DeBufLvlA[level], t)
            call UnitAddAbility(u, DeBufLvlA[level])
            call TimerStart(t, time, false, function TimerBuff1)
        endif
    else
        if t == null then
 
        else
            call TimerStart(t, time, false, function TimerBuff1)
        endif
    endif
    
    
    
    
    set t=null
    set u=null
endfunction



function InitBuffForLevel takes nothing returns nothing
set DeBufLvlA[1]='A06L'
set DeBufLvl[1]='B014'

set DeBufLvlA[2]='A06P'
set DeBufLvl[2]='B015'

set DeBufLvlA[3]='A06R'
set DeBufLvl[3]='B016'

set DeBufLvlA[4]='A088'
set DeBufLvl[4]='Brej'

endfunction
//***************************************************************************
//*  PereodicDmg
function peredioc_s takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local unit u1= LoadUnitHandle(HT, i, 1)
    local unit u2= LoadUnitHandle(HT, i, 2)
    local real dmg1= LoadReal(HT, i, 3)
    local real dmg2= LoadReal(HT, i, 4)
    local real evary= LoadReal(HT, i, 5)
    local real max= LoadReal(HT, i, 6)
    local integer id= LoadInteger(HT, i, 7)
    local boolean first= LoadBoolean(HT, i, 8)
    

    
    if first == false then
        call SaveBoolean(HT, i, 8, true)
        set TypeDmg_b=2
        set GLOB_ABIL_ID=LoadInteger(HT, i, 9)
        call UnitDamageTarget(u1, u2, dmg1 + GetWidgetLife(u2) * 0.01 * dmg2, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
        call TimerStart(t, evary, true, function peredioc_s)
        set u1=null
        set u2=null
        return
    endif
    
    if GetUnitAbilityLevel(u2, id) > 0 then
        set TypeDmg_b=2
        set GLOB_ABIL_ID=LoadInteger(HT, i, 9)
        call UnitDamageTarget(u1, u2, dmg1 + GetWidgetLife(u2) * 0.01 * dmg2, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)

    else
        call DestroyTimer(t)
        call FlushChildHashtable(HT, i)
    
    endif
    
    set t=null
    set u1=null
    set u2=null
endfunction

function PerodicDmg takes unit u1,unit u2,real dmg1,real dmg2,real evary,real max,integer id,boolean first,integer idabil returns nothing
    local timer t= LoadTimerHandle(HT, GetHandleId(u2), id)
    local integer i
    if t == null then
        set t=CreateTimer()
    endif
    
    set i=GetHandleId(t)
        
    call SaveUnitHandle(HT, i, 1, u1)
    call SaveUnitHandle(HT, i, 2, u2)
    call SaveReal(HT, i, 3, dmg1)
    call SaveReal(HT, i, 4, dmg2)
    call SaveReal(HT, i, 5, evary)
    call SaveReal(HT, i, 6, max)
    call SaveInteger(HT, i, 7, id)
    call SaveInteger(HT, i, 9, idabil)
    if first then
        call TimerStart(t, 0, false, function peredioc_s)
    endif

    set t=null
endfunction
//***************************************************************************
//*  InitInfoBuffs


function Init_HtBUFF takes nothing returns nothing

    call SaveInteger(HT_buff, 'B014', 1, Buff_Type_passive)
    call SaveInteger(HT_buff, 'B015', 1, Buff_Type_passive)

endfunction
//***************************************************************************
//*  Order
function AbilityChanelCst takes unit u,unit u2,real x1,real y1,integer id returns nothing
    set GLOB_AB_CH=u
    set GLOB_TR_CH=u2
    set GLOB_X1_CH=x1
    set GLOB_Y1_CH=y1
    set GLOB_LV_CH=GetUnitAbilityLevel(u, id)
    set GLOB_ID_CH=id
    call ExecuteFunc("AbilityChannel")


endfunction


function FreeInitChannel takes nothing returns nothing

    set OrderString[0]="slow" // random ability
    set OrderString[1]="slowon"
    set OrderString[2]="slowoff"
    set OrderString[3]="magicundefense"
    set OrderString[4]="magicdefense"
    set OrderString[5]="heal"
    set OrderString[6]="healon"
    set OrderString[7]="healoff"
    set OrderString[8]="controlmagic"
    set OrderString[9]="invisibility"
    set OrderString[10]="magicleash"
    set OrderString[11]="spellsteal"
    set OrderString[12]="spellstealon"
    set OrderString[13]="spellstealoff"
    set OrderString[14]="polymorph"
    set OrderString[15]="militia"
    set OrderString[16]="militiaoff"
    set OrderString[17]="dispel"
    set OrderString[18]="etherealform"
    set OrderString[19]="unetherealform"
    set OrderString[20]="battlestations"
    set OrderString[21]="unstableconcoction"
    set OrderString[22]="unstableconcoctionon"
    set OrderString[23]="unstableconcoctionoff"
    set OrderString[24]="corporealform"
    set OrderString[25]="uncorporealform"
    set OrderString[26]="devour"
    set OrderString[27]="purge"
    set OrderString[28]="evileye"
    set OrderString[29]="resurrection"
    set OrderString[30]="massteleport"
    set OrderString[31]="defend"
    set OrderString[32]="undefend"
    set OrderString[33]="farsight"
    set OrderString[34]="earthquake"
    set OrderString[35]="recharge"
    set OrderString[36]="replenish"
    set OrderString[37]="unloadcorpse"
    set OrderString[38]="harvest"
    set OrderString[39]="sacrifice"
    
    // InitSpellChanell
    call SaveInteger(HT, 'A05X', 4, 1)
    
    
endfunction


function SetChanellOrder takes unit u,integer i,integer id returns nothing
    local integer lvl= 0
    if LoadInteger(HT, i, 4) == 1 then

        call BlzSetAbilityStringLevelField(BlzGetUnitAbility(u, i), ABILITY_SLF_BASE_ORDER_ID_NCL6, lvl, OrderString[id])
      
    endif
endfunction

//***************************************************************************
//*  CustomState

function SetUnitMagicDmg takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 1, r)
endfunction

function GetUnitMagicDmg takes unit u returns real
    return LoadReal(HT_unitstate, GetHandleId(u), 1)
endfunction

function AddUnitMagicDmg takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 1, LoadReal(HT_unitstate, GetHandleId(u), 1) + r)
endfunction

function SetUnitMagicDef takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 2, r)
endfunction


function GetUnitMagicDef takes unit u returns real
    return LoadReal(HT_unitstate, GetHandleId(u), 2)
endfunction

function AddUnitMagicDef takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 2, LoadReal(HT_unitstate, GetHandleId(u), 2) + r)
endfunction



function SetUnitEvasion takes unit u,real r returns nothing
    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(u, 'A057'), ABILITY_RLF_CHANCE_TO_EVADE_EEV1, 0, 1 - ( 50 / ( 50 + r ) ))
    call SaveReal(HT_unitstate, GetHandleId(u), 3, r)
endfunction


function AddUnitEvasion takes unit u,real r returns nothing
    set r=LoadReal(HT_unitstate, GetHandleId(u), 3) + r
    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(u, 'A057'), ABILITY_RLF_CHANCE_TO_EVADE_EEV1, 0, 1 - ( 50 / ( 50 + r ) ))
    call SaveReal(HT_unitstate, GetHandleId(u), 3, r)
endfunction


function GetUnitEvasion takes unit u returns real
    return LoadReal(HT_unitstate, GetHandleId(u), 3)
endfunction

function GetUnitRealEvade takes unit u returns real
    return 1 - ( 50 / ( 50 + LoadReal(HT_unitstate, GetHandleId(u), 3) ) )
endfunction



function SetUnitBlock takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 1, 4)
endfunction

function GetUnitBlock takes unit u returns real
    return LoadReal(HT_unitstate, GetHandleId(u), 4)
endfunction

function AddUnitBlock takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 4, LoadReal(HT_unitstate, GetHandleId(u), 4) + r)
endfunction


function SetUnitLuck takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 1, 5)
endfunction

//function GetUnitLuck takes unit u returns real
//    return LoadReal(HT_unitstate,GetHandleId(u),5)+1
//endfunction

function AddUnitLuck takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 5, LoadReal(HT_unitstate, GetHandleId(u), 5) + r)
endfunction


function SetUnitPowerRune takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 1, 6)
endfunction

//function GetUnitPowerRune takes unit u returns real
//    return LoadReal(HT_unitstate,GetHandleId(u),6)
//endfunction

function AddUnitPowerRune takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 6, LoadReal(HT_unitstate, GetHandleId(u), 6) + r)
endfunction



function SetUnitSummonStronger takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 1, 7)
endfunction

function GetUnitSummonStronger takes unit u returns real
    return LoadReal(HT_unitstate, GetHandleId(u), 7)
endfunction

function AddUnitSummonStronger takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 7, LoadReal(HT_unitstate, GetHandleId(u), 7) + r)
endfunction



function SetUnitPvpBonus takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 1, 8)
endfunction

function GetUnitPvpBonus takes unit u returns real
    return LoadReal(HT_unitstate, GetHandleId(u), 8)
endfunction

function AddUnitPvpBonus takes unit u,real r returns nothing
    call SaveReal(HT_unitstate, GetHandleId(u), 8, LoadReal(HT_unitstate, GetHandleId(u), 8) + r)
endfunction


function endTimerState takes nothing returns nothing
local timer t= GetExpiredTimer()

local integer i= LoadInteger(HT, GetHandleId(t), 1)
local real r= LoadReal(HT, GetHandleId(t), 2)

local unit u= LoadUnitHandle(HT, GetHandleId(t), 3)

   call SaveReal(HT_unitstate, GetHandleId(u), i, LoadReal(HT_unitstate, GetHandleId(u), i) - r)
    if i == 3 then
            call BlzSetAbilityRealLevelField(BlzGetUnitAbility(u, 'A057'), ABILITY_RLF_CHANCE_TO_EVADE_EEV1, 0, 1 - ( 50 / ( 50 + GetUnitEvasion(u) ) ))
    endif
    
call FlushChildHashtable(HT, GetHandleId(t))
call DestroyTimer(t)
set u=null
set t=null
endfunction

function AddStateTemp takes unit u,integer i,real r,real time returns nothing
    local timer t= CreateTimer()
    
    call SaveInteger(HT, GetHandleId(t), 1, i)
    call SaveReal(HT, GetHandleId(t), 2, r)
    call SaveUnitHandle(HT, GetHandleId(t), 3, u)
    
    call SaveReal(HT_unitstate, GetHandleId(u), i, LoadReal(HT_unitstate, GetHandleId(u), i) + r)
    
    
    if i == 3 then
            call BlzSetAbilityRealLevelField(BlzGetUnitAbility(u, 'A057'), ABILITY_RLF_CHANCE_TO_EVADE_EEV1, 0, 1 - ( 50 / ( 50 + GetUnitEvasion(u) ) ))
    endif
    call TimerStart(t, time, false, function endTimerState)
    
    set t=null
endfunction


function GetHeroMaxAbsoluteAbility takes unit u returns integer
    return LoadInteger(HT, GetHandleId(u), - 8852352)
endfunction


function AddHeroMaxAbsoluteAbility takes unit u returns boolean


if GetHeroMaxAbsoluteAbility(u) < 10 then

    call SaveInteger(HT, GetHandleId(u), - 8852352, LoadInteger(HT, GetHandleId(u), - 8852352) + 1)
    return true
else
    return false

endif



    
endfunction



//***************************************************************************
//*  Variable
//***************************************************************************
//*  Multi
function MultiUnitBonus takes nothing returns nothing
    local timer TimerT= GetExpiredTimer()
    local integer id_spell= LoadInteger(HY2, GetHandleId(TimerT), 1)
    local unit caster= LoadUnitHandle(HY2, GetHandleId(TimerT), 2)
    local unit Beg= LoadUnitHandle(HY2, GetHandleId(TimerT), 3)
    local real GetX= LoadReal(HY2, GetHandleId(TimerT), 4)
    local real GetY= LoadReal(HY2, GetHandleId(TimerT), 5)
    local integer OrderUnit= LoadInteger(HY2, GetHandleId(TimerT), 6)
    local unit DummyU= CreateUnit(GetOwningPlayer(caster), 'h015', GetUnitX(caster), GetUnitY(caster), GetUnitFacing(caster))
    
    
    

    call AbilityChanelCst(caster , Beg , GetX , GetY , id_spell)
    
    call UnitAddAbility(DummyU, id_spell)
    call SetUnitAbilityLevel(DummyU, id_spell, GetUnitAbilityLevel(caster, id_spell))
    call UnitApplyTimedLife(DummyU, 'BTLF', 9)

    call IssueImmediateOrderById(DummyU, OrderUnit)
    if Beg != null then
    call IssueTargetOrderById(DummyU, OrderUnit, Beg)
    else
       if IssuePointOrderById(DummyU, OrderUnit, GetX, GetY) then
       endif
    endif
    call FlushChildHashtable(HY2, GetHandleId(TimerT))
    call DestroyTimer(TimerT)
    
    set TimerT=null
    set caster=null
    set Beg=null
    set DummyU=null
endfunction



//***************************************************************************
//*  Untitled Script 001



    function UnitInfoGetUnit takes player p returns unit
        call GroupEnumUnitsSelected(gUI, p, null)
        set UnitInfoUnit=FirstOfGroup(gUI)
        call GroupClear(gUI)
        return UnitInfoUnit
    endfunction


function GameUIStandart takes nothing returns nothing
        set parent=BlzCreateFrameByType("SIMPLEFRAME", "", unitInfo, "", 0)
        call BlzFrameSetParent(BlzGetFrameByName("SimpleInfoPanelIconDamage", 0), parent)
        call BlzFrameSetParent(BlzGetFrameByName("SimpleInfoPanelIconDamage", 1), parent)
        call BlzFrameSetParent(BlzGetFrameByName("SimpleInfoPanelIconArmor", 2), parent)
        call BlzFrameSetParent(BlzGetFrameByName("SimpleInfoPanelIconRank", 3), parent)
        call BlzFrameSetParent(BlzGetFrameByName("SimpleInfoPanelIconFood", 4), parent)
        call BlzFrameSetParent(BlzGetFrameByName("SimpleInfoPanelIconGold", 5), parent)
        call BlzFrameSetParent(BlzGetFrameByName("SimpleInfoPanelIconHero", 6), parent)
        call BlzFrameSetParent(BlzGetFrameByName("SimpleInfoPanelIconAlly", 7), parent)
        call BlzFrameSetVisible(parent, false)
endfunction



function UpdateTextRelaese takes unit u returns nothing
   local string dmgT= "-"
   local integer Pid=  GetPlayerId(GetOwningPlayer(u))
	
   set dmgT=BlzFrameGetText(BlzGetFrameByName("InfoPanelIconValue", 0))
   call BlzFrameSetText(TextUI[1], dmgT)


   call BlzFrameSetText(TextUI[3], BlzFrameGetText(BlzGetFrameByName("InfoPanelIconValue", 2)))
   call BlzFrameSetText(TextUI[4], R2SW(GetUnitBlock(u), 1, 0))
   call BlzFrameSetText(TextUI[2], R2S(BlzGetUnitAttackCooldown(u, 0)))
   call BlzFrameSetText(TextUI[5], I2S(R2I(GetUnitMoveSpeed(u))))
   call BlzFrameSetText(TextUI[9], R2SW(GetUnitMagicDmg(u), 1, 1))
   call BlzFrameSetText(TextUI[10], R2SW(GetUnitMagicDef(u), 1, 1))
   call BlzFrameSetText(TextUI[11], R2SW(GetUnitEvasion(u), 1, 1))
   set CustomInfoT1[1]=R2S(100 * GetUnitRealEvade(u))
   set CustomInfoT1[2]=R2S(( ( ( ( BlzGetUnitArmor(u) ) ) * 0.06 ) / ( 1 + 0.06 * ( BlzGetUnitArmor(u) ) ) ) * 100)
   set CustomInfoT1[3]=R2S(GetUnitMagicDmg(u))
   set CustomInfoT1[4]=R2S(( 1 - ( 50 / ( 50 + GetUnitMagicDef(u) ) ) ) * 100)
   
   if IsHeroUnitId(GetUnitTypeId(u)) then
      call BlzFrameSetText(TextUI[6], BlzFrameGetText(BlzGetFrameByName("InfoPanelIconHeroStrengthValue", 6)))
      call BlzFrameSetText(TextUI[7], BlzFrameGetText(BlzGetFrameByName("InfoPanelIconHeroAgilityValue", 6)))
      call BlzFrameSetText(TextUI[8], BlzFrameGetText(BlzGetFrameByName("InfoPanelIconHeroIntellectValue", 6)))
      
      
      if BlzGetUnitIntegerField(u, UNIT_IF_PRIMARY_ATTRIBUTE) == 1 then
      call BlzFrameSetText(TextUI[6], "*" + BlzFrameGetText(BlzGetFrameByName("InfoPanelIconHeroStrengthValue", 6)))
      elseif BlzGetUnitIntegerField(u, UNIT_IF_PRIMARY_ATTRIBUTE) == 3 then
      call BlzFrameSetText(TextUI[7], "*" + BlzFrameGetText(BlzGetFrameByName("InfoPanelIconHeroAgilityValue", 6)))
      else
      call BlzFrameSetText(TextUI[8], "*" + BlzFrameGetText(BlzGetFrameByName("InfoPanelIconHeroIntellectValue", 6)))
      endif
         
      call BlzFrameSetText(TextUI[12], R2SW(GetUnitPvpBonus(u), 1, 1))
   else
      call BlzFrameSetText(TextUI[6], "-")
      call BlzFrameSetText(TextUI[7], "-")
      call BlzFrameSetText(TextUI[8], "-")
      call BlzFrameSetText(TextUI[12], "-")
   endif


   set dmgT=null
endfunction




function UpdateText takes nothing returns nothing
local integer loopA= 0
local unit u= null

loop
   exitwhen loopA > 8
   set UnitArrayUpdate[loopA]=UnitInfoGetUnit(Player(loopA))
       
    call UpdateTextRelaese(UnitArrayUpdate[GetPlayerId(GetLocalPlayer())])

   
   set loopA=loopA + 1
endloop



endfunction

function InitDataInfoPanel takes integer id,string label,string icon,string desc returns nothing
        set DataIcon[id]=icon
        set DataLabel[id]=label
        set DataDesc[id]=desc
        
        set ButtonUI[id]=BlzGetFrameByName("CustomUnitInfoButton" + I2S(id), 0)
        set ToolTipUI[id]=BlzCreateFrameByType("SIMPLEFRAME", "", ButtonUI[id], "", 0)
        set IconUI[id]=BlzGetFrameByName("CustomUnitInfoButtonIcon" + I2S(id), 0)
        set TextUI[id]=BlzGetFrameByName("CustomUnitInfoButtonText" + I2S(id), 0)
        set TooltipTextUI[id]=BlzCreateFrame("CustomUnitInfoText", ToolTipUI[id], 0, 0)
        set ToolTextUI[id]=BlzCreateFrame("CustomUnitInfoText", ToolTipUI[id], 0, 0)
        call BlzFrameSetAbsPoint(TooltipTextUI[id], FRAMEPOINT_BOTTOMRIGHT, 0.79, 0.18)

        call BlzFrameSetVisible(ToolTipUI[id], false)
        call BlzFrameSetTooltip(ButtonUI[id], ToolTipUI[id])
        
        call BlzFrameSetTexture(IconUI[id], DataIcon[id], 0, false)
        call BlzFrameSetText(TextUI[id], "Test:" + I2S(id))
      
endfunction

function GameUINewPanel takes nothing returns nothing
        local framehandle NewPanel= BlzCreateSimpleFrame("CustomUnitInfoPanel3x4", BlzGetFrameByName("SimpleInfoPanelUnitDetail", 0), 0)
        call InitDataInfoPanel(1 , "Damage: " , "ReplaceableTextures\\CommandButtons\\BTNAttack.blp" , "The amount of damage the unit's basic attack deals")
        call InitDataInfoPanel(2 , "Attack cooldown: " , "ReplaceableTextures\\CommandButtons\\BTNHoldPosition.blp" , "Time between the unit's attacks.\nNot an indicator of attack speed")
        call InitDataInfoPanel(3 , "Armor: " , "ReplaceableTextures\\CommandButtons\\BTNStop.blp" , "Reduces physical damage taken by |cffe7544a")
        call InitDataInfoPanel(4 , "Block: " , "ReplaceableTextures\\CommandButtons\\BTNDefend.blp" , "Damage reduction applied to all damage taken.")
        call InitDataInfoPanel(5 , "Movement speed: " , "ReplaceableTextures\\CommandButtons\\BTNBootsOfSpeed" , "Current movement speed. ")
        call InitDataInfoPanel(6 , "Strength: " , "ReplaceableTextures\\CommandButtons\\BTNGauntletsOfOgrePower" , "Each point increases hit points by 26.\nEach point increases hit point regeneration by 0.075.")
        call InitDataInfoPanel(7 , "Agility: " , "ReplaceableTextures\\CommandButtons\\BTNSlippersOfAgility" , "Each point increases armor by 0.150.\nEach point increases attack speed by 0.01")
        call InitDataInfoPanel(8 , "Intelligence: " , "ReplaceableTextures\\CommandButtons\\BTNMantleOfIntelligence" , "Each point increases mana by 20.1.\nEach point increases mana regeneration by 0.065.")
        call InitDataInfoPanel(9 , "Magic power: " , "ReplaceableTextures\\CommandButtons\\BTNControlMagic" , "Increases magic damage dealt by |cff4daed4")
        call InitDataInfoPanel(10 , "Magic protection: " , "ReplaceableTextures\\CommandButtons\\BTNRunedBracers.blp" , "Reduces magic damage taken by |cff51d44d")
        call InitDataInfoPanel(11 , "Evasion: " , "ReplaceableTextures\\CommandButtons\\BTNEvasion" , "Increases the chance to evade enemy attacks by |cffd6e049")
        call InitDataInfoPanel(12 , "Pvp bonus: " , "BTNHUHoldPosition.blp" , "Increases damage dealt to enemy heroes\nReduces damage taken from enemy heroes.")
        
        
   //     call InitDataInfoPanel(11, "Mp/s: ", "ReplaceableTextures\\CommandButtons\\BTNMagicalSentry","")
   //     call InitDataInfoPanel(12, "Evasion: ", "ReplaceableTextures\\CommandButtons\\BTNEvasion","")
        call BlzFrameSetParent(NewPanel, BlzGetFrameByName("SimpleInfoPanelUnitDetail", 0))
endfunction

function update takes nothing returns nothing
        local integer loopA= 0
        local boolean VisibleFrame= false
       
        call UpdateText()
       
       
        
       
        loop
         exitwhen loopA > 12
            if BlzFrameIsVisible(ToolTipUI[loopA]) then
               set VisibleFrame=true
               set ToolTipA=DataLabel[loopA] + BlzFrameGetText(TextUI[loopA]) + "\n------------------------------\n" + DataDesc[loopA]
	       if loopA == 3 then
                set ToolTipA=ToolTipA + CustomInfoT1[2] + "%."
           elseif loopA == 9 then
                set ToolTipA=ToolTipA + CustomInfoT1[3] + "%."
           elseif loopA == 10 then
                set ToolTipA=ToolTipA + CustomInfoT1[4] + "%."
           elseif loopA == 11 then
		        set ToolTipA=ToolTipA + CustomInfoT1[1] + "%."
	       endif
               call BlzFrameSetText(tooltipText, ToolTipA)
            endif
         set loopA=loopA + 1
        endloop

        call BlzFrameSetVisible(tooltipBox, VisibleFrame)
endfunction

function ToolTipStart takes nothing returns nothing
        call TimerStart(CreateTimer(), 0.05, true, function update)
        

  
        set tooltipBox=BlzCreateFrame("BoxedText", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), 0, 0)
        set tooltipText=BlzCreateFrame("CustomUnitInfoText", tooltipBox, 0, 0)
        call BlzFrameSetAbsPoint(tooltipText, FRAMEPOINT_BOTTOMRIGHT, 0.79, 0.18)
        call BlzFrameSetSize(tooltipText, 0.275, 0)
        call BlzFrameSetPoint(tooltipBox, FRAMEPOINT_TOPLEFT, tooltipText, FRAMEPOINT_TOPLEFT, - 0.01, 0.01)
        call BlzFrameSetPoint(tooltipBox, FRAMEPOINT_BOTTOMRIGHT, tooltipText, FRAMEPOINT_BOTTOMRIGHT, 0.005, - 0.01)
        call BlzFrameSetVisible(tooltipBox, false)

endfunction


function InitGameUI takes nothing returns nothing
        set isReforged=GetLocalizedString("REFORGED") != "REFORGED"
        call BlzLoadTOCFile("war3mapImported\\UnitInfoPanels.toc")
        call BlzLoadTOCFile("war3mapimported\\BoxedText.toc")
        set unitInfo=BlzGetFrameByName("SimpleInfoPanelUnitDetail", 0)
        call BlzGetFrameByName("InfoPanelIconValue", 0)
        call BlzGetFrameByName("InfoPanelIconValue", 2)
        call BlzGetFrameByName("InfoPanelIconHeroStrengthValue", 6)
        call BlzGetFrameByName("InfoPanelIconHeroAgilityValue", 6)
        call BlzGetFrameByName("InfoPanelIconHeroIntellectValue", 6)
        call ToolTipStart()
        call GameUIStandart()
        call GameUINewPanel()
endfunction
//***************************************************************************
//*  AUav_Vampirism
//Damaged 

//***************************************************************************
//*  O002 dreadlord
// Damaged

//***************************************************************************
//*  H01H Ghoul
// Damaged


//***************************************************************************
//*
//*  Sound Assets
//*
//***************************************************************************

function InitSounds takes nothing returns nothing
    set gg_snd_HealingWave=CreateSound("Abilities/Spells/Orc/HealingWave/HealingWave.flac", true, true, true, 1, 3, "SpellsEAX")
    call SetSoundParamsFromLabel(gg_snd_HealingWave, "HealingWaveTarget")
    call SetSoundDuration(gg_snd_HealingWave, 2229)
    call SetSoundVolume(gg_snd_HealingWave, 125)
    call SetSoundPitch(gg_snd_HealingWave, 0.8)
    set gg_snd_HealingWave01="HealingWaveTarget"
    set gg_snd_Mainscreen=CreateSound("Sound/Music/mp3Music/Mainscreen.flac", false, true, true, 1, 1, "MissilesEAX")
    call SetSoundParamsFromLabel(gg_snd_Mainscreen, "Mainscreen")
    call SetSoundDuration(gg_snd_Mainscreen, 69290)
    call SetSoundChannel(gg_snd_Mainscreen, 11)
    call SetSoundVolume(gg_snd_Mainscreen, 127)
    call SetSoundDistances(gg_snd_Mainscreen, 600.0, 3500.0)
    call SetSoundDistanceCutoff(gg_snd_Mainscreen, 3000.0)
endfunction

//***************************************************************************
//*
//*  Unit Creation
//*
//***************************************************************************

//===========================================================================
function CreateNeutralPassiveBuildings takes nothing returns nothing
    local player p= Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u=BlzCreateUnitWithSkin(p, 'n02L', 1209.7, - 465.0, 270.000, 'n02L')
    set u=BlzCreateUnitWithSkin(p, 'n02T', - 1211.3, - 77.0, 270.000, 'n02T')
    set u=BlzCreateUnitWithSkin(p, 'n004', 1216.0, - 64.0, 270.000, 'n004')
    set u=BlzCreateUnitWithSkin(p, 'n02U', - 1223.8, - 482.4, 270.000, 'n02U')
endfunction

//===========================================================================
function CreatePlayerBuildings takes nothing returns nothing
endfunction

//===========================================================================
function CreatePlayerUnits takes nothing returns nothing
endfunction

//===========================================================================
function CreateAllUnits takes nothing returns nothing
    call CreateNeutralPassiveBuildings()
    call CreatePlayerBuildings()
    call CreatePlayerUnits()
endfunction

//***************************************************************************
//*
//*  Regions
//*
//***************************************************************************

function CreateRegions takes nothing returns nothing
    local weathereffect we

    set gg_rct_Region_000=Rect(- 1568.0, - 1728.0, 1568.0, 1312.0)
    set gg_rct_Region_001=Rect(- 5440.0, 4992.0, - 5216.0, 5152.0)
    set gg_rct_Region_002=Rect(- 6080.0, 5152.0, - 5728.0, 5568.0)
    set gg_rct_grom_spawn=Rect(- 5344.0, 4928.0, - 5184.0, 5088.0)
    set gg_rct_EntireMapVariable=Rect(- 5344.0, - 5600.0, 5344.0, 5056.0)
    set gg_rct_Region_005=Rect(- 5536.0, 5312.0, - 5184.0, 5664.0)
endfunction

//***************************************************************************
//*
//*  Triggers
//*
//***************************************************************************

//===========================================================================
// Trigger: InitDescription
//===========================================================================



function Trig_InitDescription_Actions takes nothing returns nothing
    set ClassAbil[1]="[|cffff0000Fire|r]"
    set ClassAbil[2]="[|cff000080Water|r]"
    set ClassAbil[3]="[|cffc0c0c0Wind|r]"
    set ClassAbil[4]="[|cffd45e19Earth|r]"
    set ClassAbil[5]="[|cff008000Wild|r]"
    set ClassAbil[6]="[|cff008080Energy|r]"
    set ClassAbil[7]="[|cff000000Dark|r]"
    set ClassAbil[8]="[|cffd2d2d2Light|r]"
    set ClassAbil[9]="[|cff8080ffCold|r]"
    set ClassAbil[10]="[|cff104c0fPoison|r]"
    set ClassAbil[11]="[|cff800000Blood|r]"
    
    set ClassAbil[12]="[|cffffff96Divinity|r]"
    set ClassAbil[13]="[|cff6f2583Arcane|r]"
    set ClassAbil[14]="[|cff7a85ffTime|r]"
    set ClassAbil[15]="[|cffc0dec0Spirit|r]"
    
    
//    set ClassAbil[20] = "[|cff800000Warrior|r]"   
//    set ClassAbil[21] = "[|cff800000Rogue|r]"   
//    set ClassAbil[22] = "[|cff800000Paladin|r]"   
//    set ClassAbil[23] = "[|cff800000Archer|r]"   
//    set ClassAbil[24] = "[|cff800000Barbarian|r]"   


endfunction

function InitTrig_InitDescription takes nothing returns nothing
    set gg_trg_InitDescription=CreateTrigger()
    call TriggerAddAction(gg_trg_InitDescription, function Trig_InitDescription_Actions)
endfunction


//===========================================================================
// Trigger: Storm bolt
//===========================================================================
function AHtb_initparam takes nothing returns nothing
    set PARAMETR_DMG=- 890001 // unique for each spell
    set PARAMETR_NAME="Storm bolt"
    set PARAMETR_TOOLTIP="Throws a magical hammer at a target enemy unit, dealing !DMG1! damage and stunning the target."
endfunction


function AHtb_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=( 125 + lvl * 6 ) * lvl
    set s__AbilityData_Cost1[A]=100 + 75 * lvl
    set s__AbilityData_Range1[A]=400 + 15 * lvl
    set s__AbilityData_DurationHero1[A]=2
    set s__AbilityData_DurationNormal1[A]=2
    set s__AbilityData_Cooldown1[A]=9
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Inner fire
//===========================================================================
function Ainf_initparam takes nothing returns nothing
    set PARAMETR_NAME="Inner Fire"
    set PARAMETR_TOOLTIP="Increases a target friendly unit's damage by !PAR1!% and armor by !PAR2!."
endfunction


function Ainf_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    
    
    set s__AbilityData_Param1[A]=0.095 * lvl
    set s__AbilityData_Param1Field[A]='Inf1'
    set s__AbilityData_Param1Chance[A]=true
    set s__AbilityData_Param2[A]=10 * lvl
    set s__AbilityData_Param2Field[A]='Inf2'
    set s__AbilityData_Param2FieldType[A]=1

    set s__AbilityData_Cost1[A]=150 + 50 * lvl
    set s__AbilityData_Range1[A]=500
    set s__AbilityData_DurationHero1[A]=15
    set s__AbilityData_DurationNormal1[A]=15
    set s__AbilityData_Cooldown1[A]=18
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Holy Light
//===========================================================================
function A084_initparam takes nothing returns nothing
    set PARAMETR_NAME="Holy Light"
    set PARAMETR_TOOLTIP="A holy light that can heal a friendly living unit for !PAR1! or deal !DMG1! damage to an enemy unit."
endfunction


function A084_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=( 200 + lvl * 4 ) * lvl
    set s__AbilityData_Damage1[A]=( 100 + lvl * 2 ) * lvl
    set s__AbilityData_Cost1[A]=95 + 55 * lvl
    set s__AbilityData_Range1[A]=600

    set s__AbilityData_Cooldown1[A]=7
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Flame Strike
//===========================================================================
function AHfs_initparam takes nothing returns nothing
    set PARAMETR_DMG=890002

    set PARAMETR_NAME="Flame Strike"
    set PARAMETR_TOOLTIP="Conjures a pillar of flame that burns ground units for !DMG1! damage every !PAR1! seconds."
endfunction


function AHfs_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=( 19 + lvl * 2 ) * lvl

        
    set s__AbilityData_Param1[A]=0.33
    set s__AbilityData_Param1Field[A]='Hfs2'
 

    
    set s__AbilityData_Cost1[A]=50 + 50 * lvl
    set s__AbilityData_Range1[A]=500 + 5 * lvl
    set s__AbilityData_Area1[A]=350
    
    set s__AbilityData_DurationHero1[A]=8
    set s__AbilityData_DurationNormal1[A]=8
    set s__AbilityData_Cooldown1[A]=12
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Fog
//===========================================================================
function Aclf_initparam takes nothing returns nothing
    set PARAMETR_NAME="Fog"
    set PARAMETR_TOOLTIP="Creates a cloud that stops units that are within it from casting spells, gives them a !PAR1!% chance to miss attacks and slows their movement by !PAR2!% and attack speed by !PAR3!%."
endfunction


function Aclf_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    


        
    set s__AbilityData_Param1[A]=1 - 45 / ( 45 + lvl )
    set s__AbilityData_Param1Field[A]='Nsi2'
    set s__AbilityData_Param1Chance[A]=true
    
    set s__AbilityData_Param3[A]=0.35
    set s__AbilityData_Param3Field[A]='Nsi4'
    set s__AbilityData_Param3Chance[A]=true

    set s__AbilityData_Param2[A]=0.1 + 25 / ( 25 + lvl )
    set s__AbilityData_Param2Field[A]='Nsi3'
    set s__AbilityData_Param2Chance[A]=true
    
    set s__AbilityData_Cost1[A]=75 * lvl
    set s__AbilityData_Range1[A]=550 + 15 * lvl
    
    set s__AbilityData_Area1[A]=350
    set s__AbilityData_DurationHero1[A]=5 + 0.1 * lvl
    set s__AbilityData_DurationNormal1[A]=5 + 0.1 * lvl
    set s__AbilityData_Cooldown1[A]=15
    
    
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Blizzard
//===========================================================================
function AHbz_initparam takes nothing returns nothing
    set PARAMETR_DMG=890006 // unique for each spell
    set PARAMETR_NAME="Blizzard"
    set PARAMETR_TOOLTIP="Calls down freezing ice shard waves; each wave deals !DMG1! damage to enemy units in an area."
endfunction


function AHbz_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    

    set s__AbilityData_Damage1[A]=( 29 + lvl ) * lvl
    

        
    set s__AbilityData_Param1[A]=R2I(4 + 0.2 * lvl)
    set s__AbilityData_Param1Field[A]='Hbz3'
    set s__AbilityData_Param1FieldType[A]=1 // 0 - real  1 - int
    
    set s__AbilityData_Param3[A]=R2I(6 + 0.3 * lvl)
    set s__AbilityData_Param3Field[A]='Hbz1'
    set s__AbilityData_Param3FieldType[A]=1 // 0 - real  1 - int
    
    set s__AbilityData_Param4[A]=999999999
    set s__AbilityData_Param4Field[A]='Hbz6'
    set s__AbilityData_Param4FieldType[A]=0
    
    set s__AbilityData_Cost1[A]=75 * lvl
    set s__AbilityData_Range1[A]=600
    
    set s__AbilityData_Area1[A]=250 + 20 * lvl

    set s__AbilityData_Cooldown1[A]=12
    set s__AbilityData_CastingTime1[A]=1.5

    
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Thunder Clap
//===========================================================================
function AHtc_initparam takes nothing returns nothing
    set PARAMETR_DMG=890003

    set PARAMETR_NAME="Thunder Clap"
    set PARAMETR_TOOLTIP="Slams the ground, dealing !DMG1! damage to nearby enemy land units and slowing their movement by !PAR1!% and attack rate by !PAR2!%."
endfunction


function AHtc_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=( 200 + lvl * 3 ) * lvl

        
    set s__AbilityData_Param1[A]=0.5
    set s__AbilityData_Param1Field[A]='Htc4'
    
    set s__AbilityData_Param2[A]=0.5
    set s__AbilityData_Param2Field[A]='Htc3'

    
    set s__AbilityData_Cost1[A]=75 + 50 * lvl
    set s__AbilityData_Area1[A]=350 + 15 * lvl
    
    set s__AbilityData_DurationHero1[A]=3 + 0.1 * lvl
    set s__AbilityData_DurationNormal1[A]=4 + 0.15 * lvl
    set s__AbilityData_Cooldown1[A]=12
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Banish
//===========================================================================
function AHbn_initparam takes nothing returns nothing
    set PARAMETR_NAME="Banish"
    set PARAMETR_TOOLTIP="Turns a non-mechanical unit ethereal and slows its movement speed by 50% for a few seconds. Ethereal creatures cannot attack, but they can cast spells and certain spells cast upon them will have a greater effect."
endfunction


function AHbn_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Cost1[A]=100 - lvl
    set s__AbilityData_Range1[A]=300 + 25 * lvl
    set s__AbilityData_DurationHero1[A]=3 + 0.2 * ( lvl - 1 )
    set s__AbilityData_DurationNormal1[A]=3 + 0.5 * ( lvl - 1 )
    set s__AbilityData_Cooldown1[A]=15
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Divine Shield
//===========================================================================
function AHds_initparam takes nothing returns nothing
    set PARAMETR_NAME="Divine Shield"
    set PARAMETR_TOOLTIP="An impenetrable shield surrounds this unit, protecting it from all damage and spells."
endfunction


function AHds_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Cost1[A]=( 25 + lvl ) * lvl
    set s__AbilityData_DurationHero1[A]=1 + 0.05 * lvl
    set s__AbilityData_Cooldown1[A]=30 + 0.05 * lvl
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Avatar
//===========================================================================
function AHav_initparam takes nothing returns nothing
    set PARAMETR_NAME="Avatar"
    set PARAMETR_TOOLTIP="Activate Avatar to give !PAR1! bonus armor, !PAR2! bonus hit points, !PAR3! bonus damage and spell immunity."
endfunction


function AHav_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Cost1[A]=( 100 + lvl ) * lvl
    set s__AbilityData_DurationHero1[A]=3 + 0.12 * lvl
    set s__AbilityData_DurationNormal1[A]=3 + 0.12 * lvl
    set s__AbilityData_Cooldown1[A]=30 + 0.12 * lvl
    
    set s__AbilityData_Param1[A]=15 * lvl
    set s__AbilityData_Param1Field[A]='Hav1' //Field in the Object editor
    
    set s__AbilityData_Param2[A]=( 250 + lvl * 7 ) * lvl
    set s__AbilityData_Param2Field[A]='Hav2'
    
    set s__AbilityData_Param3[A]=( 25 + lvl * 2 ) * lvl
    set s__AbilityData_Param3Field[A]='Hav3'
    
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Summon Water Elemental
//===========================================================================
function AHwe_initparam takes nothing returns nothing
    set PARAMETR_NAME="Summon Water Elemental"
    set PARAMETR_TOOLTIP="Summons !PAR1! Water Elementals to attack enemies"
endfunction


function AHwe_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_SummonId1[A]='hwat'
    set s__AbilityData_Param1[A]=2
    set s__AbilityData_Param1Field[A]='Hwe2'
    
    set s__AbilityData_Cost1[A]=( 150 + lvl ) * lvl
    set s__AbilityData_DurationHero1[A]=12 + 0.2 * lvl
    set s__AbilityData_DurationNormal1[A]=12 + 0.2 * lvl
    set s__AbilityData_Area1[A]=200
    set s__AbilityData_Cooldown1[A]=14
    
  
    
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Phoenix
//===========================================================================
function AHpx_initparam takes nothing returns nothing
    set PARAMETR_NAME="Phoenix"
    set PARAMETR_TOOLTIP="Summons a powerful Phoenix. The Phoenix burns with such intensity that it damages itself and nearby enemy units. The Phoenix can attack banished units."
endfunction


function AHpx_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_SummonId1[A]='h009'
    set s__AbilityData_Param1[A]=1
    set s__AbilityData_Param1Field[A]='Hwe2'
    
    set s__AbilityData_Cost1[A]=( 300 + lvl * 2 ) * lvl
    set s__AbilityData_DurationHero1[A]=25 + 0.5 * lvl
    set s__AbilityData_DurationNormal1[A]=25 + 0.5 * lvl
    set s__AbilityData_Area1[A]=200
    set s__AbilityData_Cooldown1[A]=30
    
  
    
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Multishot
//===========================================================================
function Aroc_initparam takes nothing returns nothing
    set PARAMETR_NAME="Multi-shot"
    set PARAMETR_TOOLTIP="|cffffcc00Unique Attack Modifier|r|nFires several arrows, hitting the current target and !PAR1! additional enemies."
endfunction


function Aroc_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=( 2 + lvl / 3 )
    set s__AbilityData_Param1Field[A]='Efk3'
    set s__AbilityData_Param1FieldType[A]=1
    

    set s__AbilityData_Area1[A]=240 + 10 * lvl

    
  
    
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Devation Aura
//===========================================================================
function AHad_initparam takes nothing returns nothing
    set PARAMETR_NAME="Devation Aura"
    set PARAMETR_TOOLTIP="Gives !PAR1! additional armor to nearby friendly units."
endfunction


function AHad_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    
    set s__AbilityData_Area1[A]=995 + 5 * lvl

    set s__AbilityData_Param1[A]=( 15 + 0.05 * lvl ) * lvl
    set s__AbilityData_Param1Field[A]='Had1' //Field in the Object editor

    set u=null
endfunction 
//===========================================================================
// Trigger: Brilliance Aura
//===========================================================================
function AHab_initparam takes nothing returns nothing
    set PARAMETR_NAME="Brilliance Aura"
    set PARAMETR_TOOLTIP="Gives !PAR1! additional mana regeneration to the Hero."
endfunction


function AHab_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Area1[A]=995 + 5 * lvl

    set s__AbilityData_Param1[A]=( 10 + 0.25 * lvl ) * lvl
    set s__AbilityData_Param1Field[A]='Hab1' //Field in the Object editor
    
    set u=null
endfunction 
//===========================================================================
// Trigger: War Stomp
//===========================================================================
function AOws_initparam takes nothing returns nothing
    set PARAMETR_DMG=- 890008

    set PARAMETR_NAME="War Stomp"
    set PARAMETR_TOOLTIP="Slams the ground, dealing !DMG1! damage to nearby enemy land units and stunning them."
endfunction


function AOws_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=( 120 + lvl * 2 ) * lvl

        
    
    set s__AbilityData_Cost1[A]=75 + 33 * lvl
    set s__AbilityData_Area1[A]=275 + 5 * lvl
    
    set s__AbilityData_DurationHero1[A]=0.5 + 0.1 * lvl
    set s__AbilityData_DurationNormal1[A]=3 + 0.15 * lvl
    set s__AbilityData_Cooldown1[A]=6.9 + 0.1 * lvl
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Berserk
//===========================================================================
function Absk_initparam takes nothing returns nothing
    set PARAMETR_NAME="Berserk"
    set PARAMETR_TOOLTIP="Causes this unit to attack !PAR1!% faster, move !PAR2!% faster, and take no damage."
endfunction


function Absk_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=( 120 + lvl * 2 ) * lvl

    set s__AbilityData_Param1[A]=0.9 + 0.1 * lvl
    set s__AbilityData_Param1Field[A]='bsk2'
    set s__AbilityData_Param1Chance[A]=true
    set s__AbilityData_Param2[A]=0.9 + 0.1 * lvl
    set s__AbilityData_Param2Field[A]='bsk1'
    set s__AbilityData_Param2Chance[A]=true
    
    set s__AbilityData_Cost1[A]=175 + 25 * lvl

    
    set s__AbilityData_DurationHero1[A]=2 + 0.05 * lvl
    set s__AbilityData_DurationNormal1[A]=2 + 0.05 * lvl
    set s__AbilityData_Cooldown1[A]=10 + 0.05 * lvl
    
    set u=null
endfunction 
//===========================================================================
// Trigger: War Drums
//===========================================================================
function Aakb_initparam takes nothing returns nothing
    set PARAMETR_NAME="War Drums"
    set PARAMETR_TOOLTIP="An aura that gives nearby friendly units !PAR1! bonus damage to their attacks."
endfunction


function Aakb_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    set s__AbilityData_Param1[A]=( 28 + 2 * lvl ) * lvl
    set s__AbilityData_Param1Field[A]='Akb1'
    set s__AbilityData_Area1[A]=900
    set u=null
endfunction 
//===========================================================================
// Trigger: Pilage
//===========================================================================
function Asal_initparam takes nothing returns nothing
    set PARAMETR_NAME="Pilage"
    set PARAMETR_TOOLTIP="Gives a !PAR2!% chance to get !PAR1! bonus gold from kills.|n|n|cffc0c0c0<Asal,Dur1>% less effective for each Learnability level the Hero has."
endfunction


function Asal_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    set s__AbilityData_Param1[A]=R2I(( 13 + lvl / 2 ) * lvl)
    set s__AbilityData_Param2[A]=0.65
    set s__AbilityData_Param2Chance[A]=true

    set u=null
endfunction 
//===========================================================================
// Trigger: Shockwave
//===========================================================================
function AOsh_initparam takes nothing returns nothing
    set PARAMETR_DMG=- 890009

    set PARAMETR_NAME="Shockwave"
    set PARAMETR_TOOLTIP="A wave of force that ripples outward, causing !DMG1! damage to land units in a line."
endfunction


function AOsh_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=( 185 + lvl * 15 ) * lvl

    set s__AbilityData_Param1[A]=150
    set s__AbilityData_Param1Field[A]='Osh4'
    
    set s__AbilityData_Param2[A]=800
    set s__AbilityData_Param2Field[A]='Osh3'
      
    
    set s__AbilityData_Cost1[A]=75 + 65 * lvl
    set s__AbilityData_Area1[A]=150
    
    set s__AbilityData_Range1[A]=800

    set s__AbilityData_Cooldown1[A]=8
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Spirit Link
//===========================================================================
function Aspl_initparam takes nothing returns nothing
    set PARAMETR_NAME="Spirit Link"
    set PARAMETR_TOOLTIP="Links !PAR1! units together in a chain. All units with Spirit Link on them will live longer, by distributing !PAR2!% of the damage they take across other Spirit Linked units.|"
endfunction


function Aspl_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    

    set s__AbilityData_Param1[A]=R2I(2 + 0.6664 * lvl)
    set s__AbilityData_Param1Field[A]='spl2'
    
    set s__AbilityData_Param2[A]=1 - 0.9 * ( lvl / ( 30 + lvl ) )
    set s__AbilityData_Param2Field[A]='spl1'
    set s__AbilityData_Param2Chance[A]=true
      
    
    set s__AbilityData_Cost1[A]=25 + 25 * lvl
    set s__AbilityData_Area1[A]=900
    
    set s__AbilityData_DurationHero1[A]=15
    set s__AbilityData_DurationNormal1[A]=15
    
    set s__AbilityData_Range1[A]=800

    set s__AbilityData_Cooldown1[A]=20
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Chain Lightning
//===========================================================================
function AOcl_initparam takes nothing returns nothing
    set PARAMETR_DMG=- 890010

    set PARAMETR_NAME="Chain Lightning"
    set PARAMETR_TOOLTIP="Calls forth a bolt of lightning that bounces up to !PAR1! times, dealing !DMG1! damage to each target."
endfunction


function AOcl_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=( 80 + lvl * 15 ) * lvl

    set s__AbilityData_Param1[A]=8
    set s__AbilityData_Param1Field[A]='Ocl2'
    

      
    
    set s__AbilityData_Cost1[A]=55 + 65 * lvl
    set s__AbilityData_Area1[A]=500
    
    set s__AbilityData_Range1[A]=900

    set s__AbilityData_Cooldown1[A]=6
    
    set u=null
endfunction 
//===========================================================================
// Trigger: HealingWave
//===========================================================================
function A085_initparam takes nothing returns nothing
    set PARAMETR_NAME="Holy Wave"
    set PARAMETR_TOOLTIP="Calls forth a wave of holy energy that bounces up to !PAR2! times, healing allies for !PAR1! hit points and dealing !DMG1! damage to enemies."
endfunction


function A085_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=( 1 + lvl * 2 ) * lvl
    set s__AbilityData_Damage1[A]=( 1 + lvl * 2 ) * lvl
    set s__AbilityData_Cost1[A]=15 + 85 * lvl
    set s__AbilityData_Range1[A]=700
    set s__AbilityData_Range2[A]=700
    set s__AbilityData_Param2[A]=R2I(555 + lvl / 3)

    set s__AbilityData_Cooldown1[A]=7
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Slow Aura
//===========================================================================
function AOr2_initparam takes nothing returns nothing
    set PARAMETR_NAME="Slow Aura"
    set PARAMETR_TOOLTIP="Decreases nearby enemy units' movement speed and attack rate by !PAR1!%."
endfunction


function AOr2_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    
    set s__AbilityData_Area1[A]=250 + 15 * lvl

    set s__AbilityData_Param1[A]=- 0.05 * lvl
    set s__AbilityData_Param1Field[A]='Oae1'
    set s__AbilityData_Param1Chance[A]=true
    
    set s__AbilityData_Param2[A]=- 0.05 * lvl
    set s__AbilityData_Param2Field[A]='Oae2'
    set s__AbilityData_Param2Chance[A]=true
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Endurance Aura
//===========================================================================
function AOae_initparam takes nothing returns nothing
    set PARAMETR_NAME="Endurance Aura"
    set PARAMETR_TOOLTIP="Increases nearby friendly units' movement speed by !PAR1!% and attack rate by !PAR2!%"
endfunction


function AOae_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    
    set s__AbilityData_Area1[A]=900

    set s__AbilityData_Param1[A]=0.075 * lvl
    set s__AbilityData_Param1Field[A]='Oae1'
    set s__AbilityData_Param1Chance[A]=true
    
    set s__AbilityData_Param2[A]=0.075 * lvl
    set s__AbilityData_Param2Field[A]='Oae2'
    set s__AbilityData_Param2Chance[A]=true
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Feral Spirit
//===========================================================================
function AOsf_initparam takes nothing returns nothing
    set PARAMETR_NAME="Feral Spirit"
    set PARAMETR_TOOLTIP="Summons !PAR1! Spirit Wolves with evasion to attack enemies."
endfunction


function AOsf_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_SummonId1[A]='osw1'
    set s__AbilityData_Param1[A]=2
    set s__AbilityData_Param1Field[A]='Osf2'
    
    set s__AbilityData_Cost1[A]=( 25 + lvl ) * lvl
    set s__AbilityData_DurationHero1[A]=15.8 + 0.2 * lvl
    set s__AbilityData_DurationNormal1[A]=15.8 + 0.2 * lvl
    set s__AbilityData_Area1[A]=200
    set s__AbilityData_Cooldown1[A]=8
    
  
    
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Serpent Ward
//===========================================================================
function AOsw_initparam takes nothing returns nothing
    set PARAMETR_NAME="Serpent Ward"
    set PARAMETR_TOOLTIP="Summons !PAR1! immobile serpentine ward to attack enemies. The ward is immune to magic."
endfunction


function AOsw_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_SummonId1[A]='osp1'
    set s__AbilityData_Param1[A]=2
    set s__AbilityData_Param1Field[A]='Hwe2'
    
    set s__AbilityData_Cost1[A]=( 45 + lvl ) * lvl
    set s__AbilityData_DurationHero1[A]=16
    set s__AbilityData_DurationNormal1[A]=16
    set s__AbilityData_Area1[A]=200
    set s__AbilityData_Cooldown1[A]=8
    set s__AbilityData_Range1[A]=500
  
    
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Mirror Image
//===========================================================================
function AOmi_initparam takes nothing returns nothing
    set PARAMETR_NAME="Mirror Image"
    set PARAMETR_TOOLTIP="Confuses the enemy by creating !PAR1! illusions of the hero. Illusions deal !PAR2!% damage, but takes !PAR3!% more. Dispels all magic from the hero."
endfunction


function AOmi_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    

    set s__AbilityData_Param1[A]=1 + R2I(lvl * 0.2)
    set s__AbilityData_Param1Field[A]='Omi1'
    set s__AbilityData_Param1FieldType[A]=1
    
    set s__AbilityData_Param2[A]=0.45 + lvl * 0.05
    set s__AbilityData_Param2Field[A]='Omi2'
    set s__AbilityData_Param2Chance[A]=true
    
    set s__AbilityData_Param3[A]=3 - 2 * lvl / ( 53 + lvl )
    set s__AbilityData_Param3Field[A]='Omi3'
    set s__AbilityData_Param3Chance[A]=true
    
    set s__AbilityData_Cost1[A]=( 25 + lvl ) * lvl
    set s__AbilityData_DurationHero1[A]=10
    set s__AbilityData_DurationNormal1[A]=10
    set s__AbilityData_Area1[A]=400
    set s__AbilityData_Cooldown1[A]=10
    
  
    
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Critical Strike
//===========================================================================
function AOcr_initparam takes nothing returns nothing
    set PARAMETR_NAME="Critical Strike"
    set PARAMETR_TOOLTIP="When dealing |cffff8080physical damage|r, there is a !PAR1!% chance of dealing !PAR2! times damage."
endfunction


function AOcr_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=0.2
    set s__AbilityData_Param1Chance[A]=true
    set s__AbilityData_Param2[A]=1.85 + lvl * 0.15
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Big Bad Voodoo
//===========================================================================
function AOvd_initparam takes nothing returns nothing
    set PARAMETR_NAME="Big Bad Voodoo"
    set PARAMETR_TOOLTIP="Turns all friendly units invulnerable in an area around the Hero. The Hero does not turn invulnerable."
endfunction


function AOvd_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    

        
    
    set s__AbilityData_Cost1[A]=400 - 20 * lvl
    set s__AbilityData_Area1[A]=600 + 20 * lvl
    
    set s__AbilityData_DurationHero1[A]=15
    set s__AbilityData_DurationNormal1[A]=15
    set s__AbilityData_Cooldown1[A]=15
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Wind Walk
//===========================================================================
function AOwk_initparam takes nothing returns nothing
    set PARAMETR_NAME="Wind Walk"
    set PARAMETR_TOOLTIP="Allows the hero to become invisible, and move !PAR2!% faster for a few seconds. If the hero attacks a unit to break invisibility, the attack will do !PAR1! bonus damage."
endfunction


function AOwk_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    

    set s__AbilityData_Param1[A]=( 200 + 5 * lvl ) * lvl
    set s__AbilityData_Param1Field[A]='Owk3'
    
    set s__AbilityData_Param2[A]=0.2 + 0.1 * lvl
    set s__AbilityData_Param2Field[A]='Owk2'
    set s__AbilityData_Param2Chance[A]=true
    
    set s__AbilityData_Cost1[A]=( 33 + lvl ) * lvl
    set s__AbilityData_DurationHero1[A]=5
    set s__AbilityData_DurationNormal1[A]=5

    set s__AbilityData_Cooldown1[A]=4

    set u=null
endfunction 
//===========================================================================
// Trigger: Bloodlust
//===========================================================================
function Ablo_initparam takes nothing returns nothing
    set PARAMETR_NAME="Bloodlust"
    set PARAMETR_TOOLTIP="Increases a friendly unit's attack rate by !PAR1!% and movement speed by !PAR2!%"
endfunction


function Ablo_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    

    set s__AbilityData_Param1[A]=0.08 * lvl
    set s__AbilityData_Param1Field[A]='Blo1'
    set s__AbilityData_Param1Chance[A]=true
    
    set s__AbilityData_Param2[A]=0.08 * lvl
    set s__AbilityData_Param2Field[A]='Blo2'
    set s__AbilityData_Param2Chance[A]=true
    
    set s__AbilityData_Cost1[A]=25 * lvl
    set s__AbilityData_DurationHero1[A]=15
    set s__AbilityData_DurationNormal1[A]=15

    set s__AbilityData_Cooldown1[A]=5

    set u=null
endfunction 
//===========================================================================
// Trigger: Healing Ward
//===========================================================================
function A086_initparam takes nothing returns nothing
    set PARAMETR_NAME="Healing Ward"
    set PARAMETR_TOOLTIP="Summons an immovable ward that heals !PAR1! of a nearby friendly non-mechanical unit's hit points per second."
endfunction


function A086_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    set s__AbilityData_Param1[A]=( 45 + 5 * lvl ) * lvl
    set s__AbilityData_Cost1[A]=60 * lvl
    set s__AbilityData_Area1[A]=600
    set s__AbilityData_DurationHero1[A]=8.9 + 0.1 * lvl
    set s__AbilityData_DurationNormal1[A]=8.9 + 0.1 * lvl
    set s__AbilityData_Range1[A]=600
    set s__AbilityData_Cooldown1[A]=4
    set u=null
endfunction 
//===========================================================================
// Trigger: Stasis Trap
//===========================================================================
function Asta_initparam takes nothing returns nothing
    set PARAMETR_NAME="Stasis Trap"
    set PARAMETR_TOOLTIP="Summons an invisible and immovable ward that stuns enemy land units around it. The trap activates when an enemy land unit approaches and destroys all other stasis wards in its area of effect.|n|n|cffff5e44Stun duration|r: !PAR5!"
endfunction


function Asta_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_SummonId1[A]='otot'
    
    
    set s__AbilityData_Param1[A]=4
    set s__AbilityData_Param1Field[A]='Sta1'
    
    set s__AbilityData_Param2[A]=200
    set s__AbilityData_Param2Field[A]='Sta2'
    
    set s__AbilityData_Param3[A]=1
    set s__AbilityData_Param3Field[A]='Sta5'
    
    set s__AbilityData_Param4[A]=325
    set s__AbilityData_Param4Field[A]='Sta3'
 
 
    set s__AbilityData_Param5[A]=4
    set s__AbilityData_Param5Field[A]='Sta4'
    
    
    
    set s__AbilityData_Cost1[A]=( 75 + lvl ) * lvl
    
    set s__AbilityData_DurationHero1[A]=2 + 0.08 * lvl
    set s__AbilityData_DurationNormal1[A]=2 + 0.08 * lvl
    
    
    
    set s__AbilityData_Area1[A]=550
    set s__AbilityData_Range1[A]=400
    set s__AbilityData_Cooldown1[A]=8
    
  
    
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Pulverize
//===========================================================================
function Awar_initparam takes nothing returns nothing
    set PARAMETR_NAME="Pulverize"
    set PARAMETR_TOOLTIP="When dealing physical damage, gives the Hero a !PAR1! chance to deal !DMG1! bonus damage to enemies in a small area."
endfunction


function Awar_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    
    set s__AbilityData_Damage1[A]=100 + 75 * lvl
    set s__AbilityData_Param1[A]=0.25
    set s__AbilityData_Param1Chance[A]=true

    set s__AbilityData_Area1[A]=300

    set u=null
endfunction 
//===========================================================================
// Trigger: Vampirism
//===========================================================================
function AUav_initparam takes nothing returns nothing
    set PARAMETR_NAME="Vampirism"
    set PARAMETR_TOOLTIP="Every time the Hero damages an enemy it recovers hit points based on !PAR1!% of the damage dealt. |n|nFor every [Blood] spell the Hero has, Vampirism returns a bonus !PAR2! of the damage dealt as hit points."
endfunction


function AUav_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    
    set s__AbilityData_Param1[A]=0.005 * lvl
    set s__AbilityData_Param1Chance[A]=true
    set s__AbilityData_Param2[A]=0.02

    set u=null
endfunction 
//===========================================================================
// Trigger: Carrion Beetles
//===========================================================================
function AUcb_initparam takes nothing returns nothing
    set PARAMETR_NAME="Carrion Beetles"
    set PARAMETR_TOOLTIP="Progenerates a Beetle from a target corpse. Beetles are permanent until killed. |nMaximum of !PAR2! Beetles."
endfunction


function AUcb_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_SummonId1[A]='u001'
    
    set s__AbilityData_Param1[A]=2
    set s__AbilityData_Param1Field[A]='Rai1'
    
    
    set s__AbilityData_Param2[A]=R2I(2 + lvl / 4)
    set s__AbilityData_Param2Field[A]='Ucb5'
    
    set s__AbilityData_Cost1[A]=( 49 + lvl ) * lvl
    set s__AbilityData_DurationHero1[A]=25
    set s__AbilityData_DurationNormal1[A]=25
    set s__AbilityData_Area1[A]=800
    set s__AbilityData_Cooldown1[A]=2
    
  
    
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Inferno
//===========================================================================
function AUin_initparam takes nothing returns nothing
    set PARAMETR_DMG=- 890012
    set PARAMETR_NAME="Inferno"
    set PARAMETR_TOOLTIP="Calls an Infernal down from the sky, dealing !DMG1! damage and stunning enemy land units for a few seconds in an area."
endfunction


function AUin_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    
    set s__AbilityData_Damage1[A]=( 1140 + 60 * lvl ) * lvl
    set s__AbilityData_SummonId1[A]='n01N'
    
    set s__AbilityData_Param1[A]=40
    set s__AbilityData_Param1Field[A]='Uin3'
    
    
    set s__AbilityData_Param2[A]=1
    set s__AbilityData_Param2Field[A]='Uin1'
    
    set s__AbilityData_Cost1[A]=( 397 + 3 * lvl ) * lvl
    set s__AbilityData_DurationHero1[A]=3
    set s__AbilityData_DurationNormal1[A]=5
    set s__AbilityData_Area1[A]=200 + 5 * lvl
    set s__AbilityData_Range1[A]=900
    set s__AbilityData_Cooldown1[A]=60
    
  
    
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Carrion Swarm
//===========================================================================
function AUcs_initparam takes nothing returns nothing
    set PARAMETR_DMG=890013

    set PARAMETR_NAME="Carrion Swarm"
    set PARAMETR_TOOLTIP="Sends a horde of bats to deal !DMG1! damage to each enemy unit in a cone."
endfunction


function AUcs_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=100 * lvl
    
    set s__AbilityData_Param2[A]=999999
    set s__AbilityData_Param2Field[A]='Ucs2'
      
    
    set s__AbilityData_Cost1[A]=15 + 25 * lvl
    set s__AbilityData_Area1[A]=100
    
    set s__AbilityData_Range1[A]=700

    set s__AbilityData_Cooldown1[A]=3.5
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Death and Decay
//===========================================================================
function AUdd_initparam takes nothing returns nothing
    set PARAMETR_NAME="Death and Decay"
    set PARAMETR_TOOLTIP="Damages everything in its area of effect by !PAR1!% of its base hit points per second.."
endfunction


function AUdd_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A

    set s__AbilityData_Param1[A]=0.01 * lvl
    set s__AbilityData_Param1Field[A]='Udd1'
    set s__AbilityData_Param1Chance[A]=true
      
    
    set s__AbilityData_Cost1[A]=15 + 25 * lvl
    set s__AbilityData_Area1[A]=300
    
    set s__AbilityData_Range1[A]=1000

    set s__AbilityData_Cooldown1[A]=30
    set s__AbilityData_DurationNormal1[A]=25
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Death Pact
//===========================================================================
function A00M_initparam takes nothing returns nothing
    set PARAMETR_NAME="Death Pact"
    set PARAMETR_TOOLTIP="Kills a target friendly unit, giving !PAR1!% of its hit points to the hero."
endfunction


function A00M_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A

    set s__AbilityData_Param1[A]=0.028 + 0.002 * lvl
    set s__AbilityData_Param1Chance[A]=true
    
    set s__AbilityData_Cost1[A]=50 + 50 * lvl
    
    set s__AbilityData_Range1[A]=800

    set s__AbilityData_Cooldown1[A]=15
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Frost Armor
//===========================================================================
function AUfu_initparam takes nothing returns nothing
    set PARAMETR_NAME="Frost Armor"
    set PARAMETR_TOOLTIP="Creates a shield of frost around a target friendly unit that lasts for !PAR2! seconds. The shield adds !PAR1! armor and slows melee units that attack it for a few seconds."
endfunction


function AUfu_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A

    set s__AbilityData_Param1[A]=11 * lvl
    set s__AbilityData_Param1Field[A]='Ufa2'
    
    set s__AbilityData_Param2[A]=20
    set s__AbilityData_Param2Field[A]='Ufa1'
      
    
    set s__AbilityData_Cost1[A]=25 + 25 * lvl
    
    set s__AbilityData_Range1[A]=800

    set s__AbilityData_Cooldown1[A]=3
    set s__AbilityData_DurationNormal1[A]=4
    set s__AbilityData_DurationHero1[A]=4
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Frost Nova
//===========================================================================
function AUfn_initparam takes nothing returns nothing
    set PARAMETR_DMG=890014
    set PARAMETR_DMG2=890015

    set PARAMETR_NAME="Frost Nova"
    set PARAMETR_TOOLTIP="Blasts enemy units with a wave of frost that deals !DMG1! damage to the target, and !DMG2! nova damage. Cold damage slows units' movement and attack rate for a short period of time."
endfunction


function AUfn_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=- 100 + ( 150 * lvl )
    set s__AbilityData_Damage2[A]=25 + ( 75 * lvl )
      
    
    set s__AbilityData_Cost1[A]=125 + 25 * lvl
    set s__AbilityData_Area1[A]=200
    
    set s__AbilityData_Range1[A]=800
    
    set s__AbilityData_DurationNormal1[A]=1 * lvl
    set s__AbilityData_DurationHero1[A]=1 * lvl

    set s__AbilityData_Cooldown1[A]=8
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Impale
//===========================================================================
function AUim_initparam takes nothing returns nothing
    set PARAMETR_DMG=890016

    set PARAMETR_NAME="Impale"
    set PARAMETR_TOOLTIP="Slams the ground, shooting spiked tendrils out in a straight line, dealing !DMG1! damage and hurling enemy ground units into the air in their wake, stunning them for a few seconds."
endfunction


function AUim_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=( 200 + ( lvl * 3 ) ) * lvl
      
    set s__AbilityData_Area1[A]=325
    set s__AbilityData_Range1[A]=700
    set s__AbilityData_Cooldown1[A]=9
    set s__AbilityData_DurationNormal1[A]=5
    set s__AbilityData_DurationHero1[A]=2 + ( 0.01 * lvl )
    set s__AbilityData_Cost1[A]=100 + 10 * lvl
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Spiked Carapace
//===========================================================================
function AUts_initparam takes nothing returns nothing
    set PARAMETR_NAME="Spiked Carapace"
    set PARAMETR_TOOLTIP="Enhances the hero's chitinous armor with organic barbs, giving the hero !PAR2! bonus armor and returning !PAR1!% of melee attack damage to enemies."
endfunction


function AUts_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=0.01 * lvl
    set s__AbilityData_Param1Chance[A]=true
    set s__AbilityData_Param2[A]=5 * lvl
    set s__AbilityData_Param2Field[A]='Uts3'
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Unholy Aura
//===========================================================================
function AUau_initparam takes nothing returns nothing
    set PARAMETR_NAME="Unholy Aura"
    set PARAMETR_TOOLTIP="Increases nearby friendly units' movement speed by !PAR1!% and life regeneration rate by !PAR2! hit points per second."
endfunction


function AUau_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A

    set s__AbilityData_Param1[A]=0.05 + ( 0.05 * lvl )
    set s__AbilityData_Param1Field[A]='Uau1'
    set s__AbilityData_Param1Chance[A]=true
    
    set s__AbilityData_Param2[A]=15 * lvl
    set s__AbilityData_Param2Field[A]='Uau2'
    
    set s__AbilityData_Area1[A]=900
    
    set u=null
endfunction 
//===========================================================================
// Trigger: AntiMagic Shell
//===========================================================================
function Aam2_initparam takes nothing returns nothing
    set PARAMETR_NAME="Anti-Magic Shell"
    set PARAMETR_TOOLTIP="Creates a barrier that stops !PAR1! points of spell or magic damage from affecting the target unit."
endfunction


function Aam2_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=2500 * lvl
    set s__AbilityData_Param1Field[A]='Ams3'
    
    set s__AbilityData_Range1[A]=500
    set s__AbilityData_Cooldown1[A]=8
    set s__AbilityData_DurationHero1[A]=15
    set s__AbilityData_DurationNormal1[A]=15
    set s__AbilityData_Cost1[A]=15 + ( 35 * lvl )
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Curse
//===========================================================================
function Acrs_initparam takes nothing returns nothing
    set PARAMETR_NAME="Curse"
    set PARAMETR_TOOLTIP="Curses a target enemy unit, causing it to have a !PAR1!% chance to miss on an attack."
endfunction


function Acrs_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=0.03 * lvl
    set s__AbilityData_Param1Field[A]='Crs1'
    set s__AbilityData_Param1Chance[A]=true
      
    set s__AbilityData_Range1[A]=700
    set s__AbilityData_Cooldown1[A]=3
    set s__AbilityData_DurationNormal1[A]=20
    set s__AbilityData_DurationHero1[A]=6 + ( 1 * lvl )
    set s__AbilityData_Cost1[A]=28 + 12 * lvl
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Raise Dead
//===========================================================================
function Arai_initparam takes nothing returns nothing
    set PARAMETR_NAME="Raise Dead"
    set PARAMETR_TOOLTIP="Raises 2 skeletons from a corpse."
endfunction


function Arai_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_SummonId1[A]='uske'
    set s__AbilityData_Param1[A]=1
    set s__AbilityData_Param1Field[A]='Rai1'
    
    set s__AbilityData_SummonId2[A]='uskm'
    set s__AbilityData_Param1[A]=1
    set s__AbilityData_Param1Field[A]='Rai2'
    
    
    set s__AbilityData_Range1[A]=600
    set s__AbilityData_Cooldown1[A]=4
    set s__AbilityData_DurationNormal1[A]=45
    set s__AbilityData_Cost1[A]=60 + ( 15 * lvl )
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Unholy Frenzy
//===========================================================================
function Auhf_initparam takes nothing returns nothing
    set PARAMETR_DMG=890017
    set PARAMETR_NAME="Unholy Frenzy"
    set PARAMETR_TOOLTIP="Increases the attack rate of a target unit by !PAR1!%, but drains !DMG1! hit points per second."
endfunction


function Auhf_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=3
    set s__AbilityData_Param1Field[A]='Uhf1'
    set s__AbilityData_Param1Chance[A]=true
    
    set s__AbilityData_Damage1[A]=( 25 + ( lvl * 5 ) ) * lvl
      
    set s__AbilityData_Range1[A]=1000
    set s__AbilityData_Cooldown1[A]=3
    set s__AbilityData_DurationNormal1[A]=4 + ( 2 * lvl )
    set s__AbilityData_DurationHero1[A]=4 + ( 2 * lvl )
    set s__AbilityData_Cost1[A]=25 + 25 * lvl
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Blink
//===========================================================================
function AEbl_initparam takes nothing returns nothing
    set PARAMETR_NAME="Blink"
    set PARAMETR_TOOLTIP="Teleports a short distance, allowing the Hero to move in and out of combat."
endfunction


function AEbl_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=1200
    set s__AbilityData_Param1Field[A]='AEbl'
      
    set s__AbilityData_Cooldown1[A]=RMaxBJ(10 - ( 0.334 * lvl ), 0)
    set s__AbilityData_Cost1[A]=70 - ( 5 * lvl )
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Entangling Roots
//===========================================================================
function AEer_initparam takes nothing returns nothing
    set PARAMETR_DMG=890018
    
    set PARAMETR_NAME="Entangling Roots"
    set PARAMETR_TOOLTIP="Causes roots to burst from the ground, immobilizing and disarming a target enemy unit for a few seconds, and dealing !DMG1! damage per second."
endfunction


function AEer_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=( 20 + ( lvl * 3 ) ) * lvl // lvl 1 = 23, lvl 30 = 3300
      
    set s__AbilityData_Range1[A]=600
    set s__AbilityData_Cooldown1[A]=14
    set s__AbilityData_DurationNormal1[A]=5 + ( 0.034 * lvl )
    set s__AbilityData_DurationHero1[A]=4.5
    set s__AbilityData_Cost1[A]=70 + 15 * lvl
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Rejuvenation
//===========================================================================
function A087_initparam takes nothing returns nothing
    set PARAMETR_NAME="Rejuvenation"
    set PARAMETR_TOOLTIP="Heals a target friendly unit for !PAR1! hit points and restores !PAR2! mana over a short period of time."
endfunction


function A087_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=( 950 + 50 * lvl ) * lvl
    set s__AbilityData_Param2[A]=( 950 + 50 * lvl ) * lvl
    
    set s__AbilityData_Cost1[A]=140 * lvl
    set s__AbilityData_Range1[A]=600


    set s__AbilityData_DurationHero1[A]=10
    set s__AbilityData_DurationNormal1[A]=10
    set s__AbilityData_Cooldown1[A]=12
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Tranquility
//===========================================================================
function A089_initparam takes nothing returns nothing
    set PARAMETR_NAME="Tranquility"
    set PARAMETR_TOOLTIP="Causes rains of healing energy to pour down in a large area, healing friendly allied units for !PAR1! hit points every !PAR2! seconds."
endfunction


function A089_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    set s__AbilityData_Param1[A]=( 23 + 2 * lvl ) * lvl
    set s__AbilityData_Param2[A]=1 - 0.8 * lvl / ( 50 + lvl )
    set s__AbilityData_Cost1[A]=250 * lvl
    set s__AbilityData_DurationHero1[A]=12
    set s__AbilityData_DurationNormal1[A]=12
    set s__AbilityData_Area1[A]=600
    set s__AbilityData_Cooldown1[A]=60
    set u=null
endfunction 
//===========================================================================
// Trigger: Thorns
//===========================================================================
function AEah_initparam takes nothing returns nothing
    set PARAMETR_NAME="Thorns"
    set PARAMETR_TOOLTIP="When the hero takes attack damage, the enemy loses !PAR1!% of that damage."
endfunction


function AEah_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    set s__AbilityData_Param1[A]=0.01 * lvl
    set s__AbilityData_Param1Chance[A]=true
    set u=null
endfunction 
//===========================================================================
// Trigger: Evasion
//===========================================================================
function AEev_initparam takes nothing returns nothing
    set PARAMETR_NAME="Evasion"
    set PARAMETR_TOOLTIP="Increases the Hero's evasion by !PAR1!."
endfunction


function AEev_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    set s__AbilityData_Param1[A]=2 * lvl
    set u=null
endfunction 
//===========================================================================
// Trigger: Fan of Knives
//===========================================================================
function AEfk_initparam takes nothing returns nothing
    set PARAMETR_DMG=890019

    set PARAMETR_NAME="Fan of Knives"
    set PARAMETR_TOOLTIP="The Hero hurls a flurry of knives, damaging nearby enemies. Each knife does !DMG1! damage."
endfunction


function AEfk_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=75 * lvl
    
    set s__AbilityData_Param1[A]=999999
    set s__AbilityData_Param1Field[A]='Efk2'
    
    set s__AbilityData_Area1[A]=385 + 15 * lvl
    
    set s__AbilityData_Cooldown1[A]=9
    set s__AbilityData_Cost1[A]=50 + 5 * lvl
    set u=null
endfunction 
//===========================================================================
// Trigger: Immolation
//===========================================================================
function AEim_initparam takes nothing returns nothing
    set PARAMETR_DMG=890020
    set PARAMETR_NAME="Immolation"
    set PARAMETR_TOOLTIP="Activate Immolation to engulf this unit in flames, causing !DMG1! damage per second to nearby enemy land units. |nDrains !PAR1! mana per second until deactivated."
endfunction


function AEim_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=( 25 + ( lvl * 3 ) ) * lvl // lvl 1 = 28, lvl 30 = 3450
    
    set s__AbilityData_Param1[A]=( 20 + lvl ) * lvl // lvl 1 = 21, lvl 30 = 1500
    set s__AbilityData_Param1Field[A]='Eim3'
    
    set s__AbilityData_Param2[A]=( 20 + lvl ) * lvl // lvl 1 = 21, lvl 30 = 1500
    set s__AbilityData_Param2Field[A]='Eim2'
    
    set s__AbilityData_Area1[A]=175
    
    set s__AbilityData_Cooldown1[A]=3
    set s__AbilityData_Cost1[A]=25 + ( 15 * lvl )
    set u=null
endfunction 
//===========================================================================
// Trigger: Searing Arrows
//===========================================================================
function AHfa_initparam takes nothing returns nothing
    set PARAMETR_NAME="Searing Arrows"
    set PARAMETR_TOOLTIP="|cffffcc00Unique Attack Modifier|r|nAdds !PAR1! bonus fire damage to an attack against enemies, but drains mana with each shot fired."
endfunction


function AHfa_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=( 50 + ( lvl * 13 ) ) * lvl // lvl 1 = 63, lvl 30 = 13200
    set s__AbilityData_Param1Field[A]='Hfa1'
    
    set s__AbilityData_Cost1[A]=75 * lvl
    set u=null
endfunction 
//===========================================================================
// Trigger: Shadow Strike
//===========================================================================
function AEsh_initparam takes nothing returns nothing
    set PARAMETR_DMG=890021
    set PARAMETR_DMG2=890022
    
    set PARAMETR_NAME="Shadow Strike"
    set PARAMETR_TOOLTIP="Hurls a poisoned dagger at a target enemy unit, dealing !DMG1! initial damage, and !DMG2! damage every !CAST1! seconds. The poison slows the movement speed of the targeted unit by !PAR1!% for a short duration."
endfunction


function AEsh_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=75 * lvl
    set s__AbilityData_Damage2[A]=20 * lvl
    
    set s__AbilityData_Param2[A]=75 * lvl
    set s__AbilityData_Param2Field[A]='Esh5'
    
    set s__AbilityData_Param1[A]=- 0.01 + ( 0.02 * lvl )
    set s__AbilityData_Param1Field[A]='Esh2'
    set s__AbilityData_Param1Chance[A]=true
    
    set s__AbilityData_CastingTime1[A]=3
    set s__AbilityData_Range1[A]=500 + ( 50 * lvl )
    set s__AbilityData_Cooldown1[A]=6
    set s__AbilityData_DurationNormal1[A]=14.8 + ( 0.3 * lvl )
    set s__AbilityData_DurationHero1[A]=14.8 + ( 0.3 * lvl )
    set s__AbilityData_Cost1[A]=50 + 15 * lvl

    set u=null
endfunction 
//===========================================================================
// Trigger: Starfall
//===========================================================================
function AEsf_initparam takes nothing returns nothing
    set PARAMETR_DMG=- 890023

    set PARAMETR_NAME="Starfall"
    set PARAMETR_TOOLTIP="Calls down waves of falling stars that damage nearby enemy units. Each wave deals !DMG1! damage."
endfunction


function AEsf_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Damage1[A]=( 75 + ( lvl * 3 ) ) * lvl // lvl 1 = 79, lvl 30 = 4950
    
    set s__AbilityData_Param1[A]=0.81 - ( 0.01 * lvl )
    set s__AbilityData_Param1Field[A]='Esf2'
    
    set s__AbilityData_Area1[A]=500
    set s__AbilityData_DurationNormal1[A]=30
    set s__AbilityData_Cooldown1[A]=12
    set s__AbilityData_Cost1[A]=80 + 10 * lvl
    set u=null
endfunction 
//===========================================================================
// Trigger: Summon Mountain Giant
//===========================================================================
function AEsv_initparam takes nothing returns nothing
    set PARAMETR_NAME="Summon Mountain Giant"
    set PARAMETR_TOOLTIP="Summons a massive melee unit that can disrupt enemy attackers and take incredible amounts of punishment. Has the Taunt and Hardened Skin abilities."
endfunction


function AEsv_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_SummonId1[A]='e00N'
    
    set s__AbilityData_Cost1[A]=225 + ( 25 * lvl )
    set s__AbilityData_DurationHero1[A]=30
    set s__AbilityData_DurationNormal1[A]=30
    set s__AbilityData_Cooldown1[A]=45
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Trueshot Aura
//===========================================================================
function AEar_initparam takes nothing returns nothing
    set PARAMETR_NAME="Trueshot Aura  "
    set PARAMETR_TOOLTIP="An aura that gives friendly nearby units a !PAR1!% bonus damage to their attacks."
endfunction


function AEar_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=0.05 * lvl
    set s__AbilityData_Param1Field[A]='Ear1'
    set s__AbilityData_Param1Chance[A]=true
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Faerie Fire
//===========================================================================
function Afae_initparam takes nothing returns nothing
    set PARAMETR_NAME="Faerie Fire"
    set PARAMETR_TOOLTIP="Reduces a target enemy unit's armor by !PAR1! and gives vision of that unit."
endfunction


function Afae_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=15 * lvl // lvl 1 = 23, lvl 30 = 3300
    set s__AbilityData_Param1Field[A]='Fae1'
    set s__AbilityData_Param1FieldType[A]=1
    
    set s__AbilityData_Range1[A]=700
    set s__AbilityData_Cooldown1[A]=3
    set s__AbilityData_DurationNormal1[A]=30
    set s__AbilityData_DurationHero1[A]=30
    set s__AbilityData_Cost1[A]=20 + 25 * lvl
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Hardened Skin
//===========================================================================
function Assk_initparam takes nothing returns nothing
    set PARAMETR_NAME="Hardened Skin"
    set PARAMETR_TOOLTIP="Increases the Hero's block by !PAR1!."
endfunction


function Assk_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Param1[A]=50 * lvl
    
    set u=null
endfunction 
//===========================================================================
// Trigger: Phase Shift
//===========================================================================
function Apsh_initparam takes nothing returns nothing
    set PARAMETR_NAME="Phase Shift"
    set PARAMETR_TOOLTIP="Causes this unit to shift out of existence whenever it takes damage, temporarily avoiding any further damage."
endfunction


function Apsh_lvl takes nothing returns nothing
    local unit u= GLOBAL_HERO_U
    local real lvl= GLOBAL_HERO_LVL
    local integer A= GLOBAL_HERO_A
    
    set s__AbilityData_Cooldown1[A]=RMaxBJ(21 - ( 1 * lvl ), 0)
    set s__AbilityData_DurationNormal1[A]=0.5 * lvl
    set s__AbilityData_DurationHero1[A]=0.5 * lvl
    set s__AbilityData_Cost1[A]=5 + 15 * lvl
    
    set u=null
endfunction 
//===========================================================================
// Trigger: DamageAbilty
//===========================================================================
    
    function s__DamageAbility_create takes integer id,integer number returns integer
        local integer D= s__DamageAbility__allocate()
        set s__DamageAbility_id[D]=id
        set s__DamageAbility_number[D]=number
        return D
    endfunction
//===========================================================================
// Trigger: InitSpells
//===========================================================================

function SetFunctionAbilityLvl takes integer id,string s returns nothing
    local integer D= 0
    
    call SaveStr(HT_abilsys, id, 1, s + "_lvl")
    set PARAMETR_DMG=0
    set PARAMETR_DMG2=0
    set PARAMETR_DMG3=0
    set PARAMETR_TOOLTIP=null
    set PARAMETR_NAME=null
    call ExecuteFunc(s + "_initparam")
    if PARAMETR_DMG != 0 then
        set D=s__DamageAbility_create(id , 1)
        call SaveInteger(HT_abilsys, id, 2, PARAMETR_DMG)
        call SaveInteger(HT_abilsys, PARAMETR_DMG, 3, D)
    endif
    if PARAMETR_DMG2 != 0 then
        set D=s__DamageAbility_create(id , 2)
        call SaveInteger(HT_abilsys, id, 6, PARAMETR_DMG2)
        call SaveInteger(HT_abilsys, PARAMETR_DMG2, 3, D)
    endif
    if PARAMETR_DMG3 != 0 then
        set D=s__DamageAbility_create(id , 3)
        call SaveInteger(HT_abilsys, id, 6, PARAMETR_DMG3)
        call SaveInteger(HT_abilsys, PARAMETR_DMG3, 3, D)
    endif
    if PARAMETR_TOOLTIP != null then
      call SaveStr(HT_abilsys, id, 4, PARAMETR_TOOLTIP)
    endif
    if PARAMETR_NAME != null then
      call SaveStr(HT_abilsys, id, 5, PARAMETR_NAME)
    endif
endfunction 


function SetStats takes unit u,integer id,integer A returns nothing
    local ability abil= BlzGetUnitAbility(u, id)
    call SetUnitAbilityLevel(u, id, 2)
    
    if s__AbilityData_Param1Field[A] != 0 then
        call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, I2S(s__AbilityData_Param1Field[A]))
     if s__AbilityData_Param1FieldType[A] == 0 then
        call BlzSetAbilityRealLevelField(abil, ConvertAbilityRealLevelField(s__AbilityData_Param1Field[A]), 0, s__AbilityData_GetParam1(A))
     else
        call BlzSetAbilityIntegerLevelField(abil, ConvertAbilityIntegerLevelField(s__AbilityData_Param1Field[A]), 0, R2I(s__AbilityData_GetParam1(A)))
     endif
    endif
    if s__AbilityData_Param2Field[A] != 0 then
            call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, I2S(s__AbilityData_Param2Field[A]))
         if s__AbilityData_Param2FieldType[A] == 0 then
     call BlzSetAbilityRealLevelField(abil, ConvertAbilityRealLevelField(s__AbilityData_Param2Field[A]), 0, s__AbilityData_GetParam2(A))
          else
        call BlzSetAbilityIntegerLevelField(abil, ConvertAbilityIntegerLevelField(s__AbilityData_Param2Field[A]), 0, R2I(s__AbilityData_GetParam2(A)))
     endif
    endif
    if s__AbilityData_Param3Field[A] != 0 then
            call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, I2S(s__AbilityData_Param3Field[A]))
         if s__AbilityData_Param3FieldType[A] == 0 then
     call BlzSetAbilityRealLevelField(abil, ConvertAbilityRealLevelField(s__AbilityData_Param3Field[A]), 0, s__AbilityData_GetParam3(A))
          else
        call BlzSetAbilityIntegerLevelField(abil, ConvertAbilityIntegerLevelField(s__AbilityData_Param3Field[A]), 0, R2I(s__AbilityData_GetParam3(A)))
     endif
    endif
    if s__AbilityData_Param4Field[A] != 0 then
            call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, I2S(s__AbilityData_Param4Field[A]))
         if s__AbilityData_Param4FieldType[A] == 0 then
     call BlzSetAbilityRealLevelField(abil, ConvertAbilityRealLevelField(s__AbilityData_Param4Field[A]), 0, s__AbilityData_GetParam4(A))
          else
        call BlzSetAbilityIntegerLevelField(abil, ConvertAbilityIntegerLevelField(s__AbilityData_Param4Field[A]), 0, R2I(s__AbilityData_GetParam4(A)))
     endif
    endif
    if s__AbilityData_Param5Field[A] != 0 then
            call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, I2S(s__AbilityData_Param5Field[A]))
         if s__AbilityData_Param5FieldType[A] == 0 then
     call BlzSetAbilityRealLevelField(abil, ConvertAbilityRealLevelField(s__AbilityData_Param5Field[A]), 0, s__AbilityData_GetParam5(A))
          else
        call BlzSetAbilityIntegerLevelField(abil, ConvertAbilityIntegerLevelField(s__AbilityData_Param5Field[A]), 0, R2I(s__AbilityData_GetParam5(A)))
     endif
    endif
    if s__AbilityData_Param6Field[A] != 0 then
            call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, I2S(s__AbilityData_Param6Field[A]))
         if s__AbilityData_Param6FieldType[A] == 0 then
     call BlzSetAbilityRealLevelField(abil, ConvertAbilityRealLevelField(s__AbilityData_Param6Field[A]), 0, s__AbilityData_GetParam6(A))
          else
        call BlzSetAbilityIntegerLevelField(abil, ConvertAbilityIntegerLevelField(s__AbilityData_Param6Field[A]), 0, R2I(s__AbilityData_GetParam6(A)))
     endif
    endif
      
      
    if s__AbilityData_DurationHero1[A] != NULL then
        call BlzSetAbilityRealLevelField(abil, ConvertAbilityRealLevelField('ahdu'), 0, s__AbilityData_GetDurationHero1(A))
    endif
    
    if s__AbilityData_DurationNormal1[A] != NULL then
        call BlzSetAbilityRealLevelField(abil, ConvertAbilityRealLevelField('adur'), 0, s__AbilityData_GetDurationNormal1(A))
    endif
    
    call BlzSetUnitAbilityManaCost(u, id, 0, R2I(s__AbilityData_GetCost1(A)))
    call BlzSetUnitAbilityCooldown(u, id, 0, R2I(s__AbilityData_GetCooldown1(A)))
    
    if s__AbilityData_CastingTime1[A] != NULL then
        call BlzSetAbilityRealLevelField(abil, ConvertAbilityRealLevelField('acas'), 0, s__AbilityData_GetCastingTime1(A))
    endif
    call BlzSetAbilityRealLevelField(abil, ConvertAbilityRealLevelField('aare'), 0, s__AbilityData_GetArea1(A))
    call SetUnitAbilityLevel(u, id, 1)
    set abil=null
endfunction

function DummyInitAbil takes unit Hero,unit Dummy,integer id returns nothing
    local integer A= GetAbilityData(Hero , id)
    call SetStats(Dummy , id , A)
endfunction


function AddSpellLvl takes unit u,integer id returns nothing
    local integer A= GetAbilityData(u , id)
    if s__AbilityData_Level[A] <= 30 then
        set s__AbilityData_Level[A]=s__AbilityData_Level[A] + 1
    else
        set s__AbilityData_Level[A]=s__AbilityData_Level[A] + 0.1
    endif
    set GLOBAL_HERO_U=u
    set GLOBAL_HERO_A=A
    set GLOBAL_HERO_LVL=s__AbilityData_Level[A] + s__AbilityData_BonusLevel[A]
    call ExecuteFunc(LoadStr(HT_abilsys, id, 1))
    call SetStats(u , id , A)

endfunction

function AddAbilityData takes unit u,integer id returns nothing
    local integer A= s__AbilityData__allocate()
    set s__AbilityData_Level[A]=1
    set GLOBAL_HERO_U=u
    set GLOBAL_HERO_A=A
    set GLOBAL_HERO_LVL=1
    call SaveInteger(HT_abilsys, GetHandleId(u), id, A)
    call ExecuteFunc(LoadStr(HT_abilsys, id, 1))
    call SetStats(u , id , A)
endfunction


function TempAbilityData takes integer id,real lvl returns integer
    local integer A= s__AbilityData__allocate()
    set s__AbilityData_Level[A]=lvl
    set GLOBAL_HERO_U=null
    set GLOBAL_HERO_A=A
    set GLOBAL_HERO_LVL=lvl
    call ExecuteFunc(LoadStr(HT_abilsys, id, 1))
    return A
endfunction



function Trig_InitSpells_Actions takes nothing returns nothing
    local integer i= 1
    loop
        exitwhen i > udg_integer26
        call SetFunctionAbilityLvl(udg_integers08[i] , raw2s(udg_integers08[i]))
        set i=i + 1
    endloop
endfunction

//===========================================================================
function InitTrig_InitSpells takes nothing returns nothing
    set gg_trg_InitSpells=CreateTrigger()
    call TriggerRegisterTimerEventSingle(gg_trg_InitSpells, 0.00)
    call TriggerAddAction(gg_trg_InitSpells, function Trig_InitSpells_Actions)
endfunction


//===========================================================================
// Trigger: test
//===========================================================================
function Trig_test_Actions takes nothing returns nothing
   // call DisplayTextToPlayer(GetLocalPlayer(),0,0,I2S(GetHandleId(ConvertAbilityRealField(1))) )
    
endfunction

//===========================================================================
function InitTrig_test takes nothing returns nothing
    set gg_trg_test=CreateTrigger()
    call TriggerRegisterPlayerEventEndCinematic(gg_trg_test, Player(0))
    call TriggerAddAction(gg_trg_test, function Trig_test_Actions)
endfunction


//===========================================================================
// Trigger: Abil
//===========================================================================



function damageStartCyclone takes nothing returns boolean
    if IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GLOB_unitCyclone)) then
        call UnitDamageTarget(GLOB_unitCyclone, GetFilterUnit(), GLOB_damageCyclone, false, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_LIGHTNING, WEAPON_TYPE_WHOKNOWS)

    endif
    return false
endfunction

function timerCyclone takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u= LoadUnitHandle(HT, GetHandleId(t), 2)
    local unit caster= LoadUnitHandle(HT, GetHandleId(t), 1)
    local group g= CreateGroup()
    
    if GetWidgetLife(u) > 0.45 then
        set GLOB_unitCyclone=caster
        set GLOB_damageCyclone=GetUnitAbilityLevel(caster, 'A05X') * 10
        call GroupEnumUnitsInRange(GLOB_gr, GetUnitX(u), GetUnitY(u), 350, GLOB_boolCyclone)
    
    else
        call FlushChildHashtable(HT, GetHandleId(t))
        call DestroyTimer(t)
    endif
    
    
    set u=null
    set t=null
    set caster=null
endfunction

function Trig_Abil_Conditions takes nothing returns boolean
    local real X1
    local real Y1
    local unit u
    local timer t
    
    if GetSpellAbilityId() == 'A05X' then
       set X1=GetSpellTargetX()
       set Y1=GetSpellTargetY()
       
        set u=CreateUnit(GetOwningPlayer(GetTriggerUnit()), 'h01K', X1, Y1, 0)
        call UnitApplyTimedLife(u, 'A041', 10)
        
        set t=CreateTimer()
        call SaveUnitHandle(HT, GetHandleId(t), 1, GetTriggerUnit())
        call SaveUnitHandle(HT, GetHandleId(t), 2, u)
        call TimerStart(t, 0.2, true, function timerCyclone)
        
        
        set u=null
        set t=null
    endif
    
    

    return false
endfunction



//===========================================================================
function InitTrig_Abil takes nothing returns nothing
    set gg_trg_Abil=CreateTrigger()
    set GLOB_boolCyclone=Condition(function damageStartCyclone)
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Abil, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerAddCondition(gg_trg_Abil, Condition(function Trig_Abil_Conditions))
endfunction


//===========================================================================
// Trigger: Untitled Trigger 002
//===========================================================================


function Trig_Untitled_Trigger_002_Actions takes nothing returns nothing

    call FreeInitChannel()
    

endfunction

//===========================================================================
function InitTrig_Untitled_Trigger_002 takes nothing returns nothing


    set gg_trg_Untitled_Trigger_002=CreateTrigger()
    call TriggerRegisterTimerEventSingle(gg_trg_Untitled_Trigger_002, 0.00)
    call TriggerAddAction(gg_trg_Untitled_Trigger_002, function Trig_Untitled_Trigger_002_Actions)
endfunction


//===========================================================================
// Trigger: UnitStateSys
//===========================================================================


function RandomAbilityLevel takes real id,unit hero returns real

    if id == 0 then
        return LoadReal(HT, GetHandleId(hero), - 4555101)
    endif
    
    return id

endfunction



function SummonUnit takes unit u returns nothing
local integer i= GetUnitTypeId(u)
local real i2= 0
local integer pid= GetPlayerId(GetOwningPlayer(u))
local unit hero= udg_units01[pid + 1]
local integer UpgradeU= 15 * UnitHasItemI(hero , 'I07K')
local real LvlWildD= GetUnitSpell(hero , 'A06X')
local real wild= 1 + GetUnitSummonStronger(hero) / 100



if LvlWildD > 0 then

call AddUnitMagicDef(u , 10 * LvlWildD)
call AddUnitEvasion(u , 1 * LvlWildD)
call AddUnitBlock(u , 10 * LvlWildD)

endif

if i == 'hwt3' or i == 'hwt2' or i == 'hwat' then

set i2=RandomAbilityLevel(GetUnitSpell(hero , 'AHwe') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, R2I(BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 25)), 0)
call AddUnitMagicDef(u , 15 * i2)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 8.9 + ( i2 ) ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 500))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))

elseif i == 'osw3' or i == 'osw2' or i == 'osw1' then

set i2=RandomAbilityLevel(GetUnitSpell(hero , 'AOsf') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 25), 0)
call AddUnitEvasion(u , 15 * i2)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 8.9 + ( i2 ) ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 500))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))

elseif i == 'osp3' or i == 'osp2' or i == 'osp1' then

set i2=RandomAbilityLevel(GetUnitSpell(hero , 'AOsw') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 30), 0)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 10.1 + ( i2 ) ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 300))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))

elseif i == 'uske' or i == 'uskm' then

set i2=RandomAbilityLevel(GetUnitSpell(hero , 'Arai') , hero) + UpgradeU

call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 100), 0)
call AddUnitEvasion(u , 15 * i2)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 8.9 + ( i2 ) ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 200))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))


elseif i == 'e00N' then

set i2=RandomAbilityLevel(GetUnitSpell(hero , 'AEsv') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 50), 0)
call AddUnitBlock(u , 500 * i2)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 8.9 + ( i2 ) ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 1500))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))


elseif i == 'nqb4' or i == 'nqb3' or i == 'nqb2' or i == 'nqb1' then

set i2=RandomAbilityLevel(GetUnitSpell(hero , 'Arsq') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 50), 0)
call BlzSetUnitRealField(u, ConvertUnitRealField('uhpr'), BlzGetUnitRealField(u, ConvertUnitRealField('uhpr')) + 25 * i2)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 8.9 + ( i2 ) ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 300))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))

elseif i == 'ngz3' or i == 'ngz2' or i == 'ngz1' then

set i2=RandomAbilityLevel(GetUnitSpell(hero , 'ANsg') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 30), 0)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 8.9 + ( i2 ) ) ), 0)
call BlzSetUnitArmor(u, BlzGetUnitArmor(u) + 20 * i2)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 500))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))


elseif i == 'nwe3' or i == 'nwe2' or i == 'nwe1' then

set i2=RandomAbilityLevel(GetUnitSpell(hero , 'ANsw') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 25), 0)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 7 / ( 12.1 + ( i2 ) ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 500))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))

elseif i == 'h009' then
set i2=RandomAbilityLevel(GetUnitSpell(hero , 'AHpx') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 400), 0)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 7 / ( 12.1 + ( i2 ) ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 5000))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))

elseif i == 'nlv3' or i == 'nlv2' or i == 'nlv1' then
set i2=RandomAbilityLevel(GetUnitSpell(hero , 'ANlm') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 15), 0)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 10.1 + ( i2 ) ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 700))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))
elseif i > 'n01N' and i <= 'n02G' then


set i2=UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 500), 0)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 20 / ( 20 + ( i2 ) ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 5000))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))

if i2 != 0 then
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))
endif

elseif i == 'n011' or i == 'n010' then

set i2=RandomAbilityLevel(GetUnitSpell(hero , 'ANsy') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 30), 0)
call AddUnitMagicDmg(u , 45 * i2)
call AddUnitMagicDef(u , 15 * i2)
call AddUnitEvasion(u , 5 * i2)
call BlzSetUnitArmor(u, BlzGetUnitArmor(u) + 5 * i2)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 8.9 + ( i2 ) ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 500))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))

elseif i == 'h015' then

set i2=RandomAbilityLevel(GetUnitSpell(hero , 'ANba') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 30), 0)
call AddUnitMagicDef(u , 5 * i2)
call AddUnitEvasion(u , 5 * i2)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 8.9 + i2 ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 175))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))


elseif i == 'ncfs' then

set i2=RandomAbilityLevel(GetUnitSpell(hero , 'ANpa') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 30), 0)
call AddUnitMagicDef(u , 5 * i2)
call AddUnitEvasion(u , 5 * i2)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 8.9 + i2 ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 175))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))




elseif i == 'u001' then

set i2=RandomAbilityLevel(GetUnitSpell(hero , 'AUcb') , hero) + UpgradeU
call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 35), 0)
call AddUnitMagicDef(u , 5 * i2)
call AddUnitEvasion(u , 5 * i2)
call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 8.9 + i2 ) ), 0)
call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 500))
call SetWidgetLife(u, BlzGetUnitMaxHP(u))
call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))



elseif i == 'n02S' or i == 'n02R' or i == 'h01A' or i == 'u003' then
    set i2=UpgradeU
    call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(i2 * 30), 0)
    call AddUnitMagicDef(u , 5 * i2)
    call AddUnitEvasion(u , 5 * i2)
    call BlzSetUnitAttackCooldown(u, BlzGetUnitAttackCooldown(u, 0) * ( 8 / ( 8 + ( i2 ) ) ), 0)
    call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(i2 * 250))
    call SetWidgetLife(u, BlzGetUnitMaxHP(u))
    
    
if i2 != 0 then
    call BlzSetUnitName(u, GetUnitName(u) + " level " + FixReal(i2))
endif


endif

if wild != 1 then
    
      call BlzSetUnitBaseDamage(u, R2I(( BlzGetUnitBaseDamage(u, 0) ) * wild), 0)
      call BlzSetUnitMaxHP(u, R2I(( BlzGetUnitMaxHP(u) ) * wild))
      call SetWidgetLife(u, BlzGetUnitMaxHP(u))
endif


if i == 'u003' then
    set SkeletonDefender[pid]=SkeletonDefender[pid] + 1
endif

set u=null
set hero=null
endfunction



function SummonUnitS takes nothing returns nothing
    local timer t= GetExpiredTimer()
    call SummonUnit(LoadUnitHandle(HT, GetHandleId(t), 1))
    call FlushChildHashtable(HT, GetHandleId(t))
    call DestroyTimer(t)
    set t=null
endfunction



function Trig_UnitStateSys_Actions takes nothing returns nothing
///call UnitAddAbility(GetTriggerUnit(),'A06K')
local timer t= null
call UnitAddAbility(GetTriggerUnit(), 'A057')
call BlzUnitDisableAbility(GetTriggerUnit(), 'A057', false, true)

if GetUnitTypeId(GetTriggerUnit()) == 'H017' then
call AddUnitBlock(GetTriggerUnit() , 50)
call AddUnitMagicDef(GetTriggerUnit() , 15)
endif


if GetUnitTypeId(GetTriggerUnit()) == 'H01G' then
call AddUnitMagicDmg(GetTriggerUnit() , 5)
endif


if GetUnitTypeId(GetTriggerUnit()) == 'O00C' then
call AddUnitEvasion(GetTriggerUnit() , 10)
endif


if GetUnitTypeId(GetTriggerUnit()) == 'H00A' then
    call AddUnitPvpBonus(GetTriggerUnit() , 15)
endif

if IsHeroUnitId(GetUnitTypeId(GetTriggerUnit())) == false then
    set t=CreateTimer()
    call SaveUnitHandle(HT, GetHandleId(t), 1, GetTriggerUnit())
    call TimerStart(t, 0, false, function SummonUnitS)
endif



set t=null
endfunction

//===========================================================================
function InitTrig_UnitStateSys takes nothing returns nothing
    set gg_trg_UnitStateSys=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_UnitStateSys, GetPlayableMapRect())
    call TriggerAddAction(gg_trg_UnitStateSys, function Trig_UnitStateSys_Actions)
endfunction


//===========================================================================
// Trigger: LossHp
//===========================================================================
function LossHp takes unit u1,unit u2,real hp returns nothing

    if hp < GetWidgetLife(u2) + 0.405 then
        call SetWidgetLife(u2, GetWidgetLife(u2) - hp)
    else
        call SetWidgetLife(u2, 1)
    endif

    set u1=null
    set u2=null
endfunction
//===========================================================================
// Trigger: HealController
//===========================================================================
function HealUnit takes unit u1,unit u2,real hp returns nothing


    call SetWidgetLife(u2, GetWidgetLife(u2) + hp)
endfunction
//===========================================================================
// Trigger: VampirsmController
//===========================================================================





function Vamp takes unit u1,unit u2,real vamp returns nothing
    local real V1= 0
    local real V2= 0
    local integer i1= 0
    

    set i1=GetUnitAbilityLevel(u1, 'A07R')
    if i1 > 0 then
    
        set V1=LoadReal(HT, GetHandleId(u1), - 93000)
        set V2=LoadReal(HT, GetHandleId(u1), - 93001)
        
        if V2 == 0 then
            set V2=50
        endif
        
        set V1=vamp + V1
        
        
        loop
            exitwhen V2 > V1
            
            set V1=V1 - V2
            set V2=V2 + 1
            call BlzSetUnitMaxHP(u1, BlzGetUnitMaxHP(u1) + 4)
        endloop
        
        
        call SaveReal(HT, GetHandleId(u1), - 93000, V1)
        call SaveReal(HT, GetHandleId(u1), - 93001, V2)
    endif
    

    call SetWidgetLife(u1, GetWidgetLife(u1) + vamp)
    set u1=null
    set u2=null
endfunction

//===========================================================================
// Trigger: AOE DMG
//===========================================================================



function DamageRealase takes nothing returns boolean
    if IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(Sourse_unit)) and GetWidgetLife(GetFilterUnit()) > 0.405 then
        set Attack_AbilId=ABILGLOB
        set TypeDmg_b=2
        call UnitDamageTarget(Sourse_unit, GetFilterUnit(), Dmg_ef, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
    endif

    return false
endfunction

function AreaDamageTimer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local unit Sourse= LoadUnitHandle(HT, i, 1)
    local real x1= LoadReal(HT, i, 2)
    local real y1= LoadReal(HT, i, 3)
    local real Dmg= LoadReal(HT, i, 4)
    local real Area= LoadReal(HT, i, 5)
    local integer AbilId= LoadInteger(HT, i, 6)
    
    call DestroyTimer(t)
    call FlushChildHashtable(HT, i)
    
    set Sourse_unit=Sourse
    set Dmg_ef=Dmg
    set ABILGLOB=AbilId
    call GroupEnumUnitsInRange(Area_group, x1, y1, Area, BoolArray[0])
    
    set t=null
    set Sourse=null
endfunction

function AreaDamage takes unit Sourse,real x1,real y1,real Dmg,real Area,integer AbilId returns nothing
    local timer t
    local integer i
    if Sourse != null then
        set t=CreateTimer()
        set i=GetHandleId(t)
        
        call SaveUnitHandle(HT, i, 1, Sourse)
        call SaveReal(HT, i, 2, x1)
        call SaveReal(HT, i, 3, y1)
        call SaveReal(HT, i, 4, Dmg)
        call SaveReal(HT, i, 5, Area)
        call SaveInteger(HT, i, 6, AbilId)
        call TimerStart(t, 0, false, function AreaDamageTimer)
    endif
    
    set t=null
endfunction





function DamageRealasePhys takes nothing returns boolean
    if IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(Sourse_unit)) and GetWidgetLife(GetFilterUnit()) > 0.405 then
        set Attack_AbilId=ABILGLOB
        set GLOB_typeDmg=2
         call UnitDamageTarget(Sourse_unit, GetFilterUnit(), Dmg_ef, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
    endif

    return false
endfunction

function AreaDamageTimerPhys takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local unit Sourse= LoadUnitHandle(HT, i, 1)
    local real x1= LoadReal(HT, i, 2)
    local real y1= LoadReal(HT, i, 3)
    local real Dmg= LoadReal(HT, i, 4)
    local real Area= LoadReal(HT, i, 5)
    local integer AbilId= LoadInteger(HT, i, 6)
    
    call DestroyTimer(t)
    call FlushChildHashtable(HT, i)
    
    set Sourse_unit=Sourse
    set Dmg_ef=Dmg
    set ABILGLOB=AbilId
    call GroupEnumUnitsInRange(Area_group, x1, y1, Area, BoolArray[103])
    
    set t=null
    set Sourse=null
endfunction

function AreaDamagePhys takes unit Sourse,real x1,real y1,real Dmg,real Area,integer AbilId returns nothing
    local timer t
    local integer i
    if Sourse != null then
        set t=CreateTimer()
        set i=GetHandleId(t)
        
        call SaveUnitHandle(HT, i, 1, Sourse)
        call SaveReal(HT, i, 2, x1)
        call SaveReal(HT, i, 3, y1)
        call SaveReal(HT, i, 4, Dmg)
        call SaveReal(HT, i, 5, Area)
        call SaveInteger(HT, i, 6, AbilId)
        call TimerStart(t, 0, false, function AreaDamageTimerPhys)
    endif
    
    set t=null
endfunction






function DrainRealase takes nothing returns boolean
    local real hp
    local real dmg
    if IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(Sourse_unit)) and GetWidgetLife(GetFilterUnit()) > 0.405 then

        set hp=GetWidgetLife(GetFilterUnit())
        set dmg=Dmg_ef
        if hp - 0.405 <= dmg then
            set dmg=hp
            call SetWidgetLife(GetFilterUnit(), 1)
        else
            call SetWidgetLife(GetFilterUnit(), hp - dmg)
        endif
        
        if GLOB_LIFESTEAL then
            if IsHeroUnitId(GetUnitTypeId(GetFilterUnit())) then
            
                call Vamp(Sourse_unit , GetFilterUnit() , dmg)
            else
                call Vamp(Sourse_unit , GetFilterUnit() , dmg / 5)
            endif
        endif
        
        
    endif
    return false
    
endfunction

function AoeDrainAura takes unit u,real hp,real Area,boolean lifesteal returns nothing
    set Sourse_unit=u
    set Dmg_ef=hp
    set GLOB_LIFESTEAL=lifesteal
    call GroupEnumUnitsInRange(Area_group, GetUnitX(u), GetUnitY(u), Area, BoolArray[104])
endfunction




function DrainRealase2 takes nothing returns boolean
    local real hp
    local real dmg
    if IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(Sourse_unit)) and GetWidgetLife(GetFilterUnit()) > 0.405 then

        set hp=GetWidgetLife(GetFilterUnit())
        set dmg=Dmg_ef * hp / 100
            
        if hp - 0.405 <= dmg then
                    set dmg=hp
            call SetWidgetLife(GetFilterUnit(), 1)
        else
            call SetWidgetLife(GetFilterUnit(), hp - dmg)
        endif
        
        if GLOB_LIFESTEAL then
            if IsHeroUnitId(GetUnitTypeId(GetFilterUnit())) then
            
                call Vamp(Sourse_unit , GetFilterUnit() , dmg)
            else
                call Vamp(Sourse_unit , GetFilterUnit() , dmg / 5)
            endif
        endif
        
        
    endif
    return false
    
endfunction

function AoeDrainAura2 takes unit u,real hp,real Area,boolean lifesteal returns nothing
    set Sourse_unit=u
    set Dmg_ef=hp
    set GLOB_LIFESTEAL=lifesteal
    call GroupEnumUnitsInRange(Area_group, GetUnitX(u), GetUnitY(u), Area, BoolArray[105])
endfunction



function InitDamageArea takes nothing returns nothing


    set BoolArray[0]=Condition(function DamageRealase)
    set BoolArray[103]=Condition(function DamageRealasePhys)
    set BoolArray[104]=Condition(function DrainRealase)
    set BoolArray[105]=Condition(function DrainRealase2)
endfunction
//===========================================================================
// Trigger: Glory
//===========================================================================





function ResourseRefresh takes player Pl returns nothing
local integer pid= GetPlayerId(Pl)
local string S= "Glory:  " + I2S(R2I(Glory[pid]))


if GetLocalPlayer() == Pl then
    call BlzFrameSetText(ResPlayer, S)
endif

endfunction




function InitLState takes nothing returns nothing
  set ResPlayer=BlzGetFrameByName("ResourceBarUpkeepText", 0)

  set Glory[0]=0
  set Glory[1]=0
  set Glory[2]=0
  set Glory[3]=0
  set Glory[4]=0
  set Glory[5]=0
  set Glory[6]=0
  set Glory[7]=0
  set Glory[8]=0

endfunction






function FunWinner takes unit u returns nothing
    local integer pid= GetPlayerId(GetOwningPlayer(u))

    call ResourseRefresh(GetOwningPlayer(u))
    if udg_boolean08 == true then

	if WinCount[pid] != udg_integer02 then
           set Glory[pid]=Glory[pid] + 4000 + ( ( udg_integer02 / 5 ) - 1 ) * 2000
	   set WinCount[pid]=udg_integer02
        else
           set Glory[pid]=Glory[pid] + 2000 + ( ( udg_integer02 / 5 ) - 1 ) * 1000
	endif

    else

	if WinCount[pid] != udg_integer02 then
           set Glory[pid]=Glory[pid] + 3000 + ( ( udg_integer02 / 5 ) - 1 ) * 1000
	   set WinCount[pid]=udg_integer02
        else
           set Glory[pid]=Glory[pid] + 1500 + ( ( udg_integer02 / 5 ) - 1 ) * 500
	endif


    endif

     call ResourseRefresh(GetOwningPlayer(u))
    
endfunction
//===========================================================================
// Trigger: Functions
//===========================================================================


function LoadCountHeroSpell takes unit u,integer list returns integer
    return LoadInteger(HT_SpellPlayer, GetHandleId(u), - list)
endfunction
function SetInfoHeroSpell takes unit u,integer num,integer id returns nothing
    call SaveInteger(HT_SpellPlayer, GetHandleId(u), num, id)
    call SaveInteger(HT_SpellPlayer, GetHandleId(u), id, num)
endfunction





function SaveCountHeroSpell takes unit u,integer count,integer list returns nothing
    call SaveInteger(HT_SpellPlayer, GetHandleId(u), - list, count)
endfunction
function RemoveInfoHeroSpell takes unit u,integer id returns nothing
    local integer num=LoadInteger(HT_SpellPlayer, GetHandleId(u), id)
    call SaveInteger(HT_SpellPlayer, GetHandleId(u), num, 0)
    call SaveInteger(HT_SpellPlayer, GetHandleId(u), id, 0)
endfunction

function AddSpellPlayerInfo takes integer id,unit u,integer list returns nothing
    local integer i1= 1 + 10 * list
    local integer Count=  LoadCountHeroSpell(u , list)
    local integer Current= 1
    local integer InfoId
    local boolean HaveSpell= false
    loop
        set InfoId=GetInfoHeroSpell(u , i1)
        if ( InfoId == 0 ) and ( Current == 0 ) then
           set Current=i1
        endif
        
        if id == InfoId then
           set HaveSpell=true
        endif
        
        set i1=i1 + 1
    exitwhen ( i1 > 10 + 10 * list ) or ( HaveSpell )
    endloop
    if HaveSpell == false then
         set Count=Count + 1
         call SaveCountHeroSpell(u , Count , list)
         call SetInfoHeroSpell(u , Count + list * 10 , id)
    endif

   //  call DisplayTextToPlayer(GetLocalPlayer(),0,0,I2S(LoadCountHeroSpell(u) ))
endfunction

function FuncEditParam takes integer iDs,unit GetU returns nothing
    local integer i1= 0
    local integer i2= 0
    local integer NumAbility
    
    call AddSpellPlayerInfo(iDs , GetU , 0)
    
    call SetChanellOrder(GetU , iDs , GetInfoHeroSpell(GetU , iDs))
    
    if iDs == 'AEev' then
       	set i1=GetUnitAbilityLevel(GetU, iDs)
    	set i2=LoadInteger(HT, GetHandleId(GetU), - 10001)
        call AddUnitEvasion(GetU , 2 * I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(GetU), - 10001, i1)
    endif
    
    if iDs == 'Acdb' then
       	set i1=GetUnitAbilityLevel(GetU, iDs)
    	set i2=LoadInteger(HT, GetHandleId(GetU), - 10002)
        call AddUnitEvasion(GetU , 1 * I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(GetU), - 10002, i1)
    endif

    if iDs == 'Assk' then
       	set i1=GetUnitAbilityLevel(GetU, iDs)
    	set i2=LoadInteger(HT, GetHandleId(GetU), - 10003)
        call AddUnitBlock(GetU , 50 * I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(GetU), - 10003, i1)
    endif
    
    if iDs == 'A05S' then
       	set i1=GetUnitAbilityLevel(GetU, iDs)
    	set i2=LoadInteger(HT, GetHandleId(GetU), - 10004)
        call AddUnitMagicDef(GetU , 3 * I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(GetU), - 10004, i1)
    endif

    if iDs == 'A06V' then
       	set i1=GetUnitAbilityLevel(GetU, iDs)
    	set i2=LoadInteger(HT, GetHandleId(GetU), - 10005)
        call AddUnitLuck(GetU , 0.01 * I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(GetU), - 10005, i1)
    endif
    

    
    if iDs == 'A05Z' or iDs == 'A05U' and GetUnitAbilityLevel(GetU, iDs) == 1 then
        call BlzStartUnitAbilityCooldown(GetU, iDs, 60)
    endif
    
    
   if iDs == 'A02O' then
     if LoadReal(HT, GetHandleId(GetU), 1) == 0 then
         call SaveReal(HT, GetHandleId(GetU), 1, BlzGetUnitAttackCooldown(GetU, 0))
     endif
     call SaveReal(HT, GetHandleId(GetU), 'A02O', 0.02 * I2R(GetUnitAbilityLevel(GetU, iDs)))
//     call BlzSetUnitAttackCooldown(GetU, 0.92 - (0.02*I2R(GetUnitAbilityLevel(GetU,iDs)) ),0  )
    endif
endfunction



function FunResetAbility takes integer iDs,unit GetU returns nothing
    local integer i1=0
    local integer i2=0
    
    call RemoveInfoHeroSpell(GetU , iDs)
    
    if iDs == 'AEev' then
       	set i1=GetUnitAbilityLevel(GetU, iDs)
    	set i2=LoadInteger(HT, GetHandleId(GetU), - 10001)
        call AddUnitEvasion(GetU , 2 * I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(GetU), - 10001, i1)
    endif
    
    if iDs == 'Acdb' then
       	set i1=GetUnitAbilityLevel(GetU, iDs)
    	set i2=LoadInteger(HT, GetHandleId(GetU), - 10002)
        call AddUnitEvasion(GetU , I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(GetU), - 10002, i1)
    endif
    
    if iDs == 'Assk' then
       	set i1=GetUnitAbilityLevel(GetU, iDs)
    	set i2=LoadInteger(HT, GetHandleId(GetU), - 10003)
        call AddUnitBlock(GetU , 50 * I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(GetU), - 10003, i1)
    endif
    
    if iDs == 'A05S' then
       	set i1=GetUnitAbilityLevel(GetU, iDs)
    	set i2=LoadInteger(HT, GetHandleId(GetU), - 10004)
        call AddUnitMagicDef(GetU , 3 * I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(GetU), - 10004, i1)
    endif
    
    if iDs == 'A082' then
       	set i1=GetUnitAbilityLevel(GetU, iDs)
    	set i2=LoadInteger(HT, GetHandleId(GetU), - 10005)
        call AddUnitLuck(GetU , 0.01 * I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(GetU), - 10005, i1)
    endif
    
    

   if iDs == 'A02O' then
     if LoadReal(HT, GetHandleId(GetU), 1) != 0 then
     //   call BlzSetUnitAttackCooldown(GetU,LoadReal(HT, GetHandleId(GetU),1 ) ,0 ) 
     endif
   endif
endfunction

function FunctionStartUnit takes unit U returns nothing
    if LoadReal(HT, GetHandleId(U), 1) == 0 then
      call SaveReal(HT, GetHandleId(U), - 1001, BlzGetUnitAttackCooldown(U, 0))
      call SaveInteger(HT, GetHandleId(U), - 1000, BlzGetUnitIntegerField(U, UNIT_IF_PRIMARY_ATTRIBUTE))
    endif
endfunction









function Func_completeLevel takes unit u returns nothing
local player p= GetOwningPlayer(u)
local integer pid= GetPlayerId(p)
local integer i1= 0

set i1=LoadInteger(HT, GetHandleId(u), 54001)
if i1 != 0 then
call BlzSetUnitArmor(u, BlzGetUnitArmor(u) - i1)
call AddUnitBlock(u , - i1)
call SaveInteger(HT, GetHandleId(u), 54001, 0)
set NumberOfUnit[pid]=0
endif


set i1=LoadInteger(HT, GetHandleId(u), 54021)
if i1 != 0 then

call SetHeroStr(u, GetHeroStr(u, false) - i1, false)
call SetHeroAgi(u, GetHeroAgi(u, false) - i1, false)
call SetHeroInt(u, GetHeroInt(u, false) - i1, false)
call SaveInteger(HT, GetHandleId(u), 54021, 0)
endif

set i1=UnitHasItemI(u , 'I07H')
if i1 > 0 then
call AddUnitBlock(u , 15 * i1)
call AddUnitMagicDef(u , 1 * i1)

endif



set Glory[pid]=Glory[pid] + 200
call AdjustPlayerStateBJ(Income[pid], p, PLAYER_STATE_RESOURCE_GOLD)
call DisplayTextToPlayer(p, 0, 0, "|cffffff00Income:|r " + I2S(Income[pid]))





if Income[pid] == 0 then
    call DisplayTextToPlayer(p, 0, 0, "You can increase your income in Power Ups Shop II")
endif

endfunction










//===========================================================================
// Trigger: StartFunction
//===========================================================================




function USOrder4fieldTimer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local unit u1= LoadUnitHandle(HT, i, 1)
    local real x=  LoadReal(HT, i, 3)
    local real y=  LoadReal(HT, i, 4)
    local integer idsp=  LoadInteger(HT, i, 5)
    local string ordstr=  LoadStr(HT, i, 6)
    local real Field1= LoadReal(HT, i, 7)
    local abilityreallevelfield RealField1= ConvertAbilityRealLevelField(LoadInteger(HT, i, 8))
    local real Field2= LoadReal(HT, i, 9)
    local abilityreallevelfield RealField2= ConvertAbilityRealLevelField(LoadInteger(HT, i, 10))
    local real Field3= LoadReal(HT, i, 11)
    local abilityreallevelfield RealField3= ConvertAbilityRealLevelField(LoadInteger(HT, i, 12))
    local real Field4= LoadReal(HT, i, 13)
    local abilityreallevelfield RealField4= ConvertAbilityRealLevelField(LoadInteger(HT, i, 14))
    local unit Caster1= CreateUnit(GetOwningPlayer(u1), 'h015', x, y, 0)
    
    call FlushChildHashtable(HT, i)
    call DestroyTimer(t)
    call UnitAddAbility(Caster1, idsp)


    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(Caster1, idsp), RealField1, 0, Field1)
    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(Caster1, idsp), RealField2, 0, Field2)
    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(Caster1, idsp), RealField3, 0, Field3)
    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(Caster1, idsp), RealField4, 0, Field4)

    call IssueImmediateOrder(Caster1, ordstr)
    call UnitApplyTimedLife(Caster1, 'B000', 2)


    set Caster1=null
    set t=null
    set u1=null
endfunction



function USOrder4field takes unit u1,real x,real y,integer idsp,string ordstr,real Field1,abilityreallevelfield RealField1,real Field2,abilityreallevelfield RealField2,real Field3,abilityreallevelfield RealField3,real Field4,abilityreallevelfield RealField4 returns nothing

    local timer t= CreateTimer()
    local integer i= GetHandleId(t)
    call SaveUnitHandle(HT, i, 1, u1)
    call SaveReal(HT, i, 3, x)
    call SaveReal(HT, i, 4, y)
    call SaveInteger(HT, i, 5, idsp)
    call SaveStr(HT, i, 6, ordstr)
    call SaveReal(HT, i, 7, Field1)
    call SaveInteger(HT, i, 8, GetHandleId(RealField1))
    call SaveReal(HT, i, 9, Field2)
    call SaveInteger(HT, i, 10, GetHandleId(RealField2))
    call SaveReal(HT, i, 11, Field3)
    call SaveInteger(HT, i, 12, GetHandleId(RealField3))
    
    call SaveReal(HT, i, 13, Field4)
    call SaveInteger(HT, i, 14, GetHandleId(RealField4))
    call TimerStart(t, 0, false, function USOrder4fieldTimer)


    set u1=null
    set t=null
endfunction

 function EndInvision takes nothing returns nothing
     local timer startbattle= GetExpiredTimer()
     local unit Herou= LoadUnitHandle(HT_timerSpell, GetHandleId(startbattle), 1)
 
      call UnitRemoveAbility(Herou, 'A03V')
 
    call SaveTimerHandle(HT_timerSpell, GetHandleId(Herou), 1, null)
    call FlushChildHashtable(HT_timerSpell, GetHandleId(startbattle))
    call DestroyTimer(startbattle)
    set startbattle=null
endfunction
 
function EndCheaterMagic takes nothing returns nothing
     local timer startbattle= GetExpiredTimer()
     local unit Herou= LoadUnitHandle(HT_timerSpell, GetHandleId(startbattle), 1)
     call DestroyEffect(LoadEffectHandle(HT_timerSpell, GetHandleId(startbattle), 2))
 
    call SaveTimerHandle(HT_timerSpell, GetHandleId(Herou), 2, null)
    call FlushChildHashtable(HT_timerSpell, GetHandleId(startbattle))
    call DestroyTimer(startbattle)
    set startbattle=null
endfunction


function EndGodDefender takes nothing returns nothing
     local timer startbattle= GetExpiredTimer()
     local unit Herou= LoadUnitHandle(HT_timerSpell, GetHandleId(startbattle), 1)
     call DestroyEffect(LoadEffectHandle(HT_timerSpell, GetHandleId(startbattle), 2))
 
    call SaveTimerHandle(HT_timerSpell, GetHandleId(Herou), 3, null)
    call FlushChildHashtable(HT_timerSpell, GetHandleId(startbattle))
    call DestroyTimer(startbattle)
    set startbattle=null
endfunction


function EndState takes nothing returns nothing
     local timer startbattle= GetExpiredTimer()
     local unit Herou= LoadUnitHandle(HT_timerSpell, GetHandleId(startbattle), 1)
     local integer r4= LoadInteger(HT_timerSpell, GetHandleId(startbattle), 2)
     
     
            call SetHeroStr(Herou, GetHeroStr(Herou, false) - ( r4 ), false)
            call SetHeroAgi(Herou, GetHeroAgi(Herou, false) - ( r4 ), false)
            call SetHeroInt(Herou, GetHeroInt(Herou, false) - ( r4 ), false)

    call FlushChildHashtable(HT_timerSpell, GetHandleId(startbattle))
    call DestroyTimer(startbattle)
    set startbattle=null
endfunction


function EndStateGrunt takes nothing returns nothing
     local timer startbattle= GetExpiredTimer()
     local unit Herou= LoadUnitHandle(HT_timerSpell, GetHandleId(startbattle), 1)
     local integer r4= LoadInteger(HT_timerSpell, GetHandleId(startbattle), 2)
     
            call BlzSetUnitBaseDamage(Herou, BlzGetUnitBaseDamage(Herou, 0) - R2I(r4), 0)
            call SetHeroStr(Herou, GetHeroStr(Herou, false) - ( r4 ), false)

    call FlushChildHashtable(HT_timerSpell, GetHandleId(startbattle))
    call DestroyTimer(startbattle)
    set startbattle=null
endfunction


function FunctionTimerSpell takes nothing returns nothing
    local timer startbattle= GetExpiredTimer()
    local timer NewTimer= null
    local timer OldTimer= null
    local unit Herou= LoadUnitHandle(HT_timerSpell, GetHandleId(startbattle), 1)
    local integer pid= GetPlayerId(GetOwningPlayer(Herou))
    local real r1= 0
    local real r2= 0
    local real r3= 1 + ( 0.05 * I2R(GetUnitAbilityLevel(Herou, 'A03Y')) )
    local real r4= 0
    local real r5= 0
    local integer i= 0
    local integer i1= 0
    local unit U= null
    set r2=GetHeroLevel(Herou)
    
    set r1=GetUnitAbilityLevel(Herou, 'A03Q')
    if r1 > 0 then
        call ElemFuncStart(Herou , 'A03Q')
        call USOrder4field(Herou , GetUnitX(Herou) , GetUnitY(Herou) , 'A03T' , "battleroar" , ( 100 * r1 ) * ( 1 + 0.009 * r2 ) , ABILITY_RLF_DAMAGE_INCREASE , ( 10 * r1 ) * ( 1 + 0.009 * r2 ) , ABILITY_RLF_SPECIFIC_TARGET_DAMAGE_HTC2 , ( 7 + ( r2 * 0.09 ) ) * r3 , ABILITY_RLF_DURATION_HERO , ( 7 + ( r2 * 0.09 ) ) * r3 , ABILITY_RLF_DURATION_NORMAL)
    endif
 
    set r1=GetUnitAbilityLevel(Herou, 'A03U')
    if r1 > 0 then
                call ElemFuncStart(Herou , 'A03U')
        if LoadTimerHandle(HT_timerSpell, GetHandleId(Herou), 1) == null then
            set NewTimer=CreateTimer()
            call SaveTimerHandle(HT_timerSpell, GetHandleId(Herou), 1, NewTimer)
            call SaveUnitHandle(HT_timerSpell, GetHandleId(NewTimer), 1, Herou)
            call UnitAddAbility(Herou, 'A03V')
            call TimerStart(NewTimer, ( 1.8 + ( 0.2 * r1 ) ) * r3, false, function EndInvision)
        else
               set NewTimer=LoadTimerHandle(HT_timerSpell, GetHandleId(Herou), 1)
              call TimerStart(NewTimer, ( 1.8 + ( 0.2 * r1 ) ) * r3, false, function EndInvision)
        endif
    endif
    
    
    set r1=GetUnitAbilityLevel(Herou, 'A04E')
    if r1 > 0 then
            call ElemFuncStart(Herou , 'A04E')
            set OldTimer=LoadTimerHandle(HT_timerSpell, GetHandleId(Herou), 'A04E')
            
            if TimerGetRemaining(OldTimer) > 0 then
                call TimerStart(OldTimer, 0, false, function EndState)
            endif
            set OldTimer=null
            
            set NewTimer=CreateTimer()
            call SaveTimerHandle(HT_timerSpell, GetHandleId(Herou), 'A04E', NewTimer)
            call SaveUnitHandle(HT_timerSpell, GetHandleId(NewTimer), 1, Herou)
            set r4=40 * r1 * ( 1 + 0.02 * r2 )
            call SaveInteger(HT_timerSpell, GetHandleId(NewTimer), 2, R2I(r4))
            call SetHeroStr(Herou, GetHeroStr(Herou, false) + R2I(r4), false)
            call SetHeroAgi(Herou, GetHeroAgi(Herou, false) + R2I(r4), false)
            call SetHeroInt(Herou, GetHeroInt(Herou, false) + R2I(r4), false)
            call TimerStart(NewTimer, ( 8 + ( 0.02 * r2 ) ) * r3, false, function EndState)


    endif
    
    set r1=GetUnitAbilityLevel(Herou, 'A04K')
    if r1 > 0 then
        call ElemFuncStart(Herou , 'A04K')
        set r4=50 * ( r2 + 3 ) * ( r2 + 4 ) - 110
        set r5=GetHeroXP(Herou)

    if GetUnitAbilityLevel(Herou, 'Asal') > 0 then
        call AddHeroXP(Herou, R2I(( r4 - r5 ) * r1) / 200, true)
    else
        call AddHeroXP(Herou, R2I(( r4 - r5 ) * r1) / 100, true)
    endif
    
    endif

   

    set r1=GetUnitAbilityLevel(Herou, 'A040')
    if r1 > 0 then
        call ElemFuncStart(Herou , 'A040')
        if LoadTimerHandle(HT_timerSpell, GetHandleId(Herou), 2) == null then
            set NewTimer=CreateTimer()
            call SaveTimerHandle(HT_timerSpell, GetHandleId(Herou), 2, NewTimer)
            call SaveUnitHandle(HT_timerSpell, GetHandleId(NewTimer), 1, Herou)
            call SaveEffectHandle(HT_timerSpell, GetHandleId(NewTimer), 2, AddSpecialEffectTarget("Objects\\InventoryItems\\tome\\tome.mdl", Herou, "overhead"))
            call TimerStart(NewTimer, ( 2.75 + ( 0.25 * r1 ) ) * r3, false, function EndCheaterMagic)
        else
              set NewTimer=LoadTimerHandle(HT_timerSpell, GetHandleId(Herou), 2)
              call TimerStart(NewTimer, ( 2.75 + ( 0.25 * r1 ) ) * r3, false, function EndCheaterMagic)
        endif
    endif
    
    set r1=GetUnitAbilityLevel(Herou, 'A045')
    if r1 > 0 then
        call ElemFuncStart(Herou , 'A045')
        if LoadTimerHandle(HT_timerSpell, GetHandleId(Herou), 3) == null then
            set NewTimer=CreateTimer()
            call SaveTimerHandle(HT_timerSpell, GetHandleId(Herou), 3, NewTimer)
            call SaveUnitHandle(HT_timerSpell, GetHandleId(NewTimer), 1, Herou)
            call SaveEffectHandle(HT_timerSpell, GetHandleId(NewTimer), 2, AddSpecialEffectTarget("Soul Armor Divine_opt.mdx", Herou, "head"))
            call TimerStart(NewTimer, ( 2.70 + ( 0.3 * r1 ) ) * r3, false, function EndGodDefender)
        else
              set NewTimer=LoadTimerHandle(HT_timerSpell, GetHandleId(Herou), 3)
            call TimerStart(NewTimer, ( 2.70 + ( 0.3 * r1 ) ) * r3, false, function EndGodDefender)
        endif
    endif
    
    set r1=GetUnitAbilityLevel(Herou, 'A06Z')
    if r1 > 0 then
        call ElemFuncStart(Herou , 'A06Z')
        call CreateRandomRune(- 60 + 10 * r1 , GetRandomReal(- 100, 100) + GetUnitX(Herou) , GetRandomReal(- 100, 100) + GetUnitY(Herou) , Herou)
        call CreateRandomRune(- 60 + 10 * r1 , GetRandomReal(- 100, 100) + GetUnitX(Herou) , GetRandomReal(- 100, 100) + GetUnitY(Herou) , Herou)
        call CreateRandomRune(- 60 + 10 * r1 , GetRandomReal(- 100, 100) + GetUnitX(Herou) , GetRandomReal(- 100, 100) + GetUnitY(Herou) , Herou)
    endif
    
    set i1=UnitHasItemI(Herou , 'I08L')
    set i=0
        call ElemFuncStart(Herou , 'I08L')
    if i1 > 0 then
        loop
            exitwhen i >= R2I(i1)
            call CreateRandomRune(0 , GetRandomReal(- 100, 100) + GetUnitX(Herou) , GetRandomReal(- 100, 100) + GetUnitY(Herou) , Herou)
            set i=i + 1
        endloop
    endif
    
    if GetUnitTypeId(Herou) == 'H01J' then
            call ElemFuncStart(Herou , 'H01J')
            set NewTimer=CreateTimer()
            set r4=20 * GetHeroLevel(Herou)
            call SetHeroStr(Herou, GetHeroStr(Herou, false) + R2I(r4), false)
            call BlzSetUnitBaseDamage(Herou, BlzGetUnitBaseDamage(Herou, 0) + R2I(r4), 0)
            call SaveUnitHandle(HT_timerSpell, GetHandleId(NewTimer), 1, Herou)
            call SaveInteger(HT_timerSpell, GetHandleId(NewTimer), 2, R2I(r4))
            call TimerStart(NewTimer, 8 + 0.05, false, function EndStateGrunt)
    endif
    
    
    if UnitHasItemS(Herou , 'I07O') then
        call ElemFuncStart(Herou , 'I07O')
        set U=CreateUnit(GetOwningPlayer(Herou), 'u003', GetUnitX(Herou), GetUnitY(Herou), 0)
        call UnitApplyTimedLife(U, 'A041', 90)
        set U=CreateUnit(GetOwningPlayer(Herou), 'u003', GetUnitX(Herou), GetUnitY(Herou), 0)
                call UnitApplyTimedLife(U, 'A041', 90)
        set U=CreateUnit(GetOwningPlayer(Herou), 'u003', GetUnitX(Herou), GetUnitY(Herou), 0)
                call UnitApplyTimedLife(U, 'A041', 90)
        set U=CreateUnit(GetOwningPlayer(Herou), 'u003', GetUnitX(Herou), GetUnitY(Herou), 0)
                call UnitApplyTimedLife(U, 'A041', 90)
        
    endif
    
    
    
    
    set r1=GetUnitAbilityLevel(Herou, 'A041')
    if r1 > 0 then
        call ElemFuncStart(Herou , 'A041')
       set U=CreateUnit(GetOwningPlayer(Herou), 'h01A', GetUnitX(Herou) + 40 * CosBJ(- 30 + GetUnitFacing(Herou)), GetUnitY(Herou) + 40 * SinBJ(- 30 + GetUnitFacing(Herou)), GetUnitFacing(Herou))
       call BlzSetUnitMaxHP(U, BlzGetUnitMaxHP(U) - 500 + R2I(( r1 * 10000 ) * ( 1 + ( r2 * 0.038 ) )))
       call BlzSetUnitBaseDamage(U, BlzGetUnitBaseDamage(U, 0) - 10 + R2I(( r1 * 100 ) * ( 1 + ( r2 * 0.038 ) )), 0)
       call SetWidgetLife(U, BlzGetUnitMaxHP(U))
       call UnitApplyTimedLife(U, 'A041', 8 + ( r2 * 0.09 ))
       call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", U, "head"))

       set U=CreateUnit(GetOwningPlayer(Herou), 'h01A', GetUnitX(Herou) + 40 * CosBJ(30 + GetUnitFacing(Herou)), GetUnitY(Herou) + 40 * SinBJ(30 + GetUnitFacing(Herou)), GetUnitFacing(Herou))
       call BlzSetUnitMaxHP(U, BlzGetUnitMaxHP(U) - 500 + R2I(( r1 * 10000 ) * ( 1 + ( r2 * 0.038 ) )))
       call BlzSetUnitBaseDamage(U, BlzGetUnitBaseDamage(U, 0) - 10 + R2I(( r1 * 100 ) * ( 1 + ( r2 * 0.038 ) )), 0)
       call SetWidgetLife(U, BlzGetUnitMaxHP(U))
       call UnitApplyTimedLife(U, 'A041', 8 + ( r2 * 0.09 ))
       call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", U, "head"))
             
    endif

     set i1=UnitHasItemI(Herou , 'I06I')
     if i1 > 0 then
         call ElemFuncStart(Herou , 'I06I')
         call SetUnitState(Herou, UNIT_STATE_MANA, GetUnitState(Herou, UNIT_STATE_MANA) - 35000 * i1)
    endif
    
    
    
    set i1=UnitHasItemI(Herou , 'I07G')
    if i1 > 0 then
         call ElemFuncStart(Herou , 'I07G')
         call BlzSetUnitArmor(Herou, BlzGetUnitArmor(Herou) + i1 * 20 * NumberOfUnit[pid])
         call AddUnitBlock(Herou , i1 * 20 * NumberOfUnit[pid])
         call SaveInteger(HT, GetHandleId(Herou), 54001, LoadInteger(HT, GetHandleId(Herou), 54001) + i1 * 20 * NumberOfUnit[pid])
    endif
    

     set i1=UnitHasItemI(Herou , 'I06J')
     if i1 > 0 then
         call ElemFuncStart(Herou , 'I06J')
         call SetPlayerTechResearchedSwap('R000', ( i1 + GetPlayerTechCountSimple('R000', GetOwningPlayer(Herou)) ), GetOwningPlayer(Herou))
         call SetPlayerTechResearchedSwap('R001', ( i1 + GetPlayerTechCountSimple('R001', GetOwningPlayer(Herou)) ), GetOwningPlayer(Herou))
         call SetPlayerTechResearchedSwap('R002', ( i1 + GetPlayerTechCountSimple('R002', GetOwningPlayer(Herou)) ), GetOwningPlayer(Herou))
             
    endif

 
        
    if GetUnitTypeId(Herou) == 'H019' then
        call ElemFuncStart(Herou , 'H019')
        call USOrder4field(Herou , GetUnitX(Herou) , GetUnitY(Herou) , 'A03Z' , "stomp" , 55 * r2 , ABILITY_RLF_DAMAGE_INCREASE , 1800 , ABILITY_RLF_SPECIFIC_TARGET_DAMAGE_HTC2 , 1 + ( r2 * 0.04 ) , ABILITY_RLF_DURATION_HERO , 2 + ( r2 * 0.08 ) , ABILITY_RLF_DURATION_NORMAL)
    endif
        
    set r1=GetUnitAbilityLevel(Herou, 'A03X')
    if r1 > 0 then
        call ElemFuncStart(Herou , 'A03X')
      call USOrder4field(Herou , GetUnitX(Herou) , GetUnitY(Herou) , 'A03W' , "battleroar" , ( 10 * r1 ) * ( 1 + 0.02 * r2 ) , ABILITY_RLF_LIFE_REGENERATION_RATE , ( 10 * r1 ) * ( 1 + 0.02 * r2 ) , ABILITY_RLF_MANA_REGEN , ( 8 + ( r2 * 0.2 ) ) * r3 , ABILITY_RLF_DURATION_HERO , ( 8 + ( r2 * 0.2 ) ) * r3 , ABILITY_RLF_DURATION_NORMAL)

    endif
    
    
    set r1=GetUnitAbilityLevel(Herou, 'A042')
    if r1 > 0 then
              call ElemFuncStart(Herou , 'A042')
      call USOrder4field(Herou , GetUnitX(Herou) , GetUnitY(Herou) , 'A043' , "howlofterror" , 0 , ABILITY_RLF_DAMAGE_INCREASE_PERCENT_ROA1 , ( 10 * r1 ) * ( 1 + 0.02 * r2 ) , ABILITY_RLF_DAMAGE_HBZ2 , ( 8 + ( r2 * 0.09 ) ) * r3 , ABILITY_RLF_DURATION_HERO , ( 8 + ( r2 * 0.09 ) ) * r3 , ABILITY_RLF_DURATION_NORMAL)
    endif
  
    call FlushChildHashtable(HT_timerSpell, GetHandleId(startbattle))
    call DestroyTimer(startbattle)
    set U=null
    set startbattle=null
    set NewTimer=null
endfunction

function FixAbilityU takes unit u returns nothing
local integer i1= 0


set i1=LoadInteger(HT, GetHandleId(u), 54021)
if i1 != 0 then
call SetHeroStr(u, GetHeroStr(u, false) - i1, false)
call SetHeroAgi(u, GetHeroAgi(u, false) - i1, false)
call SetHeroInt(u, GetHeroInt(u, false) - i1, false)
call SaveInteger(HT, GetHandleId(u), 54021, 0)
endif



endfunction



function StartFunctionSpell takes unit Hero,integer i1 returns nothing

    local timer startbattle= CreateTimer()
    
    if i1 != 6 then
	call FixAbilityU(Hero)
    endif


    if i1 == 2 then




    	
    
        call TimerStart(startbattle, 4.53 + GetRandomReal(0, .01), false, function FunctionTimerSpell)
        call SaveUnitHandle(HT_timerSpell, GetHandleId(startbattle), 1, Hero)
        
        else
        
           call TimerStart(startbattle, 0.05, false, function FunctionTimerSpell)
        call SaveUnitHandle(HT_timerSpell, GetHandleId(startbattle), 1, Hero)
        
    endif
    



    set startbattle=null
//	call DisplayTextToPlayer(GetLocalPlayer(),0,0,"yea"+I2S(i1) )

endfunction




//===========================================================================
// Trigger: Toms
//===========================================================================

function PlayerAddGold takes player p,integer i returns nothing

call SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + i)

endfunction

function Trig_Toms_Actions takes nothing returns nothing
    local item It= GetManipulatedItem()
    local integer II= GetItemTypeId(It)
    local unit u= GetTriggerUnit()
    local player p= GetOwningPlayer(u)
    local integer pid= GetPlayerId(p)
    

    if II == 'I05H' then

       if GetHeroXP(GetTriggerUnit()) >= 20000 then
       
              call BlzSetUnitRealField(GetTriggerUnit(), ConvertUnitRealField('uagp'), BlzGetUnitRealField(GetTriggerUnit(), ConvertUnitRealField('uagp')) + 1)
              call SetHeroAgi(GetTriggerUnit(), GetHeroAgi(GetTriggerUnit(), false) - GetHeroLevel(GetTriggerUnit()) + 1, false)
              
              call UnitAddItemById(GetTriggerUnit(), 'I05K')
              call RemoveItem(GetManipulatedItem())
       endif



    elseif II == 'I05I' then

       if GetHeroXP(GetTriggerUnit()) >= 20000 then
       
              call BlzSetUnitRealField(GetTriggerUnit(), ConvertUnitRealField('uinp'), BlzGetUnitRealField(GetTriggerUnit(), ConvertUnitRealField('uinp')) + 1)
              call SetHeroInt(GetTriggerUnit(), GetHeroInt(GetTriggerUnit(), false) - GetHeroLevel(GetTriggerUnit()) + 1, false)
              
               call UnitAddItemById(GetTriggerUnit(), 'I05K')
              call RemoveItem(GetManipulatedItem())
       endif
     elseif II == 'I05J' then

       if GetHeroXP(GetTriggerUnit()) >= 20000 then
       
              call BlzSetUnitRealField(GetTriggerUnit(), ConvertUnitRealField('ustp'), BlzGetUnitRealField(GetTriggerUnit(), ConvertUnitRealField('ustp')) + 1)
              call SetHeroStr(GetTriggerUnit(), GetHeroStr(GetTriggerUnit(), false) - GetHeroLevel(GetTriggerUnit()) + 1, false)
              
              call UnitAddItemById(GetTriggerUnit(), 'I05K')
              
              call RemoveItem(GetManipulatedItem())
       endif
       
       
     elseif II == 'I06O' then
          if Glory[pid] >= 1500 then
              call BlzSetUnitArmor(u, BlzGetUnitArmor(u) + 20)
              call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", u, "head"))
              set Glory[pid]=Glory[pid] - 1500
          endif
     elseif II == 'I06N' then
          if Glory[pid] >= 1500 then
              call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + 100, 0)
              call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", u, "head"))
              set Glory[pid]=Glory[pid] - 1500
          endif
     elseif II == 'I06M' then
          if Glory[pid] >= 1500 then
              call BlzSetUnitRealField(u, ConvertUnitRealField('uhpr'), BlzGetUnitRealField(u, ConvertUnitRealField('uhpr')) + 30)
              call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", u, "head"))
              set Glory[pid]=Glory[pid] - 1500
          endif
      elseif II == 'I06Q' then
          if Glory[pid] >= 2000 then
            
              call AddUnitMagicDef(u , 3)
              call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", u, "head"))
              set Glory[pid]=Glory[pid] - 2000
          endif
      elseif II == 'I06R' then
          if Glory[pid] >= 2000 then
              call AddUnitMagicDmg(u , 3)
              call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", u, "head"))
              set Glory[pid]=Glory[pid] - 2000
          endif
      elseif II == 'I06T' then
          if Glory[pid] >= 2000 then
              call BlzSetUnitRealField(u, ConvertUnitRealField('umpr'), BlzGetUnitRealField(u, ConvertUnitRealField('umpr')) + 40)
              call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", u, "head"))
              set Glory[pid]=Glory[pid] - 2000
          endif
       elseif II == 'I06S' then
          if Glory[pid] >= 2000 then
             // set PvpBonus[pid] = PvpBonus[pid]+1.5
              call AddUnitPvpBonus(u , 1.5)
              call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", u, "head"))
              set Glory[pid]=Glory[pid] - 2000
         endif
       elseif II == 'I06P' then
          if Glory[pid] >= 1 then
              call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(Glory[pid] * 1.5))
              call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", u, "head"))
              set Glory[pid]=Glory[pid] - R2I(Glory[pid])
         endif
       elseif II == 'I06U' then
          if Glory[pid] >= 1 then
              call BlzSetUnitMaxMana(u, BlzGetUnitMaxMana(u) + R2I(Glory[pid]))
              call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", u, "head"))
              set Glory[pid]=Glory[pid] - R2I(Glory[pid])
         endif

       elseif II == 'I06W' then
    	   if Glory[pid] >= 10000 and UnitHasFullItems(u) == false then
    	        call UnitAddItem(u, CreateItem('I06V', 0, 0))
    	        set Glory[pid]=Glory[pid] - 10000
	       else
                call PlayerAddGold(GetOwningPlayer(u) , 15000)
	     endif
       elseif II == 'I070' then
    	   if Glory[pid] >= 10000 and UnitHasFullItems(u) == false then
    	        call UnitAddItem(u, CreateItem('I06X', 0, 0))
    	        set Glory[pid]=Glory[pid] - 10000
	       else
                call PlayerAddGold(GetOwningPlayer(u) , 15000)
	     endif
       elseif II == 'I06Z' then
    	   if Glory[pid] >= 10000 and UnitHasFullItems(u) == false then
    	        call UnitAddItem(u, CreateItem('I06Y', 0, 0))
    	        set Glory[pid]=Glory[pid] - 10000
	       else
                call PlayerAddGold(GetOwningPlayer(u) , 15000)
	     endif
       elseif II == 'I074' then

		set Income[pid]=Income[pid] + 90
		set BonusNeutral=BonusNeutral + 1
		set BonusNeutralPlayer[pid]=BonusNeutralPlayer[pid] + 3
		call DisplayTimedTextToForce(GetPlayersAll(), 1, "|cffff0000DUNGEON !|r" + GetPlayerName(p) + " increased the power of neutral to " + I2S(BonusNeutral))

       elseif II == 'I07D' then
           if GetHeroXP(u) >= 100000 then
              set Lives[pid]=Lives[pid] + 1
                  call UnitAddItemById(u, 'I07C')
                  call RemoveItem(GetManipulatedItem())
           endif
           
        elseif II == 'I09D' then
            if GetHeroXP(u) >= 50000 and AddHeroMaxAbsoluteAbility(u) then
                call UnitAddItemById(GetTriggerUnit(), 'I09E')

            else
                call PlayerAddGold(GetOwningPlayer(u) , 8000)

            endif
	else
       
    endif


	call ResourseRefresh(GetOwningPlayer(u))
	set It=null
	set u=null

endfunction


//===========================================================================
function InitTrig_Toms takes nothing returns nothing
    set gg_trg_Toms=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Toms, EVENT_PLAYER_UNIT_PICKUP_ITEM)
    call TriggerAddAction(gg_trg_Toms, function Trig_Toms_Actions)
endfunction


//===========================================================================
// Trigger: Event lich
//===========================================================================


function Trig_Event_lich_Actions takes nothing returns nothing


if GetUnitTypeId(GetTriggerUnit()) == 'H018' and IsUnitIllusion(GetTriggerUnit()) != true then

 call SaveEffectHandle(DataUnitHT, GetHandleId(GetTriggerUnit()), 1, AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobTarget.mdl", GetTriggerUnit(), "hand left"))
 call SaveEffectHandle(DataUnitHT, GetHandleId(GetTriggerUnit()), 2, AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobTarget.mdl", GetTriggerUnit(), "hand right"))
 call SaveInteger(DataUnitHT, GetHandleId(GetTriggerUnit()), 3, 1)

endif



endfunction




function EndLichTimer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u= LoadUnitHandle(DataUnitHT, GetHandleId(t), 1)
    
    
  call SaveEffectHandle(DataUnitHT, GetHandleId(u), 1, AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobTarget.mdl", u, "hand left"))
  call SaveEffectHandle(DataUnitHT, GetHandleId(u), 2, AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobTarget.mdl", u, "hand right"))
  call SaveInteger(DataUnitHT, GetHandleId(u), 3, 1)
  
  call FlushChildHashtable(DataUnitHT, GetHandleId(t))
  
  call DestroyTimer(t)
  set t=null
  set u=null


endfunction



//===========================================================================
function InitTrig_Event_lich takes nothing returns nothing
    set gg_trg_Event_lich=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_Event_lich, GetEntireMapRect())
    call TriggerAddAction(gg_trg_Event_lich, function Trig_Event_lich_Actions)
endfunction


//===========================================================================
// Trigger: Untitled Trigger 005
//===========================================================================
function Trig_Untitled_Trigger_005_Actions takes nothing returns nothing
endfunction

//===========================================================================
function InitTrig_Untitled_Trigger_005 takes nothing returns nothing
    set gg_trg_Untitled_Trigger_005=CreateTrigger()
    call TriggerAddAction(gg_trg_Untitled_Trigger_005, function Trig_Untitled_Trigger_005_Actions)
endfunction

//===========================================================================
// Trigger: bonus1
//===========================================================================


function Init_Hero_data takes nothing returns nothing


    call SaveStr(HT_data, 'E000', 1, "ReplaceableTextures\\CommandButtons\\BTNSpellBreaker.blp") //letinant
    call SaveStr(HT_data, 'E000', 2, "|cffffff00Level Up Bonus|r: +8 to two random stats.")


    call SaveStr(HT_data, 'H005', 1, "ReplaceableTextures\\CommandButtons\\BTNAbomination.blp") // amb
    call SaveStr(HT_data, 'H005', 2, "|cff00ffffPassive|r: Disease Cloud: Damages nearby enemies every second. \n|cffffff00Level Up Bonus|r: Disease Cloud: +25 damage.")
    
    
    call SaveStr(HT_data, 'H006', 1, "ReplaceableTextures\\CommandButtons\\BTNDruidOfTheClaw.blp") // druid1
    call SaveStr(HT_data, 'H006', 2, "|cffffff00Level Up Bonus|r: +400 summon hit points, +3 summon armor.")
    
    call SaveStr(HT_data, 'H002', 1, "ReplaceableTextures\\CommandButtons\\BTNHeroPaladin.blp") // paladin
    call SaveStr(HT_data, 'H002', 2, "|cffffff00Level Up Bonus|r: +265 hit points and mana.")
   
    call SaveStr(HT_data, 'H001', 1, "ReplaceableTextures\\CommandButtons\\BTNHeroBloodElfPrince.blp") // mage
    call SaveStr(HT_data, 'H001', 2, "|cffffff00Level Up Bonus|r: +600 mana.")
    
     
    call SaveStr(HT_data, 'H004', 1, "ReplaceableTextures\\CommandButtons\\BTNMortarTeam.blp") // mortal team
    call SaveStr(HT_data, 'H004', 2, "|cff00ffffPassive|r: Mortar Aura: Increases attack damage by a percentage. \n|cffffff00Level Up Bonus|r: Mortar Aura: +2% damage bouns.")
                 
    call SaveStr(HT_data, 'H003', 1, "ReplaceableTextures\\CommandButtons\\BTNNagaSummoner.blp") // naga
    call SaveStr(HT_data, 'H003', 2, "|cffffff00Level Up Bonus|r: Increases intelligence by a random amount between 1 and 11. Repeats if strength is at 0 and again if agility is at 0.")
    
    call SaveStr(HT_data, 'O003', 1, "ReplaceableTextures\\CommandButtons\\BTNPossession.blp") // avatar
    call SaveStr(HT_data, 'O003', 2, "|cffffff00Level Up Bonus|r: Increases a random stat by a random amount from 1 to 19.")
           
    call SaveStr(HT_data, 'O004', 1, "ReplaceableTextures\\CommandButtons\\BTNHeroDemonHunter.blp") // Demon Hunter
    call SaveStr(HT_data, 'O004', 2, "|cff00ffffPassive|r: Feedback: Every time the Hero attacks it burns enemy mana away. \n|cffffff00Level Up Bonus|r: Feedback: +12 mana burned.")
    
    call SaveStr(HT_data, 'O002', 1, "ReplaceableTextures\\CommandButtons\\BTNTichondrius.blp") // Dread lord
    call SaveStr(HT_data, 'O002', 2, "|cff00ffffPassive|r: Vampire: Lifesteal on all damage dealt by the player. [|cffff9696Lifesteal|r]\n|cffffff00Level Up Bonus|r: Vampire: +0.5% lifesteal")
    
    call SaveStr(HT_data, 'O005', 1, "ReplaceableTextures\\CommandButtons\\BTNChaosSpaceOrc.blp") // Pyromancer
    call SaveStr(HT_data, 'O005', 2, "|cffffff00Level Up Bonus|r: +35 maximum attack damage.")
    
    call SaveStr(HT_data, 'O000', 1, "ReplaceableTextures\\CommandButtons\\BTNSpiritWalker.blp") // tauren
    call SaveStr(HT_data, 'O000', 2, "|cff00ffffPassive|r: Spirit Mage: Spells in the Active Spells I shop can go up to level 40. \n|cffffff00Level Up Bonus|r: (Every 2 levels) Increases the level of all spells from Active Spells I by 1.")
      
    call SaveStr(HT_data, 'O008', 1, "ReplaceableTextures\\CommandButtons\\BTNDruidOfTheTalon.blp") // Mystic
    call SaveStr(HT_data, 'O008', 2, "|cffffff00Level Up Bonus|r: +40 summon damage.")
        
    
    call SaveStr(HT_data, 'O007', 1, "ReplaceableTextures\\CommandButtons\\BTNPitLord.blp") // Pit Lord
    call SaveStr(HT_data, 'O007', 2, "|cffffff00Level Up Bonus|r: +66 hit points and mana. +6 lumber.")
        
    call SaveStr(HT_data, 'O001', 1, "ReplaceableTextures\\CommandButtons\\BTNSorceress.blp") // Thunder Witch
    call SaveStr(HT_data, 'O001', 2, "|cff00ffffPassive|r: Thunder Bolt: Damages 2 nearby enemies every second. \n|cffffff00Level Up Bonus|r: Thunder Bolt: +40 damage.")
               
    call SaveStr(HT_data, 'U000', 1, "ReplaceableTextures\\CommandButtons\\BTNThrall.blp") // Trall
    call SaveStr(HT_data, 'U000', 2, "|cffffff00Level Up Bonus|r: +5 agility, +10 agility if the Hero's strength is higher than its agility, +20 agility if the Hero's strength is more than twice as high as its agility.")
               
    call SaveStr(HT_data, 'N00K', 1, "ReplaceableTextures\\CommandButtons\\BTNHeroBlademaster.blp") // Blade master
    call SaveStr(HT_data, 'N00K', 2, "|cffffff00Level Up Bonus|r: +16 attack damage.")
                                                
    call SaveStr(HT_data, 'N024', 1, "ReplaceableTextures\\CommandButtons\\BTNChaosGrom.blp") // Grom
    call SaveStr(HT_data, 'N024', 2, "|cffffff00Level Up Bonus|r: +3 armor and hit point regeneration")
    
        
    call SaveStr(HT_data, 'N00I', 1, "ReplaceableTextures\\CommandButtons\\BTNHeadHunterBerserker.blp") // Troll Head Hunter
    call SaveStr(HT_data, 'N00I', 2, "|cffffff00Level Up Bonus|r: +6 hit point regeneration")
                     
    
    call SaveStr(HT_data, 'N00L', 1, "ReplaceableTextures\\CommandButtons\\BTNHeroTinker.blp") // Tinker
    call SaveStr(HT_data, 'N00L', 2, "|cffffff00Level Up Bonus|r: Gains 55 * hero level experience.")
    
    call SaveStr(HT_data, 'N00P', 1, "ReplaceableTextures\\CommandButtons\\BTNBeastMaster.blp") // Beast master
    call SaveStr(HT_data, 'N00P', 2, "|cffffff00Level Up Bonus|r: Increases the level of all spells from the Summon Spells shop by 1.")
        
    
    call SaveStr(HT_data, 'N00B', 1, "ReplaceableTextures\\CommandButtons\\BTNBansheeRanger.blp") // Fallen Ranger
    call SaveStr(HT_data, 'N00B', 2, "|cff00ffffPassive|r: Fear Aura: Reduces the armor of nearby enemies. \n|cffffff00Level Up Bonus|r: Fear Aura: +3 armor reduction.")
    
    call SaveStr(HT_data, 'N00R', 1, "ReplaceableTextures\\CommandButtons\\BTNHuntress.blp") // Luna
    call SaveStr(HT_data, 'N00R', 2, "|cff00ffffPassive|r: Moon Chakrum: Damages 8 nearby enemies every time the Hero is attacked. \n|cffffff00Level Up Bonus|r: Moon Chakrum: +7 damage")
        
    call SaveStr(HT_data, 'N00O', 1, "ReplaceableTextures\\CommandButtons\\BTNSkeletalOrc.blp") // Brute Skelet
    call SaveStr(HT_data, 'N00O', 2, "|cffffff00Level Up Bonus|r: +2 armor, +5 summon armor.")
            
    call SaveStr(HT_data, 'H008', 1, "ReplaceableTextures\\CommandButtons\\BTNJaina.blp") // Sorser
    call SaveStr(HT_data, 'H008', 2, "|cff00ffffPassive|r: |rLightning Strike: Damages 3 nearby enemies whenever it casts a spell. \n|cffffff00Level Up Bonus|r: rLightning Strike: +50 damage.")
                
    call SaveStr(HT_data, 'N00Q', 1, "ReplaceableTextures\\CommandButtons\\BTNFurbolgElder.blp") // Ursa
    call SaveStr(HT_data, 'N00Q', 2, "|cffffff00Level Up Bonus|r: +25 additional attack damage.")
            
                         
    call SaveStr(HT_data, 'N00C', 1, "ReplaceableTextures\\CommandButtons\\BTNFleshGolem.blp") // War golem
    call SaveStr(HT_data, 'N00C', 2, "|cffffff00Level Up Bonus|r: +600 hit points.")
        
    call SaveStr(HT_data, 'O006', 1, "ReplaceableTextures\\CommandButtons\\BTNOrcWarlockRed.blp") // warlock
    call SaveStr(HT_data, 'O006', 2, "|cffffff00Level Up Bonus|r: +15 mana regeneration.")
    
    call SaveStr(HT_data, 'H007', 1, "ReplaceableTextures\\CommandButtons\\BTNSylvanusWindrunner.blp") // sylvane
    call SaveStr(HT_data, 'H007', 2, "|cff00ffffPassive|r: Ranger Crit: 11% chance to deal 5% bonus physical damage. [|cff80ff80Luck|r][|cff00ffffCrit|r]\n|cffffff00Level Up Bonus|r: +5% base damage to all critical hits.")
    
    call SaveStr(HT_data, 'H000', 1, "ReplaceableTextures\\CommandButtons\\BTNUnbroken.blp") // void
    call SaveStr(HT_data, 'H000', 2, "|cff00ffffPassive|r: Void Bash: 18% chance on attacks to deal 25 bonus damage and stun for 0.17 seconds. \n|cffffff00Level Up Bonus|r: Void Bash: +50 damage")
              
    call SaveStr(HT_data, 'H016', 1, "ReplaceableTextures\\CommandButtons\\BTNDoomGuard.blp") // DOOMguard
    call SaveStr(HT_data, 'H016', 2, "|cff00ffffPassive|r: Hellfire: Deals initial damage and damage per second to nearby enemies for 8 seconds, every 8 seconds. \n|cffffff00Level Up Bonus|r: Hellfire: +50 initial damage, +10 damage per second.")
                 
    call SaveStr(HT_data, 'H017', 1, "ReplaceableTextures\\CommandButtons\\BTNRockGolem.blp") // golem
    call SaveStr(HT_data, 'H017', 2, "|cffffff00Level Up Bonus|r: +16 block.")
    
    
    
    call SaveStr(HT_data, 'N02K', 1, "ReplaceableTextures\\CommandButtons\\BTNRevenant.blp")
 //   call SaveStr(HT_data,'N02K',1, "ReplaceableTextures\\CommandButtons\\BTNFrostRevenant.blp" )       // cold
    call SaveStr(HT_data, 'N02K', 2, "|cff00ffffPassive|r: Frost Aura: Reduces the attack speed of enemies. \n|cffffff00Level Up Bonus|r: Frost Aura: +6% attack speed reduction.")


    call SaveStr(HT_data, 'H018', 1, "ReplaceableTextures\\CommandButtons\\BTNHeroLich.blp") // Lich
    call SaveStr(HT_data, 'H018', 2, "|cff00ffffPassive|r: Flash Freeze: When the Hero deals magic damage it deals bonus damage in an area around the target once every 8 seconds. \n|cffffff00Level Up Bonus|r: Flash Freeze: +60 damage.")
    
    call SaveStr(HT_data, 'H019', 1, "ReplaceableTextures\\CommandButtons\\BTNHeroMountainKing.blp") // Gnome master
    call SaveStr(HT_data, 'H019', 2, "|cff00ffffPassive|r: Gnome Stomp: At the start of every fight it deals damage and stuns all nearby heroes for 1 second and creeps for 2 seconds. \n|cffffff00Level Up Bonus|r: Gnome Stomp: +55 damage, +0.04 seconds hero stun, +0.08 seconds creep stun.")

    call SaveStr(HT_data, 'N02P', 1, "ReplaceableTextures\\CommandButtons\\BTNHeroAlchemist.blp") // Greed goblin
    call SaveStr(HT_data, 'N02P', 2, "|cff00ffffPassive|r: Greed: Gains 25 bonus gold and experience whenever it kills a unit. 1% less effective for each level of Pillage and Learnability.\n|cffffff00Level Up Bonus|r: Greed: +2 bonus gold and experience")



    call SaveStr(HT_data, 'H01B', 1, "ReplaceableTextures\\CommandButtons\\BTNCentaurArcher.blp") // Cent archer
    call SaveStr(HT_data, 'H01B', 2, "|cff00ffffPassive|r: Horsepower: Attacks deal bonus damage once every 2 seconds.\n|cffffff00Level Up Bonus|r: Horsepower: +70 damage.")

    call SaveStr(HT_data, 'H01C', 1, "ReplaceableTextures\\CommandButtons\\BTNOgre.blp") // Cent archer
    call SaveStr(HT_data, 'H01C', 2, "|cff00ffffPassive|r: Ogre Stomp: Once every 9 seconds when the Hero is physically damaged it damages nearby enemies for 30% of its strength and stuns them for 1 second.\n|cffffff00Level Up Bonus|r: Ogre Stomp: +30 damage")

    call SaveStr(HT_data, 'H01D', 1, "ReplaceableTextures\\CommandButtons\\BTNGhostOfKelThuzad.blp") //Xesil
    call SaveStr(HT_data, 'H01D', 2, "|cff00ffffPassive|r: Xesil's Legacy: Whenever the Hero casts a spell it has a 25% to instantly reset its cooldown. Does not stack with the item. [|cff80ff80Luck|r]\n|cffffff00Level Up Bonus|r: +100 mana, +1 mana regeneration.")

    call SaveStr(HT_data, 'H01E', 1, "ReplaceableTextures\\CommandButtons\\BTNOgreMagi.blp") //OGRE MAGE
    call SaveStr(HT_data, 'H01E', 2, "|cff00ffffPassive|r: Ogre's Luck: Whenever the Hero casts an ability it has a 15% chance to cast it again. [|cff80ff80Luck|r] \n|cffffff00Level Up Bonus|r: Ogre's Luck: +2% chance.")


    call SaveStr(HT_data, 'O00A', 1, "ReplaceableTextures\\CommandButtons\\BTNForestTroll.blp") //OGRE MAGE
    call SaveStr(HT_data, 'O00A', 2, "|cffffff00Level Up Bonus|r: +1% attack speed.")



    call SaveStr(HT_data, 'O00B', 1, "ReplaceableTextures\\CommandButtons\\BTNWendigo.blp") //Yeti
    call SaveStr(HT_data, 'O00B', 2, "|cff00ffffPassive|r: Yeti Strength: Gives the Hero +20 strength if it hass less than 50 armor. \n|cffffff00Level Up Bonus|r: Yeti Strength: +20 bonus.")
    
    call SaveStr(HT_data, 'O00C', 1, "ReplaceableTextures\\CommandButtons\\BTNSatyr.blp") //Satyr
    call SaveStr(HT_data, 'O00C', 2, "|cffffff00Level Up Bonus|r: +0.5 evasion.")

    call SaveStr(HT_data, 'H01F', 1, "ReplaceableTextures\\CommandButtons\\BTNMurlocNightCrawler.blp") //Murlock
    call SaveStr(HT_data, 'H01F', 2, "|cff00ffffPassive|r: Fish Hook: Increases all stats by 1 every time the Hero attacks an enemy, lasts until the end of the fight. \n|cffffff00Level Up Bonus|r: (Every 10 levels) Fish Hook: +1 stat per attack.")
    
    
    call SaveStr(HT_data, 'H01G', 1, "ReplaceableTextures\\CommandButtons\\BTNMedivh.blp") //Mediv
    call SaveStr(HT_data, 'H01G', 2, "|cffffff00Level Up Bonus|r: +2 magic power.")
    
        
    call SaveStr(HT_data, 'H01H', 1, "ReplaceableTextures\\CommandButtons\\BTNGhoul.blp") //ghoul
    call SaveStr(HT_data, 'H01H', 2, "|cff00ffffPassive|r: Cannibal Frenzy: +12 attack damage, and 100% lifesteal on that +12 damage. \n|cffffff00Level Up Bonus|r: Cannibal Frenzy: +12 damage and lifesteal.")

    call SaveStr(HT_data, 'H01I', 1, "ReplaceableTextures\\CommandButtons\\BTNBanshee.blp") //banshee
    call SaveStr(HT_data, 'H01I', 2, "|cff00ffffPassive|r: Banshee's Curse: 75% of the Hero's maximum hit points are added to its mana. When the Hero takes damage its mana is reduced instead of its hit points. When it reaches 0 mana it dies.")
    
    call SaveStr(HT_data, 'H01J', 1, "ReplaceableTextures\\CommandButtons\\BTNGrunt.blp") //grunt
    call SaveStr(HT_data, 'H01J', 2, "|cff00ffffPassive|r: The Grunt's Grunt: At the start of every fight the Hero gains 20 bonus attack damage and strength for 8 seconds. \n|cffffff00Level Up Bonus|r: Grunt's Grunt: +20 attack damage and strength.")
    
    
    call SaveStr(HT_data, 'H01L', 1, "ReplaceableTextures\\CommandButtons\\BTNDranaiMage.blp") //seer
    call SaveStr(HT_data, 'H01L', 2, "|cff00ffffPassive|r: Magical Insight: The Hero's physical damage becomes magic damage and its magic damage becomes physical damage.")
 
     call SaveStr(HT_data, 'H00A', 1, "ReplaceableTextures\\CommandButtons\\BTNHeroTaurenChieftain.blp") //Areana master
    call SaveStr(HT_data, 'H00A', 2, "|cff00ffffPassive|r: Arena Veteran: +15 Pvp bonus. \n|cffffff00Level Up Bonus|r: +30 glory.")
 
endfunction
//===========================================================================
// Trigger: Init
//===========================================================================




function SkillSysStart takes nothing returns nothing
local integer NumButton= LoadInteger(HtSpell, GetHandleId(BlzGetTriggerFrame()), 1)
local integer i_ck= 1
local integer PlID= GetPlayerId(GetTriggerPlayer())
local integer SpellId_1= 0
local integer AbilLevel= 0
local integer ULT_ID= 0
local string ToolTipS= ""
local boolean TypT= false
local boolean en_d= true
local integer i1
local integer i2
local integer i3
local unit SpellU


if BlzGetTriggerFrameEvent() == FRAMEEVENT_CONTROL_CLICK then


if GetTriggerPlayer() == GetLocalPlayer() then
  call BlzFrameSetEnable(BlzGetTriggerFrame(), false)
  call BlzFrameSetEnable(BlzGetTriggerFrame(), true)
endif

if NumButton == 36 then

    set i1=GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_LUMBER)
    
    call SetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_LUMBER, 0)
    call SetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD) + i1 * 30)
	call ResourseRefresh(GetTriggerPlayer())
endif

if NumButton == 37 then

    set i1=GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD) / 30
    
    call SetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD) - i1 * 30)
    call SetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_LUMBER, GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_LUMBER) + i1)
    call ResourseRefresh(GetTriggerPlayer())
endif

elseif BlzGetTriggerFrameEvent() == FRAMEEVENT_MOUSE_UP then


elseif BlzGetTriggerFrameEvent() == FRAMEEVENT_MOUSE_ENTER then

if NumButton == 0 then

     set ToolTipS="|cffff0000" + GetObjectName(GetUnitTypeId(udg_units01[PlID + 1])) + "|r\n" + GetClassification(GetUnitTypeId(udg_units01[PlID + 1])) + "\n" + LoadStr(HT_data, GetUnitTypeId(udg_units01[PlID + 1]), 2) + "\n\n"
     set ToolTipS=ToolTipS + "|cffd4954dIncome|r: " + I2S(Income[PlID]) + "\n"
	 set ToolTipS=ToolTipS + "|cff4d4dd4Hero attributes|r  \n"
     set ToolTipS=ToolTipS + "|cffe7544aStrength|r per level: " + R2S(BlzGetUnitRealField(udg_units01[PlID + 1], ConvertUnitRealField('ustp'))) + "\n"
     set ToolTipS=ToolTipS + "|cffd6e049Agility|r per level: " + R2S(BlzGetUnitRealField(udg_units01[PlID + 1], ConvertUnitRealField('uagp'))) + "\n"
     set ToolTipS=ToolTipS + "|cff4daed4Intelligence|r per level: " + R2S(BlzGetUnitRealField(udg_units01[PlID + 1], ConvertUnitRealField('uinp'))) + "\n"
     set ToolTipS=ToolTipS + "|cff51d44dBase hit point/mana regeneration|r - " + R2S(BlzGetUnitRealField(udg_units01[PlID + 1], ConvertUnitRealField('uhpr'))) + "/" + R2S(BlzGetUnitRealField(udg_units01[PlID + 1], ConvertUnitRealField('umpr'))) + "\n"
    if GetLocalPlayer() == GetTriggerPlayer() then
         call BlzFrameSetText(ToolBoxSpelsT, ToolTipS)
         call BlzFrameSetVisible(ToolBoxSpels, true)
    endif
endif

if NumButton == 100 then
	set SpellU=udg_units01[NumPlayerLast[PlID] + 1]
	set ToolTipS="|cffff0000" + GetObjectName(GetUnitTypeId(SpellU)) + "|r\n" + GetClassification(GetUnitTypeId(SpellU)) + "\n" + LoadStr(HT_data, GetUnitTypeId(SpellU), 2) + "\n\n"
    set ToolTipS=ToolTipS + "|cffd4954dIncome|r: " + I2S(Income[NumPlayerLast[PlID]])

	 if GetLocalPlayer() == GetTriggerPlayer() then
         call BlzFrameSetText(ToolBoxSpelsT, ToolTipS)
         call BlzFrameSetVisible(ToolBoxSpels, true)
    endif
endif



if NumButton > 100 and NumButton <= 120 then
    set SpellU=udg_units01[NumPlayerLast[PlID] + 1]
    set i3=GetInfoHeroSpell(SpellU , NumButton - 100)
    set SpellCP[PlID]=i3
    set ToolTipS=BlzGetAbilityTooltip(i3, GetUnitAbilityLevel(SpellU, i3) - 1) + "\n"
    set ToolTipS=ToolTipS + GetClassification(i3) + "\n"
    set ToolTipS=ToolTipS + BlzGetAbilityExtendedTooltip(i3, GetUnitAbilityLevel(SpellU, i3) - 1)
        
    if GetLocalPlayer() == GetTriggerPlayer() then
         call BlzFrameSetText(ToolBoxSpelsT, ToolTipS)
         call BlzFrameSetVisible(ToolBoxSpels, true)
    endif
endif




elseif BlzGetTriggerFrameEvent() == FRAMEEVENT_MOUSE_LEAVE then

if GetLocalPlayer() == GetTriggerPlayer() then
  call BlzFrameSetText(ToolBoxSpelsT, ToolTipS)
    call BlzFrameSetVisible(ToolBoxSpels, false)
endif


endif
	
	
endfunction







 
  function CreateIconWorld takes integer NumAb,string Icon,real x,real y,real size returns nothing
    local framehandle TalantA
    local framehandle TalantB= BlzCreateFrame("ScoreScreenBottomButtonTemplate", gameUI, 0, 0)
    //local framehandle GR
    //local framehandle TT
    local framehandle TT_text

    call BlzFrameSetSize(TalantB, size, size)
    call BlzFrameSetPoint(TalantB, FRAMEPOINT_TOPLEFT, gameUI, FRAMEPOINT_TOPLEFT, x, y)
    set TalantA=BlzCreateFrame("BNetPopupMenuBackdropTemplate", TalantB, 0, 0)
    call BlzFrameSetSize(TalantA, size, size)
    call BlzFrameSetTexture(TalantA, Icon, 1, true)
    call BlzFrameSetPoint(TalantA, FRAMEPOINT_CENTER, TalantB, FRAMEPOINT_CENTER, 0, 0)


    call BlzFrameSetVisible(TalantB, false)
 

    set SpellFR[NumAb]=TalantA
    set SpellUP[NumAb]=TalantB
    //set SpellTT[NumAb] = TT
    call SaveInteger(HtSpell, GetHandleId(TalantB), 1, NumAb)
    call BlzTriggerRegisterFrameEvent(SPEL_DFF, TalantB, FRAMEEVENT_CONTROL_CLICK)
    call BlzTriggerRegisterFrameEvent(SPEL_DFF, TalantB, FRAMEEVENT_MOUSE_UP)
    call BlzTriggerRegisterFrameEvent(SPEL_DFF, TalantB, FRAMEEVENT_MOUSE_ENTER)
    call BlzTriggerRegisterFrameEvent(SPEL_DFF, TalantB, FRAMEEVENT_MOUSE_LEAVE)

endfunction


function Trig_ABIL_TAKE_Actions takes nothing returns nothing
 local integer I_i= 1
 local integer X___1= 0
 local integer Y___1= 0
 local real sizeAbil= 0.022
 

 
 call InitGameUI()
	call Init_Hero_data()
 set gameUI=BlzGetOriginFrame(ORIGIN_FRAME_WORLD_FRAME, 0)
  set SPEL_DFF=CreateTrigger()
  call TriggerAddAction(SPEL_DFF, function SkillSysStart)
  call CreateIconWorld(0 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.594 , - 0.39 , 0.036)

  call CreateIconWorld(36 , "ReplaceableTextures\\CommandButtons\\BTNChestOfGold.blp" , 0.43 + 0.025 , - 0.024 , 0.025)
   call BlzFrameSetVisible(SpellUP[36], true)
  call CreateIconWorld(37 , "ReplaceableTextures\\CommandButtons\\BTNBundleOfLumber.blp" , 0.43 + 0.05 , - 0.024 , 0.025)
   call BlzFrameSetVisible(SpellUP[37], true)



	
  call CreateIconWorld(100 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 , - sizeAbil , sizeAbil)

  call CreateIconWorld(101 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + sizeAbil , - sizeAbil , sizeAbil)

  call CreateIconWorld(102 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 2 * sizeAbil , - sizeAbil , sizeAbil)

  call CreateIconWorld(103 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 3 * sizeAbil , - sizeAbil , sizeAbil)

  call CreateIconWorld(104 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 4 * sizeAbil , - sizeAbil , sizeAbil)

  call CreateIconWorld(105 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 5 * sizeAbil , - sizeAbil , sizeAbil)

  call CreateIconWorld(106 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 6 * sizeAbil , - sizeAbil , sizeAbil)

  call CreateIconWorld(107 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 7 * sizeAbil , - sizeAbil , sizeAbil)

  call CreateIconWorld(108 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 8 * sizeAbil , - sizeAbil , sizeAbil)

  call CreateIconWorld(109 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 9 * sizeAbil , - sizeAbil , sizeAbil)

  call CreateIconWorld(110 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 10 * sizeAbil , - sizeAbil , sizeAbil)


  call CreateIconWorld(111 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + sizeAbil , - 2 * sizeAbil , sizeAbil)

  call CreateIconWorld(112 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 2 * sizeAbil , - 2 * sizeAbil , sizeAbil)

  call CreateIconWorld(113 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 3 * sizeAbil , - 2 * sizeAbil , sizeAbil)

  call CreateIconWorld(114 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 4 * sizeAbil , - 2 * sizeAbil , sizeAbil)

  call CreateIconWorld(115 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 5 * sizeAbil , - 2 * sizeAbil , sizeAbil)

  call CreateIconWorld(116 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 6 * sizeAbil , - 2 * sizeAbil , sizeAbil)

  call CreateIconWorld(117 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 7 * sizeAbil , - 2 * sizeAbil , sizeAbil)

  call CreateIconWorld(118 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 8 * sizeAbil , - 2 * sizeAbil , sizeAbil)

  call CreateIconWorld(119 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 9 * sizeAbil , - 2 * sizeAbil , sizeAbil)

  call CreateIconWorld(120 , "ReplaceableTextures\\CommandButtons\\BTNSkillz.blp" , 0.04 + 10 * sizeAbil , - 2 * sizeAbil , sizeAbil)
  
 

  set ToolBoxSpels=BlzCreateFrame("ListBoxWar3", gameUI, 0, 0)
  call BlzFrameSetSize(ToolBoxSpels, 0.3, 0.16)
  call BlzFrameSetPoint(ToolBoxSpels, FRAMEPOINT_TOPRIGHT, gameUI, FRAMEPOINT_TOPRIGHT, 0, - 0.02)
  set ToolBoxSpelsT=BlzCreateFrameByType("TEXT", "StandardInfoTextTemplate", ToolBoxSpels, "StandardTitleTextTemplate", 0)
  call BlzFrameSetPoint(ToolBoxSpelsT, FRAMEPOINT_TOPLEFT, ToolBoxSpels, FRAMEPOINT_TOPLEFT, 0.01, - 0.014)
  call BlzFrameSetSize(ToolBoxSpelsT, 0.28, 0.2)
  call BlzFrameSetText(ToolBoxSpelsT, "")
  call BlzFrameSetVisible(ToolBoxSpels, false)

endfunction

function Trig_Init_Actions takes nothing returns nothing






endfunction

//===========================================================================
function InitTrig_Init takes nothing returns nothing
    set gg_trg_Init=CreateTrigger()
    call TriggerRegisterTimerEventSingle(gg_trg_Init, 1.00)
    call TriggerAddAction(gg_trg_Init, function Trig_ABIL_TAKE_Actions)

endfunction


//===========================================================================
// Trigger: UpdateFrame
//===========================================================================


function Trig_UpdateFrame_Actions takes nothing returns nothing


//if udg_units01[ GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] != null then
   set NumPlayerLast[GetPlayerId(GetTriggerPlayer())]=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
//endif


endfunction

//===========================================================================
function InitTrig_UpdateFrame takes nothing returns nothing
    set gg_trg_UpdateFrame=CreateTrigger()
    call TriggerRegisterPlayerSelectionEventBJ(gg_trg_UpdateFrame, Player(0), true)
    call TriggerRegisterPlayerSelectionEventBJ(gg_trg_UpdateFrame, Player(1), true)
    call TriggerRegisterPlayerSelectionEventBJ(gg_trg_UpdateFrame, Player(2), true)
    call TriggerRegisterPlayerSelectionEventBJ(gg_trg_UpdateFrame, Player(3), true)
    call TriggerRegisterPlayerSelectionEventBJ(gg_trg_UpdateFrame, Player(4), true)
    call TriggerRegisterPlayerSelectionEventBJ(gg_trg_UpdateFrame, Player(5), true)
    call TriggerRegisterPlayerSelectionEventBJ(gg_trg_UpdateFrame, Player(6), true)
    call TriggerRegisterPlayerSelectionEventBJ(gg_trg_UpdateFrame, Player(7), true)
    call TriggerAddAction(gg_trg_UpdateFrame, function Trig_UpdateFrame_Actions)
endfunction


//===========================================================================
// Trigger: InitAbility Copy
//===========================================================================


function SaveItemAbility takes integer abilityId,integer itemId returns nothing
    call SaveInteger(ITEM_SPELL, abilityId, 1, itemId)
    call SaveInteger(ITEM_SPELL, itemId, 2, abilityId)
endfunction

function GetItemAbility takes integer itemId returns integer
    return LoadInteger(ITEM_SPELL, itemId, 2)
endfunction

function Trig_Spell_Initialization_Actions takes nothing returns nothing
	set udg_integers08[1]='A06S'
	set udg_integers08[2]='ANms'
	set udg_integers08[3]='AUcs'
	set udg_integers08[4]='AOcr'
	set udg_integers08[5]='AHad'
	set udg_integers08[6]='AOae'
	set udg_integers08[7]='AEev'
	set udg_integers08[8]='AEfk'
	set udg_integers08[9]='AOsf'
	set udg_integers08[10]='AHfs'
	set udg_integers08[11]='ANfl'
	set udg_integers08[12]='AUfn'
	set udg_integers08[13]='A06M'
	set udg_integers08[14]='A084'
	set udg_integers08[15]='AUim'
	set udg_integers08[16]='AOsw'
	set udg_integers08[17]='AEsh'
	set udg_integers08[18]='AEah'
	set udg_integers08[19]='AHtc'
	set udg_integers08[20]='AUau'
	set udg_integers08[21]='AUav'
	set udg_integers08[22]='AOws'
	set udg_integers08[23]='ANdr'
	set udg_integers08[24]='ANca'
	set udg_integers08[25]='AUts'
	set udg_integers08[26]='AEer'
	set udg_integers08[27]='AHwe'
	set udg_integers08[28]='AOsh'
	set udg_integers08[29]='ANlm'
	set udg_integers08[30]='A023'
	set udg_integers08[31]='AEar'
	set udg_integers08[32]='AEim'
	set udg_integers08[33]='AHtb'
	set udg_integers08[34]='AOmi'
	set udg_integers08[35]='AOcl'
	set udg_integers08[36]='A089'
	set udg_integers08[37]='ANcs'
	set udg_integers08[38]='AOwk'
	set udg_integers08[39]='ANdh'
	set udg_integers08[40]='ANbf'
	set udg_integers08[41]='A025'
	set udg_integers08[42]='A024'
	set udg_integers08[43]='ANab'
	set udg_integers08[44]='AEsf'
	set udg_integers08[45]='Aam2'
	set udg_integers08[46]='AUfu'
	set udg_integers08[47]='AHbz'
	set udg_integers08[48]='ANrf'
	set udg_integers08[49]='ANst'
	set udg_integers08[50]='ANht'
	set udg_integers08[51]='AUin'
	set udg_integers08[52]='A085'
	set udg_integers08[53]='AHbn'
	set udg_integers08[54]='ANhs'
	set udg_integers08[55]='AHav'
	set udg_integers08[56]='ANbr'
	set udg_integers08[57]='AUdd'
	set udg_integers08[58]='AEsv'
	set udg_integers08[59]='Ablo'
	set udg_integers08[60]='ANsy'
	set udg_integers08[61]='Awar'
	set udg_integers08[62]='A00Q'
	set udg_integers08[63]='AUcb'
	set udg_integers08[64]='Aakb'
	set udg_integers08[65]='Assk'
	set udg_integers08[66]='AHfa'
	set udg_integers08[67]='Arai'
	set udg_integers08[68]='ANba'
	set udg_integers08[69]='AHca'
	set udg_integers08[70]='Afae'
	set udg_integers08[71]='ANpa'
	set udg_integers08[72]='Acrs'
	set udg_integers08[73]='Ainf'
	set udg_integers08[74]='ACac'
	set udg_integers08[75]='A050'
	set udg_integers08[76]='ANsw'
	set udg_integers08[77]='ANsg'
	set udg_integers08[78]='Arsq'
	set udg_integers08[79]='AHpx'
	set udg_integers08[80]='A086'
	set udg_integers08[81]='Auhf'
	set udg_integers08[82]='Aspl'
	set udg_integers08[83]='Absk'
	set udg_integers08[84]='A087'
	set udg_integers08[85]='ACls'
	set udg_integers08[86]='ANvc'
	set udg_integers08[87]='ANen'
	set udg_integers08[88]='A06Q'
	set udg_integers08[89]='A017'
	set udg_integers08[90]='Asal'
	set udg_integers08[91]='A06O'
	set udg_integers08[92]='Aroc'
	set udg_integers08[93]='AOr2'
	set udg_integers08[94]='AEbl'
	set udg_integers08[95]='Apsh'
	set udg_integers08[96]='Afod'
	set udg_integers08[97]='A02L'
	set udg_integers08[98]='A02K'
   	set udg_integers08[99]='A02M'
   	set udg_integers08[100]='A02N'
   	set udg_integers08[101]='A02O'
	set udg_integers08[102]='A02S'
	set udg_integers08[103]='A02T'
	set udg_integers08[104]='A02U'
    set udg_integers08[105]='A02W'
    set udg_integers08[106]='A02X'
    set udg_integers08[107]='A02Z'
    set udg_integers08[108]='AHab'
    set udg_integers08[109]='A03P'
    set udg_integers08[110]='A03Q'
    set udg_integers08[111]='A03U'
    set udg_integers08[112]='A03X'
    set udg_integers08[113]='A03Y'
    set udg_integers08[114]='A040'
    set udg_integers08[115]='A041'
    set udg_integers08[116]='A042'
    set udg_integers08[117]='A045'
    set udg_integers08[118]='ANr2'
    set udg_integers08[119]='Acdb'
    set udg_integers08[120]='ANde'
    set udg_integers08[121]='ACpv'
    set udg_integers08[122]='AHab'

                                          	
	set udg_integers09[1]='I00L'
	set udg_integers09[2]='I03F'
	set udg_integers09[3]='I008'
	set udg_integers09[4]='I00B'
	set udg_integers09[5]='I009'
	set udg_integers09[6]='I000'
	set udg_integers09[7]='I00A'
	set udg_integers09[8]='I003'
	set udg_integers09[9]='I004'
	set udg_integers09[10]='I005'
	set udg_integers09[11]='I001'
	set udg_integers09[12]='I00C'
	set udg_integers09[13]='I045'
	set udg_integers09[14]='I00D'
	set udg_integers09[15]='I006'
	set udg_integers09[16]='I00E'
	set udg_integers09[17]='I00F'
	set udg_integers09[18]='I00H'
	set udg_integers09[19]='I00I'
	set udg_integers09[20]='I007'
	set udg_integers09[21]='I00J'
	set udg_integers09[22]='I00K'
	set udg_integers09[23]='I00M'
	set udg_integers09[24]='I00N'
	set udg_integers09[25]='I00O'
	set udg_integers09[26]='I00Q'
	set udg_integers09[27]='I00S'
	set udg_integers09[28]='I00R'
	set udg_integers09[29]='I00T'
	set udg_integers09[30]='I04H'
	set udg_integers09[31]='I00W'
	set udg_integers09[32]='I00V'
	set udg_integers09[33]='I00X'
	set udg_integers09[34]='I00Z'
	set udg_integers09[35]='I010'
	set udg_integers09[36]='I042'
	set udg_integers09[37]='I01A'
	set udg_integers09[38]='I01R'
	set udg_integers09[39]='I01S'
	set udg_integers09[40]='I01T'
	set udg_integers09[41]='I02B'
	set udg_integers09[42]='I04I'
	set udg_integers09[43]='I01Z'
	set udg_integers09[44]='I01Y'
	set udg_integers09[45]='I03S'
	set udg_integers09[46]='I01W'
	set udg_integers09[47]='I024'
	set udg_integers09[48]='I025'
	set udg_integers09[49]='I026'
	set udg_integers09[50]='I040'
	set udg_integers09[51]='I02A'
	set udg_integers09[52]='I029'
	set udg_integers09[53]='I02C'
	set udg_integers09[54]='I028'
	set udg_integers09[55]='I027'
	set udg_integers09[56]='I02D'
	set udg_integers09[57]='I02E'
	set udg_integers09[58]='I03Y'
	set udg_integers09[59]='I02F'
	set udg_integers09[60]='I02G'
	set udg_integers09[61]='I02H'
	set udg_integers09[62]='I02I'
	set udg_integers09[63]='I02M'
	set udg_integers09[64]='I002'
	set udg_integers09[65]='I02O'
	set udg_integers09[66]='I02P'
	set udg_integers09[67]='I02Q'
	set udg_integers09[68]='I02R'
	set udg_integers09[69]='I02S'
	set udg_integers09[70]='I02T'
	set udg_integers09[71]='I02U'
	set udg_integers09[72]='I02V'
	set udg_integers09[73]='I02W'
	set udg_integers09[74]='I02X'
	set udg_integers09[75]='I03X'
	set udg_integers09[76]='I02Z'
	set udg_integers09[77]='I030'
	set udg_integers09[78]='I031'
	set udg_integers09[79]='I032'
	set udg_integers09[80]='I033'
	set udg_integers09[81]='I034'
	set udg_integers09[82]='I035'
	set udg_integers09[83]='I036'
	set udg_integers09[84]='I037'
	set udg_integers09[85]='I038'
	set udg_integers09[86]='I039'
	set udg_integers09[87]='I03A'
	set udg_integers09[88]='I03B'
	set udg_integers09[89]='I03V'
	set udg_integers09[90]='I03D'
	set udg_integers09[91]='I03E'
	set udg_integers09[92]='I03N'
	set udg_integers09[93]='I03G'
	set udg_integers09[94]='I03M'
	set udg_integers09[95]='I03U'
	set udg_integers09[96]='I03Q'
	set udg_integers09[97]='I04X'
 	set udg_integers09[98]='I04Y'
	set udg_integers09[99]='I04Z'
	set udg_integers09[100]='I050'
	set udg_integers09[101]='I051'
	set udg_integers09[102]='I053'
	set udg_integers09[103]='I054'
	set udg_integers09[104]='I055'
	set udg_integers09[105]='I056'
   	set udg_integers09[106]='I057'
    set udg_integers09[107]='I058'
	set udg_integers09[108]='I00U'
 	set udg_integers09[109]='I05M'
    set udg_integers09[110]='I05N'
    set udg_integers09[111]='I05O'
	set udg_integers09[112]='I05P'
	set udg_integers09[113]='I05Q'
	set udg_integers09[114]='I05R'
	set udg_integers09[115]='I05S'
	set udg_integers09[116]='I05T'
	set udg_integers09[117]='I05V'
	set udg_integers09[118]='I00Y'
	set udg_integers09[119]='I05W'
	set udg_integers09[120]='I05X'
	set udg_integers09[121]='I05Y'
	set udg_integers09[122]='ANms'
    
    
    set udg_integers08[123]='AHds'
    set udg_integers09[123]='I011'
    
    set udg_integers08[124]='ANtm'
    set udg_integers09[124]='I00G'
    
    set udg_integers08[125]='ANsi'
    set udg_integers09[125]='I03C'
    
    set udg_integers08[126]='Asta'
    set udg_integers09[126]='I044'
       

    set udg_integers08[127]='A00M'
    set udg_integers09[127]='I01V'
    
    set udg_integers08[128]='AOvd'
    set udg_integers09[128]='I03Z'
  
    set udg_integers08[129]='A046'
    set udg_integers09[129]='I05Z'
 
    set udg_integers08[130]='ANso'
    set udg_integers09[130]='I062'
        
    set udg_integers08[131]='Aclf'
    set udg_integers09[131]='I063'
    
    set udg_integers08[132]='A04E'
    set udg_integers09[132]='I067'
                   
    set udg_integers08[133]='A04F'
    set udg_integers09[133]='I068'

    set udg_integers08[134]='A04G'
    set udg_integers09[134]='I069'
 
    set udg_integers08[135]='A04H'
    set udg_integers09[135]='I06A'

    set udg_integers08[136]='A04K'
    set udg_integers09[136]='I06C'



    set udg_integers08[137]='A04L'
    set udg_integers09[137]='I06D'

    set udg_integers08[138]='ANmo'
    set udg_integers09[138]='I06G'

    set udg_integers08[139]='A053'
    set udg_integers09[139]='I06L'


    set udg_integers08[140]='A05R'
    set udg_integers09[140]='I07J'
    
    set udg_integers08[141]='A05S'
    set udg_integers09[141]='I07L'
    
    
    
    set udg_integers08[142]='A05U'
    set udg_integers09[142]='I07N'
    
    
        set udg_integers08[143]='A05X'
    set udg_integers09[143]='I07Q'
 
 
    set udg_integers08[144]='A05Z'
    set udg_integers09[144]='I07R'
    
    
    set udg_integers08[145]='A060'
    set udg_integers09[145]='I07S'
    
    
    set udg_integers08[146]='A067'
    set udg_integers09[146]='I07X'
  
    set udg_integers08[147]='A06C'
    set udg_integers09[147]='I07Z'
    
    set udg_integers08[148]='A06U'
    set udg_integers09[148]='I081'
    
    set udg_integers08[149]='A06V'
    set udg_integers09[149]='I085'
 
    set udg_integers08[150]='A06X'
    set udg_integers09[150]='I087'
    
    
    set udg_integers08[151]='A06Z'
    set udg_integers09[151]='I08K'

    
    set udg_integers08[152]='A07L'
    set udg_integers09[152]='I094'
    set udg_integers08[153]='A07N'
    set udg_integers09[153]='I096'
    set udg_integers08[154]='A07U'
    set udg_integers09[154]='I09C'
    set udg_integers08[155]='A07S'
    set udg_integers09[155]='I09A'
    set udg_integers08[156]='A07T'
    set udg_integers09[156]='I09B'
   
     set udg_integers08[157]='A07X'
    set udg_integers09[157]='I09G'
    
    set udg_integers08[158]='A080'
    set udg_integers09[158]='I09H'
    
    set udg_integers08[159]='A081'
    set udg_integers09[159]='I09I'
    
    set udg_integers08[160]='A082'
    set udg_integers09[160]='I09J'
 
 
    set udg_integers08[161]='A083'
    set udg_integers09[161]='I09K'

	set udg_integer26=161
    
    
    
    call SaveItemAbility('A07R' , 'I099')
    call SaveItemAbility('A07Q' , 'I098')
    call SaveItemAbility('A07D' , 'I08V')
    call SaveItemAbility('A07B' , 'I08T')
    call SaveItemAbility('A07P' , 'I097')
    call SaveItemAbility('A07C' , 'I08U')
    call SaveItemAbility('A07K' , 'I093')
    call SaveItemAbility('A07E' , 'I08W')
    call SaveItemAbility('A07V' , 'I09F')
    
    
  



endfunction
//===========================================================================
// Trigger: AbsoluteAbilityUpgrade Copy
//===========================================================================


function Trig_AbsoluteAbilityUpgrade_Copy_Actions takes nothing returns nothing
    local integer ItemId= GetItemTypeId(GetManipulatedItem())
    local integer counter= 0
    local integer abilityId=  GetItemAbility(ItemId)
    local integer abilityLevel
    local unit u
    if abilityId != 0 then
        set u=GetTriggerUnit()
        set counter=LoadInteger(HT, GetHandleId(u), 941561)
        set abilityLevel=GetUnitAbilityLevel(u, abilityId)
        if abilityLevel > 0 then
        
            if abilityLevel < 30 then
                call SetUnitAbilityLevel(u, abilityId, abilityLevel + 1)
            else
                call AdjustPlayerStateBJ(BlzGetItemIntegerField(GetManipulatedItem(), ConvertItemIntegerField('iclr')), GetOwningPlayer(u), PLAYER_STATE_RESOURCE_LUMBER)
                call ResourseRefresh(GetOwningPlayer(u))
            endif
            
        else
            if counter < 10 and counter <= GetHeroMaxAbsoluteAbility(u) then
            
                call UnitAddAbility(u, abilityId)
                call BlzUnitDisableAbility(u, abilityId, false, true)
                call AddSpellPlayerInfo(abilityId , u , 1)
                call SaveInteger(HT, GetHandleId(GetTriggerUnit()), 941561, counter + 1)
            elseif counter > GetHeroMaxAbsoluteAbility(u) then
                call DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "You have the maximum number of abilities of this type. (Max:" + I2S(GetHeroMaxAbsoluteAbility(u) + 1) + ")")
                call AdjustPlayerStateBJ(BlzGetItemIntegerField(GetManipulatedItem(), ConvertItemIntegerField('iclr')), GetOwningPlayer(u), PLAYER_STATE_RESOURCE_LUMBER)
                call ResourseRefresh(GetOwningPlayer(u))

            endif
        endif
        set u=null
    endif
    
    
    
    

endfunction






//===========================================================================
function InitTrig_AbsoluteAbilityUpgrade_Copy takes nothing returns nothing
    set gg_trg_AbsoluteAbilityUpgrade_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_AbsoluteAbilityUpgrade_Copy, EVENT_PLAYER_UNIT_PICKUP_ITEM)
    call TriggerAddAction(gg_trg_AbsoluteAbilityUpgrade_Copy, function Trig_AbsoluteAbilityUpgrade_Copy_Actions)
endfunction


//===========================================================================
// Trigger: Timer Copy
//===========================================================================


function Trig_Timer_Copy_Actions takes nothing returns nothing
    set Glob_time=Glob_time + 1
endfunction

//===========================================================================
function InitTrig_Timer_Copy takes nothing returns nothing
    set gg_trg_Timer_Copy=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_Timer_Copy, 0.01)
    call TriggerAddAction(gg_trg_Timer_Copy, function Trig_Timer_Copy_Actions)
endfunction


//===========================================================================
// Trigger: Cooldown Copy
//===========================================================================

function RefreshSpellO takes nothing returns nothing
     local timer TimerT= GetExpiredTimer()
     local unit u= LoadUnitHandle(HT_SPELC, GetHandleId(TimerT), 2)
     local integer id= LoadInteger(HT_SPELC, GetHandleId(TimerT), 1)
     local real time= LoadReal(HT_SPELC, GetHandleId(TimerT), 3)

	//call BlzSetAbilityRealLevelField(BlzGetUnitAbility(LoadUnitHandle(HT_SPELC,GetHandleId(TimerT),2), ),ConvertAbilityRealLevelField('acdn'),GetUnitAbilityLevel(t,Aid)-1,timeT*ResCD)

     call BlzSetUnitAbilityCooldown(u, id, GetUnitAbilityLevel(u, id) - 1, time)



     call FlushChildHashtable(HT_SPELC, GetHandleId(TimerT))
     call DestroyTimer(TimerT)
     set TimerT=null
endfunction




function XesilChanceI takes nothing returns boolean
 local integer Chance

	if GetTriggerEventId() == EVENT_PLAYER_UNIT_SPELL_CAST then
	  set Chance=GetRandomInt(1, 4)

	  call SaveInteger(HT_SPELC, GetHandleId(GetTriggerUnit()), GetSpellAbilityId(), Chance)
	endif
	if GetTriggerEventId() == EVENT_PLAYER_UNIT_SPELL_EFFECT then
	  set Chance=LoadInteger(HT_SPELC, GetHandleId(GetTriggerUnit()), GetSpellAbilityId())
	endif
	if GetTriggerEventId() == EVENT_PLAYER_UNIT_SPELL_FINISH then
	  set Chance=LoadInteger(HT_SPELC, GetHandleId(GetTriggerUnit()), GetSpellAbilityId())
	endif

	if Chance == 3 then
		return true
	endif
	
	return false

endfunction






function Trig_Cooldown_Copy_Actions takes nothing returns nothing

    local unit t= GetTriggerUnit()
    local timer TimerT= null
    local real timeT= 0
    local integer Aid= GetSpellAbilityId()
    local integer Lv
    local real ResCD= 1
    local unit u= GetTriggerUnit()
    local real TIM2= BlzGetAbilityRealLevelField(GetSpellAbility(), ConvertAbilityRealLevelField('acdn'), GetUnitAbilityLevel(t, Aid) - 1)
    local real luck= GetUnitLuck(u)
    local real ress= 0
    set Lv=GetUnitAbilityLevel(t, Aid)
    set timeT=BlzGetAbilityCooldown(Aid, Lv - 1)


    if GetUnitAbilityLevel(t, 'A03P') >= 1 then
        set ResCD=ResCD * ( 1 - 0.01 * GetUnitAbilityLevel(t, 'A03P') )
    endif


    if Aid == 'A07X' then
        set ress=GetClassUnitSpell(t , 2)
    
    endif


	
    if GetUnitTypeId(GetTriggerUnit()) == 'H01D' then
        if XesilChanceI() then
            set ResCD=0.001

            call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", GetTriggerUnit(), "origin"))
        endif
    endif
    
    

    if UnitHasItemS(u , 'I08Y') and LoadBoolean(Elem, Aid, 2) then
        if GetRandomReal(0, 100) <= 40 * luck then
            set ResCD=0.001
        endif
    endif
    
    if UnitHasItemS(u , 'I08Z') and LoadBoolean(Elem, Aid, 3) then
            set ResCD=ResCD * 0.65
    endif


    if LoadTimerHandle(HT_timerSpell, GetHandleId(t), 2) != null then
        if Aid == 'A049' or Aid == 'A024' then
            set ResCD=ResCD * 0.1
        else
            
               set ResCD=ResCD * 0.05
        endif
    endif


 

    if ResCD != 1 or ress != 0 then
    
    
        set Lv=GetUnitAbilityLevel(t, Aid)
	//call BlzSetAbilityRealLevelField(GetSpellAbility(),ConvertAbilityRealLevelField('acdn'),GetUnitAbilityLevel(t,Aid)-1,timeT*ResCD)
        call BlzSetUnitAbilityCooldown(t, Aid, Lv - 1, ( timeT - ress ) * ResCD)
        set TimerT=CreateTimer()
        call SaveInteger(HT_SPELC, GetHandleId(TimerT), 1, Aid)
        call SaveUnitHandle(HT_SPELC, GetHandleId(TimerT), 2, t)
        call SaveReal(HT_SPELC, GetHandleId(TimerT), 3, timeT)

        call TimerStart(TimerT, 0.01, false, function RefreshSpellO)
        set TimerT=null
     endif

    set u=null
endfunction

//===========================================================================
function InitTrig_Cooldown_Copy takes nothing returns nothing
    set gg_trg_Cooldown_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Cooldown_Copy, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Cooldown_Copy, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Cooldown_Copy, EVENT_PLAYER_UNIT_SPELL_FINISH)
                //call TriggerRegisterAnyUnitEventBJ( gg_trg_Cooldown_Copy, EVENT_PLAYER_UNIT_SPELL_ENDCAST )
    call TriggerAddAction(gg_trg_Cooldown_Copy, function Trig_Cooldown_Copy_Actions)
endfunction


//===========================================================================
// Trigger: functions Copy
//===========================================================================


function AbsoluteIceFunc takes nothing returns boolean

    if IsUnitEnemy(GLOB_ABSOLUTE_COLD_U, GetOwningPlayer(GetFilterUnit())) then
        call UsOrderU2(GLOB_ABSOLUTE_COLD_U , GetFilterUnit() , GetUnitX(GLOB_ABSOLUTE_COLD_U) , GetUnitY(GLOB_ABSOLUTE_COLD_U) , 'A07W' , "entanglingroots" , GLOB_ABSOLUTE_COLD_DMG , 1.0001 , ABILITY_RLF_DAMAGE_PER_SECOND_EER1 , ABILITY_RLF_DURATION_NORMAL)
        
    endif
    return false
endfunction

function AbsoluteCold takes unit u,real dmg returns boolean
    set GLOB_ABSOLUTE_COLD_U=u
    set GLOB_ABSOLUTE_COLD_DMG=dmg

    call GroupEnumUnitsInRange(GL_GR, GetUnitX(u), GetUnitY(u), 500, AbsoluteIceFuncBool)



   return false
endfunction


function AbsoluteColdFunc takes nothing returns boolean

    if IsUnitEnemy(GLOB_ABSOLUTE_COLD_U, GetOwningPlayer(GetFilterUnit())) and IsHeroUnitId(GetUnitTypeId(GetFilterUnit())) then
        call AddCooldowns(GetFilterUnit() , 0.2)
    endif
    return false
endfunction


function AbsoluteColdCooldown takes unit u returns boolean
    set GLOB_ABSOLUTE_COLD_U=u


    call GroupEnumUnitsInRange(GL_GR, GetUnitX(u), GetUnitY(u), 500, AbsoluteColdBool)

   return false
endfunction

//===========================================================================
// Trigger: InAl Copy
//===========================================================================
function Trig_InAl_Copy_Actions takes nothing returns nothing
    call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_PASSIVE), Player(0), bj_ALLIANCE_ALLIED_ADVUNITS)
    call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_PASSIVE), Player(1), bj_ALLIANCE_ALLIED_ADVUNITS)
    call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_PASSIVE), Player(2), bj_ALLIANCE_ALLIED_ADVUNITS)
    call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_PASSIVE), Player(3), bj_ALLIANCE_ALLIED_ADVUNITS)
    call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_PASSIVE), Player(4), bj_ALLIANCE_ALLIED_ADVUNITS)
    call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_PASSIVE), Player(5), bj_ALLIANCE_ALLIED_ADVUNITS)
    call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_PASSIVE), Player(6), bj_ALLIANCE_ALLIED_ADVUNITS)
    call SetPlayerAllianceStateBJ(Player(PLAYER_NEUTRAL_PASSIVE), Player(7), bj_ALLIANCE_ALLIED_ADVUNITS)
endfunction

//===========================================================================
function InitTrig_InAl_Copy takes nothing returns nothing
    set gg_trg_InAl_Copy=CreateTrigger()
    call TriggerRegisterTimerEventSingle(gg_trg_InAl_Copy, 0.00)
    call TriggerAddAction(gg_trg_InAl_Copy, function Trig_InAl_Copy_Actions)
endfunction

//===========================================================================
// Trigger: FixUnit Copy
//===========================================================================
function Trig_FixUnit_Copy_Actions takes nothing returns nothing



if GetUnitTypeId(GetTriggerUnit()) == 'N02K' then
    call BlzSetUnitSkin(GetTriggerUnit(), 'nrvs')
endif


if GetUnitTypeId(GetTriggerUnit()) == 'N00Q' then
    call BlzSetUnitSkin(GetTriggerUnit(), 'nfrl')
endif
endfunction

//===========================================================================
function InitTrig_FixUnit_Copy takes nothing returns nothing
    set gg_trg_FixUnit_Copy=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_FixUnit_Copy, GetEntireMapRect())
    call TriggerAddAction(gg_trg_FixUnit_Copy, function Trig_FixUnit_Copy_Actions)
endfunction


//===========================================================================
// Trigger: InitHash Copy
//===========================================================================

function Trig_InitHash_Copy_Actions takes nothing returns nothing
call InitLState()
endfunction

//===========================================================================
function InitTrig_InitHash_Copy takes nothing returns nothing
    set gg_trg_InitHash_Copy=CreateTrigger()
    call TriggerRegisterTimerEventSingle(gg_trg_InitHash_Copy, 0.00)
    call TriggerAddAction(gg_trg_InitHash_Copy, function Trig_InitHash_Copy_Actions)
endfunction


//===========================================================================
// Trigger: Whirlwind Damage Copy
//===========================================================================
function Trig_Whirlwind_Damage_Copy_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A025' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func012C takes nothing returns boolean
    if ( not ( udg_MaxStat > udg_MaxBaseStat ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func015C takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(GetTriggerUnit(), 'Bakb') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func016C takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(GetTriggerUnit(), 'BEar') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func017C takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(GetTriggerUnit(), 'BOac') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func018C takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(GetTriggerUnit(), 'BNbr') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func019C takes nothing returns boolean
    if ( not ( UnitHasBuffBJ(GetTriggerUnit(), 'BHav') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) == 'I01O' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) == 'I01K' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) == 'I01F' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) == 'I01E' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) == 'I04A' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) == 'I012' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) == 'I014' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) == 'I01C' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) == 'I049' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func022Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) == 'I013' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func022Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) == 'I015' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func030Func001C takes nothing returns boolean
    if ( not ( IsUnitEnemy(GetEnumUnit(), GetOwningPlayer(GetTriggerUnit())) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Whirlwind_Damage_Copy_Func030A takes nothing returns nothing
    if ( Trig_Whirlwind_Damage_Copy_Func030Func001C() ) then
        call UnitDamageTargetBJ(GetTriggerUnit(), GetEnumUnit(), I2R(udg_WhirlwindDamage), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC)
    else
    endif
endfunction

function Trig_Whirlwind_Damage_Copy_Actions takes nothing returns nothing
    set udg_WhirlwindDamage=BlzGetUnitBaseDamage(GetTriggerUnit(), 1)
    set udg_MaxStr=GetHeroStatBJ(bj_HEROSTAT_STR, GetTriggerUnit(), true)
    set udg_BaseStr=GetHeroStatBJ(bj_HEROSTAT_STR, GetTriggerUnit(), false)
    set udg_MaxAgi=GetHeroStatBJ(bj_HEROSTAT_AGI, GetTriggerUnit(), true)
    set udg_BaseAgi=GetHeroStatBJ(bj_HEROSTAT_AGI, GetTriggerUnit(), false)
    set udg_MaxInt=GetHeroStatBJ(bj_HEROSTAT_INT, GetTriggerUnit(), true)
    set udg_BaseInt=GetHeroStatBJ(bj_HEROSTAT_INT, GetTriggerUnit(), false)
    set udg_MaxStat=IMaxBJ(udg_MaxAgi, udg_MaxInt)
    set udg_MaxStat=IMaxBJ(udg_MaxStat, udg_MaxStr)
    set udg_MaxBaseStat=IMaxBJ(udg_BaseAgi, udg_BaseInt)
    set udg_MaxStat=IMaxBJ(udg_MaxStat, udg_BaseStr)
    if ( Trig_Whirlwind_Damage_Copy_Func012C() ) then
        set udg_StatDifference=( udg_MaxStat - udg_MaxBaseStat )
    else
        set udg_StatDifference=udg_MaxBaseStat
    endif
    set udg_StatDifference=( udg_MaxStat - udg_MaxBaseStat )
    set udg_WhirlwindDamage=( udg_StatDifference + udg_WhirlwindDamage )
    if ( Trig_Whirlwind_Damage_Copy_Func015C() ) then
        set udg_WarDrumsMultiplier=GetUnitAbilityLevelSwapped('Aakb', GetTriggerUnit())
        set udg_WarDrumsDamage=( udg_WarDrumsMultiplier * 15 )
        set udg_WhirlwindDamage=( udg_WarDrumsDamage + udg_WhirlwindDamage )
    else
    endif
    if ( Trig_Whirlwind_Damage_Copy_Func016C() ) then
        set udg_TrueshotMultiplier=GetUnitAbilityLevelSwapped('AEar', GetTriggerUnit())
        set udg_TrueShotDamage=( udg_TrueshotMultiplier * 5 )
        set udg_TrueShotDamage=( udg_TrueShotDamage * udg_WhirlwindDamage )
        set udg_TrueShotDamage=( udg_TrueShotDamage / 100 )
    else
    endif
    if ( Trig_Whirlwind_Damage_Copy_Func017C() ) then
        set udg_CommandMultiplier=GetUnitAbilityLevelSwapped('ACac', GetTriggerUnit())
        set udg_CommandDamage=( udg_CommandMultiplier * 5 )
        set udg_CommandDamage=( udg_CommandDamage * udg_WhirlwindDamage )
        set udg_CommandDamage=( udg_CommandDamage / 100 )
    else
    endif
    if ( Trig_Whirlwind_Damage_Copy_Func018C() ) then
        set udg_WarDrumsMultiplier=GetUnitAbilityLevelSwapped('ANbr', GetTriggerUnit())
        set udg_WarDrumsDamage=( udg_WarDrumsMultiplier * 10 )
        set udg_WhirlwindDamage=( udg_WarDrumsDamage + udg_WhirlwindDamage )
    else
    endif
    if ( Trig_Whirlwind_Damage_Copy_Func019C() ) then
        set udg_WarDrumsMultiplier=GetUnitAbilityLevelSwapped('AHav', GetTriggerUnit())
        set udg_WarDrumsDamage=( udg_WarDrumsMultiplier * 10 )
        set udg_WhirlwindDamage=( udg_WarDrumsDamage + udg_WhirlwindDamage )
    else
    endif
    set udg_WhirlwindDamage=( udg_TrueShotDamage + udg_WhirlwindDamage )
    set udg_WhirlwindDamage=( udg_CommandDamage + udg_WhirlwindDamage )
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=6
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        if ( Trig_Whirlwind_Damage_Copy_Func022Func001C() ) then
            set udg_WhirlwindDamage=( udg_WhirlwindDamage + 34 )
        else
            if ( Trig_Whirlwind_Damage_Copy_Func022Func001Func001C() ) then
                set udg_WhirlwindDamage=( udg_WhirlwindDamage + 4 )
            else
                if ( Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001C() ) then
                    set udg_WhirlwindDamage=( udg_WhirlwindDamage + 15 )
                else
                    if ( Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001C() ) then
                        set udg_WhirlwindDamage=( udg_WhirlwindDamage + 80 )
                    else
                        if ( Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001C() ) then
                            set udg_WhirlwindDamage=( udg_WhirlwindDamage + 6 )
                        else
                            if ( Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001Func001C() ) then
                                set udg_WhirlwindDamage=( udg_WhirlwindDamage + 2 )
                            else
                                if ( Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001Func001Func001C() ) then
                                    set udg_WhirlwindDamage=( udg_WhirlwindDamage + 150 )
                                else
                                    if ( Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001Func001Func001Func001C() ) then
                                        set udg_WhirlwindDamage=( udg_WhirlwindDamage + 120 )
                                    else
                                        if ( Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001Func001Func001Func001Func001C() ) then
                                            set udg_WhirlwindDamage=( udg_WhirlwindDamage + 24 )
                                        else
                                            if ( Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001Func001Func001Func001Func001Func001C() ) then
                                                set udg_WhirlwindDamage=( udg_WhirlwindDamage + 48 )
                                            else
                                                if ( Trig_Whirlwind_Damage_Copy_Func022Func001Func001Func001Func001Func001Func001Func001Func001Func001Func001Func001C() ) then
                                                    set udg_WhirlwindDamage=( udg_WhirlwindDamage + 96 )
                                                else
                                                endif
                                            endif
                                        endif
                                    endif
                                endif
                            endif
                        endif
                    endif
                endif
            endif
        endif
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
    set udg_WhirlwindLevel=GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit())
    set udg_WhirlwindLevelMultiplier=( udg_WhirlwindLevel * 7 )
    set udg_WhirlwindDamage=( udg_WhirlwindDamage * udg_WhirlwindLevelMultiplier )
    set udg_WhirlwindDamage=( udg_WhirlwindDamage / 100 )
    set udg_WhirlwindBaseDamage=( udg_WhirlwindLevel * 25 )
    set udg_WhirlwindDamage=IMaxBJ(udg_WhirlwindBaseDamage, udg_WhirlwindDamage)
    call TriggerSleepAction(0.10)
    call ForGroupBJ(GetUnitsInRangeOfLocAll(250.00, GetUnitLoc(GetTriggerUnit())), function Trig_Whirlwind_Damage_Copy_Func030A)
endfunction

//===========================================================================
function InitTrig_Whirlwind_Damage_Copy takes nothing returns nothing
    set gg_trg_Whirlwind_Damage_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Whirlwind_Damage_Copy, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerAddCondition(gg_trg_Whirlwind_Damage_Copy, Condition(function Trig_Whirlwind_Damage_Copy_Conditions))
    call TriggerAddAction(gg_trg_Whirlwind_Damage_Copy, function Trig_Whirlwind_Damage_Copy_Actions)
endfunction

//===========================================================================
// Trigger: reset cooldown spell Copy
//===========================================================================
function Trig_reset_cooldown_spell_Copy_Conditions takes nothing returns boolean
    if GetSpellAbilityId() == 'A024' then
        return true
    endif
    return false
endfunction

function Trig_reset_cooldown_spell_Copy_Actions takes nothing returns nothing
    call UnitResetCooldown(GetTriggerUnit())
    call DisableTrigger(GetTriggeringTrigger())
    call IssueImmediateOrderBJ(GetTriggerUnit(), "scout")
    call EnableTrigger(GetTriggeringTrigger())
endfunction

//===========================================================================
function InitTrig_reset_cooldown_spell_Copy takes nothing returns nothing
    set gg_trg_reset_cooldown_spell_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_reset_cooldown_spell_Copy, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerAddCondition(gg_trg_reset_cooldown_spell_Copy, Condition(function Trig_reset_cooldown_spell_Copy_Conditions))
    call TriggerAddAction(gg_trg_reset_cooldown_spell_Copy, function Trig_reset_cooldown_spell_Copy_Actions)
endfunction


//===========================================================================
// Trigger: axe recipe Copy
//
// 25 dmg axe 
//===========================================================================
function Trig_axe_recipe_Copy_Func008C takes nothing returns boolean
    if ( ( GetItemTypeId(GetManipulatedItem()) == 'I012' ) ) then
        return true
    endif
    if ( ( GetItemTypeId(GetManipulatedItem()) == 'I013' ) ) then
        return true
    endif
    if ( ( GetItemTypeId(GetManipulatedItem()) == 'I014' ) ) then
        return true
    endif
    return false
endfunction

function Trig_axe_recipe_Copy_Conditions takes nothing returns boolean
    if ( not Trig_axe_recipe_Copy_Func008C() ) then
        return false
    endif
    if ( not ( UnitHasItemOfTypeBJ(GetManipulatingUnit(), 'I012') == true ) ) then
        return false
    endif
    if ( not ( UnitHasItemOfTypeBJ(GetManipulatingUnit(), 'I013') == true ) ) then
        return false
    endif
    if ( not ( UnitHasItemOfTypeBJ(GetManipulatingUnit(), 'I014') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_axe_recipe_Copy_Func006Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetManipulatingUnit(), GetForLoopIndexA())) == udg_RecipeFactor[GetForLoopIndexB()] ) ) then
        return false
    endif
    if ( not ( udg_FactorCleared[GetForLoopIndexB()] == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_axe_recipe_Copy_Actions takes nothing returns nothing
    set udg_Ingredients=3
    set udg_RecipeFactor[1]='I012'
    set udg_RecipeFactor[2]='I013'
    set udg_RecipeFactor[3]='I014'
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=udg_Ingredients
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        set udg_FactorCleared[GetForLoopIndexA()]=false
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=6
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        set bj_forLoopBIndex=1
        set bj_forLoopBIndexEnd=udg_Ingredients
        loop
            exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
            if ( Trig_axe_recipe_Copy_Func006Func001Func001C() ) then
                call RemoveItem(UnitItemInSlotBJ(GetManipulatingUnit(), GetForLoopIndexA()))
                set udg_FactorCleared[GetForLoopIndexB()]=true
            else
            endif
            set bj_forLoopBIndex=bj_forLoopBIndex + 1
        endloop
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
    call UnitAddItemByIdSwapped('I049', GetManipulatingUnit())
endfunction

//===========================================================================
function InitTrig_axe_recipe_Copy takes nothing returns nothing
    set gg_trg_axe_recipe_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_axe_recipe_Copy, EVENT_PLAYER_UNIT_PICKUP_ITEM)
    call TriggerAddCondition(gg_trg_axe_recipe_Copy, Condition(function Trig_axe_recipe_Copy_Conditions))
    call TriggerAddAction(gg_trg_axe_recipe_Copy, function Trig_axe_recipe_Copy_Actions)
endfunction

//===========================================================================
// Trigger: ring recipe Copy
//
// 25 dmg axe 
//===========================================================================
function Trig_ring_recipe_Copy_Func008C takes nothing returns boolean
    if ( ( GetItemTypeId(GetManipulatedItem()) == 'I017' ) ) then
        return true
    endif
    if ( ( GetItemTypeId(GetManipulatedItem()) == 'I018' ) ) then
        return true
    endif
    if ( ( GetItemTypeId(GetManipulatedItem()) == 'I019' ) ) then
        return true
    endif
    return false
endfunction

function Trig_ring_recipe_Copy_Conditions takes nothing returns boolean
    if ( not Trig_ring_recipe_Copy_Func008C() ) then
        return false
    endif
    if ( not ( UnitHasItemOfTypeBJ(GetManipulatingUnit(), 'I017') == true ) ) then
        return false
    endif
    if ( not ( UnitHasItemOfTypeBJ(GetManipulatingUnit(), 'I018') == true ) ) then
        return false
    endif
    if ( not ( UnitHasItemOfTypeBJ(GetManipulatingUnit(), 'I019') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_ring_recipe_Copy_Func006Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetManipulatingUnit(), GetForLoopIndexA())) == udg_RecipeFactor[GetForLoopIndexB()] ) ) then
        return false
    endif
    if ( not ( udg_FactorCleared[GetForLoopIndexB()] == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_ring_recipe_Copy_Actions takes nothing returns nothing
    set udg_Ingredients=3
    set udg_RecipeFactor[1]='I017'
    set udg_RecipeFactor[2]='I018'
    set udg_RecipeFactor[3]='I019'
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=udg_Ingredients
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        set udg_FactorCleared[GetForLoopIndexA()]=false
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
    set bj_forLoopAIndex=1
    set bj_forLoopAIndexEnd=6
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        set bj_forLoopBIndex=1
        set bj_forLoopBIndexEnd=udg_Ingredients
        loop
            exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
            if ( Trig_ring_recipe_Copy_Func006Func001Func001C() ) then
                call RemoveItem(UnitItemInSlotBJ(GetManipulatingUnit(), GetForLoopIndexA()))
                set udg_FactorCleared[GetForLoopIndexB()]=true
            else
            endif
            set bj_forLoopBIndex=bj_forLoopBIndex + 1
        endloop
        set bj_forLoopAIndex=bj_forLoopAIndex + 1
    endloop
    call UnitAddItemByIdSwapped('I048', GetManipulatingUnit())
endfunction

//===========================================================================
function InitTrig_ring_recipe_Copy takes nothing returns nothing
    set gg_trg_ring_recipe_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_ring_recipe_Copy, EVENT_PLAYER_UNIT_PICKUP_ITEM)
    call TriggerAddCondition(gg_trg_ring_recipe_Copy, Condition(function Trig_ring_recipe_Copy_Conditions))
    call TriggerAddAction(gg_trg_ring_recipe_Copy, function Trig_ring_recipe_Copy_Actions)
endfunction

//===========================================================================
// Trigger: pitlord passive cleave Copy
//===========================================================================
function Trig_pitlord_passive_cleave_Copy_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'O007' ) ) then
        return false
    endif
    return true
endfunction

function Trig_pitlord_passive_cleave_Copy_Actions takes nothing returns nothing
    call SetPlayerAbilityAvailableBJ(true, 'A01T', GetOwningPlayer(GetTriggerUnit()))
    call UnitAddAbilityBJ('A01T', GetTriggerUnit())
    call BlzUnitHideAbility(GetTriggerUnit(), 'A01T', true)
    call SetPlayerAbilityAvailableBJ(false, 'A01T', GetOwningPlayer(GetTriggerUnit()))
endfunction

//===========================================================================
function InitTrig_pitlord_passive_cleave_Copy takes nothing returns nothing
    set gg_trg_pitlord_passive_cleave_Copy=CreateTrigger()
    call TriggerRegisterEnterRectSimple(gg_trg_pitlord_passive_cleave_Copy, GetEntireMapRect())
    call TriggerAddCondition(gg_trg_pitlord_passive_cleave_Copy, Condition(function Trig_pitlord_passive_cleave_Copy_Conditions))
    call TriggerAddAction(gg_trg_pitlord_passive_cleave_Copy, function Trig_pitlord_passive_cleave_Copy_Actions)
endfunction

//===========================================================================
// Trigger: Zoom Copy
//===========================================================================
function Trig_Zoom_Copy_Func001C takes nothing returns boolean
    if ( not ( SubStringBJ(GetEventPlayerChatString(), 6, StringLength(GetEventPlayerChatString())) == "" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Zoom_Copy_Func004Func003001001 takes nothing returns boolean
    return ( GetTriggerPlayer() == GetFilterPlayer() )
endfunction

function Trig_Zoom_Copy_Func004C takes nothing returns boolean
    if ( not ( udg_Camera_Distance >= 3000.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Zoom_Copy_Func005Func003001001 takes nothing returns boolean
    return ( GetTriggerPlayer() == GetFilterPlayer() )
endfunction

function Trig_Zoom_Copy_Func005C takes nothing returns boolean
    if ( not ( udg_Camera_Distance <= 500.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Zoom_Copy_Actions takes nothing returns nothing
    if ( Trig_Zoom_Copy_Func001C() ) then
        return
    else
    endif
    set udg_Camera_Distance=S2R(SubStringBJ(GetEventPlayerChatString(), 7, StringLength(GetEventPlayerChatString())))
    call SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, udg_Camera_Distance, 0.20)
    if ( Trig_Zoom_Copy_Func004C() ) then
        call SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, 3000.00, 0.20)
        set udg_Camera_Distance=3000.00
        call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_Zoom_Copy_Func004Func003001001)), 6.00, "TRIGSTR_299")
    else
    endif
    if ( Trig_Zoom_Copy_Func005C() ) then
        call SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, 500.00, 0.20)
        set udg_Camera_Distance=500.00
        call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_Zoom_Copy_Func005Func003001001)), 6.00, "TRIGSTR_300")
    else
    endif
endfunction

//===========================================================================
function InitTrig_Zoom_Copy takes nothing returns nothing
    set gg_trg_Zoom_Copy=CreateTrigger()
    call TriggerRegisterPlayerChatEvent(gg_trg_Zoom_Copy, Player(0), "-zoom", false)
    call TriggerRegisterPlayerChatEvent(gg_trg_Zoom_Copy, Player(1), "-zoom", false)
    call TriggerRegisterPlayerChatEvent(gg_trg_Zoom_Copy, Player(2), "-zoom", false)
    call TriggerRegisterPlayerChatEvent(gg_trg_Zoom_Copy, Player(3), "-zoom", false)
    call TriggerRegisterPlayerChatEvent(gg_trg_Zoom_Copy, Player(4), "-zoom", false)
    call TriggerRegisterPlayerChatEvent(gg_trg_Zoom_Copy, Player(5), "-zoom", false)
    call TriggerRegisterPlayerChatEvent(gg_trg_Zoom_Copy, Player(6), "-zoom", false)
    call TriggerRegisterPlayerChatEvent(gg_trg_Zoom_Copy, Player(7), "-zoom", false)
    call TriggerAddAction(gg_trg_Zoom_Copy, function Trig_Zoom_Copy_Actions)
endfunction

//===========================================================================
// Trigger: AttackController Copy
//===========================================================================
function EndEvasionTimer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local unit u= LoadUnitHandle(HT, i, 1)
    local integer bonus= LoadInteger(HT, i, 2)
    
    call AddUnitEvasion(u , - bonus)
    call DestroyTimer(t)
    call FlushChildHashtable(HT, i)
    set t=null
    set u=null
endfunction

function Stop takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u= LoadUnitHandle(HT, GetHandleId(t), 1)

    call IssueImmediateOrderById(u, 851972)
   // call IssueTargetOrder(u,"smart",u)

    
    call FlushChildHashtable(HT, GetHandleId(t))
    call DestroyTimer(t)
    set u=null
    set t=null
endfunction



function Trig_Spell12_Actions takes nothing returns nothing
    local real r1
    local real r2
    local real r3
    local integer i1= 0
    local timer t= null
    local unit u= GetTriggerUnit()
    local unit u2= GetAttacker()
    local real luck=  GetUnitLuck(u)
    
    
    
    
    if IsUnitEnemy(u, GetOwningPlayer(u2)) == false then

        set t=CreateTimer()
        call SaveUnitHandle(HT, GetHandleId(t), 1, u2)
        call TimerStart(t, 0.0, false, function Stop)
        set u=null
        set u2=null
        return
    endif
    
    
    if GetUnitTypeId(u2) == 'O004' then
        set r1=GetHeroLevel(udg_units01[GetConvertedPlayerId(GetOwningPlayer(u2))]) * 12
        set r2=GetUnitState(u, UNIT_STATE_MANA)
        set r3=r2 - r1
        call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) - r1)
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", u, "head"))
        if r3 <= 0 then
            if GetWidgetLife(u) <= - r3 then
                call SetWidgetLife(u, 1)
            else
            endif
        endif
    endif
    if GetUnitTypeId(u2) == 'H01F' then
        set i1=1 + GetHeroLevel(u2) / 10
        call SaveInteger(HT, GetHandleId(u2), 54021, i1 + LoadInteger(HT, GetHandleId(u2), 54021))
        call SetHeroStr(u2, GetHeroStr(u2, false) + i1, false)
        call SetHeroAgi(u2, GetHeroAgi(u2, false) + i1, false)
        call SetHeroInt(u2, GetHeroInt(u2, false) + i1, false)
    endif
    
    if GetUnitAbilityLevel(u, 'A06C') > 0 and BlzGetUnitAbilityCooldownRemaining(u, 'A06C') <= 0.001 then
        set t=CreateTimer()
        
        call SaveUnitHandle(HT, GetHandleId(t), 1, u)
        call SaveInteger(HT, GetHandleId(t), 2, GetUnitAbilityLevel(u, 'A06C') * 10)
        call AddUnitEvasion(u , 10 * GetUnitAbilityLevel(u, 'A06C'))
        call AbilStartCD(u , 'A06C' , 8)
        call TimerStart(t, 2.5, false, function EndEvasionTimer)
        set t=null
    endif
    
    if GetUnitAbilityLevel(u2, 'A07N') > 0 and BlzGetUnitAbilityCooldownRemaining(u2, 'A07N') <= 0.001 then
        call AreaDamagePhys(u2 , GetUnitX(u2) , GetUnitY(u2) , 100 * GetUnitAbilityLevel(u2, 'A07N') , 500 , 'A07N')
        call AbilStartCD(u2 , 'A07N' , 2)
    endif
    
    
    set i1=UnitHasItemI(u2 , 'I06I')
    if i1 > 0 then
        call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) - 50 * i1)
        call SetUnitState(u2, UNIT_STATE_MANA, GetUnitState(u2, UNIT_STATE_MANA) + 50 * i1)
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", u, "head"))
        call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", u2, "head"))
    endif
    if GetUnitTypeId(u2) == 'N00R' then
        call USOrderA(u2 , GetUnitX(u2) , GetUnitY(u2) , 'A035' , "fanofknives" , 7 + GetHeroLevel(udg_units01[GetConvertedPlayerId(GetOwningPlayer(u2))]) * 7 , ConvertAbilityRealLevelField('Ocl1'))
    endif
    if ( GetUnitAbilityLevel(GetTriggerUnit(), 'A02U') >= 1 ) and ( GetRandomReal(1, 100) <= 12 * luck ) then
        call USOrderA(GetTriggerUnit() , GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , 'A02V' , "fanofknives" , GetHeroStr(GetTriggerUnit(), true) * ( 60 + 20 * I2R(GetUnitAbilityLevel(u, 'A02U')) ) / 100 , ConvertAbilityRealLevelField('Ocl1'))
    endif
    set u=null
    set u2=null
endfunction

//===========================================================================
function InitTrig_AttackController_Copy takes nothing returns nothing
    set gg_trg_AttackController_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_AttackController_Copy, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddAction(gg_trg_AttackController_Copy, function Trig_Spell12_Actions)
endfunction


//===========================================================================
// Trigger: EvaryChk Copy Copy
//===========================================================================





function Trig_EvaryChk_Copy_Copy_Actions takes nothing returns nothing
local integer II= 0
local integer i1= 0
local integer i2= 0
local string s= null
local string s2= null
local string s3= null

loop
exitwhen II > 8
   if GetWidgetLife(udg_units01[II]) > 0 then


        
        
    	if GetUnitAbilityLevel(udg_units01[II], 'A02Z') >= 1 then
            call ElemFuncStart(udg_units01[II] , 'A02Z')
    		call USOrderA(udg_units01[II] , GetUnitX(udg_units01[II]) , GetUnitY(udg_units01[II]) , 'A02Y' , "fanofknives" , 200 + GetUnitAbilityLevel(udg_units01[II], 'A02Z') * 50 + GetHeroLevel(udg_units01[II]) * ( 0.8 + 0.2 * GetUnitAbilityLevel(udg_units01[II], 'A02Z') ) , ConvertAbilityRealLevelField('Ocl1'))
    	endif
        
        set i1=GetUnitAbilityLevel(udg_units01[II], 'A07R')
        if i1 > 0 then
                set s=GetDesriptionAbility('A07R' , i1 - 1)
                if LoadReal(HT, GetHandleId(udg_units01[II]), - 93001) == 0 then
                    set s2="50"
                else
                     set s2=I2S(R2I(LoadReal(HT, GetHandleId(udg_units01[II]), - 93001)))
                endif
                
                set s3=ReplaceText("2000" , s2 , s)
                set s3=ReplaceText(",0000," , R2S(LoadReal(HT, GetHandleId(udg_units01[II]), - 93000)) , s3)
            if GetLocalPlayer() == GetOwningPlayer(udg_units01[II]) then
                call BlzSetAbilityExtendedTooltip('A07R', s3, i1 - 1)
            endif
        
        endif
        
        set i1=GetUnitAbilityLevel(udg_units01[II], 'A07T')
        if i1 > 0 then
                set s=GetDesriptionAbility('A07T' , i1 - 1)
                if LoadReal(HT, GetHandleId(udg_units01[II]), 82341) == 0 then
                    set s2="20000"
                else
                     set s2=I2S(R2I(LoadReal(HT, GetHandleId(udg_units01[II]), 82341) * ( 1 - I2R(i1) * 0.01 )))
                endif
                
                set s3=ReplaceText("20,000" , s2 , s)
                set s3=ReplaceText(",0000," , R2S(LoadReal(HT, GetHandleId(udg_units01[II]), 82340)) , s3)
                
            if GetLocalPlayer() == GetOwningPlayer(udg_units01[II]) then
                call BlzSetAbilityExtendedTooltip('A07T', s3, i1 - 1)
            endif
        
        endif
                
        
        set i1=GetUnitAbilityLevel(udg_units01[II], 'A07V')
        if i1 > 0 then
            set i2=LoadInteger(HT, GetHandleId(udg_units01[II]), - 41256)
            if i2 == 4 then
                set i2=0
                call AbsoluteCold(udg_units01[II] , GetClassUnitSpell(udg_units01[II] , 9) * 20 * i1)
            else
                set i2=i2 + 1
              
            endif
            call SaveInteger(HT, GetHandleId(udg_units01[II]), - 41256, i2)
        endif
        
        set i1=GetUnitAbilityLevel(udg_units01[II], 'A082')
        if i1 > 0 then
            set i2=LoadInteger(HT, GetHandleId(udg_units01[II]), - 41257)
            if i2 == 8 then
                set i2=0
                call HealUnit(udg_units01[II] , udg_units01[II] , 2500 * i1)
        
                call AddSpecialEffectTargetTimer("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl" , udg_units01[II] , "chest" , 3)
                call RemoveDebuff(udg_units01[II])
            else
                set i2=i2 + 1
              
            endif
            call SaveInteger(HT, GetHandleId(udg_units01[II]), - 41257, i2)
        endif
        
        
        
        
    	if GetUnitTypeId(udg_units01[II]) == 'O001' then
            call ElemFuncStart(udg_units01[II] , 'O001')
			call USOrderA(udg_units01[II] , GetUnitX(udg_units01[II]) , GetUnitY(udg_units01[II]) , 'A036' , "fanofknives" , 40 + GetHeroLevel(udg_units01[II]) * 40 , ConvertAbilityRealLevelField('Ocl1'))
    	endif
    	
    	if GetUnitTypeId(udg_units01[II]) == 'O00B' then
    	   if BlzGetUnitArmor(udg_units01[II]) <= 50 then
    	       set i1=LoadInteger(DataUnitHT, GetHandleId(udg_units01[II]), 542)
    	       set i2=20 * GetHeroLevel(udg_units01[II]) - i1
    	       call SetHeroStr(udg_units01[II], GetHeroStr(udg_units01[II], false) + i2, false)
    	       call SaveInteger(DataUnitHT, GetHandleId(udg_units01[II]), 542, 20 * GetHeroLevel(udg_units01[II]))
    	   else
    	       set i1=LoadInteger(DataUnitHT, GetHandleId(udg_units01[II]), 542)
    	       call SetHeroStr(udg_units01[II], GetHeroStr(udg_units01[II], false) - i1, false)
    	       call SaveInteger(DataUnitHT, GetHandleId(udg_units01[II]), 542, 0)
    	   endif
       	endif
   endif
 set II=II + 1
endloop


endfunction

//===========================================================================
function InitTrig_EvaryChk_Copy_Copy takes nothing returns nothing
    set gg_trg_EvaryChk_Copy_Copy=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_EvaryChk_Copy_Copy, 1)
    call TriggerAddAction(gg_trg_EvaryChk_Copy_Copy, function Trig_EvaryChk_Copy_Copy_Actions)
endfunction


//===========================================================================
// Trigger: HeroLvl Copy
//===========================================================================




function LetinantBonus takes unit UnitHero returns nothing
    local integer RandomI
    
        set RandomI=GetRandomInt(1, 3)
        if RandomI == 1 then
            call SetHeroStr(UnitHero, GetHeroStr(UnitHero, false) + 8, false)
        elseif RandomI == 2 then
            call SetHeroAgi(UnitHero, GetHeroAgi(UnitHero, false) + 8, false)
        elseif RandomI == 3 then
            call SetHeroInt(UnitHero, GetHeroInt(UnitHero, false) + 8, false)
        endif
        set RandomI=GetRandomInt(1, 3)
        if RandomI == 1 then
            call SetHeroStr(UnitHero, GetHeroStr(UnitHero, false) + 8, false)
        elseif RandomI == 2 then
            call SetHeroAgi(UnitHero, GetHeroAgi(UnitHero, false) + 8, false)
        elseif RandomI == 3 then
            call SetHeroInt(UnitHero, GetHeroInt(UnitHero, false) + 8, false)
        endif

endfunction


function BaraBonus takes unit UnitHero returns nothing
    local integer AbilLvl
    local integer AbilId


    set AbilId='Aspl'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 40 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif

    set AbilId='Auhf'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 40 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='AOsh'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 40 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif

    set AbilId='AEer'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 40 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='ANdr'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 40 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
 
    set AbilId='AEim'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 40 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='AHtb'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 40 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='ANcs'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 40 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='ACls'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 40 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='A017'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 40 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
             

    set AbilId='ANvc'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 40 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif

    set AbilId='AOmi'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 40 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif



endfunction






function MasterBonus takes unit UnitHero returns nothing
    local integer AbilLvl
    local integer AbilId


    set AbilId='AHwe'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 30 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif

    set AbilId='AHpx'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 30 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='AOsf'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 30 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif

    set AbilId='AOsw'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 30 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='AUcb'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 30 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
 
    set AbilId='AUin'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 30 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='Arai'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 30 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='AEsv'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 30 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='Arsq'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 30 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='ANsg'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 30 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    
    set AbilId='ANlm'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 30 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
    
    set AbilId='ANsw'
    set AbilLvl=GetUnitAbilityLevel(UnitHero, AbilId)
    if AbilLvl > 0 and AbilLvl < 30 then
        call SetUnitAbilityLevel(UnitHero, AbilId, AbilLvl + 1)
    endif
            
endfunction

function ItemLvlAction takes unit u,integer lvl returns nothing
local integer i= 0

set i=UnitHasItemI(u , 'I071')
if i > 0 then
     call SetHeroStr(u, GetHeroStr(u, false) + 2 * i, false)
endif
set i=UnitHasItemI(u , 'I072')
if i > 0 then
     call SetHeroInt(u, GetHeroInt(u, false) + 2 * i, false)
endif
set i=UnitHasItemI(u , 'I073')
if i > 0 then
     call SetHeroAgi(u, GetHeroAgi(u, false) + 2 * i, false)
endif



endfunction




function Trig_HeroLvl_Copy_Actions takes nothing returns nothing
    local integer RandomI
    local unit UnitHero= GetTriggerUnit()
    local integer TypeHero=  GetUnitTypeId(UnitHero)
    local integer I_l= GetHeroLevel(UnitHero) - 1
    local player Pl= GetOwningPlayer(UnitHero)
    local integer Pid= GetPlayerId(Pl)
    local integer RI= I_l - LastLvlHero[Pid]
    local boolean Economic=  GetUnitAbilityLevel(UnitHero, 'Asal') == 0 and GetUnitAbilityLevel(UnitHero, 'A02W') == 0


    if I_l < 250 then
    
        if Economic then
          call AdjustPlayerStateBJ(( I_l + 20 ) * ( RI ), Pl, PLAYER_STATE_RESOURCE_GOLD)
          call AdjustPlayerStateBJ(8 * ( RI ), Pl, PLAYER_STATE_RESOURCE_LUMBER)
        else
          call AdjustPlayerStateBJ(( I_l + 2 ) * ( RI ), Pl, PLAYER_STATE_RESOURCE_GOLD)
          call AdjustPlayerStateBJ(4 * ( RI ), Pl, PLAYER_STATE_RESOURCE_LUMBER)
        endif
    
    endif
    

    if ( Bonus25l[Pid] ) == false and I_l >= 25 then
	set Bonus25l[Pid]=true
  	call AdjustPlayerStateBJ(25, Pl, PLAYER_STATE_RESOURCE_LUMBER)
    endif
    if ( Bonus50l[Pid] ) == false and I_l >= 50 then
	 set Bonus50l[Pid]=true
  	 call AdjustPlayerStateBJ(50, Pl, PLAYER_STATE_RESOURCE_LUMBER)
    endif
    if ( Bonus75l[Pid] ) == false and I_l >= 75 then
	 set Bonus75l[Pid]=true
  	 call AdjustPlayerStateBJ(75, Pl, PLAYER_STATE_RESOURCE_LUMBER)
    endif
    if ( Bonus100l[Pid] ) == false and I_l >= 100 then
	 set Bonus100l[Pid]=true
  	 call AdjustPlayerStateBJ(125, Pl, PLAYER_STATE_RESOURCE_LUMBER)
    endif
    if ( Bonus125l[Pid] ) == false and I_l >= 125 then
	 set Bonus125l[Pid]=true
  	 call AdjustPlayerStateBJ(150, Pl, PLAYER_STATE_RESOURCE_LUMBER)
    endif
    if ( Bonus150l[Pid] ) == false and I_l >= 150 then
	 set Bonus150l[Pid]=true
  	 call AdjustPlayerStateBJ(175, Pl, PLAYER_STATE_RESOURCE_LUMBER)
    endif
    if ( Bonus175l[Pid] ) == false and I_l >= 175 then
	 set Bonus175l[Pid]=true
  	 call AdjustPlayerStateBJ(200, Pl, PLAYER_STATE_RESOURCE_LUMBER)
    endif
    if ( Bonus200l[Pid] ) == false and I_l >= 200 then
	 set Bonus200l[Pid]=true
  	 call AdjustPlayerStateBJ(300, Pl, PLAYER_STATE_RESOURCE_LUMBER)
    endif

    call ResourseRefresh(Pl)

    call ItemLvlAction(UnitHero , RI)
    
    
    if TypeHero == 'E000' then //Letinant    

         loop
            exitwhen LastLvlHero[Pid] == I_l
            call LetinantBonus(UnitHero)
            set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
        endloop
       
    elseif TypeHero == 'H005' then
    
              call BlzSetAbilityRealLevelField(BlzGetUnitAbility(UnitHero, 'Aap1'), ABILITY_RLF_DAMAGE_PER_SECOND_APL2, 0, 10 + I_l * 25)
               set LastLvlHero[Pid]=I_l
               
     elseif TypeHero == 'H006' then
     
         loop
            exitwhen LastLvlHero[Pid] == I_l
            call SetPlayerTechResearchedSwap('R002', ( 2 + GetPlayerTechCountSimple('R002', Pl) ), Pl)
            call SetPlayerTechResearchedSwap('R001', ( 3 + GetPlayerTechCountSimple('R001', Pl) ), Pl)
            set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
        endloop
        
        
        
    elseif TypeHero == 'H002' then
    
       
        loop
            exitwhen LastLvlHero[Pid] == I_l
            call BlzSetUnitMaxHP(UnitHero, BlzGetUnitMaxHP(UnitHero) + 265)
            call BlzSetUnitMaxMana(UnitHero, BlzGetUnitMaxMana(UnitHero) + 265)
            
             set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
        endloop
      
      
      
        
    elseif TypeHero == 'H001' then
  
         loop
            exitwhen LastLvlHero[Pid] == I_l

            call BlzSetUnitMaxMana(UnitHero, BlzGetUnitMaxMana(UnitHero) + 600)
            
             set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
        endloop
   
     elseif TypeHero == 'H004' then
     
      
             call SetUnitAbilityLevel(UnitHero, 'A030', 2)
             call BlzSetAbilityRealLevelField(BlzGetUnitAbility(UnitHero, 'A030'), ABILITY_RLF_DAMAGE_BONUS_PERCENT, 0, I2R(I_l + 1) * 0.02)
             call SetUnitAbilityLevel(UnitHero, 'A030', 1)
         
             set LastLvlHero[Pid]=I_l
       
     elseif TypeHero == 'H003' then
            loop
                exitwhen LastLvlHero[Pid] == I_l
                call SetHeroInt(UnitHero, GetHeroInt(UnitHero, false) + GetRandomInt(1, 11), false)
                 if GetHeroStr(UnitHero, false) == 0 then
                    call SetHeroInt(UnitHero, GetHeroInt(UnitHero, false) + GetRandomInt(1, 11), false)
                 endif
                 if GetHeroAgi(UnitHero, false) == 0 then
                    call SetHeroInt(UnitHero, GetHeroInt(UnitHero, false) + GetRandomInt(1, 11), false)
                 endif
             set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
           endloop
         
     elseif TypeHero == 'O003' then
     
            loop
                exitwhen LastLvlHero[Pid] == I_l
     
                set RandomI=GetRandomInt(1, 3)
                
                if RandomI == 1 then
                    call SetHeroStr(UnitHero, GetHeroStr(UnitHero, false) + GetRandomInt(1, 19), false)
                elseif RandomI == 2 then
                    call SetHeroAgi(UnitHero, GetHeroAgi(UnitHero, false) + GetRandomInt(1, 19), false)
                elseif RandomI == 3 then
                    call SetHeroInt(UnitHero, GetHeroInt(UnitHero, false) + GetRandomInt(1, 19), false)
                endif

                set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
            endloop
            
     elseif TypeHero == 'O004' then
     elseif TypeHero == 'O002' then
     elseif TypeHero == 'O005' then
     
            loop
                exitwhen LastLvlHero[Pid] == I_l
                
                 //call BlzSetUnitBaseDamage(UnitHero, BlzGetUnitBaseDamage(UnitHero,0) + 15 ,0)          
                 call BlzSetUnitDiceSides(UnitHero, BlzGetUnitDiceSides(UnitHero, 0) + 35, 0)
                set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
            endloop
            
     elseif TypeHero == 'O000' then
 
            loop
                exitwhen BRL_BONUS[Pid] == I_l / 2
                
                 call BaraBonus(UnitHero)
     
                set BRL_BONUS[Pid]=BRL_BONUS[Pid] + 1
            endloop
                      
                      
                         
     elseif TypeHero == 'O008' then
     
        loop
            exitwhen LastLvlHero[Pid] == I_l
            call SetPlayerTechResearchedSwap('R000', ( 2 + GetPlayerTechCountSimple('R000', Pl) ), Pl)
            set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
        endloop
     
     
     
     
     elseif TypeHero == 'O007' then
     
     
             loop
            exitwhen LastLvlHero[Pid] == I_l
           call AdjustPlayerStateBJ(6, Pl, PLAYER_STATE_RESOURCE_LUMBER)
           call BlzSetUnitMaxHP(UnitHero, BlzGetUnitMaxHP(UnitHero) + 66)
           call BlzSetUnitMaxMana(UnitHero, BlzGetUnitMaxMana(UnitHero) + 66)
            set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
        endloop
          
     elseif TypeHero == 'O001' then
     
     elseif TypeHero == 'U000' then
        loop
            exitwhen LastLvlHero[Pid] == I_l
           
           if GetHeroStr(UnitHero, false) * 2 > GetHeroAgi(UnitHero, false) then
              call SetHeroAgi(UnitHero, GetHeroAgi(UnitHero, false) + 20, false)
           elseif GetHeroStr(UnitHero, false) > GetHeroAgi(UnitHero, false) then
              call SetHeroAgi(UnitHero, GetHeroAgi(UnitHero, false) + 10, false)
           else
              call SetHeroAgi(UnitHero, GetHeroAgi(UnitHero, false) + 5, false)
           endif
           
           
            set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
        endloop
     elseif TypeHero == 'N00K' then
             loop
                exitwhen LastLvlHero[Pid] == I_l
                
                 call BlzSetUnitBaseDamage(UnitHero, BlzGetUnitBaseDamage(UnitHero, 0) + 16, 0)
     
                set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
            endloop
            
                         
                
     elseif TypeHero == 'N024' then
            loop
                exitwhen LastLvlHero[Pid] == I_l
                
        
                 call BlzSetUnitRealField(UnitHero, ConvertUnitRealField('uhpr'), BlzGetUnitRealField(UnitHero, ConvertUnitRealField('uhpr')) + 3)
                 call BlzSetUnitArmor(UnitHero, BlzGetUnitArmor(UnitHero) + 2)
                set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
            endloop
                      
     elseif TypeHero == 'N00I' then
     
     
            loop
                exitwhen LastLvlHero[Pid] == I_l
                
        
                 call BlzSetUnitRealField(UnitHero, ConvertUnitRealField('uhpr'), BlzGetUnitRealField(UnitHero, ConvertUnitRealField('uhpr')) + 6)
                set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
            endloop
            
    elseif TypeHero == 'N00L' then
    
    		call TriggerSleepAction(0.1)
            loop
                exitwhen LastLvlHero[Pid] == I_l
                
                 call AddHeroXP(UnitHero, ( LastLvlHero[Pid] + 1 ) * 55, true)
                
               set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
           endloop
           
            
    elseif TypeHero == 'H00A' then
    
            loop
                exitwhen LastLvlHero[Pid] == I_l
                
                 
                    set Glory[Pid]=Glory[Pid] + 30
                    
               set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
           endloop
            
            call ResourseRefresh(GetOwningPlayer(UnitHero))
    elseif TypeHero == 'N00P' then
            
            
            
            loop
                exitwhen BRL_BONUS[Pid] == I_l / 2
                
                 call MasterBonus(UnitHero)
     
                set BRL_BONUS[Pid]=BRL_BONUS[Pid] + 1
            endloop
            
       
    elseif TypeHero == 'N00B' then
    
                    call SetUnitAbilityLevel(UnitHero, 'A031', 2)
        call BlzSetAbilityRealLevelField(BlzGetUnitAbility(UnitHero, 'A031'), ABILITY_RLF_ARMOR_BONUS_HAD1, 0, - ( I_l + 1 ) * 3)
                   call SetUnitAbilityLevel(UnitHero, 'A031', 1)
            
          set LastLvlHero[Pid]=I_l
  
     elseif TypeHero == 'N00R' then
        
     elseif TypeHero == 'N00O' then
     
        loop
            exitwhen LastLvlHero[Pid] == I_l
            call SetPlayerTechResearchedSwap('R001', ( 2 + GetPlayerTechCountSimple('R001', Pl) ), Pl)
            call BlzSetUnitArmor(UnitHero, BlzGetUnitArmor(UnitHero) + 2)
            set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
        endloop
        
     elseif TypeHero == 'H008' then
     
     
     elseif TypeHero == 'N00Q' then
     
     
    
        
            call SetUnitAbilityLevel(UnitHero, 'A032', 2)
             call BlzSetAbilityRealLevelField(BlzGetUnitAbility(UnitHero, 'A032'), ABILITY_RLF_DAMAGE_BONUS_PERCENT, 0, I2R(I_l + 1) * 25)
             call SetUnitAbilityLevel(UnitHero, 'A032', 1)
         
             set LastLvlHero[Pid]=I_l
             
  
     elseif TypeHero == 'N00C' then
              
        loop
            exitwhen LastLvlHero[Pid] == I_l
            call BlzSetUnitMaxHP(UnitHero, BlzGetUnitMaxHP(UnitHero) + 600)

            
             set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
        endloop
        
     elseif TypeHero == 'O006' then
     
             loop
                exitwhen LastLvlHero[Pid] == I_l
                
        
                 call BlzSetUnitRealField(UnitHero, ConvertUnitRealField('umpr'), BlzGetUnitRealField(UnitHero, ConvertUnitRealField('umpr')) + 15)
                set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
            endloop
        
      elseif TypeHero == 'H007' then
        
        
        
      elseif TypeHero == 'H000' then
             call SetUnitAbilityLevel(UnitHero, 'A034', 2)
             call BlzSetAbilityRealLevelField(BlzGetUnitAbility(UnitHero, 'A034'), ABILITY_RLF_DAMAGE_BONUS_HBH3, 0, 1 + I2R(I_l + 1) * 50)
             call SetUnitAbilityLevel(UnitHero, 'A034', 1)
                          set LastLvlHero[Pid]=I_l
                          
                          
        elseif TypeHero == 'H016' then
     
     
    
        
            call SetUnitAbilityLevel(UnitHero, 'A038', 2)
             call BlzSetAbilityRealLevelField(BlzGetUnitAbility(UnitHero, 'A038'), ABILITY_RLF_INITIAL_DAMAGE_PXF1, 0, I2R(I_l + 1) * 50)
             call BlzSetAbilityRealLevelField(BlzGetUnitAbility(UnitHero, 'A038'), ABILITY_RLF_DAMAGE_PER_SECOND_PXF2, 0, I2R(I_l + 1) * 10)
             call SetUnitAbilityLevel(UnitHero, 'A038', 1)
         
             set LastLvlHero[Pid]=I_l
             
                elseif TypeHero == 'N02K' then
                                    
                                    
            call SetUnitAbilityLevel(UnitHero, 'A03H', 2)
            call BlzSetAbilityRealLevelField(BlzGetUnitAbility(UnitHero, 'A03H'), ABILITY_RLF_ATTACK_SPEED_INCREASE_PERCENT_OAE2, 0, - ( I_l + 1 ) * 0.06)
            call SetUnitAbilityLevel(UnitHero, 'A03H', 1)
            
          set LastLvlHero[Pid]=I_l

    	 elseif TypeHero == 'H01D' then
     
             loop
                exitwhen LastLvlHero[Pid] == I_l
                
        	 call BlzSetUnitMaxMana(UnitHero, BlzGetUnitMaxMana(UnitHero) + 100)
                 call BlzSetUnitRealField(UnitHero, ConvertUnitRealField('umpr'), BlzGetUnitRealField(UnitHero, ConvertUnitRealField('umpr')) + 1)
                set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
            endloop
            
        elseif TypeHero == 'H017' then
     
         loop
            exitwhen LastLvlHero[Pid] == I_l
            call AddUnitBlock(UnitHero , 16)
            set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
        endloop
          
        elseif TypeHero == 'O00C' then
     
         loop
            exitwhen LastLvlHero[Pid] == I_l
            call AddUnitEvasion(UnitHero , 0.9)
            set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
         endloop
         
        elseif TypeHero == 'H01G' then
     
         loop
            exitwhen LastLvlHero[Pid] == I_l
            call AddUnitMagicDmg(UnitHero , 2)
            set LastLvlHero[Pid]=LastLvlHero[Pid] + 1
         endloop
        
    endif

	 set LastLvlHero[Pid]=I_l
endfunction

//===========================================================================
function InitTrig_HeroLvl_Copy takes nothing returns nothing
    set gg_trg_HeroLvl_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_HeroLvl_Copy, EVENT_PLAYER_HERO_LEVEL)
    call TriggerAddAction(gg_trg_HeroLvl_Copy, function Trig_HeroLvl_Copy_Actions)
endfunction


//===========================================================================
// Trigger: AbilityCast Copy
//===========================================================================
function ResetAbility_A05U takes unit u,integer id returns nothing
    if BlzGetUnitAbilityCooldownRemaining(u, 'A05U') <= 0.001 and GetUnitAbilityLevel(u, 'A05U') > 0 then
    
        call AbilStartCD(u , 'A05U' , BlzGetUnitAbilityCooldownRemaining(u, id) * ( 4 - 0.1 * I2R(GetUnitAbilityLevel(u, 'A05U')) ))
        call BlzEndUnitAbilityCooldown(u, id)
    
    endif
    

endfunction


function ResetAbilit_Ec takes nothing returns nothing
call ResetAbility_A05U(Global_u , Global_i)
endfunction




function A05U_Reset_Timer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit U= LoadUnitHandle(HT, GetHandleId(t), 2)
    local integer Id= LoadInteger(HT, GetHandleId(t), 1)

    call ResetAbility_A05U(U , Id)

    call FlushChildHashtable(HT, GetHandleId(t))
    call DestroyTimer(t)
    set t=null
    set U=null
endfunction






function Trig_AbilityCast_Copy_Actions takes nothing returns nothing
    local unit U=  GetTriggerUnit()
    local integer Id= GetSpellAbilityId()
    local timer t= null



	if GetUnitTypeId(GetTriggerUnit()) == 'H008' then
        call USOrderA(GetTriggerUnit() , GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , 'A037' , "fanofknives" , GetHeroLevel(GetTriggerUnit()) * 50 , ConvertAbilityRealLevelField('Ocl1'))
	endif

if Id != 'A024' then
    if GetUnitAbilityLevel(U, 'A05U') > 0 and BlzGetUnitAbilityCooldownRemaining(U, 'A05U') <= 0.001 then
        set t=CreateTimer()
        call SaveInteger(HT, GetHandleId(t), 1, Id)
        call SaveUnitHandle(HT, GetHandleId(t), 2, U)
        call TimerStart(t, 0, false, function A05U_Reset_Timer)
        
    endif
endif

set U=null
set t=null
endfunction

//===========================================================================
function InitTrig_AbilityCast_Copy takes nothing returns nothing
    set gg_trg_AbilityCast_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_AbilityCast_Copy, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddAction(gg_trg_AbilityCast_Copy, function Trig_AbilityCast_Copy_Actions)
endfunction


//===========================================================================
// Trigger: Effect Copy
//===========================================================================
function Trig_Effect_Copy_Actions takes nothing returns nothing
    if GetLocalPlayer() == GetTriggerPlayer() then
    set EffectVisible=EffectVisible == false
    endif
endfunction

//===========================================================================
function InitTrig_Effect_Copy takes nothing returns nothing
    set gg_trg_Effect_Copy=CreateTrigger()
    call TriggerRegisterPlayerChatEvent(gg_trg_Effect_Copy, Player(0), "-de", true)
    call TriggerRegisterPlayerChatEvent(gg_trg_Effect_Copy, Player(1), "-de", true)
    call TriggerRegisterPlayerChatEvent(gg_trg_Effect_Copy, Player(2), "-de", true)
    call TriggerRegisterPlayerChatEvent(gg_trg_Effect_Copy, Player(2), "-de", true)
    call TriggerRegisterPlayerChatEvent(gg_trg_Effect_Copy, Player(3), "-de", true)
    call TriggerRegisterPlayerChatEvent(gg_trg_Effect_Copy, Player(4), "-de", true)
    call TriggerRegisterPlayerChatEvent(gg_trg_Effect_Copy, Player(5), "-de", true)
    call TriggerRegisterPlayerChatEvent(gg_trg_Effect_Copy, Player(6), "-de", true)
    call TriggerRegisterPlayerChatEvent(gg_trg_Effect_Copy, Player(7), "-de", true)
    call TriggerAddAction(gg_trg_Effect_Copy, function Trig_Effect_Copy_Actions)
endfunction

//===========================================================================
// Trigger: init Copy
//===========================================================================

function InitGlobals3 takes nothing returns nothing
 local integer i=0
	set udg_integer01=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers01[i]=0
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers02[i]=0
		set i=i + 1
	endloop
	set udg_integer02=0
	set udg_integer03=0
	set udg_integer04=0
	set udg_integer05=0
	set udg_integer06=0
	set udg_integer07=0
	set udg_integer08=0
	set udg_real01=0
	set udg_integer09=0
	set udg_integer10=0
	set udg_integer11=0
	set udg_integer12=0
	set udg_integer13=0
	set udg_force01=CreateForce()
	set udg_boolean01=false
	set udg_force02=CreateForce()
	set udg_group01=CreateGroup()
	set udg_integer14=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers03[i]=0
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers04[i]=0
		set i=i + 1
	endloop
	set udg_group02=CreateGroup()
	set udg_group03=CreateGroup()
	set udg_integer15=0
	set udg_integer16=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_booleans01[i]=false
		set i=i + 1
	endloop
	set udg_boolean02=false
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers05[i]=0
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_booleans02[i]=false
		set i=i + 1
	endloop
	set udg_integer17=0
	set udg_integer18=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_booleans03[i]=false
		set i=i + 1
	endloop
	set udg_force03=CreateForce()
	set udg_integer19=0
	set udg_integer20=0
	set udg_real02=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers06[i]=0
		set i=i + 1
	endloop
	set udg_dialog01=DialogCreate()
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers07[i]=0
		set i=i + 1
	endloop
	set udg_integer21=0
	set udg_integer22=0
	set udg_integer23=0
	set udg_integer24=0
	set udg_integer25=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers08[i]=0
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers09[i]=0
		set i=i + 1
	endloop
	set udg_integer26=0
	set udg_integer27=0
	set udg_integer28=0
	set udg_group04=CreateGroup()
	set udg_integer29=0
	set udg_integer30=0
	set udg_boolean03=false
	set udg_boolean04=false
	set udg_dialog02=DialogCreate()
	set udg_integer31=0
	set udg_boolean05=false
	set udg_dialog03=DialogCreate()
	set udg_integer32=0
	set udg_integer33=0
	set udg_integer34=0
	set udg_boolean06=false
	set udg_integer35=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers10[i]=0
		set i=i + 1
	endloop
	set udg_integer36=0
	set udg_integer37=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_dialogs01[i]=DialogCreate()
		set i=i + 1
	endloop
	set udg_force04=CreateForce()
	set udg_force05=CreateForce()
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_booleans04[i]=false
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_booleans05[i]=false
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers11[i]=0
		set i=i + 1
	endloop
	set udg_string01=""
	set udg_integer38=0
	set udg_boolean07=false
	set udg_force06=CreateForce()
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_strings01[i]=""
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers12[i]=0
		set i=i + 1
	endloop
	set udg_boolean08=false
	set udg_integer39=0
	set udg_dialog04=DialogCreate()
	set udg_group05=CreateGroup()
	set udg_integer40=0
	set udg_boolean09=false
	set udg_integer41=0
	set udg_boolean10=false
	set udg_boolean11=false
	set udg_integer42=0
	set udg_integer43=0
	set udg_integer44=0
	set udg_integer45=0
	set udg_integer46=0
	set udg_integer47=0
	set udg_force07=CreateForce()
	set udg_boolean12=false
	set udg_integer48=0
	set udg_integer49=0
	set udg_integer50=0
	set udg_integer51=0
	set udg_integer52=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers13[i]=0
		set i=i + 1
	endloop
	set udg_integer53=0
	set udg_group06=CreateGroup()
	set udg_integer54=0
	set udg_integer55=0
	set udg_integer56=0
	set udg_group07=CreateGroup()
	set udg_group08=CreateGroup()
	set udg_real03=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers14[i]=0
		set i=i + 1
	endloop
	set udg_integer57=0
	set udg_integer58=0
	set udg_integer59=0
	set udg_integer60=0
	set udg_integer61=0
	set udg_dialog05=DialogCreate()
	set udg_boolean13=false
	set udg_boolean14=false
	set udg_dialog06=DialogCreate()
	set udg_boolean15=false
	set udg_dialog07=DialogCreate()
	set udg_boolean16=false
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers15[i]=0
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers16[i]=0
		set i=i + 1
	endloop
	set udg_integer62=0
	set udg_real04=0
	set udg_boolean17=false
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_strings02[i]=""
		set i=i + 1
	endloop
	set udg_group09=CreateGroup()
	set udg_boolean18=false
	set udg_integer63=0
endfunction

function InitGlobals2 takes nothing returns nothing
 local integer i=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers01[i]=0
		set i=i + 1
	endloop
	set udg_integer02=0
	set udg_integer03=0
	set udg_integer05=0
	set udg_integer06=0
	set udg_integer07=0
	set udg_integer08=0
	set udg_real01=0
	set udg_integer09=0
	set udg_integer10=0
	set udg_integer11=0
	set udg_integer12=0
	set udg_integer13=0
	set udg_force01=CreateForce()
	set udg_boolean01=false
	set udg_force02=CreateForce()
	set udg_group01=CreateGroup()
	set udg_integer14=0
	set udg_group02=CreateGroup()
	set udg_group03=CreateGroup()
	set udg_integer16=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_booleans01[i]=false
		set i=i + 1
	endloop
	set udg_boolean02=false
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_booleans02[i]=false
		set i=i + 1
	endloop
	set udg_integer17=0
	set udg_integer18=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_booleans03[i]=false
		set i=i + 1
	endloop
	set udg_force03=CreateForce()
	set udg_integer19=0
	set udg_integer20=0
	set udg_real02=0
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers06[i]=0
		set i=i + 1
	endloop
	set udg_dialog01=DialogCreate()
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers07[i]=0
		set i=i + 1
	endloop
	set udg_integer21=0
	set udg_integer22=0
	set udg_integer23=0
	set udg_integer24=0
	set udg_integer25=0
	set udg_integer26=0
	set udg_integer27=0
	set udg_integer28=0
	set udg_group04=CreateGroup()
	set udg_integer29=0
	set udg_integer30=0
	set udg_boolean03=false
	set udg_boolean04=false
	set udg_dialog02=DialogCreate()
	set udg_integer31=0
	set udg_boolean05=false
	set udg_dialog03=DialogCreate()
	set udg_integer32=0
	set udg_integer33=0
	set udg_integer34=0
	set udg_boolean06=false
	set udg_integer35=0
	set udg_integer36=0
	set udg_integer37=0
	set i=0
	loop
		exitwhen ( i > 4 )
		set udg_dialogs01[i]=DialogCreate()
		set i=i + 1
	endloop
	set udg_force04=CreateForce()
	set udg_force05=CreateForce()
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_booleans04[i]=false
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_booleans05[i]=false
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers11[i]=0
		set i=i + 1
	endloop
	set udg_string01=""
	set udg_integer38=0
	set udg_boolean07=false
	set udg_force06=CreateForce()
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_strings01[i]=""
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 3 )
		set udg_integers12[i]=0
		set i=i + 1
	endloop
	set udg_boolean08=false
	set udg_integer39=0
	set udg_dialog04=DialogCreate()
	set udg_group05=CreateGroup()
	set udg_integer40=0
	set udg_boolean09=false
	set udg_integer41=0
	set udg_boolean10=false
	set udg_boolean11=false
	set udg_integer42=0
	set udg_integer43=0
	set udg_integer44=0
	set udg_integer45=0
	set udg_integer46=0
	set udg_integer47=0
	set udg_force07=CreateForce()
	set udg_boolean12=false
	set udg_integer48=0
	set udg_integer49=0
	set udg_integer50=0
	set udg_integer51=0
	set udg_integer52=0
	set i=0
	loop
		exitwhen ( i > 8 )
		set udg_integers13[i]=10
		set i=i + 1
	endloop
	set udg_integer53=0
	set udg_group06=CreateGroup()
	set udg_integer54=0
	set udg_integer55=0
	set udg_integer56=0
	set udg_group07=CreateGroup()
	set udg_group08=CreateGroup()
	set udg_real03=0
	set udg_integer57=0
	set udg_integer58=0
	set udg_integer59=0
	set udg_integer60=0
	set udg_integer61=0
	set udg_dialog05=DialogCreate()
	set udg_boolean13=false
	set udg_boolean14=false
	set udg_dialog06=DialogCreate()
	set udg_boolean15=false
	set udg_dialog07=DialogCreate()
	set udg_boolean16=false
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers15[i]=0
		set i=i + 1
	endloop
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_integers16[i]=0
		set i=i + 1
	endloop
	set udg_integer62=0
	set udg_real04=10.00
	set udg_boolean17=false
	set i=0
	loop
		exitwhen ( i > 1 )
		set udg_strings02[i]=""
		set i=i + 1
	endloop
	set udg_group09=CreateGroup()
	set udg_boolean18=false
	set udg_integer63=0
endfunction

function CreateUnitsForPlayer8 takes nothing returns nothing
 local player p=Player(8)
 local unit u
 local integer unitID
 local trigger t
 local real life
	set u=CreateUnit(p, 'O000', 768.0, - 253.6, 270.000)
	set u=CreateUnit(p, 'O008', 0.6, - 1022.1, 270.000)
	set u=CreateUnit(p, 'O002', - 257.3, - 250.1, 270.000)
	set u=CreateUnit(p, 'O005', - 255.5, 258.1, 270.000)
	set u=CreateUnit(p, 'H000', 256.9, - 253.6, 270.000)
	set u=CreateUnit(p, 'H001', 3.8, - 512.6, 280.000)
	set u=CreateUnit(p, 'H002', - 255.8, - 511.2, 270.000)
	call SetUnitState(u, UNIT_STATE_MANA, 45)
	set u=CreateUnit(p, 'H003', 256.8, - 511.2, 270.000)
	set u=CreateUnit(p, 'N00B', 256.8, 3.6, 270.000)
	set u=CreateUnit(p, 'E000', - 257.6, - 1.0, 270.000)
	set udg_unit35=CreateUnit(p, 'N00C', 514.7, - 1.0, 270.000)
	call SetUnitState(udg_unit35, UNIT_STATE_MANA, 15)
	set u=CreateUnit(p, 'O003', 0.6, 256.5, 270.000)
	set u=CreateUnit(p, 'H004', 514.7, - 255.3, 270.000)
	set u=CreateUnit(p, 'U000', 514.2, - 511.8, 270.000)
	set u=CreateUnit(p, 'H005', - 512.6, 2.1, 270.000)
	set u=CreateUnit(p, 'O004', - 510.4, - 252.7, 270.000)
	set u=CreateUnit(p, 'N00I', - 511.3, - 507.4, 270.000)
	set u=CreateUnit(p, 'n00J', 1.6, - 254.0, 270.000)
	set u=CreateUnit(p, 'N00L', - 767.3, - 255.3, 270.000)
	set u=CreateUnit(p, 'N00K', 256.1, 258.7, 270.000)
	set u=CreateUnit(p, 'H006', 0.7, 513.0, 270.000)
	
	set u=CreateUnit(p, 'N024', 256.9, 513.0, 270.000)
	set u=CreateUnit(p, 'H016', - 256.9, 513.0, 270.000)
	set u=CreateUnit(p, 'H017', 512, 513.0, 270.000)
	set u=CreateUnit(p, 'N02K', - 512, 513.0, 270.000)
	set u=CreateUnit(p, 'H018', - 768.0, - 768.0, 270.000)
	set u=CreateUnit(p, 'H019', - 768.0, - 513.0, 270.000)
    set u=CreateUnit(p, 'N02P', - 768.0, 0.6, 270.000)
    set u=CreateUnit(p, 'H01B', - 768.0, 256, 270.000)
    set u=CreateUnit(p, 'H01C', - 768.0, 513, 270.000)

    set u=CreateUnit(p, 'H01D', 768.0, - 507.4, 270.000)
    set u=CreateUnit(p, 'H01E', 768.0, - 768.0, 270.000)
    set u=CreateUnit(p, 'O00A', 768.0, 513, 270.000)
    set u=CreateUnit(p, 'O00B', 768.0, 256, 270.000)
    set u=CreateUnit(p, 'O00C', 768.0, 0, 270.000)
                    	
	set udg_unit36=CreateUnit(p, 'N00O', - 252.1, - 775.2, 270.000)
	set udg_unit38=CreateUnit(p, 'N00Q', 514.2, 257.2, 270.000)

    set u=CreateUnit(p, 'H01F', - 252.1, - 1022.1, 270.000)
    set u=CreateUnit(p, 'H01G', 252.1, - 1022.1, 270.000)
    set u=CreateUnit(p, 'H01H', 512.1, - 1022.1, 270.000)
    set u=CreateUnit(p, 'H01I', - 512.1, - 1022.1, 270.000)
    set u=CreateUnit(p, 'H01J', - 768, - 1022.1, 270.000)
    set u=CreateUnit(p, 'H01L', 768, - 1022.1, 270.000)
    
     set u=CreateUnit(p, 'H00A', 1024, - 1022.1, 270.000)

    
	set u=CreateUnit(p, 'N00R', 510.5, - 770.6, 270.000)
	set u=CreateUnit(p, 'H007', 256.1, - 767.4, 270.000)
	set u=CreateUnit(p, 'O006', 0.7, - 767.3, 270.000)
	set udg_unit37=CreateUnit(p, 'H008', - 512.7, 257.9, 270.000)
	set u=CreateUnit(p, 'O007', 2.1, - 0.9, 270.000)
	set u=CreateUnit(p, 'O001', - 512.8, - 766.9, 270.000)
endfunction

function Trig_Untitled_Trigger_001_Func001A takes nothing returns nothing
    call DeleteUnit(GetEnumUnit())
endfunction

function CreateNeutralPassiveBuildings3 takes nothing returns nothing
 local player p=Player(PLAYER_NEUTRAL_PASSIVE)
 local unit u
 local integer unitID
 local trigger t
 local real life
	set udg_unit06=CreateUnit(p, 'ncop', 0.0, - 256.0, 270.000)
	set udg_unit07=CreateUnit(p, 'ncop', - 256.0, - 256.0, 270.000)
	set udg_unit08=CreateUnit(p, 'ncop', - 256.0, 0.0, 270.000)
	set udg_unit09=CreateUnit(p, 'ncop', 0.0, 0.0, 270.000)
	set udg_unit10=CreateUnit(p, 'ncop', 256.0, 0.0, 270.000)
	set udg_unit11=CreateUnit(p, 'ncop', 256.0, - 256.0, 270.000)
	set udg_unit12=CreateUnit(p, 'ncop', 256.0, - 512.0, 270.000)
	set udg_unit13=CreateUnit(p, 'ncop', 0.0, - 512.0, 270.000)
	set udg_unit14=CreateUnit(p, 'ncop', - 256.0, - 512.0, 270.000)
	set udg_unit15=CreateUnit(p, 'ncop', - 256.0, - 768.0, 270.000)
	set udg_unit16=CreateUnit(p, 'ncop', 0.0, - 768.0, 270.000)
	set udg_unit17=CreateUnit(p, 'ncop', 256.0, - 768.0, 270.000)
	set udg_unit18=CreateUnit(p, 'ncop', 512.0, - 768.0, 270.000)
	set udg_unit19=CreateUnit(p, 'ncop', 512.0, - 512.0, 270.000)
	set udg_unit20=CreateUnit(p, 'ncop', 512.0, - 256.0, 270.000)
	set udg_unit21=CreateUnit(p, 'ncop', 512.0, 0.0, 270.000)
	set udg_unit22=CreateUnit(p, 'ncop', 256.0, 256.0, 270.000)
	set udg_unit23=CreateUnit(p, 'ncop', 0.0, 256.0, 270.000)
	set udg_unit24=CreateUnit(p, 'ncop', - 256.0, 256.0, 270.000)
	set udg_unit25=CreateUnit(p, 'ncop', - 512.0, 256.0, 270.000)
	set udg_unit26=CreateUnit(p, 'ncop', - 512.0, 0.0, 270.000)
	set udg_unit27=CreateUnit(p, 'ncop', - 512.0, - 256.0, 270.000)
	set udg_unit28=CreateUnit(p, 'ncop', - 512.0, - 512.0, 270.000)
	set udg_unit29=CreateUnit(p, 'ncop', - 512.0, - 768.0, 270.000)
	set udg_unit30=CreateUnit(p, 'ncop', 0.0, - 1024.0, 270.000)
	set udg_unit31=CreateUnit(p, 'ncop', - 768.0, - 256.0, 270.000)
	set udg_unit32=CreateUnit(p, 'ncop', 768.0, - 256.0, 270.000)
	set udg_unit33=CreateUnit(p, 'ncop', 0, 512.0, 270.000)
	set CicrleUnit[0]=CreateUnit(p, 'ncop', 256, 512.0, 270.000)
	set CicrleUnit[1]=CreateUnit(p, 'ncop', - 256, 512.0, 270.000)
	set CicrleUnit[2]=CreateUnit(p, 'ncop', 512, 512.0, 270.000)
	set CicrleUnit[3]=CreateUnit(p, 'ncop', - 512, 512.0, 270.000)
	
	set CicrleUnit[4]=CreateUnit(p, 'ncop', - 768.0, - 768.0, 270.000)
	set CicrleUnit[5]=CreateUnit(p, 'ncop', - 768.0, - 512.0, 270.000)
	set CicrleUnit[6]=CreateUnit(p, 'ncop', - 768.3, 0.6, 270.000)
	set CicrleUnit[7]=CreateUnit(p, 'ncop', - 768.3, 256, 270.000)
	set CicrleUnit[8]=CreateUnit(p, 'ncop', - 768.3, 513, 270.000)
	set CicrleUnit[9]=CreateUnit(p, 'ncop', 768.0, - 512, 270.000)
	set CicrleUnit[10]=CreateUnit(p, 'ncop', 768.0, - 768.0, 270.000)
	set CicrleUnit[11]=CreateUnit(p, 'ncop', 768.0, 513, 270.000)
	set CicrleUnit[12]=CreateUnit(p, 'ncop', 768.0, 256, 270.000)
	set CicrleUnit[13]=CreateUnit(p, 'ncop', 768.0, 0, 270.000)
	set CicrleUnit[14]=CreateUnit(p, 'ncop', - 256, - 1024.0, 270.000)
	set CicrleUnit[15]=CreateUnit(p, 'ncop', 256, - 1024.0, 270.000)
	set CicrleUnit[16]=CreateUnit(p, 'ncop', 512, - 1024.0, 270.000)
    set CicrleUnit[17]=CreateUnit(p, 'ncop', - 512, - 1024.0, 270.000)
    	set CicrleUnit[18]=CreateUnit(p, 'ncop', - 768, - 1024.0, 270.000)
    set CicrleUnit[19]=CreateUnit(p, 'ncop', 768, - 1024.0, 270.000)
    set CicrleUnit[20]=CreateUnit(p, 'ncop', 1024, - 1024.0, 270.000)
	set udg_unit34=CreateUnit(p, 'ncop', 512.0, 256.0, 270.000)
endfunction

function CreateNeutralPassiveBuildings2 takes nothing returns nothing
 local player p=Player(PLAYER_NEUTRAL_PASSIVE)
 local unit u
 local integer unitID
 local trigger t
 local real life
	
	set udg_unit06=CreateUnit(p, 'ncop', 0.0, - 256.0, 270.000)
	set udg_unit07=CreateUnit(p, 'ncop', - 256.0, - 256.0, 270.000)
	set udg_unit08=CreateUnit(p, 'ncop', - 256.0, 0.0, 270.000)
	set udg_unit09=CreateUnit(p, 'ncop', 0.0, 0.0, 270.000)
	set udg_unit10=CreateUnit(p, 'ncop', 256.0, 0.0, 270.000)
	set udg_unit11=CreateUnit(p, 'ncop', 256.0, - 256.0, 270.000)
	set udg_unit12=CreateUnit(p, 'ncop', 256.0, - 512.0, 270.000)
	set udg_unit13=CreateUnit(p, 'ncop', 0.0, - 512.0, 270.000)
	set udg_unit14=CreateUnit(p, 'ncop', - 256.0, - 512.0, 270.000)
	set udg_unit15=CreateUnit(p, 'ncop', - 256.0, - 768.0, 270.000)
	set udg_unit16=CreateUnit(p, 'ncop', 0.0, - 768.0, 270.000)
	set udg_unit17=CreateUnit(p, 'ncop', 256.0, - 768.0, 270.000)
	set udg_unit18=CreateUnit(p, 'ncop', 512.0, - 768.0, 270.000)
	set udg_unit19=CreateUnit(p, 'ncop', 512.0, - 512.0, 270.000)
	set udg_unit20=CreateUnit(p, 'ncop', 512.0, - 256.0, 270.000)
	set udg_unit21=CreateUnit(p, 'ncop', 512.0, 0.0, 270.000)
	set udg_unit22=CreateUnit(p, 'ncop', 256.0, 256.0, 270.000)
	set udg_unit23=CreateUnit(p, 'ncop', 0.0, 256.0, 270.000)
	set udg_unit24=CreateUnit(p, 'ncop', - 256.0, 256.0, 270.000)
	set udg_unit25=CreateUnit(p, 'ncop', - 512.0, 256.0, 270.000)
	set udg_unit26=CreateUnit(p, 'ncop', - 512.0, 0.0, 270.000)
	set udg_unit27=CreateUnit(p, 'ncop', - 512.0, - 256.0, 270.000)
	set udg_unit28=CreateUnit(p, 'ncop', - 512.0, - 512.0, 270.000)
	set udg_unit29=CreateUnit(p, 'ncop', - 512.0, - 768.0, 270.000)
	set udg_unit30=CreateUnit(p, 'ncop', 0.0, - 1024.0, 270.000)
	set udg_unit31=CreateUnit(p, 'ncop', - 768.0, - 256.0, 270.000)
	set udg_unit32=CreateUnit(p, 'ncop', 768.0, - 256.0, 270.000)
	set CicrleUnit[0]=CreateUnit(p, 'ncop', 256, 512.0, 270.000)
	set CicrleUnit[1]=CreateUnit(p, 'ncop', - 256, 512.0, 270.000)
	set CicrleUnit[2]=CreateUnit(p, 'ncop', 512, 512.0, 270.000)
	set CicrleUnit[3]=CreateUnit(p, 'ncop', - 512, 512.0, 270.000)
	set CicrleUnit[4]=CreateUnit(p, 'ncop', - 768.0, - 768.0, 270.000)
	set CicrleUnit[5]=CreateUnit(p, 'ncop', - 768.0, - 512.0, 270.000)
	set CicrleUnit[6]=CreateUnit(p, 'ncop', - 768.0, 0.6, 270.000)
	set CicrleUnit[7]=CreateUnit(p, 'ncop', - 768.3, 256, 270.000)
	set CicrleUnit[8]=CreateUnit(p, 'ncop', - 768.3, 513, 270.000)
	set CicrleUnit[9]=CreateUnit(p, 'ncop', 768.0, - 512.4, 270.000)
	set CicrleUnit[10]=CreateUnit(p, 'ncop', 768.0, - 768.0, 270.000)
	set CicrleUnit[11]=CreateUnit(p, 'ncop', 768.0, 513, 270.000)
	set CicrleUnit[12]=CreateUnit(p, 'ncop', 768.0, 256, 270.000)
	set CicrleUnit[13]=CreateUnit(p, 'ncop', 768.0, 0, 270.000)
	set CicrleUnit[14]=CreateUnit(p, 'ncop', - 256, - 1024.0, 270.000)
	set CicrleUnit[15]=CreateUnit(p, 'ncop', 256, - 1024.0, 270.000)
	set CicrleUnit[16]=CreateUnit(p, 'ncop', 512, - 1024.0, 270.000)
	set CicrleUnit[17]=CreateUnit(p, 'ncop', - 512, - 1024.0, 270.000)
	set CicrleUnit[18]=CreateUnit(p, 'ncop', - 768, - 1024.0, 270.000)
    set CicrleUnit[19]=CreateUnit(p, 'ncop', 768, - 1024.0, 270.000)
    set CicrleUnit[20]=CreateUnit(p, 'ncop', 1024, - 1024.0, 270.000)
 set udg_unit33=CreateUnit(p, 'ncop', 0.0, 512.0, 270.000)
	set udg_unit34=CreateUnit(p, 'ncop', 512.0, 256.0, 270.000)
//	set u=CreateUnit(p,'n00A',-960.0,-604.0,270.000)
//	set u=CreateUnit(p,'n00M',960.0,-604.0,270.000)
	if ( udg_boolean05 == false ) then
	
	
	
	
//	 set u=CreateUnit(p,'n012',-124,707,270.000)
//	 set u=CreateUnit(p,'n014',-372,707,270.000)
//	 set u=CreateUnit(p,'n003',-620,707,270.000)     
//	 set u=CreateUnit(p,'n00U',-868,707,270.000)   
	 
//	 set u=CreateUnit(p,'n001',124,707,270.000)
//	 set u=CreateUnit(p,'n013',372,707,270.000)
//	 set u=CreateUnit(p,'n00D',620,707,270.000)     
   //  set u=CreateUnit(p,'n00Y',868,707,270.000)  
   //  set u=CreateUnit(p,'n00S',1116,707,270.000)           


   	 set u=CreateUnit(p, 'n00Y', - 124, 707, 270.000)
  	 set u=CreateUnit(p, 'n00U', - 372, 707, 270.000)
	 set u=CreateUnit(p, 'n003', - 620, 707, 270.000)
    set u=CreateUnit(p, 'n033', - 620, 707 + 248, 270.000)
	 set u=CreateUnit(p, 'n00D', - 868, 707, 270.000)
	 set u=CreateUnit(p, 'n02O', - 868, 707 + 248, 270.000)
	 set u=CreateUnit(p, 'n02M', - 1116, 707, 270.000)
	 
	 
	 set u=CreateUnit(p, 'n013', 124, 707, 270.000)
	 set u=CreateUnit(p, 'n014', 372, 707, 270.000)
	 set u=CreateUnit(p, 'n001', 620, 707, 270.000)
     set u=CreateUnit(p, 'n012', 868, 707, 270.000)
     set u=CreateUnit(p, 'n00S', 1116, 707, 270.000)
     set u=CreateUnit(p, 'n02N', 1116, 707 + 248, 270.000)
     set u=CreateUnit(p, 'n032', 372, 707 + 248, 270.000)
     set u=CreateUnit(p, 'n02X', 868, 707 + 248, 270.000)
	 set u=CreateUnit(p, 'n031', 620, 707 + 248, 270.000)


     	
//		set u=CreateUnit(p,'n001',384.0,576.0,270.000)
//		set u=CreateUnit(p,'n003',960.0,0.0,270.000)
//		set u=CreateUnit(p,'n00D',-960.0,0.0,270.000)
//		set u=CreateUnit(p,'n012',-384.0,576.0,270.000)
//		set u=CreateUnit(p,'n004',000.0,650.0,270.000)
//		set u=CreateUnit(p,'n00Y',384.0,-1024.0,270.000)
	//	set u=CreateUnit(p,'n00U',-384.0,-1024.0,270.000)
//		set u=CreateUnit(p,'n013',640.0,320.0,270.000)
	//	set u=CreateUnit(p,'n014',-640.0,320.0,270.000)
		
//		set u=CreateUnit(p,'n00S',0,-1160,270.000)
	else
	//	set u=CreateUnit(p,'n004',0.0,640.0,270.000)
	//	set u=CreateUnit(p,'n016',-960.0,-256.0,270.000)
	//	set u=CreateUnit(p,'n016',0.0,-1152.0,270.000)
	//	set u=CreateUnit(p,'n016',960.0,-256.0,270.000)
	endif
        set u=CreateUnit(p, 'n02H', - 868, - 1152, 270.000)
     set u=CreateUnit(p, 'n00A', - 620, - 1152, 270.000)
     set u=CreateUnit(p, 'n00M', - 372, - 1152, 270.000)
     set u=CreateUnit(p, 'n02V', - 124, - 1152, 270.000)
     set u=CreateUnit(p, 'n02W', - 124, - 1152 - 256, 270.000)
     set u=CreateUnit(p, 'n02I', 124, - 1152, 270.000)
     set u=CreateUnit(p, 'n02Z', 124, - 1152 - 256, 270.000)
     set u=CreateUnit(p, 'n02J', 372, - 1152, 270.000)
     set u=CreateUnit(p, 'n030', 372, - 1152 - 256, 270.000)
     set u=CreateUnit(p, 'n02Q', 620, - 1152, 270.000)
     set u=CreateUnit(p, 'n02Y', 868, - 1152, 270.000)
	call ForGroupBJ(GetUnitsOfTypeIdAll('ncop'), function Trig_Untitled_Trigger_001_Func001A)
endfunction

function CreateRegions2 takes nothing returns nothing
 local weathereffect we
	set udg_rect01=Rect(- 4384.0, 2400.0, - 2784.0, 4000.0)
	set udg_rect02=Rect(- 800.0, 2400.0, 800.0, 4000.0)
	set udg_rect03=Rect(2784.0, 2400.0, 4384.0, 4000.0)
	set udg_rect04=Rect(2784.0, - 1056.0, 4384.0, 544.0)
	set udg_rect05=Rect(2784.0, - 4512.0, 4384.0, - 2912.0)
	set udg_rect06=Rect(- 800.0, - 4512.0, 800.0, - 2912.0)
	set udg_rect07=Rect(- 4384.0, - 4512.0, - 2784.0, - 2912.0)
	set udg_rect08=Rect(- 4384.0, - 1056.0, - 2784.0, 544.0)
	set udg_rect09=Rect(- 1696.0, - 1952.0, 1696.0, 1440.0)
endfunction

function Trig_Antimagic_Shell_Func001001002 takes nothing returns boolean
	return ( UnitHasBuffBJ(GetFilterUnit(), 'Bam2') == true )
endfunction

function Trig_Antimagic_Shell_Func001A takes nothing returns nothing
	call UnitRemoveBuffBJ('BUim', GetEnumUnit())
	call UnitRemoveBuffBJ('BSTN', GetEnumUnit())
	call UnitRemoveBuffBJ('BPSE', GetEnumUnit())
endfunction

function Trig_Antimagic_Shell_Actions takes nothing returns nothing
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Antimagic_Shell_Func001001002)), function Trig_Antimagic_Shell_Func001A)
endfunction

function Trig_Black_Arrow_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'n015' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Black_Arrow_Actions takes nothing returns nothing
	set udg_real02=( I2R(GetUnitAbilityLevelSwapped('ANba', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])) * 1.50 )
	call SetUnitScalePercent(GetTriggerUnit(), ( 100.00 + udg_real02 ), ( 100.00 + udg_real02 ), ( 100.00 + udg_real02 ))
	call SetUnitVertexColorBJ(GetTriggerUnit(), 100, ( 100.00 - udg_real02 ), ( 100.00 - udg_real02 ), 0)
	call SetUnitAbilityLevelSwapped('A000', GetTriggerUnit(), ( GetUnitAbilityLevelSwapped('ANba', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) / 1 ))
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=( GetUnitAbilityLevelSwapped('ANba', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) - 1 )
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		call UnitAddItemByIdSwapped('I02L', GetTriggerUnit())
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
endfunction

function Trig_Carrion_Beetles_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'u001' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Carrion_Beetles_Actions takes nothing returns nothing
	set udg_real02=( I2R(GetUnitAbilityLevelSwapped('AUcb', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])) * 1.50 )
	call SetUnitScalePercent(GetTriggerUnit(), ( 100.00 + udg_real02 ), ( 100.00 + udg_real02 ), ( 100.00 + udg_real02 ))
	call SetUnitVertexColorBJ(GetTriggerUnit(), 100, ( 100.00 - udg_real02 ), ( 100.00 - udg_real02 ), 0)
	call SetUnitAbilityLevelSwapped('A000', GetTriggerUnit(), ( GetUnitAbilityLevelSwapped('AUcb', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) / 2 ))
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=( GetUnitAbilityLevelSwapped('AUcb', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) - 1 )
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		call UnitAddItemByIdSwapped('I01B', GetTriggerUnit())
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
endfunction

function Trig_Clockwerk_Goblin_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'n011' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Clockwerk_Goblin_Actions takes nothing returns nothing
	set udg_real02=( I2R(GetUnitAbilityLevelSwapped('ANsy', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])) * 1.50 )
	call SetUnitScalePercent(GetTriggerUnit(), ( 100.00 + udg_real02 ), ( 100.00 + udg_real02 ), ( 100.00 + udg_real02 ))
	call SetUnitAbilityLevelSwapped('A00P', GetTriggerUnit(), GetUnitAbilityLevelSwapped('ANsy', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
	call SetUnitAbilityLevelSwapped('A000', GetTriggerUnit(), ( GetUnitAbilityLevelSwapped('ANsy', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) / 1 ))
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=( GetUnitAbilityLevelSwapped('ANsy', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) / 1 )
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		call UnitAddItemByIdSwapped('I02L', GetTriggerUnit())
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
endfunction

function Trig_Corrosive_Skin_Conditions takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('A00Q', GetAttackedUnitBJ()) > 0 ) ) then
		return false
	endif
	return true
endfunction



function Trig_Corrosive_Skin_Actions takes nothing returns nothing
local real luck= GetUnitLuck(GetTriggerUnit())

	if GetRandomReal(0, 100) <= 25 * luck then
		call CreateNUnitsAtLoc(1, 'n00V', GetOwningPlayer(GetAttackedUnitBJ()), GetUnitLoc(GetAttackedUnitBJ()), bj_UNIT_FACING)
		call UnitAddAbilityBJ('A00R', GetLastCreatedUnit())
		call SetUnitAbilityLevelSwapped('A00R', GetLastCreatedUnit(), GetUnitAbilityLevelSwapped('A00Q', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetAttackedUnitBJ()))]))
		call IssueTargetOrderBJ(GetLastCreatedUnit(), "firebolt", GetAttacker())
		call UnitApplyTimedLifeBJ(3.00, 'BTLF', GetLastCreatedUnit())

	endif
endfunction




function Trig_Dark_Ritual_Conditions takes nothing returns boolean
	if ( not ( GetSpellAbilityId() == 'A00N' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dark_Ritual_Actions takes nothing returns nothing
	set udg_real02=( ( 0.33 * I2R(GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit())) ) * GetUnitStateSwap(UNIT_STATE_LIFE, GetSpellTargetUnit()) )
	call KillUnit(GetSpellTargetUnit())
	call TriggerSleepAction(0.00)
	call SetUnitManaBJ(GetTriggerUnit(), ( GetUnitStateSwap(UNIT_STATE_MANA, GetTriggerUnit()) + udg_real02 ))
endfunction

function Trig_Death_Pact_Conditions takes nothing returns boolean
	if ( not ( GetSpellAbilityId() == 'A00M' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Death_Pact_Actions takes nothing returns nothing
	set udg_real02=( I2R(GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit())) * GetUnitStateSwap(UNIT_STATE_LIFE, GetSpellTargetUnit()) )
	call KillUnit(GetSpellTargetUnit())
	call TriggerSleepAction(0.00)
	call SetUnitLifeBJ(GetTriggerUnit(), ( GetUnitStateSwap(UNIT_STATE_LIFE, GetTriggerUnit()) + udg_real02 ))
endfunction

function Trig_Devastating_Blow_Conditions takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('A050', GetEventDamageSource()) > 0 ) ) then
		return false
	endif
	
	if ( not ( BlzGetUnitAbilityCooldownRemaining(GetEventDamageSource(), 'A050') <= 0 ) ) then
		return false
	endif
	if ( not ( IsUnitAliveBJ(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEventDamageSource()))]) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Devastating_Blow_Actions takes nothing returns nothing
	call DestroyEffectBJ(udg_effects01[GetConvertedPlayerId(GetOwningPlayer(GetEventDamageSource()))])
	call DestroyEffectBJ(udg_effects02[GetConvertedPlayerId(GetOwningPlayer(GetEventDamageSource()))])
	set udg_effects01[GetConvertedPlayerId(GetOwningPlayer(GetEventDamageSource()))]=null
	set udg_effects02[GetConvertedPlayerId(GetOwningPlayer(GetEventDamageSource()))]=null
	call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl")
	call DestroyEffectBJ(GetLastCreatedEffectBJ())
	call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl")
	call DestroyEffectBJ(GetLastCreatedEffectBJ())
	call AddSpecialEffectTargetUnitBJ("chest", GetTriggerUnit(), "Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl")
	call DestroyEffectBJ(GetLastCreatedEffectBJ())
	call AddSpecialEffectTargetUnitBJ("chest", GetTriggerUnit(), "Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl")
	call DestroyEffectBJ(GetLastCreatedEffectBJ())
//	call UnitDamageTargetBJ(GetEventDamageSource(),GetTriggerUnit(),(50.00*I2R(GetUnitAbilityLevelSwapped('Aimp',GetEventDamageSource()))),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
	call AbilStartCD(GetEventDamageSource() , 'A050' , 5)
	call DisableTrigger(udg_trigger11)
	call UnitDamageTargetBJ(GetEventDamageSource(), GetTriggerUnit(), ( 0.08 * GetUnitStateSwap(UNIT_STATE_MAX_LIFE, GetTriggerUnit()) ) + ( 50.00 * I2R(GetUnitAbilityLevelSwapped('A050', GetEventDamageSource())) ), ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC)
    call EnableTrigger(udg_trigger11)
endfunction




function Trig_Devastating_Blow_Ennhance_Actions takes nothing returns nothing
	set udg_integer53=1
	loop
		exitwhen udg_integer53 > 8
		
		if GetUnitAbilityLevel(udg_units01[udg_integer53], 'A050') > 0 and BlzGetUnitAbilityCooldownRemaining(udg_units01[udg_integer53], 'A050') <= 0 and udg_effects01[udg_integer53] == null then
			call DestroyEffectBJ(udg_effects01[udg_integer53])
			call AddSpecialEffectTargetUnitBJ("hand left", udg_units01[udg_integer53], "Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnMissile.mdl")
			set udg_effects01[udg_integer53]=GetLastCreatedEffectBJ()
			call DestroyEffectBJ(udg_effects02[udg_integer53])
			call AddSpecialEffectTargetUnitBJ("hand right", udg_units01[udg_integer53], "Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnMissile.mdl")
			set udg_effects02[udg_integer53]=GetLastCreatedEffectBJ()
		endif

		set udg_integer53=udg_integer53 + 1
	endloop
endfunction

function Trig_Devastating_Blow_Add_Conditions takes nothing returns boolean
	if ( not ( IsUnitInGroup(GetTriggerUnit(), udg_group06) != true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Devastating_Blow_Add_Actions takes nothing returns nothing
	call GroupAddUnitSimple(GetTriggerUnit(), udg_group06)
	call TriggerRegisterUnitEvent(udg_trigger11, GetTriggerUnit(), EVENT_UNIT_DAMAGED)
endfunction

function Trig_Dreadlords_Thirst_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetKillingUnitBJ()) == 'O002' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dreadlords_Thirst_Actions takes nothing returns nothing
	call SetUnitLifeBJ(GetKillingUnitBJ(), ( GetUnitStateSwap(UNIT_STATE_LIFE, GetKillingUnitBJ()) + ( GetUnitStateSwap(UNIT_STATE_MAX_LIFE, GetKillingUnitBJ()) / 10.00 ) ))
	call AddSpecialEffectTargetUnitBJ("hand right", GetKillingUnitBJ(), "Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl")
	call DestroyEffectBJ(GetLastCreatedEffectBJ())
	call AddSpecialEffectTargetUnitBJ("hand left", GetKillingUnitBJ(), "Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl")
	call DestroyEffectBJ(GetLastCreatedEffectBJ())
	call AddSpecialEffectTargetUnitBJ("origin", GetTriggerUnit(), "Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl")
	call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction

function Trig_Faerie_Dragon_Func001Func001Func002C takes nothing returns boolean
	if ( not ( DistanceBetweenPoints(GetUnitLoc(GetEnumUnit()), GetUnitLoc(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))])) >= 900.00 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Faerie_Dragon_Func001Func001Func003C takes nothing returns boolean
	if ( not ( GetUnitStateSwap(UNIT_STATE_MANA, GetEnumUnit()) == GetUnitStateSwap(UNIT_STATE_MAX_MANA, GetEnumUnit()) ) ) then
		return false
	endif
	return true
endfunction

function Trig_Faerie_Dragon_Func001Func001C takes nothing returns boolean
	if ( not ( GetOwningPlayer(GetEnumUnit()) == GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]) ) ) then
		return false
	endif
	return true
endfunction

function Trig_Faerie_Dragon_Func001A takes nothing returns nothing
	if ( Trig_Faerie_Dragon_Func001Func001C() ) then
		if ( Trig_Faerie_Dragon_Func001Func001Func002C() ) then
			call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()), "Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl")
			call DestroyEffectBJ(GetLastCreatedEffectBJ())
			call SetUnitPositionLoc(GetEnumUnit(), GetUnitLoc(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]))
			call IssueImmediateOrderBJ(GetEnumUnit(), "stop")
			call AddSpecialEffectTargetUnitBJ("origin", GetEnumUnit(), "Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl")
			call DestroyEffectBJ(GetLastCreatedEffectBJ())
		else
		endif
		if ( Trig_Faerie_Dragon_Func001Func001Func003C() ) then
			call SetUnitAbilityLevelSwapped('A000', GetEnumUnit(), ( GetHeroLevel(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]) / 2 ))
			call IssuePointOrderLocBJ(GetEnumUnit(), "attack", OffsetLocation(GetUnitLoc(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]), GetRandomReal(- 300.00, 300.00), GetRandomReal(- 300.00, 300.00)))
			call SetUnitManaBJ(GetEnumUnit(), GetRandomReal(0, 1.00))
		else
		endif
	else
	endif
endfunction

function Trig_Faerie_Dragon_Actions takes nothing returns nothing
    local group GRP= GetUnitsOfTypeIdAll('e001')
	call ForGroupBJ(GRP, function Trig_Faerie_Dragon_Func001A)
	call DestroyGroup(GRP)
	set GRP=null
endfunction

function Trig_Faerie_Dragon_or_Wisp_Dies_Func002C takes nothing returns boolean
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'e001' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'e003' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Faerie_Dragon_or_Wisp_Dies_Conditions takes nothing returns boolean
	if ( not Trig_Faerie_Dragon_or_Wisp_Dies_Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Faerie_Dragon_or_Wisp_Dies_Actions takes nothing returns nothing
	call CreateNUnitsAtLoc(1, GetUnitTypeId(GetTriggerUnit()), GetOwningPlayer(GetTriggerUnit()), GetUnitLoc(GetTriggerUnit()), GetUnitFacing(GetTriggerUnit()))
endfunction

function Trig_Healing_Ward_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'ohwd' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Healing_Ward_Actions takes nothing returns nothing
	call SetUnitAbilityLevelSwapped('Aoar', GetTriggerUnit(), GetUnitAbilityLevelSwapped('Ahwd', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
endfunction

function Trig_Inferno_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'n005' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Inferno_Actions takes nothing returns nothing
	call SetUnitAbilityLevelSwapped('ANpi', GetTriggerUnit(), GetUnitAbilityLevelSwapped('AUin', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
	call SetUnitAbilityLevelSwapped('A000', GetTriggerUnit(), ( GetUnitAbilityLevelSwapped('AUin', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) ))
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=( GetUnitAbilityLevelSwapped('AUin', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) * 2 )
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		call UnitAddItemByIdSwapped('I022', GetTriggerUnit())
		call UnitAddItemByIdSwapped('I022', GetTriggerUnit())
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
endfunction

function Trig_Mountain_Giant_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'e002' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Mountain_Giant_Actions takes nothing returns nothing
	call SetUnitAbilityLevelSwapped('ANpi', GetTriggerUnit(), GetUnitAbilityLevelSwapped('AEsv', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
	call SetUnitAbilityLevelSwapped('A000', GetTriggerUnit(), ( GetUnitAbilityLevelSwapped('AEsv', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) * 1 ))
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=( GetUnitAbilityLevelSwapped('AEsv', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) * 6 )
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		call UnitAddItemByIdSwapped('I02K', GetTriggerUnit())
		call UnitAddItemByIdSwapped('I02K', GetTriggerUnit())
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
endfunction

function Trig_Parasite_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'ncfs' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Parasite_Actions takes nothing returns nothing
	set udg_real02=( I2R(GetUnitAbilityLevelSwapped('ANpa', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])) * 1.50 )
	call SetUnitScalePercent(GetTriggerUnit(), ( 100.00 + udg_real02 ), ( 100.00 + udg_real02 ), ( 100.00 + udg_real02 ))
	call SetUnitVertexColorBJ(GetTriggerUnit(), 100, ( 100.00 - udg_real02 ), ( 100.00 - udg_real02 ), 0)
	call SetUnitAbilityLevelSwapped('A000', GetTriggerUnit(), ( GetUnitAbilityLevelSwapped('ANpa', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) - 2 ))
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=( GetUnitAbilityLevelSwapped('ANpa', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) - 1 )
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		call UnitAddItemByIdSwapped('I02L', GetTriggerUnit())
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
endfunction

function Trig_Phoenix_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'hphx' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Phoenix_Actions takes nothing returns nothing
	call SetUnitAbilityLevelSwapped('A000', GetTriggerUnit(), ( GetUnitAbilityLevelSwapped('AHpx', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) * 1 ))
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=( GetUnitAbilityLevelSwapped('AHpx', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) * 2 )
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		call UnitAddItemByIdSwapped('I022', GetTriggerUnit())
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
endfunction



function Trig_Pillage_Conditions takes nothing returns boolean
    local integer GG_d1= 0
     local integer PilageBonus= 0
     local integer RingBonus= 0
     local integer RemBon= 0
     local integer XpBonus= 0
     local integer GoldBonus= 0
     local unit Gku= udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]
     local player OwningUnit= GetOwningPlayer(Gku)
     local integer pid= GetPlayerId(OwningUnit)
     local real luck= GetUnitLuck(Gku)
     
     
     
     set XpBonus=XpBonus + BonusNeutral + BonusNeutralPlayer[pid]
     
     if GetUnitTypeId(Gku) == 'N02P' then
        set GoldBonus=GoldBonus + ( ( ( 25 + GetHeroLevel(Gku) * 2 ) * 70 ) / ( 70 + GetUnitAbilityLevel(Gku, 'A02W') + GetUnitAbilityLevel(Gku, 'Asal') ) )
        set XpBonus=XpBonus + ( ( ( 25 + GetHeroLevel(Gku) * 2 ) * 70 ) / ( 70 + GetUnitAbilityLevel(Gku, 'A02W') + GetUnitAbilityLevel(Gku, 'Asal') ) )
        set RemBon=20
        call AdjustPlayerStateBJ(GoldBonus, OwningUnit, PLAYER_STATE_RESOURCE_GOLD)
        call ResourseRefresh(OwningUnit)
     endif
     

	set udg_integer60=0
	
	
	if ( IsUnitIllusionBJ(GetTriggerUnit()) != true ) and ( GetUnitTypeId(GetTriggerUnit()) != 'n00T' ) and ( GetUnitAbilityLevelSwapped('Asal', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]) > 0 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])) ) then
	
	
	if GetRandomReal(0, 100) <= 65 * luck then
		set PilageBonus=PilageBonus + ( ( ( GetUnitAbilityLevelSwapped('Asal', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]) * 18 ) * 70 ) / ( 70 + RemBon + GetUnitAbilityLevelSwapped('A02W', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]) ) )
		call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl")
		call DestroyEffectBJ(GetLastCreatedEffectBJ())
	else
	endif
	
	endif
	
	
	if ( IsUnitIllusionBJ(GetTriggerUnit()) != true ) and ( GetUnitTypeId(GetTriggerUnit()) != 'n00T' ) and ( GetUnitAbilityLevelSwapped('A02W', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]) > 0 ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])) ) then

        set XpBonus=XpBonus + ( 35 * GetUnitAbilityLevel(Gku, 'A02W') * 70 ) / ( 70 + RemBon + GetUnitAbilityLevel(Gku, 'Asal') )
	endif
	
	
	if GetItemTypeId(UnitItemInSlot(Gku, 0)) == 'I04R' then
	    set RingBonus=RingBonus + 10
	endif
	if GetItemTypeId(UnitItemInSlot(Gku, 1)) == 'I04R' then
	    set RingBonus=RingBonus + 10
	endif
	if GetItemTypeId(UnitItemInSlot(Gku, 2)) == 'I04R' then
	    set RingBonus=RingBonus + 10
	endif
	if GetItemTypeId(UnitItemInSlot(Gku, 3)) == 'I04R' then
	    set RingBonus=RingBonus + 10
	endif
 	if GetItemTypeId(UnitItemInSlot(Gku, 4)) == 'I04R' then
	    set RingBonus=RingBonus + 10
	endif
	if GetItemTypeId(UnitItemInSlot(Gku, 5)) == 'I04R' then
	    set RingBonus=RingBonus + 10
	endif



    //fixPilage
    
    


     if RingBonus > PilageBonus then
       set udg_integer60=RingBonus
       call AdjustPlayerStateBJ(RingBonus, GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]), PLAYER_STATE_RESOURCE_GOLD)
       call ResourseRefresh(GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]))
       
     else
        set udg_integer60=PilageBonus
        call AdjustPlayerStateBJ(PilageBonus, GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]), PLAYER_STATE_RESOURCE_GOLD)
        call ResourseRefresh(GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]))
     endif
     
     if UnitHasItemS(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))] , 'I05U') then
        if PilageBonus == 0 then
             set GG_d1=GG_d1 + 2 * GetHeroLevel(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
        else
             set GG_d1=GG_d1 + GetHeroLevel(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
        endif
     endif
     

    if GetItemTypeId(UnitItemInSlot(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))], 0)) == 'I05A' then
	    set udg_integer60=udg_integer60 + 50
	    set GG_d1=GG_d1 + 50
	    call AdjustPlayerStateBJ(50, GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]), PLAYER_STATE_RESOURCE_GOLD)
	    call ResourseRefresh(GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]))

	endif
	if GetItemTypeId(UnitItemInSlot(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))], 1)) == 'I05A' then
	    set udg_integer60=udg_integer60 + 50
	    	    set GG_d1=GG_d1 + 50
	    call AdjustPlayerStateBJ(50, GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]), PLAYER_STATE_RESOURCE_GOLD)
	    call ResourseRefresh(GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]))
	endif
	if GetItemTypeId(UnitItemInSlot(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))], 2)) == 'I05A' then
	    set udg_integer60=udg_integer60 + 50
	    	    set GG_d1=GG_d1 + 50
	    call AdjustPlayerStateBJ(50, GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]), PLAYER_STATE_RESOURCE_GOLD)
	    call ResourseRefresh(GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]))
	endif
	if GetItemTypeId(UnitItemInSlot(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))], 3)) == 'I05A' then
	    set udg_integer60=udg_integer60 + 50
	    	    set GG_d1=GG_d1 + 50
	    call AdjustPlayerStateBJ(50, GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]), PLAYER_STATE_RESOURCE_GOLD)
	    call ResourseRefresh(GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]))
	endif
 	if GetItemTypeId(UnitItemInSlot(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))], 4)) == 'I05A' then
	    set udg_integer60=udg_integer60 + 50
	    	    set GG_d1=GG_d1 + 50
	    call AdjustPlayerStateBJ(50, GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]), PLAYER_STATE_RESOURCE_GOLD)
	    call ResourseRefresh(GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]))
	endif
	if GetItemTypeId(UnitItemInSlot(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))], 5)) == 'I05A' then
	    set udg_integer60=udg_integer60 + 50
	    	    set GG_d1=GG_d1 + 50
	    call AdjustPlayerStateBJ(50, GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]), PLAYER_STATE_RESOURCE_GOLD)
	    call ResourseRefresh(GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]))
	endif
	
	set udg_integer60=udg_integer60 + GoldBonus
	call AddHeroXP(Gku, GG_d1 + XpBonus, true)
           	
	
	return false
endfunction





function Trig_Pillage_Actions takes nothing returns nothing

endfunction

function Trig_Plague_Func002Func001Func001C takes nothing returns boolean
	if ( ( udg_boolean02 == true ) ) then
		return true
	endif
	if ( ( udg_boolean03 == true ) ) then
		return true
	endif
	return false
endfunction

function Trig_Plague_Func002Func001C takes nothing returns boolean
	if ( not Trig_Plague_Func002Func001Func001C() ) then
		return false
	endif
	if ( not ( RectContainsUnit(udg_rect09, GetTriggerUnit()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Plague_Func002Func002C takes nothing returns boolean
	if ( not ( udg_boolean02 == false ) ) then
		return false
	endif
	if ( not ( udg_boolean03 == false ) ) then
		return false
	endif
	if ( not ( RectContainsUnit(udg_rect09, GetTriggerUnit()) != true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Plague_Func002C takes nothing returns boolean
	if ( Trig_Plague_Func002Func001C() ) then
		return true
	endif
	if ( Trig_Plague_Func002Func002C() ) then
		return true
	endif
	return false
endfunction

function Trig_Plague_Conditions takes nothing returns boolean
	if ( not ( GetSpellAbilityId() == 'A017' ) ) then
		return false
	endif
	if ( not Trig_Plague_Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Plague_Actions takes nothing returns nothing
	set udg_integer52=1
	loop
		exitwhen udg_integer52 > 10
		call CreateNUnitsAtLoc(1, 'n01L', GetOwningPlayer(GetTriggerUnit()), OffsetLocation(GetSpellTargetLoc(), GetRandomReal(- 200.00, 200.00), GetRandomReal(- 200.00, 200.00)), GetRandomDirectionDeg())
		call UnitApplyTimedLifeBJ(14.00, 'BTLF', GetLastCreatedUnit())
		call SetUnitAbilityLevelSwapped('A019', GetLastCreatedUnit(), GetUnitAbilityLevelSwapped('A017', GetTriggerUnit()))
		call SetUnitTimeScalePercent(GetLastCreatedUnit(), 50.00)
		call CreateCorpseLocBJ(ChooseRandomCreepBJ(- 1), GetOwningPlayer(GetTriggerUnit()), OffsetLocation(GetSpellTargetLoc(), GetRandomReal(- 200.00, 200.00), GetRandomReal(- 200.00, 200.00)))
		set udg_integer52=udg_integer52 + 1
	endloop
endfunction

function Trig_Plague_Remove_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'n01L' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Plague_Remove_Actions takes nothing returns nothing
	call TriggerSleepAction(0.94)
	call DeleteUnit(GetTriggerUnit())
endfunction

function Trig_Pocket_Factory_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'n010' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Pocket_Factory_Actions takes nothing returns nothing
	set udg_real02=( I2R(GetUnitAbilityLevelSwapped('ANsy', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])) * 1.0 )
	call SetUnitScalePercent(GetTriggerUnit(), ( 90.00 + udg_real02 ), ( 90.00 + udg_real02 ), ( 90.00 + udg_real02 ))
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=( GetUnitAbilityLevelSwapped('ANsy', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) )
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		call UnitAddItemByIdSwapped('I02L', GetTriggerUnit())
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
endfunction

function Trig_Pulverize_Func001C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('Awar', GetEventDamageSource()) > 0 ) ) then
		return false
	endif
	if ( not ( IsUnitAliveBJ(GetEventDamageSource()) == true ) ) then
		return false
	endif
	if ( not ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource())) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Pulverize_Conditions takes nothing returns boolean
	if ( not Trig_Pulverize_Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Pulverize_Func003Func004001003001001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Pulverize_Func003Func004001003001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_GROUND) == true )
endfunction

function Trig_Pulverize_Func003Func004001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Pulverize_Func003Func004001003001001(), Trig_Pulverize_Func003Func004001003001002())
endfunction

function Trig_Pulverize_Func003Func004001003002001 takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEventDamageSource())) == true )
endfunction

function Trig_Pulverize_Func003Func004001003002002 takes nothing returns boolean
	return ( UnitHasBuffBJ(GetFilterUnit(), 'BOvd') != true )
endfunction

function Trig_Pulverize_Func003Func004001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Pulverize_Func003Func004001003002001(), Trig_Pulverize_Func003Func004001003002002())
endfunction

function Trig_Pulverize_Func003Func004001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Pulverize_Func003Func004001003001(), Trig_Pulverize_Func003Func004001003002())
endfunction

function Trig_Pulverize_Func003Func004A takes nothing returns nothing
	call UnitDamageTargetBJ(GetEventDamageSource(), GetEnumUnit(), ( 30.00 * I2R(GetUnitAbilityLevelSwapped('Awar', GetEventDamageSource())) ), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC)
endfunction

function Trig_Pulverize_Func003Func005001003001001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Pulverize_Func003Func005001003001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_GROUND) == true )
endfunction

function Trig_Pulverize_Func003Func005001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Pulverize_Func003Func005001003001001(), Trig_Pulverize_Func003Func005001003001002())
endfunction

function Trig_Pulverize_Func003Func005001003002001 takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEventDamageSource())) == true )
endfunction

function Trig_Pulverize_Func003Func005001003002002 takes nothing returns boolean
	return ( UnitHasBuffBJ(GetFilterUnit(), 'BOvd') != true )
endfunction

function Trig_Pulverize_Func003Func005001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Pulverize_Func003Func005001003002001(), Trig_Pulverize_Func003Func005001003002002())
endfunction

function Trig_Pulverize_Func003Func005001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Pulverize_Func003Func005001003001(), Trig_Pulverize_Func003Func005001003002())
endfunction

function Trig_Pulverize_Func003C takes nothing returns boolean
	if ( not ( udg_integer14 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Pulverize_Add_Func003C takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'ohwd' ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'osp1' ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'osp2' ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'osp3' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Pulverize_Add_Conditions takes nothing returns boolean
	if ( not ( IsUnitInGroup(GetTriggerUnit(), udg_group04) != true ) ) then
		return false
	endif
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_GROUND) == true ) ) then
		return false
	endif
	if ( not Trig_Pulverize_Add_Func003C() ) then
		return false
	endif
	return true
endfunction

function Trig_Pulverize_Add_Actions takes nothing returns nothing
	call GroupAddUnitSimple(GetTriggerUnit(), udg_group04)
	call TriggerRegisterUnitEvent(udg_trigger26, GetTriggerUnit(), EVENT_UNIT_DAMAGED)
endfunction

function Trig_Raise_Dead_Func001C takes nothing returns boolean
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'uske' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'uskm' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Raise_Dead_Conditions takes nothing returns boolean
	if ( not Trig_Raise_Dead_Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Raise_Dead_Actions takes nothing returns nothing
	set udg_real02=( I2R(GetUnitAbilityLevelSwapped('Arai', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])) * 1.50 )
	call SetUnitScalePercent(GetTriggerUnit(), ( 100.00 + udg_real02 ), ( 100.00 + udg_real02 ), ( 100.00 + udg_real02 ))
	call SetUnitVertexColorBJ(GetTriggerUnit(), 100, ( 100.00 - udg_real02 ), ( 100.00 - udg_real02 ), 0)
	call SetUnitAbilityLevelSwapped('A000', GetTriggerUnit(), ( GetUnitAbilityLevelSwapped('Arai', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) / 3 ))
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=( GetUnitAbilityLevelSwapped('Arai', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) - 1 )
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		call UnitAddItemByIdSwapped('I02L', GetTriggerUnit())
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
endfunction

function Trig_Skeletal_Brute_Conditions takes nothing returns boolean
	if ( not ( GetKillingUnitBJ() != null ) ) then
		return false
	endif
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_GROUND) == true ) ) then
		return false
	endif
	if ( not ( IsUnitIllusionBJ(GetTriggerUnit()) != true ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'n00T' ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'n00V' ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h00V' ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]) == 'N00O' ) ) then
		return false
	endif
	if ( not ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Skeletal_Brute_Actions takes nothing returns nothing
	call CreateNUnitsAtLoc(1, 'u002', GetOwningPlayer(GetKillingUnitBJ()), GetUnitLoc(GetTriggerUnit()), GetUnitFacing(GetTriggerUnit()))
	call UnitApplyTimedLifeBJ(12.00, 'BTLF', GetLastCreatedUnit())
	call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Objects\\Spawnmodels\\NightElf\\NightElfLargeDeathExplode\\NightElfLargeDeathExplode.mdl")
	call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction

function Trig_Summon_Bear_Func001C takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'ngz3' ) ) then
		return false
	endif
	if ( not ( GetUnitAbilityLevelSwapped('ANsg', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) > 3 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Summon_Bear_Conditions takes nothing returns boolean
	if ( not Trig_Summon_Bear_Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Summon_Bear_Actions takes nothing returns nothing
	call SetUnitAbilityLevelSwapped('A000', GetTriggerUnit(), ( GetUnitAbilityLevelSwapped('ANsg', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) + 2 ))
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=( ( GetUnitAbilityLevelSwapped('ANsg', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) - 4 ) * 2 )
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		call UnitAddItemByIdSwapped('I022', GetTriggerUnit())
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
endfunction

function Trig_Summon_Hawk_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'nwe3' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Summon_Hawk_Actions takes nothing returns nothing
	set udg_real02=( I2R(GetUnitAbilityLevelSwapped('ANsw', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])) * 1 )
	call SetUnitScalePercent(GetTriggerUnit(), ( 100.00 + udg_real02 ), ( 100.00 + udg_real02 ), ( 100.00 + udg_real02 ))
	call SetUnitVertexColorBJ(GetTriggerUnit(), 100, ( 100.00 - udg_real02 ), ( 100.00 - udg_real02 ), 0)
	call SetUnitAbilityLevelSwapped('A000', GetTriggerUnit(), ( GetUnitAbilityLevelSwapped('ANsw', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) / 4 ))
	set bj_forLoopBIndex=1
	set bj_forLoopBIndexEnd=( GetUnitAbilityLevelSwapped('ANsw', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) / 2 )
	loop
		exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
		call UnitAddItemByIdSwapped('I02L', GetTriggerUnit())
		set bj_forLoopBIndex=bj_forLoopBIndex + 1
	endloop
endfunction

function Trig_Summon_Quilbeast_Func001C takes nothing returns boolean
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'nqb1' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'nqb2' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'nqb3' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'nqb4' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Summon_Quilbeast_Conditions takes nothing returns boolean
	if ( not Trig_Summon_Quilbeast_Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Summon_Quilbeast_Func003Func001C takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'nqb4' ) ) then
		return false
	endif
	if ( not ( GetUnitAbilityLevelSwapped('Arsq', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) > 4 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Summon_Quilbeast_Func003C takes nothing returns boolean
	if ( not Trig_Summon_Quilbeast_Func003Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Summon_Quilbeast_Actions takes nothing returns nothing
	call SetUnitAbilityLevelSwapped('Aspo', GetTriggerUnit(), ( GetUnitAbilityLevelSwapped('Arsq', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) + 0 ))
	if ( Trig_Summon_Quilbeast_Func003C() ) then
		call SetUnitAbilityLevelSwapped('A000', GetTriggerUnit(), ( GetUnitAbilityLevelSwapped('Arsq', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) + 2 ))
		set bj_forLoopBIndex=1
		set bj_forLoopBIndexEnd=( ( GetUnitAbilityLevelSwapped('Arsq', udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]) - 4 ) * 1 )
		loop
			exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
			call UnitAddItemByIdSwapped('I01B', GetTriggerUnit())
			set bj_forLoopBIndex=bj_forLoopBIndex + 1
		endloop
	else
	endif
endfunction

function Trig_Time_Wizard_Cooldown_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'O007' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Time_Wizard_Cooldown_Actions takes nothing returns nothing
//	call TriggerSleepAction(0.00)
//	call UnitResetCooldown(GetTriggerUnit())
//	call TriggerSleepAction(0.01)
//	call UnitResetCooldown(GetTriggerUnit())
endfunction

function Trig_Ward_Location_Func002C takes nothing returns boolean
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'ohwd' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'osp1' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'osp2' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'osp3' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'osp4' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Ward_Location_Conditions takes nothing returns boolean
	if ( not Trig_Ward_Location_Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Ward_Location_Func001Func002Func003Func001001001002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Ward_Location_Func001Func002Func003Func001001001002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Ward_Location_Func001Func002Func003Func001001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Ward_Location_Func001Func002Func003Func001001001002001(), Trig_Ward_Location_Func001Func002Func003Func001001001002002())
endfunction

function Trig_Ward_Location_Func001Func002Func003C takes nothing returns boolean
	if ( not ( CountUnitsInGroup(GetUnitsInRectMatching(udg_rects01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))], Condition(function Trig_Ward_Location_Func001Func002Func003Func001001001002))) == 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Ward_Location_Func001Func002C takes nothing returns boolean
	if ( not Trig_Ward_Location_Func001Func002Func003C() ) then
		return false
	endif
	return true
endfunction

function Trig_Ward_Location_Func001Func003C takes nothing returns boolean
	if ( ( RectContainsUnit(udg_rects01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))], GetTriggerUnit()) == true ) ) then
		return true
	endif
	if ( ( RectContainsUnit(udg_rect09, GetTriggerUnit()) == true ) ) then
		return true
	endif
	return false
endfunction

function Trig_Ward_Location_Func001C takes nothing returns boolean
	if ( not Trig_Ward_Location_Func001Func003C() ) then
		return false
	endif
	return true
endfunction

function Trig_Ward_Location_Actions takes nothing returns nothing
	if ( Trig_Ward_Location_Func001C() ) then
		call DoNothing()
	else
		if ( Trig_Ward_Location_Func001Func002C() ) then
			call DoNothing()
		else
			call SetUnitPositionLoc(GetTriggerUnit(), PolarProjectionBJ(GetRectCenter(udg_rects01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]), 525.00, AngleBetweenPoints(GetRectCenter(udg_rects01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]), GetUnitLoc(GetTriggerUnit()))))
		endif
	endif
endfunction

function Trig_Wisp_Func001Func001Func002Func001C takes nothing returns boolean
	if ( not ( DistanceBetweenPoints(GetUnitLoc(GetEnumUnit()), GetUnitLoc(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))])) <= 450.00 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Wisp_Func001Func001Func002C takes nothing returns boolean
	if ( not ( DistanceBetweenPoints(GetUnitLoc(GetEnumUnit()), GetUnitLoc(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))])) >= 800.00 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Wisp_Func001Func001Func003Func001C takes nothing returns boolean
	if ( not ( DistanceBetweenPoints(GetUnitLoc(GetEnumUnit()), GetUnitLoc(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))])) >= 200.00 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Wisp_Func001Func001Func003C takes nothing returns boolean
	if ( not ( GetUnitStateSwap(UNIT_STATE_MANA, GetEnumUnit()) == GetUnitStateSwap(UNIT_STATE_MAX_MANA, GetEnumUnit()) ) ) then
		return false
	endif
	return true
endfunction

function Trig_Wisp_Func001Func001C takes nothing returns boolean
	if ( not ( GetOwningPlayer(GetEnumUnit()) == GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]) ) ) then
		return false
	endif
	return true
endfunction

function Trig_Wisp_Func001A takes nothing returns nothing
	if ( Trig_Wisp_Func001Func001C() ) then
		if ( Trig_Wisp_Func001Func001Func002C() ) then
			call AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()), "Abilities\\Spells\\NightElf\\FaerieDragonInvis\\FaerieDragon_Invis.mdl")
			call DestroyEffectBJ(GetLastCreatedEffectBJ())
			call SetUnitPositionLoc(GetEnumUnit(), GetUnitLoc(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]))
			call IssueImmediateOrderBJ(GetEnumUnit(), "stop")
			call AddSpecialEffectTargetUnitBJ("origin", GetEnumUnit(), "Abilities\\Spells\\NightElf\\FaerieDragonInvis\\FaerieDragon_Invis.mdl")
			call DestroyEffectBJ(GetLastCreatedEffectBJ())
		else
			if ( Trig_Wisp_Func001Func001Func002Func001C() ) then
				call SetUnitAbilityLevelSwapped('A01H', GetEnumUnit(), ( GetHeroLevel(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]) / 2 ))
				call IssueTargetOrderBJ(GetEnumUnit(), "healingwave", udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))])
			else
			endif
		endif
		if ( Trig_Wisp_Func001Func001Func003C() ) then
			call IssuePointOrderLocBJ(GetEnumUnit(), "move", OffsetLocation(GetUnitLoc(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]), GetRandomReal(- 150.00, 150.00), GetRandomReal(- 150.00, 150.00)))
			call SetUnitManaBJ(GetEnumUnit(), GetRandomReal(0, 1.00))
		else
			if ( Trig_Wisp_Func001Func001Func003Func001C() ) then
				call SetUnitMoveSpeed(GetEnumUnit(), ( DistanceBetweenPoints(GetUnitLoc(GetEnumUnit()), GetUnitLoc(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))])) / 2.00 ))
				call IssuePointOrderLocBJ(GetEnumUnit(), "move", OffsetLocation(GetUnitLoc(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]), GetRandomReal(- 150.00, 150.00), GetRandomReal(- 150.00, 150.00)))
				call SetUnitManaBJ(GetEnumUnit(), GetRandomReal(0, 1.00))
			else
				call SetUnitMoveSpeed(GetEnumUnit(), GetUnitDefaultMoveSpeed(GetEnumUnit()))
			endif
		endif
	else
	endif
endfunction

function Trig_Wisp_Actions takes nothing returns nothing
    local group GRP= GetUnitsOfTypeIdAll('e003')
	call ForGroupBJ(GRP, function Trig_Wisp_Func001A)
	call DestroyGroup(GRP)
	set GRP=null
endfunction

function Trig_Disable_Abilities_Func001Func003Func003Func003C takes nothing returns boolean
	if ( not ( IsUnitInGroup(GetTriggerUnit(), udg_group02) != true ) ) then
		return false
	endif
	if ( not ( IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_force03) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Disable_Abilities_Func001Func003Func003C takes nothing returns boolean
	if ( ( GetTriggerUnit() == udg_unit05 ) ) then
		return true
	endif
	if ( ( RectContainsUnit(udg_rect09, GetTriggerUnit()) == true ) ) then
		return true
	endif
	if ( Trig_Disable_Abilities_Func001Func003Func003Func003C() ) then
		return true
	endif
	return false
endfunction

function Trig_Disable_Abilities_Func001Func003C takes nothing returns boolean
	if ( not ( udg_boolean02 == false ) ) then
		return false
	endif
	if ( not ( udg_boolean03 == false ) ) then
		return false
	endif
	if ( not Trig_Disable_Abilities_Func001Func003Func003C() ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'n00V' ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h015' ) ) then
		return false
	endif
    if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h014' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Disable_Abilities_Func001C takes nothing returns boolean
	if ( not Trig_Disable_Abilities_Func001Func003C() ) then
		return false
	endif
	return true
endfunction

function Trig_Disable_Abilities_Actions takes nothing returns nothing
	if ( Trig_Disable_Abilities_Func001C() ) then
		call IssueImmediateOrderBJ(GetTriggerUnit(), "stop")
		
	else
		call ConditionalTriggerExecute(udg_trigger37)
	endif
endfunction

function Trig_Cast_Channeling_Ability_Func001Func002C takes nothing returns boolean
	if ( ( GetSpellAbilityId() == 'AHbz' ) ) then
		return true
	endif
	if ( ( GetSpellAbilityId() == 'ANrf' ) ) then
		return true
	endif
	if ( ( GetSpellAbilityId() == 'ANst' ) ) then
		return true
	endif
	if ( ( GetSpellAbilityId() == 'ANvc' ) ) then
		return true
	endif
	if ( ( GetSpellAbilityId() == 'AEtq' ) ) then
		return true
	endif
	if ( ( GetSpellAbilityId() == 'Aclf' ) ) then
		return true
	endif
	if ( ( GetSpellAbilityId() == 'ANmo' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Cast_Channeling_Ability_Func001C takes nothing returns boolean
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
		return false
	endif
	if ( not Trig_Cast_Channeling_Ability_Func001Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Cast_Channeling_Ability_Conditions takes nothing returns boolean
	if ( not Trig_Cast_Channeling_Ability_Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Cast_Channeling_Ability_Func003C takes nothing returns boolean
	if ( not ( GetSpellAbilityId() != 'AEtq' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Cast_Channeling_Ability_Func009Func001Func001Func001Func001C takes nothing returns boolean
	if ( not ( GetSpellAbilityId() == 'AEtq' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Cast_Channeling_Ability_Func009Func001Func001Func001C takes nothing returns boolean
	if ( not ( GetSpellAbilityId() == 'ANvc' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Cast_Channeling_Ability_Func009Func001Func001C takes nothing returns boolean
	if ( not ( GetSpellAbilityId() == 'ANst' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Cast_Channeling_Ability_Func009Func001C takes nothing returns boolean
	if ( not ( GetSpellAbilityId() == 'ANrf' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Cast_Channeling_Ability_Func009C takes nothing returns boolean
	if ( not ( GetSpellAbilityId() == 'AHbz' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Cast_Channeling_Ability_Actions takes nothing returns nothing
    return
	if ( Trig_Cast_Channeling_Ability_Func003C() ) then
		call CreateNUnitsAtLoc(1, 'n00V', GetOwningPlayer(GetTriggerUnit()), PolarProjectionBJ(GetSpellTargetLoc(), 256.00, AngleBetweenPoints(GetSpellTargetLoc(), GetUnitLoc(GetTriggerUnit()))), bj_UNIT_FACING)
	else
		call CreateNUnitsAtLoc(1, 'n00V', GetOwningPlayer(GetTriggerUnit()), GetUnitLoc(GetTriggerUnit()), bj_UNIT_FACING)
	endif
	call UnitApplyTimedLifeBJ(30.00, 'BTLF', GetLastCreatedUnit())
	call UnitAddAbilityBJ(GetSpellAbilityId(), GetLastCreatedUnit())
    call DummyInitAbil(GetTriggerUnit() , GetLastCreatedUnit() , GetSpellAbilityId())
	//call SetUnitAbilityLevelSwapped(GetSpellAbilityId(),GetLastCreatedUnit(),GetUnitAbilityLevelSwapped(GetSpellAbilityId(),GetTriggerUnit()))
	if ( Trig_Cast_Channeling_Ability_Func009C() ) then
    
		call IssuePointOrderLocBJ(GetLastCreatedUnit(), "blizzard", GetSpellTargetLoc())
	elseif ( Trig_Cast_Channeling_Ability_Func009Func001C() ) then
		call IssuePointOrderLocBJ(GetLastCreatedUnit(), "rainoffire", GetSpellTargetLoc())
	elseif ( Trig_Cast_Channeling_Ability_Func009Func001Func001C() ) then
		call IssuePointOrderLocBJ(GetLastCreatedUnit(), "stampede", GetSpellTargetLoc())
	elseif ( Trig_Cast_Channeling_Ability_Func009Func001Func001Func001C() ) then
		call IssuePointOrderLocBJ(GetLastCreatedUnit(), "volcano", GetSpellTargetLoc())
	elseif ( Trig_Cast_Channeling_Ability_Func009Func001Func001Func001Func001C() ) then
		call IssueImmediateOrderBJ(GetLastCreatedUnit(), "tranquility")
	elseif GetSpellAbilityId() == 'Aclf' then
	    call IssuePointOrderLocBJ(GetLastCreatedUnit(), "cloudoffog", GetSpellTargetLoc())
	elseif GetSpellAbilityId() == 'ANmo' then
	    call IssuePointOrderLocBJ(GetLastCreatedUnit(), "monsoon", GetSpellTargetLoc())

	endif
	//call TriggerSleepAction(0.00)
	//call IssueImmediateOrderBJ(GetTriggerUnit(),"stop")
	//call SetUnitAnimation(GetTriggerUnit(),"spell")
	//call QueueUnitAnimationBJ(GetTriggerUnit(),"stand")
endfunction

function Trig_Acquire_Item_Conditions takes nothing returns boolean
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Acquire_Item_Actions takes nothing returns nothing
	call SetItemUserData(GetManipulatedItem(), GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())))
endfunction

function Trig_Drop_Item_Func001C takes nothing returns boolean
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) != true ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'n00V' ) ) then
		return false
	endif
		if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h015' ) ) then
		return false
	endif
    if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h014' ) ) then
		return false
	endif
	if ( not ( GetItemType(GetManipulatedItem()) != ITEM_TYPE_POWERUP ) ) then
		return false
	endif
	return true
endfunction

function Trig_Drop_Item_Conditions takes nothing returns boolean
	if ( not Trig_Drop_Item_Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Drop_Item_Func002C takes nothing returns boolean
	if ( not ( GetItemUserData(GetManipulatedItem()) == 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Drop_Item_Actions takes nothing returns nothing
	if ( Trig_Drop_Item_Func002C() ) then
		set udg_location02=GetItemLoc(GetManipulatedItem())
		call UnitRemoveItemSwapped(GetManipulatedItem(), GetTriggerUnit())
		call SetItemPositionLoc(GetManipulatedItem(), udg_location02)
	else
		call UnitRemoveItemSwapped(GetManipulatedItem(), GetTriggerUnit())
	endif
endfunction

function Trig_Give_Item_Conditions takes nothing returns boolean
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Give_Item_Func002C takes nothing returns boolean
	if ( not ( RectContainsItem(GetManipulatedItem(), GetPlayableMapRect()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Give_Item_Actions takes nothing returns nothing
	call TriggerSleepAction(0.00)
	if ( Trig_Give_Item_Func002C() ) then
		call SetItemUserData(GetManipulatedItem(), 0)
	else
	endif
endfunction

function Trig_Remove_Dummies_Conditions takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'n00V' ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h015' ) ) then
		return false
	endif
    if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h014' ) ) then
		return false
	endif
	if ( not ( IsUnitInGroup(GetTriggerUnit(), udg_group08) != true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Remove_Dummies_Actions takes nothing returns nothing
	call DeleteUnit(GetTriggerUnit())
endfunction

function Trig_Battle_Royal_Func015001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == true )
endfunction

function Trig_Battle_Royal_Func015A takes nothing returns nothing
	call DeleteUnit(GetEnumUnit())
endfunction

function Trig_Battle_Royal_Func016Func001001002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_Battle_Royal_Func016Func001001002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_Battle_Royal_Func016Func001001002002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Battle_Royal_Func016Func001001002002002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Battle_Royal_Func016Func001001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Battle_Royal_Func016Func001001002002002001(), Trig_Battle_Royal_Func016Func001001002002002002())
endfunction

function Trig_Battle_Royal_Func016Func001001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Battle_Royal_Func016Func001001002002001(), Trig_Battle_Royal_Func016Func001001002002002())
endfunction

function Trig_Battle_Royal_Func016Func001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Battle_Royal_Func016Func001001002001(), Trig_Battle_Royal_Func016Func001001002002())
endfunction

function Trig_Battle_Royal_Func016Func001A takes nothing returns nothing
	set udg_integer16=( udg_integer16 + 1 )
	call SetPlayerAllianceStateBJ(GetOwningPlayer(GetEnumUnit()), ConvertedPlayer(GetForLoopIndexA()), bj_ALLIANCE_UNALLIED)
endfunction

function Trig_Battle_Royal_Func017001002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_Battle_Royal_Func017001002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_Battle_Royal_Func017001002002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Battle_Royal_Func017001002002002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Battle_Royal_Func017001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Battle_Royal_Func017001002002002001(), Trig_Battle_Royal_Func017001002002002002())
endfunction

function Trig_Battle_Royal_Func017001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Battle_Royal_Func017001002002001(), Trig_Battle_Royal_Func017001002002002())
endfunction

function Trig_Battle_Royal_Func017001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Battle_Royal_Func017001002001(), Trig_Battle_Royal_Func017001002002())
endfunction

function Trig_Battle_Royal_Func017A takes nothing returns nothing
	set udg_unit01=GetEnumUnit()
	call ConditionalTriggerExecute(udg_trigger82)
	call SetUnitPositionLocFacingLocBJ(GetEnumUnit(), PolarProjectionBJ(GetRectCenter(GetPlayableMapRect()), 750.00, ( ( ( I2R(GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))) - 1 ) * - 45.00 ) - 225.00 )), GetRectCenter(udg_rect09))
	call SelectUnitForPlayerSingle(GetEnumUnit(), GetOwningPlayer(GetEnumUnit()))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnumUnit()), GetUnitLoc(GetEnumUnit()), 0.50)
endfunction

function Trig_Battle_Royal_Func018002 takes nothing returns nothing
	call KillUnit(GetEnumUnit())
endfunction

function Trig_Battle_Royal_Func019002 takes nothing returns nothing
	call KillUnit(GetEnumUnit())
endfunction

function Trig_Battle_Royal_Func020A takes nothing returns nothing
	call RemoveItem(GetEnumItem())
endfunction

function Trig_Battle_Royal_Func033001002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_Battle_Royal_Func033001002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_Battle_Royal_Func033001002002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Battle_Royal_Func033001002002002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Battle_Royal_Func033001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Battle_Royal_Func033001002002002001(), Trig_Battle_Royal_Func033001002002002002())
endfunction

function Trig_Battle_Royal_Func033001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Battle_Royal_Func033001002002001(), Trig_Battle_Royal_Func033001002002002())
endfunction

function Trig_Battle_Royal_Func033001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Battle_Royal_Func033001002001(), Trig_Battle_Royal_Func033001002002())
endfunction

function Trig_Battle_Royal_Func033A takes nothing returns nothing
	call SetUnitInvulnerable(GetEnumUnit(), false)
	call StartFunctionSpell(GetEnumUnit() , 1)
endfunction

function Trig_Battle_Royal_Func034C takes nothing returns boolean
	if ( not ( udg_integer16 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Battle_Royal_Actions takes nothing returns nothing
	call DisableTrigger(udg_trigger149)
	call KillUnit(udg_unit03)
	call TriggerSleepAction(5.00)
	call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
	call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "Battle Royal")
	call StartTimerBJ(GetLastCreatedTimerBJ(), false, 30.00)
	call TriggerSleepAction(30.00)
	set udg_boolean02=true
	call PlaySoundBJ(udg_sound10)
	call DisplayTextToForce(GetPlayersAll(), "|cffffcc00FINAL BATTLE - THE WINNER TAKES IT ALL")
	call PauseAllUnitsBJ(true)
	call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
	call ForGroupBJ(GetUnitsOfPlayerMatching(Player(PLAYER_NEUTRAL_PASSIVE), Condition(function Trig_Battle_Royal_Func015001002)), function Trig_Battle_Royal_Func015A)
	set bj_forLoopAIndex=1
	set bj_forLoopAIndexEnd=8
	loop
		exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
		call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Battle_Royal_Func016Func001001002)), function Trig_Battle_Royal_Func016Func001A)
		set bj_forLoopAIndex=bj_forLoopAIndex + 1
	endloop
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Battle_Royal_Func017001002)), function Trig_Battle_Royal_Func017A)
	call ForGroupBJ(GetUnitsOfTypeIdAll('e001'), function Trig_Battle_Royal_Func018002)
	call ForGroupBJ(GetUnitsOfTypeIdAll('e003'), function Trig_Battle_Royal_Func019002)
	call EnumItemsInRectBJ(GetPlayableMapRect(), function Trig_Battle_Royal_Func020A)
	call DisableTrigger(udg_trigger142)
	call DisableTrigger(udg_trigger145)
	call DisableTrigger(udg_trigger80)
	call DisableTrigger(udg_trigger81)
	call EnableTrigger(udg_trigger43)
	call TriggerSleepAction(2)
	set udg_location01=OffsetLocation(GetRectCenter(GetPlayableMapRect()), - 40.00, - 50.00)
	set udg_integer19=5
	call ConditionalTriggerExecute(udg_trigger117)
	call TriggerSleepAction(5.00)
	call PlaySoundBJ(udg_sound08)
	call DisplayTimedTextToForce(GetPlayersAll(), 1.00, "|cffffcc00GO!!!|r")
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Battle_Royal_Func033001002)), function Trig_Battle_Royal_Func033A)
	if ( Trig_Battle_Royal_Func034C() ) then
		set udg_integer06=1
		call ConditionalTriggerExecute(udg_trigger122)
	else
	endif
	call PauseAllUnitsBJ(false)
endfunction

function Trig_Hero_Dies_Battle_Royal_Func007C takes nothing returns boolean
	if ( not ( udg_boolean02 == true ) ) then
		return false
	endif
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetTriggerUnit()) != Player(8) ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetTriggerUnit()) != Player(11) ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Battle_Royal_Conditions takes nothing returns boolean
	if ( not Trig_Hero_Dies_Battle_Royal_Func007C() ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Battle_Royal_Func004A takes nothing returns nothing
	call KillUnit(GetEnumUnit())
endfunction

function Trig_Hero_Dies_Battle_Royal_Actions takes nothing returns nothing
	call ForceAddPlayerSimple(GetOwningPlayer(GetTriggerUnit()), udg_force02)
	set udg_integer06=( udg_integer06 - 1 )
	call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffffcc00" + ( GetPlayerName(GetOwningPlayer(GetTriggerUnit())) + " was defeated!|r" ) ))
	call ForGroupBJ(GetUnitsOfPlayerAll(GetOwningPlayer(GetTriggerUnit())), function Trig_Hero_Dies_Battle_Royal_Func004A)
	call ConditionalTriggerExecute(udg_trigger122)
endfunction

function Trig_Betting_Initialization_Conditions takes nothing returns boolean
	if ( not ( udg_boolean13 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Betting_Initialization_Actions takes nothing returns nothing
	call DialogSetMessageBJ(udg_dialogs01[2], "Betting Menu")
	call DialogAddButtonBJ(udg_dialogs01[2], "Gold")
	set udg_buttons02[4]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialogs01[2], "Lumber")
	set udg_buttons02[5]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialogs01[2], "Gold & Lumber")
	set udg_buttons02[6]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialogs01[2], "Cancel")
	set udg_buttons02[7]=GetLastCreatedButtonBJ()
	call DialogSetMessageBJ(udg_dialogs01[3], "Betting Menu")
	call DialogAddButtonBJ(udg_dialogs01[3], "25%")
	set udg_buttons02[8]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialogs01[3], "50%")
	set udg_buttons02[9]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialogs01[3], "100%")
	set udg_buttons02[10]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialogs01[3], "Cancel")
	set udg_buttons02[11]=GetLastCreatedButtonBJ()
endfunction

function Trig_Place_Bet_PvP1_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons02[1] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_PvP1_Actions takes nothing returns nothing
	call DialogSetMessageBJ(udg_dialogs01[2], "Betting Menu")
	call DialogDisplayBJ(true, udg_dialogs01[2], GetTriggerPlayer())
	call ForceAddPlayerSimple(GetTriggerPlayer(), udg_force04)
endfunction

function Trig_Place_Bet_PvP2_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons02[2] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_PvP2_Actions takes nothing returns nothing
	call DialogSetMessageBJ(udg_dialogs01[2], "Betting Menu")
	call DialogDisplayBJ(true, udg_dialogs01[2], GetTriggerPlayer())
	call ForceAddPlayerSimple(GetTriggerPlayer(), udg_force05)
endfunction

function Trig_Skip_Bet_Func004C takes nothing returns boolean
	if ( ( GetClickedButtonBJ() == udg_buttons02[3] ) ) then
		return true
	endif
	if ( ( GetClickedButtonBJ() == udg_buttons02[7] ) ) then
		return true
	endif
	if ( ( GetClickedButtonBJ() == udg_buttons02[11] ) ) then
		return true
	endif
	return false
endfunction

function Trig_Skip_Bet_Conditions takes nothing returns boolean
	if ( not Trig_Skip_Bet_Func004C() ) then
		return false
	endif
	return true
endfunction

function Trig_Skip_Bet_Actions takes nothing returns nothing
	call ForceRemovePlayerSimple(GetTriggerPlayer(), udg_force04)
	call ForceRemovePlayerSimple(GetTriggerPlayer(), udg_force05)
	set bj_forLoopAIndex=1
	set bj_forLoopAIndexEnd=3
	loop
		exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
		call DialogDisplayBJ(false, udg_dialogs01[GetForLoopIndexA()], GetTriggerPlayer())
		set bj_forLoopAIndex=bj_forLoopAIndex + 1
	endloop
endfunction

function Trig_Place_Bet_Gold_Func002C takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons02[4] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_Gold_Conditions takes nothing returns boolean
	if ( not Trig_Place_Bet_Gold_Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_Gold_Func001Func001001 takes nothing returns boolean
	return ( udg_boolean18 != true )
endfunction

function Trig_Place_Bet_Gold_Func001C takes nothing returns boolean
	if ( not ( GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_Gold_Actions takes nothing returns nothing
	if ( Trig_Place_Bet_Gold_Func001C() ) then
		call DialogSetMessageBJ(udg_dialogs01[3], "Betting Menu")
		call DialogDisplayBJ(true, udg_dialogs01[3], GetTriggerPlayer())
		set udg_booleans04[GetConvertedPlayerId(GetTriggerPlayer())]=true
		set udg_booleans05[GetConvertedPlayerId(GetTriggerPlayer())]=false
	else
		if ( Trig_Place_Bet_Gold_Func001Func001001() ) then
			return
		else
			call DoNothing()
		endif
		call DialogDisplayBJ(true, udg_dialogs01[2], GetTriggerPlayer())
	endif
endfunction

function Trig_Place_Bet_Lumber_Func002C takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons02[5] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_Lumber_Conditions takes nothing returns boolean
	if ( not Trig_Place_Bet_Lumber_Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_Lumber_Func001Func001001 takes nothing returns boolean
	return ( udg_boolean18 != true )
endfunction

function Trig_Place_Bet_Lumber_Func001C takes nothing returns boolean
	if ( not ( GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_LUMBER) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_Lumber_Actions takes nothing returns nothing
	if ( Trig_Place_Bet_Lumber_Func001C() ) then
		call DialogSetMessageBJ(udg_dialogs01[3], "Betting Menu")
		call DialogDisplayBJ(true, udg_dialogs01[3], GetTriggerPlayer())
		set udg_booleans04[GetConvertedPlayerId(GetTriggerPlayer())]=false
		set udg_booleans05[GetConvertedPlayerId(GetTriggerPlayer())]=true
	else
		if ( Trig_Place_Bet_Lumber_Func001Func001001() ) then
			return
		else
			call DoNothing()
		endif
		call DialogDisplayBJ(true, udg_dialogs01[2], GetTriggerPlayer())
	endif
endfunction

function Trig_Place_Bet_GoldLumber_Func002C takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons02[6] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_GoldLumber_Conditions takes nothing returns boolean
	if ( not Trig_Place_Bet_GoldLumber_Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_GoldLumber_Func001Func001001 takes nothing returns boolean
	return ( udg_boolean18 != true )
endfunction

function Trig_Place_Bet_GoldLumber_Func001Func007C takes nothing returns boolean
	if ( not ( GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD) > 0 ) ) then
		return false
	endif
	if ( not ( GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_LUMBER) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_GoldLumber_Func001C takes nothing returns boolean
	if ( not Trig_Place_Bet_GoldLumber_Func001Func007C() ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_GoldLumber_Actions takes nothing returns nothing
	if ( Trig_Place_Bet_GoldLumber_Func001C() ) then
		call DialogSetMessageBJ(udg_dialogs01[3], "Betting Menu")
		call DialogDisplayBJ(true, udg_dialogs01[3], GetTriggerPlayer())
		set udg_booleans04[GetConvertedPlayerId(GetTriggerPlayer())]=true
		set udg_booleans05[GetConvertedPlayerId(GetTriggerPlayer())]=true
	else
		if ( Trig_Place_Bet_GoldLumber_Func001Func001001() ) then
			return
		else
			call DoNothing()
		endif
		call DialogDisplayBJ(true, udg_dialogs01[2], GetTriggerPlayer())
	endif
endfunction

function Trig_Place_Bet_Func001C takes nothing returns boolean
	if ( ( GetClickedButtonBJ() == udg_buttons02[8] ) ) then
		return true
	endif
	if ( ( GetClickedButtonBJ() == udg_buttons02[9] ) ) then
		return true
	endif
	if ( ( GetClickedButtonBJ() == udg_buttons02[10] ) ) then
		return true
	endif
	return false
endfunction

function Trig_Place_Bet_Conditions takes nothing returns boolean
	if ( not Trig_Place_Bet_Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_Func002Func001C takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons02[9] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_Func002C takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons02[8] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_Func004C takes nothing returns boolean
	if ( not ( udg_booleans04[GetConvertedPlayerId(GetTriggerPlayer())] == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_Func005C takes nothing returns boolean
	if ( not ( udg_booleans05[GetConvertedPlayerId(GetTriggerPlayer())] == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_Func007001 takes nothing returns boolean
	return ( udg_boolean14 == false )
endfunction

function Trig_Place_Bet_Func008C takes nothing returns boolean
	if ( not ( IsPlayerInForce(GetTriggerPlayer(), udg_force04) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Place_Bet_Actions takes nothing returns nothing
	if ( Trig_Place_Bet_Func002C() ) then
		set udg_integers11[GetConvertedPlayerId(GetTriggerPlayer())]=25
	else
		if ( Trig_Place_Bet_Func002Func001C() ) then
			set udg_integers11[GetConvertedPlayerId(GetTriggerPlayer())]=50
		else
			set udg_integers11[GetConvertedPlayerId(GetTriggerPlayer())]=100
		endif
	endif
	if ( Trig_Place_Bet_Func004C() ) then
		set udg_integer62=udg_integers15[GetConvertedPlayerId(GetTriggerPlayer())]
		set udg_integer62=R2I(( ( I2R(GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD)) / 100.00 ) * I2R(udg_integers11[GetConvertedPlayerId(GetTriggerPlayer())]) ))
		//call ConditionalTriggerExecute(udg_trigger52)
		call AdjustPlayerStateBJ(( - 1 * udg_integer62 ), GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD)
		call ResourseRefresh(GetTriggerPlayer())
		set udg_integers15[GetConvertedPlayerId(GetTriggerPlayer())]=udg_integer62
	else
	endif
	if ( Trig_Place_Bet_Func005C() ) then
		set udg_integer62=udg_integers16[GetConvertedPlayerId(GetTriggerPlayer())]
		set udg_integer62=R2I(( ( I2R(GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_LUMBER)) / 100.00 ) * I2R(udg_integers11[GetConvertedPlayerId(GetTriggerPlayer())]) ))
		//call ConditionalTriggerExecute(udg_trigger52)
		call AdjustPlayerStateBJ(( - 1 * udg_integer62 ), GetTriggerPlayer(), PLAYER_STATE_RESOURCE_LUMBER)
		call ResourseRefresh(GetTriggerPlayer())
		set udg_integers16[GetConvertedPlayerId(GetTriggerPlayer())]=udg_integer62
	else
	endif
	if ( Trig_Place_Bet_Func007001() ) then
		return
	else
		call DoNothing()
	endif
	if ( Trig_Place_Bet_Func008C() ) then
		call DisplayTimedTextToForce(GetPlayersAll(), 2.00, ( "|c00F08000" + ( GetPlayerName(GetTriggerPlayer()) + ( " placed a bet on " + ( GetPlayerName(GetOwningPlayer(udg_units03[1])) + "!" ) ) ) ))
	else
		call DisplayTimedTextToForce(GetPlayersAll(), 2.00, ( "|c00F08000" + ( GetPlayerName(GetTriggerPlayer()) + ( " placed a bet on " + ( GetPlayerName(GetOwningPlayer(udg_units03[2])) + "!" ) ) ) ))
	endif
endfunction

function Trig_Eligible_Amount_Func003C takes nothing returns boolean
	if ( not ( ( udg_integer62 - udg_integer56 ) > ( ( udg_integer62 - udg_integer56 ) - 5 ) ) ) then
		return false
	endif
	return true
endfunction

function Trig_Eligible_Amount_Actions takes nothing returns nothing
	set udg_integer56=5
	//call ConditionalTriggerExecute(udg_trigger53)
	if ( Trig_Eligible_Amount_Func003C() ) then
		set udg_integer62=udg_integer56
	else
		set udg_integer62=( udg_integer56 - 5 )
	endif
endfunction

function Trig_Eligible_Amount_Loop_Conditions takes nothing returns boolean
	if ( not ( udg_integer56 < udg_integer62 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Eligible_Amount_Loop_Actions takes nothing returns nothing
	set udg_integer56=( udg_integer56 + 5 )
	call ConditionalTriggerExecute(GetTriggeringTrigger())
endfunction

function Trig_Betting_Complete_Conditions takes nothing returns boolean
	if ( not ( udg_boolean13 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Betting_Complete_Func002Func001Func001Func001Func001C takes nothing returns boolean
	if ( not ( udg_units03[1] == udg_unit05 ) ) then
		return false
	endif
	if ( not ( IsPlayerInForce(GetEnumPlayer(), udg_force04) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Betting_Complete_Func002Func001Func001Func001Func002C takes nothing returns boolean
	if ( not ( udg_units03[2] == udg_unit05 ) ) then
		return false
	endif
	if ( not ( IsPlayerInForce(GetEnumPlayer(), udg_force05) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Betting_Complete_Func002Func001Func001Func001C takes nothing returns boolean
	if ( Trig_Betting_Complete_Func002Func001Func001Func001Func001C() ) then
		return true
	endif
	if ( Trig_Betting_Complete_Func002Func001Func001Func001Func002C() ) then
		return true
	endif
	return false
endfunction

function Trig_Betting_Complete_Func002Func001Func001Func006Func003C takes nothing returns boolean
	if ( not ( udg_booleans05[GetConvertedPlayerId(GetEnumPlayer())] == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Betting_Complete_Func002Func001Func001Func006C takes nothing returns boolean
	if ( not ( udg_booleans04[GetConvertedPlayerId(GetEnumPlayer())] == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Betting_Complete_Func002Func001Func001Func007C takes nothing returns boolean
	if ( not ( udg_booleans05[GetConvertedPlayerId(GetEnumPlayer())] == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Betting_Complete_Func002Func001Func001C takes nothing returns boolean
	if ( not Trig_Betting_Complete_Func002Func001Func001Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Betting_Complete_Func002Func001Func002C takes nothing returns boolean
	if ( ( udg_integers15[GetConvertedPlayerId(GetEnumPlayer())] > 0 ) ) then
		return true
	endif
	if ( ( udg_integers16[GetConvertedPlayerId(GetEnumPlayer())] > 0 ) ) then
		return true
	endif
	return false
endfunction

function Trig_Betting_Complete_Func002Func001C takes nothing returns boolean
	if ( not Trig_Betting_Complete_Func002Func001Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Betting_Complete_Func002A takes nothing returns nothing
	if ( Trig_Betting_Complete_Func002Func001C() ) then
		if ( Trig_Betting_Complete_Func002Func001Func001C() ) then
			set udg_string01=( "|c00F08000" + GetPlayerName(GetEnumPlayer()) )
			set udg_string01=( udg_string01 + " WON: " )
			call AddSpecialEffectTargetUnitBJ("origin", udg_units01[GetConvertedPlayerId(GetEnumPlayer())], "Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl")
			call DestroyEffectBJ(GetLastCreatedEffectBJ())
			if ( Trig_Betting_Complete_Func002Func001Func001Func006C() ) then
				call AdjustPlayerStateBJ(( udg_integers15[GetConvertedPlayerId(GetEnumPlayer())] * 2 ), GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD)
				call ResourseRefresh(GetEnumPlayer())
				set udg_string01=( udg_string01 + I2S(( udg_integers15[GetConvertedPlayerId(GetEnumPlayer())] * 2 )) )
				if ( Trig_Betting_Complete_Func002Func001Func001Func006Func003C() ) then
					set udg_string01=( udg_string01 + " gold and " )
				else
				endif
			else
			endif
			if ( Trig_Betting_Complete_Func002Func001Func001Func007C() ) then
				call AdjustPlayerStateBJ(( udg_integers16[GetConvertedPlayerId(GetEnumPlayer())] * 2 ), GetEnumPlayer(), PLAYER_STATE_RESOURCE_LUMBER)
				call ResourseRefresh(GetEnumPlayer())
				set udg_string01=( udg_string01 + I2S(( udg_integers16[GetConvertedPlayerId(GetEnumPlayer())] * 2 )) )
				set udg_string01=( udg_string01 + " lumber!" )
			else
				set udg_string01=( udg_string01 + " gold!" )
			endif
			call DisplayTimedTextToForce(GetPlayersAll(), 5.00, udg_string01)
		else
		endif
	else
	endif
	set udg_integers11[GetConvertedPlayerId(GetEnumPlayer())]=0
	set udg_integers15[GetConvertedPlayerId(GetEnumPlayer())]=0
	set udg_integers16[GetConvertedPlayerId(GetEnumPlayer())]=0
	set udg_booleans04[GetConvertedPlayerId(GetEnumPlayer())]=false
	set udg_booleans05[GetConvertedPlayerId(GetEnumPlayer())]=false
endfunction

function Trig_Betting_Complete_Actions takes nothing returns nothing
	call ForForce(GetPlayersAll(), function Trig_Betting_Complete_Func002A)
	call ForceClear(udg_force04)
	call ForceClear(udg_force05)
endfunction

function Trig_Dialog_Initialization_Func047Func001Func001C takes nothing returns boolean
	if ( not ( udg_boolean15 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Initialization_Func047Func001C takes nothing returns boolean
	if ( not ( udg_integer13 > 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Initialization_Func047A takes nothing returns nothing
	if ( Trig_Dialog_Initialization_Func047Func001C() ) then
		if ( Trig_Dialog_Initialization_Func047Func001Func001C() ) then
			call DialogDisplayBJ(true, udg_dialog02, GetEnumPlayer())
		else
			call DialogDisplayBJ(true, udg_dialog02, udg_player03)
		endif
	else
		call DialogDisplayBJ(true, udg_dialog03, GetEnumPlayer())
	endif
endfunction

function Trig_Dialog_Initialization_Func049001 takes nothing returns boolean
	return ( IsTriggerEnabled(udg_trigger77) != true )
endfunction

function Trig_Dialog_Initialization_Func054001 takes nothing returns boolean
	return ( IsTriggerEnabled(udg_trigger77) != true )
endfunction

function Trig_Dialog_Initialization_Func055A takes nothing returns nothing
	call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
	call DialogDisplayBJ(false, udg_dialog01, GetEnumPlayer())
	call DialogDisplayBJ(false, udg_dialog02, GetEnumPlayer())
	call DialogDisplayBJ(false, udg_dialog03, GetEnumPlayer())
	call DialogDisplayBJ(false, udg_dialog07, GetEnumPlayer())
	call DialogDisplayBJ(false, udg_dialog05, GetEnumPlayer())
	call DialogDisplayBJ(false, udg_dialog06, GetEnumPlayer())
endfunction

function Trig_Dialog_Initialization_Func056C takes nothing returns boolean
	if ( not ( IsTriggerEnabled(udg_trigger77) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Initialization_Actions takes nothing returns nothing
	call EnableTrigger(GetTriggeringTrigger())
	call DialogSetMessageBJ(udg_dialog01, "Game Mode")
	call DialogAddButtonBJ(udg_dialog01, "Fast (Recommended)")
	set udg_buttons01[1]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialog01, "Long")
	set udg_buttons01[2]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialog01, "Doesn't Matter")
	set udg_buttons01[3]=GetLastCreatedButtonBJ()
	call DialogSetMessageBJ(udg_dialog02, "Game Mode")
	call DialogAddButtonBJ(udg_dialog02, "Normal (Recommended)")
	set udg_buttons01[4]=GetLastCreatedButtonBJ()
	
		
	call DialogAddButtonBJ(udg_dialog02, "Immortal (noob mode)")
	set udg_buttons01[18]=GetLastCreatedButtonBJ()
	
	call DialogAddButtonBJ(udg_dialog02, "Death Match")
	set udg_buttons01[10]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialog02, "Elimination")
	
	set udg_buttons01[5]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialog02, "Doesn't Matter")
	set udg_buttons01[6]=GetLastCreatedButtonBJ()
	call DialogSetMessageBJ(udg_dialog03, "Game Mode")
	call DialogAddButtonBJ(udg_dialog03, "Pick Abilities (Recommended)")
	set udg_buttons01[7]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialog03, "Random Abilities")
	set udg_buttons01[8]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialog03, "Doesn't Matter")
	set udg_buttons01[9]=GetLastCreatedButtonBJ()
	call DialogSetMessageBJ(udg_dialog07, "Game Mode")
	call DialogAddButtonBJ(udg_dialog07, "Pick Hero (Recommended)")
	set udg_buttons01[15]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialog07, "Random Hero")
	set udg_buttons01[16]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialog07, "Doesn't Matter")
	set udg_buttons01[17]=GetLastCreatedButtonBJ()
	call DialogSetMessageBJ(udg_dialog05, "Betting Options")
	call DialogAddButtonBJ(udg_dialog05, "Enable (Show)")
	set udg_buttons01[11]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialog05, "Enable (Hidden)")
	set udg_buttons01[12]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialog05, "Disable")
	set udg_buttons01[13]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialog05, "Doesn't Matter")
	set udg_buttons01[14]=GetLastCreatedButtonBJ()
	call ForForce(GetPlayersAll(), function Trig_Dialog_Initialization_Func047A)
	if ( Trig_Dialog_Initialization_Func049001() ) then
		return
	else
		call DoNothing()
	endif
	call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
	call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "Mode Selection")
	call StartTimerBJ(GetLastCreatedTimerBJ(), false, 15.00)
	call TriggerSleepAction(15.00)
	if ( Trig_Dialog_Initialization_Func054001() ) then
		return
	else
		call DoNothing()
	endif
	call ForForce(GetPlayersAll(), function Trig_Dialog_Initialization_Func055A)
	if ( Trig_Dialog_Initialization_Func056C() ) then
		call TriggerExecute(udg_trigger77)
	else
	endif
endfunction

function Trig_Voting_Rights_Initialization_Func003C takes nothing returns boolean
	if ( not ( udg_integer13 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Voting_Rights_Initialization_Func007Func001C takes nothing returns boolean
	if ( not ( GetPlayerController(ConvertedPlayer(GetForLoopIndexA())) == MAP_CONTROL_USER ) ) then
		return false
	endif
	if ( not ( GetPlayerSlotState(ConvertedPlayer(GetForLoopIndexA())) == PLAYER_SLOT_STATE_PLAYING ) ) then
		return false
	endif
	return true
endfunction

function Trig_Voting_Rights_Initialization_Func016C takes nothing returns boolean
	if ( not ( IsTriggerEnabled(udg_trigger55) != true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Voting_Rights_Initialization_Actions takes nothing returns nothing
	call ConditionalTriggerExecute(udg_trigger131)
	if ( Trig_Voting_Rights_Initialization_Func003C() ) then
		call TriggerExecute(udg_trigger57)
		return
	else
	endif
	call DialogSetMessageBJ(udg_dialog06, "Voting Rights")
	set bj_forLoopAIndex=1
	set bj_forLoopAIndexEnd=8
	loop
		exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
		if ( Trig_Voting_Rights_Initialization_Func007Func001C() ) then
			call DialogAddButtonBJ(udg_dialog06, GetPlayerName(ConvertedPlayer(GetForLoopIndexA())))
			set udg_buttons04[GetForLoopIndexA()]=GetLastCreatedButtonBJ()
			exitwhen true
		else
		endif
		set bj_forLoopAIndex=bj_forLoopAIndex + 1
	endloop
	call DialogAddButtonBJ(udg_dialog06, "Everyone")
	set udg_buttons04[0]=GetLastCreatedButtonBJ()
	call DialogDisplayBJ(true, udg_dialog06, udg_player03)
	call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "Please wait!")
	call StartTimerBJ(GetLastCreatedTimerBJ(), false, 5.00)
	call TriggerSleepAction(5.00)
	if ( Trig_Voting_Rights_Initialization_Func016C() ) then
		call DialogDisplayBJ(false, udg_dialog06, udg_player03)
		call TriggerExecute(udg_trigger58)
	else
	endif
endfunction

function Trig_Game_Master_Selects_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() != udg_buttons04[0] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Game_Master_Selects_Func001Func001C takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons04[GetForLoopIndexA()] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Game_Master_Selects_Func005001 takes nothing returns boolean
	return ( udg_integer13 == 1 )
endfunction

function Trig_Game_Master_Selects_Func007001001 takes nothing returns boolean
	return ( GetFilterPlayer() != udg_player03 )
endfunction

function Trig_Game_Master_Selects_Actions takes nothing returns nothing
	set bj_forLoopAIndex=1
	set bj_forLoopAIndexEnd=8
	loop
		exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
		if ( Trig_Game_Master_Selects_Func001Func001C() ) then
			set udg_player03=ConvertedPlayer(GetForLoopIndexA())
			exitwhen true
		else
		endif
		set bj_forLoopAIndex=bj_forLoopAIndex + 1
	endloop
	set udg_boolean15=false
	call ConditionalTriggerExecute(udg_trigger55)
	if ( Trig_Game_Master_Selects_Func005001() ) then
		return
	else
		call DoNothing()
	endif
	call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_Game_Master_Selects_Func007001001)), 8.00, "|cffffcc00Please wait! The game master is choosing game mode.")
	call PlaySoundBJ(udg_sound25)
endfunction

function Trig_Everyone_Votes_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons04[0] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Everyone_Votes_Actions takes nothing returns nothing
	set udg_boolean15=true
	call ConditionalTriggerExecute(udg_trigger55)
endfunction

function Trig_Dialog_25_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[1] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_25_Actions takes nothing returns nothing
	set udg_integers07[1]=( udg_integers07[1] + 1 )
	call ConditionalTriggerExecute(udg_trigger62)
endfunction

function Trig_Dialog_50_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[2] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_50_Actions takes nothing returns nothing
	set udg_integers07[2]=( udg_integers07[2] + 1 )
	call ConditionalTriggerExecute(udg_trigger62)
endfunction

function Trig_Doesnt_Matter_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[3] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Doesnt_Matter_Actions takes nothing returns nothing
	set udg_integers07[3]=( udg_integers07[3] + 1 )
	call ConditionalTriggerExecute(udg_trigger62)
endfunction

function Trig_Skip_Betting_Menu_Func001Func003Func002C takes nothing returns boolean
	if ( not ( udg_integers07[5] > udg_integers07[4] ) ) then
		return false
	endif
	if ( not ( udg_integers07[5] > udg_integers07[8] ) ) then
		return false
	endif
	if ( not ( udg_boolean15 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Skip_Betting_Menu_Func001Func003C takes nothing returns boolean
	if ( ( udg_integer13 <= 2 ) ) then
		return true
	endif
	if ( Trig_Skip_Betting_Menu_Func001Func003Func002C() ) then
		return true
	endif
	return false
endfunction

function Trig_Skip_Betting_Menu_Func001C takes nothing returns boolean
	if ( not Trig_Skip_Betting_Menu_Func001Func003C() ) then
		return false
	endif
	return true
endfunction

function Trig_Skip_Betting_Menu_Actions takes nothing returns nothing
	if ( Trig_Skip_Betting_Menu_Func001C() ) then
		set udg_integer63=( udg_integer63 + 1 )
		call ConditionalTriggerExecute(udg_trigger77)
	else
		call DialogDisplayBJ(true, udg_dialog05, GetTriggerPlayer())
	endif
endfunction

function Trig_Normal_Mode_Conditions takes nothing returns boolean
	if ( GetClickedButtonBJ() == udg_buttons01[4] ) then
	
	set udg_integers07[4]=( udg_integers07[4] + 1 )
		return true
	
	elseif GetClickedButtonBJ() == udg_buttons01[18] then
	set ModeNoDeath=true
	set udg_integers07[4]=( udg_integers07[4] + 1 )
	set udg_integers07[18]=( udg_integers07[18] + 1 )
		return true
	
    endif
	
	
	return false
endfunction

function Trig_Normal_Mode_Actions takes nothing returns nothing

//	set udg_integers07[4]=(udg_integers07[4]+1)
	call DialogDisplayBJ(true, udg_dialog03, GetTriggerPlayer())
endfunction

function Trig_Elimination_Mode_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[5] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Elimination_Mode_Actions takes nothing returns nothing
	set udg_integers07[5]=( udg_integers07[5] + 1 )
	call DialogDisplayBJ(true, udg_dialog03, GetTriggerPlayer())
endfunction

function Trig_Death_Match_Mode_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[10] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Death_Match_Mode_Actions takes nothing returns nothing
	set udg_integers07[8]=( udg_integers07[8] + 1 )
	call DialogDisplayBJ(true, udg_dialog03, GetTriggerPlayer())
endfunction

function Trig_Doesnt_Matter_Mode_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[6] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Doesnt_Matter_Mode_Actions takes nothing returns nothing
	call DialogDisplayBJ(true, udg_dialog03, GetTriggerPlayer())
endfunction

function Trig_Pick_Abilities_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[7] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Pick_Abilities_Actions takes nothing returns nothing
	set udg_integers07[6]=( udg_integers07[6] + 1 )
	call DialogDisplayBJ(true, udg_dialog07, GetTriggerPlayer())
endfunction

function Trig_Random_Abilities_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[8] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Random_Abilities_Actions takes nothing returns nothing
	set udg_integers07[7]=( udg_integers07[7] + 1 )
	call DialogDisplayBJ(true, udg_dialog07, GetTriggerPlayer())
endfunction

function Trig_Doesnt_Matter_Abilities_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[9] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Doesnt_Matter_Abilities_Actions takes nothing returns nothing
	call DialogDisplayBJ(true, udg_dialog07, GetTriggerPlayer())
endfunction

function Trig_Pick_Hero_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[15] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Pick_Hero_Actions takes nothing returns nothing
	set udg_integers07[13]=( udg_integers07[13] + 1 )
	call DialogDisplayBJ(true, udg_dialog01, GetTriggerPlayer())
endfunction

function Trig_Random_Hero_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[16] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Random_Hero_Actions takes nothing returns nothing
	set udg_integers07[14]=( udg_integers07[14] + 1 )
	call DialogDisplayBJ(true, udg_dialog01, GetTriggerPlayer())
endfunction

function Trig_Doesnt_Matter_Hero_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[17] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Doesnt_Matter_Hero_Actions takes nothing returns nothing
	call DialogDisplayBJ(true, udg_dialog01, GetTriggerPlayer())
endfunction

function Trig_Show_Betting_Menu_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[11] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Show_Betting_Menu_Actions takes nothing returns nothing
	set udg_integers07[9]=( udg_integers07[9] + 1 )
	set udg_integer63=( udg_integer63 + 1 )
	call ConditionalTriggerExecute(udg_trigger77)
endfunction

function Trig_Hide_Betting_Menu_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[12] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hide_Betting_Menu_Actions takes nothing returns nothing
	set udg_integers07[10]=( udg_integers07[10] + 1 )
	set udg_integer63=( udg_integer63 + 1 )
	call ConditionalTriggerExecute(udg_trigger77)
endfunction

function Trig_Disable_Betting_Menu_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[13] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Disable_Betting_Menu_Actions takes nothing returns nothing
	set udg_integers07[11]=( udg_integers07[11] + 1 )
	set udg_integer63=( udg_integer63 + 1 )
	call ConditionalTriggerExecute(udg_trigger77)
endfunction

function Trig_Doesnt_Matter_Betting_Menu_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons01[14] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Doesnt_Matter_Betting_Menu_Actions takes nothing returns nothing
	set udg_integers07[12]=( udg_integers07[12] + 1 )
	set udg_integer63=( udg_integer63 + 1 )
	call ConditionalTriggerExecute(udg_trigger77)
endfunction

function Trig_Dialog_Complete_Func026C takes nothing returns boolean
	if ( ( udg_boolean15 == false ) ) then
		return true
	endif
	if ( ( udg_integer63 == udg_integer06 ) ) then
		return true
	endif
	return false
endfunction

function Trig_Dialog_Complete_Conditions takes nothing returns boolean
	if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
		return false
	endif
	if ( not Trig_Dialog_Complete_Func026C() ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func006Func001C takes nothing returns boolean
	if ( not ( udg_integers07[5] > udg_integers07[4] ) ) then
		return false
	endif
	if ( not ( udg_integers07[5] > udg_integers07[8] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func006001 takes nothing returns boolean
	return ( udg_integer13 == 1 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func008001 takes nothing returns boolean
	return ( udg_integer06 == 1 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func009001 takes nothing returns boolean
	return ( udg_integer06 == 2 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func010001 takes nothing returns boolean
	return ( udg_integer06 == 3 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func011001 takes nothing returns boolean
	return ( udg_integer06 == 4 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func012001 takes nothing returns boolean
	return ( udg_integer06 == 5 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func013001 takes nothing returns boolean
	return ( udg_integer06 == 6 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func014001 takes nothing returns boolean
	return ( udg_integer06 == 7 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func015001 takes nothing returns boolean
	return ( udg_integer06 == 8 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func020001 takes nothing returns boolean
	return ( udg_integer13 == 1 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func022001 takes nothing returns boolean
	return ( udg_integer06 == 1 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func023001 takes nothing returns boolean
	return ( udg_integer06 == 2 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func024001 takes nothing returns boolean
	return ( udg_integer06 == 3 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func025001 takes nothing returns boolean
	return ( udg_integer06 == 4 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func026001 takes nothing returns boolean
	return ( udg_integer06 == 5 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func027001 takes nothing returns boolean
	return ( udg_integer06 == 6 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func028001 takes nothing returns boolean
	return ( udg_integer06 == 7 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005Func029001 takes nothing returns boolean
	return ( udg_integer06 == 8 )
endfunction

function Trig_Dialog_Complete_Func006Func004Func005C takes nothing returns boolean
	if ( not ( udg_integers07[1] >= udg_integers07[2] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func006Func004Func006001001001001 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(8) )
endfunction

function Trig_Dialog_Complete_Func006Func004Func006001001001002 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(11) )
endfunction

function Trig_Dialog_Complete_Func006Func004Func006001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Dialog_Complete_Func006Func004Func006001001001001(), Trig_Dialog_Complete_Func006Func004Func006001001001002())
endfunction

function Trig_Dialog_Complete_Func006Func004Func006001001002 takes nothing returns boolean
	return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Dialog_Complete_Func006Func004Func006001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Dialog_Complete_Func006Func004Func006001001001(), Trig_Dialog_Complete_Func006Func004Func006001001002())
endfunction

function Trig_Dialog_Complete_Func006Func004Func006A takes nothing returns nothing
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_FOOD_CAP, udg_integer31)
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_FOOD_CAP_CEILING, udg_integer31)
	call ResourseRefresh(GetEnumPlayer())
endfunction

function Trig_Dialog_Complete_Func006Func004C takes nothing returns boolean
	if ( not ( udg_integers07[8] > udg_integers07[4] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func006Func008Func006001 takes nothing returns boolean
	return ( udg_integer13 == 1 )
endfunction

function Trig_Dialog_Complete_Func006Func008Func011001 takes nothing returns boolean
	return ( udg_integer13 == 1 )
endfunction

function Trig_Dialog_Complete_Func006Func008C takes nothing returns boolean
	if ( not ( udg_integers07[1] >= udg_integers07[2] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func006Func009001001001001 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(8) )
endfunction

function Trig_Dialog_Complete_Func006Func009001001001002 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(11) )
endfunction

function Trig_Dialog_Complete_Func006Func009001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Dialog_Complete_Func006Func009001001001001(), Trig_Dialog_Complete_Func006Func009001001001002())
endfunction

function Trig_Dialog_Complete_Func006Func009001001002 takes nothing returns boolean
	return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Dialog_Complete_Func006Func009001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Dialog_Complete_Func006Func009001001001(), Trig_Dialog_Complete_Func006Func009001001002())
endfunction

function Trig_Dialog_Complete_Func006Func009A takes nothing returns nothing
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_FOOD_CAP, udg_integer31)
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_FOOD_CAP_CEILING, udg_integer31)
	call ResourseRefresh(GetEnumPlayer())
endfunction

function Trig_Dialog_Complete_Func006C takes nothing returns boolean
	if ( not Trig_Dialog_Complete_Func006Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func008Func001C takes nothing returns boolean
	if ( not ( udg_boolean04 == false ) ) then
		return false
	endif
	if ( not ( udg_boolean07 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func008Func002C takes nothing returns boolean
	if ( not ( udg_integers07[1] >= udg_integers07[2] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func008Func003Func006001 takes nothing returns boolean
	return ( udg_integer13 == 1 )
endfunction

function Trig_Dialog_Complete_Func008Func003Func008001001001001 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(8) )
endfunction

function Trig_Dialog_Complete_Func008Func003Func008001001001002 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(11) )
endfunction

function Trig_Dialog_Complete_Func008Func003Func008001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Dialog_Complete_Func008Func003Func008001001001001(), Trig_Dialog_Complete_Func008Func003Func008001001001002())
endfunction

function Trig_Dialog_Complete_Func008Func003Func008001001002 takes nothing returns boolean
	return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Dialog_Complete_Func008Func003Func008001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Dialog_Complete_Func008Func003Func008001001001(), Trig_Dialog_Complete_Func008Func003Func008001001002())
endfunction

function Trig_Dialog_Complete_Func008Func003Func008A takes nothing returns nothing
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_FOOD_CAP, 50)
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_FOOD_CAP_CEILING, 50)
	call ResourseRefresh(GetEnumPlayer())
endfunction

function Trig_Dialog_Complete_Func008Func003Func012001 takes nothing returns boolean
	return ( udg_integer13 == 1 )
endfunction

function Trig_Dialog_Complete_Func008Func003Func014001001001001 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(8) )
endfunction

function Trig_Dialog_Complete_Func008Func003Func014001001001002 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(11) )
endfunction

function Trig_Dialog_Complete_Func008Func003Func014001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Dialog_Complete_Func008Func003Func014001001001001(), Trig_Dialog_Complete_Func008Func003Func014001001001002())
endfunction

function Trig_Dialog_Complete_Func008Func003Func014001001002 takes nothing returns boolean
	return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Dialog_Complete_Func008Func003Func014001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Dialog_Complete_Func008Func003Func014001001001(), Trig_Dialog_Complete_Func008Func003Func014001001002())
endfunction

function Trig_Dialog_Complete_Func008Func003Func014A takes nothing returns nothing
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_FOOD_CAP, 25)
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_FOOD_CAP_CEILING, 25)
	call ResourseRefresh(GetEnumPlayer())
endfunction

function Trig_Dialog_Complete_Func008Func003C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func008C takes nothing returns boolean
	if ( not Trig_Dialog_Complete_Func008Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func010Func004A takes nothing returns nothing
	call DeleteUnit(GetEnumUnit())
endfunction

function Trig_Dialog_Complete_Func010C takes nothing returns boolean
	if ( not ( udg_integers07[7] > udg_integers07[6] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func012C takes nothing returns boolean
	if ( not ( udg_integers07[14] > udg_integers07[13] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func014Func001Func003C takes nothing returns boolean
	if ( not ( udg_integers07[11] > udg_integers07[9] ) ) then
		return false
	endif
	if ( not ( udg_integers07[11] > udg_integers07[10] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func014Func001C takes nothing returns boolean
	if ( ( udg_boolean04 == true ) ) then
		return true
	endif
	if ( ( udg_integer13 <= 2 ) ) then
		return true
	endif
	if ( Trig_Dialog_Complete_Func014Func001Func003C() ) then
		return true
	endif
	return false
endfunction

function Trig_Dialog_Complete_Func014Func007Func011C takes nothing returns boolean
	if ( not ( udg_integers07[10] > udg_integers07[9] ) ) then
		return false
	endif
	if ( not ( udg_integers07[10] > udg_integers07[11] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func014Func007C takes nothing returns boolean
	if ( not Trig_Dialog_Complete_Func014Func007Func011C() ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func014C takes nothing returns boolean
	if ( not Trig_Dialog_Complete_Func014Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Dialog_Complete_Func023001 takes nothing returns boolean
	return ( udg_boolean16 == false )
endfunction

function Trig_Dialog_Complete_Func025001001001001 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(8) )
endfunction

function Trig_Dialog_Complete_Func025001001001002 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(11) )
endfunction

function Trig_Dialog_Complete_Func025001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Dialog_Complete_Func025001001001001(), Trig_Dialog_Complete_Func025001001001002())
endfunction

function Trig_Dialog_Complete_Func025001001002001001 takes nothing returns boolean
	return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Dialog_Complete_Func025001001002001002 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force07) == true )
endfunction

function Trig_Dialog_Complete_Func025001001002001 takes nothing returns boolean
	return GetBooleanOr(Trig_Dialog_Complete_Func025001001002001001(), Trig_Dialog_Complete_Func025001001002001002())
endfunction

function Trig_Dialog_Complete_Func025001001002002 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force01) != true )
endfunction

function Trig_Dialog_Complete_Func025001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Dialog_Complete_Func025001001002001(), Trig_Dialog_Complete_Func025001001002002())
endfunction

function Trig_Dialog_Complete_Func025001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Dialog_Complete_Func025001001001(), Trig_Dialog_Complete_Func025001001002())
endfunction

function Trig_Dialog_Complete_Func025A takes nothing returns nothing
	set udg_player02=GetEnumPlayer()
	call ConditionalTriggerExecute(udg_trigger79)
endfunction

function Trig_Dialog_Complete_Actions takes nothing returns nothing
	call DisableTrigger(GetTriggeringTrigger())
	set udg_strings02[0]=""
	call ClearTextMessagesBJ(GetPlayersAll())
	if ( Trig_Dialog_Complete_Func006C() ) then
		call DisableTrigger(GetTriggeringTrigger())
		set udg_boolean04=true
		set udg_integer31=( udg_integer06 * 5 )
		set udg_integer31=( udg_integer31 - 5 )
		if ( Trig_Dialog_Complete_Func006Func008C() ) then
			set udg_strings02[1]="Mode: Elimination (Hard)|r"
			call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
			set udg_strings02[0]=( udg_strings02[0] + ( udg_strings02[1] + "|n" ) )
			set udg_strings02[1]="PvP: Every 5th Level|r"
			if ( Trig_Dialog_Complete_Func006Func008Func011001() ) then
				set udg_strings02[1]="PvP: None|r"
			else
				call DoNothing()
			endif
			call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
		else
			set udg_strings02[1]="Mode: Elimination (Normal)|r"
			call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
			set udg_strings02[0]=( udg_strings02[0] + ( udg_strings02[1] + "|n" ) )
			set udg_strings02[1]="PvP: Every 5th Level|r"
			if ( Trig_Dialog_Complete_Func006Func008Func006001() ) then
				set udg_strings02[1]="PvP: None|r"
			else
				call DoNothing()
			endif
			call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
		endif
		call ForForce(GetPlayersMatching(Condition(function Trig_Dialog_Complete_Func006Func009001001)), function Trig_Dialog_Complete_Func006Func009A)
	else
		set udg_boolean04=false
		if ( Trig_Dialog_Complete_Func006Func004C() ) then
			call DisableTrigger(GetTriggeringTrigger())
			set udg_boolean07=true
			if ( Trig_Dialog_Complete_Func006Func004Func005C() ) then
				set udg_strings02[1]="Mode: Death Match (Hard)|r"
				call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
				set udg_strings02[0]=( udg_strings02[0] + ( udg_strings02[1] + "|n" ) )
				set udg_strings02[1]="PvP: Every 5th Level|r"
				if ( Trig_Dialog_Complete_Func006Func004Func005Func020001() ) then
					set udg_strings02[1]="PvP: None|r"
				else
					call DoNothing()
				endif
				call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
				if ( Trig_Dialog_Complete_Func006Func004Func005Func022001() ) then
					set udg_integer31=0
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func023001() ) then
					set udg_integer31=5
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func024001() ) then
					set udg_integer31=5
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func025001() ) then
					set udg_integer31=10
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func026001() ) then
					set udg_integer31=10
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func027001() ) then
					set udg_integer31=10
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func028001() ) then
					set udg_integer31=10
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func029001() ) then
					set udg_integer31=15
				else
					call DoNothing()
				endif
				set udg_boolean08=true
			else
				set udg_strings02[1]="Mode: Death Match (Normal)|r"
				call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
				set udg_strings02[0]=( udg_strings02[0] + ( udg_strings02[1] + "|n" ) )
				set udg_strings02[1]="PvP: Every 10th Level|r"
				if ( Trig_Dialog_Complete_Func006Func004Func005Func006001() ) then
					set udg_strings02[1]="PvP: None|r"
				else
					call DoNothing()
				endif
				call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
				if ( Trig_Dialog_Complete_Func006Func004Func005Func008001() ) then
					set udg_integer31=0
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func009001() ) then
					set udg_integer31=10
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func010001() ) then
					set udg_integer31=10
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func011001() ) then
					set udg_integer31=20
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func012001() ) then
					set udg_integer31=20
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func013001() ) then
					set udg_integer31=20
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func014001() ) then
					set udg_integer31=20
				else
					call DoNothing()
				endif
				if ( Trig_Dialog_Complete_Func006Func004Func005Func015001() ) then
					set udg_integer31=30
				else
					call DoNothing()
				endif
				set udg_boolean08=false
			endif
			call ForForce(GetPlayersMatching(Condition(function Trig_Dialog_Complete_Func006Func004Func006001001)), function Trig_Dialog_Complete_Func006Func004Func006A)
		else
			set udg_boolean07=false
		endif
	endif
	if ( Trig_Dialog_Complete_Func008C() ) then
		if ( Trig_Dialog_Complete_Func008Func002C() ) then
			call DisableTrigger(GetTriggeringTrigger())
			set udg_boolean08=true
		else
			call DisableTrigger(GetTriggeringTrigger())
			set udg_boolean08=false
		endif
		if ( Trig_Dialog_Complete_Func008Func003C() ) then
			set udg_strings02[1]="Mode: Normal (25 Levels)|r"
			call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
			call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, "You have an extra life")
			set Lives[0]=1
	       	set Lives[1]=1
	       	set Lives[2]=1
          	set Lives[3]=1
         	set Lives[4]=1
	       	set Lives[5]=1
	       	set Lives[6]=1
          	set Lives[7]=1
         	set Lives[8]=1
			set udg_strings02[0]=( udg_strings02[0] + ( udg_strings02[1] + "|n" ) )
			set udg_strings02[1]="PvP: Every 5th Level|r"
			if ( Trig_Dialog_Complete_Func008Func003Func012001() ) then
				set udg_strings02[1]="PvP: None|r"
			else
				call DoNothing()
			endif
			call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
			call ForForce(GetPlayersMatching(Condition(function Trig_Dialog_Complete_Func008Func003Func014001001)), function Trig_Dialog_Complete_Func008Func003Func014A)
		else
			set udg_strings02[1]="Mode: Normal (50 Levels)|r"
			call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
			call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, "You have an extra life")
	       	set Lives[0]=1
	       	set Lives[1]=1
	       	set Lives[2]=1
          	set Lives[3]=1
         	set Lives[4]=1
	       	set Lives[5]=1
	       	set Lives[6]=1
          	set Lives[7]=1
         	set Lives[8]=1
			set udg_strings02[0]=( udg_strings02[0] + ( udg_strings02[1] + "|n" ) )
			set udg_strings02[1]="PvP: Every 5th Level|r"
			if ( Trig_Dialog_Complete_Func008Func003Func006001() ) then
				set udg_strings02[1]="PvP: None|r"
			else
				call DoNothing()
			endif
			call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
			call ForForce(GetPlayersMatching(Condition(function Trig_Dialog_Complete_Func008Func003Func008001001)), function Trig_Dialog_Complete_Func008Func003Func008A)
		endif
	else
	endif
	if ( Trig_Dialog_Complete_Func010C() ) then
		set udg_boolean05=true
		set udg_strings02[0]=( udg_strings02[0] + ( udg_strings02[1] + "|n" ) )
		set udg_strings02[1]="Type: Random Abilities"
	else
		set udg_boolean05=false
		set udg_strings02[0]=( udg_strings02[0] + ( udg_strings02[1] + "|n" ) )
		set udg_strings02[1]="Type: Pick Abilities"
		call ForGroupBJ(GetUnitsOfTypeIdAll('n016'), function Trig_Dialog_Complete_Func010Func004A)
	endif
	if ( Trig_Dialog_Complete_Func012C() ) then
		set udg_boolean16=true
		set udg_strings02[1]=( udg_strings02[1] + ", Random Hero|r" )
		call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
	else
		set udg_boolean16=false
		set udg_strings02[1]=( udg_strings02[1] + ", Pick Hero|r" )
		call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
	endif
	if ( Trig_Dialog_Complete_Func014C() ) then
		set udg_boolean13=false
		set udg_boolean14=false
		set udg_strings02[0]=( udg_strings02[0] + ( udg_strings02[1] + "|n" ) )
		set udg_strings02[1]="Betting: Disabled|r"
		call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
	else
		if ( Trig_Dialog_Complete_Func014Func007C() ) then
			set udg_boolean13=true
			set udg_boolean14=false
			set udg_strings02[0]=( udg_strings02[0] + ( udg_strings02[1] + "|n" ) )
			set udg_strings02[1]="Betting: Enabled (Hidden)|r"
			call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
		else
			set udg_boolean13=true
			set udg_boolean14=true
			set udg_strings02[0]=( udg_strings02[0] + ( udg_strings02[1] + "|n" ) )
			set udg_strings02[1]="Betting: Enabled (Show)|r"
			call DisplayTimedTextToForce(GetPlayersAll(), udg_real04, ( "|c00F08000" + udg_strings02[1] ))
		endif
	endif
	call PlaySoundBJ(udg_sound03)
	call ConditionalTriggerExecute(udg_trigger90)
	set udg_strings02[0]=( udg_strings02[0] + udg_strings02[1] )
	call QuestSetDescriptionBJ(GetLastCreatedQuestBJ(), udg_strings02[0])
	call QuestSetDiscoveredBJ(GetLastCreatedQuestBJ(), true)
	if ( Trig_Dialog_Complete_Func023001() ) then
		return
	else
		call DoNothing()
	endif
	call TriggerSleepAction(0.00)
	call ForForce(GetPlayersMatching(Condition(function Trig_Dialog_Complete_Func025001001)), function Trig_Dialog_Complete_Func025A)
endfunction

function Trig_Choose_Hero_Func002Func004C takes nothing returns boolean
	if ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'n00J' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Choose_Hero_Func002C takes nothing returns boolean
	if ( not ( udg_booleans03[GetConvertedPlayerId(GetTriggerPlayer())] == false ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetTriggerUnit()) == Player(8) ) ) then
		return false
	endif
	if ( not ( udg_boolean16 == false ) ) then
		return false
	endif
	if ( not Trig_Choose_Hero_Func002Func004C() ) then
		return false
	endif
	return true
endfunction

function Trig_Choose_Hero_Conditions takes nothing returns boolean
	if ( not Trig_Choose_Hero_Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Choose_Hero_Func001Func002A takes nothing returns nothing
	call DeleteUnit(GetEnumUnit())
endfunction

function Trig_Choose_Hero_Func001Func011A takes nothing returns nothing
	call DeleteUnit(GetEnumUnit())
endfunction

function Trig_Choose_Hero_Func001C takes nothing returns boolean
	if ( not ( GetTriggerUnit() == udg_units02[GetConvertedPlayerId(GetTriggerPlayer())] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Choose_Hero_Actions takes nothing returns nothing
local string ToolTipS= ""
	if ( Trig_Choose_Hero_Func001C() ) then
		call ForGroupBJ(GetUnitsOfPlayerAndTypeId(GetTriggerPlayer(), 'n00E'), function Trig_Choose_Hero_Func001Func002A)
		call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl")
		call DestroyEffectBJ(GetLastCreatedEffectBJ())
		set udg_player02=GetTriggerPlayer()
		call ConditionalTriggerExecute(udg_trigger79)
	else
	
	   
	set ToolTipS="|cffff0000" + GetObjectName(GetUnitTypeId(GetTriggerUnit())) + "|r\n" + GetClassification(GetUnitTypeId(GetTriggerUnit())) + "\n" + LoadStr(HT_data, GetUnitTypeId(GetTriggerUnit()), 2) + "\n"
     set ToolTipS=ToolTipS + "|cff0000ffHero attributes|r  \n"
     set ToolTipS=ToolTipS + "Str per level - " + R2S(BlzGetUnitRealField(GetTriggerUnit(), ConvertUnitRealField('ustp'))) + "\n"
     set ToolTipS=ToolTipS + "Agi per level - " + R2S(BlzGetUnitRealField(GetTriggerUnit(), ConvertUnitRealField('uagp'))) + "\n"
     set ToolTipS=ToolTipS + "Int per level - " + R2S(BlzGetUnitRealField(GetTriggerUnit(), ConvertUnitRealField('uinp'))) + "\n"
     set ToolTipS=ToolTipS + "Regeneration - " + R2S(BlzGetUnitRealField(GetTriggerUnit(), ConvertUnitRealField('uhpr'))) + "\n"
     set ToolTipS=ToolTipS + "Mana Regeneration - " + R2S(BlzGetUnitRealField(GetTriggerUnit(), ConvertUnitRealField('umpr'))) + "\n"
	  call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, ToolTipS)
	    
	    
		call SetUnitAnimation(GetTriggerUnit(), "attack")
		call SetUnitAnimation(GetTriggerUnit(), "slam")
		call SetUnitAnimation(GetTriggerUnit(), "victory")
		call QueueUnitAnimationBJ(GetTriggerUnit(), "stand")
		call ForGroupBJ(GetUnitsOfPlayerAndTypeId(GetTriggerPlayer(), 'n00E'), function Trig_Choose_Hero_Func001Func011A)
		call CreateNUnitsAtLoc(1, 'n00E', GetTriggerPlayer(), GetUnitLoc(GetTriggerUnit()), bj_UNIT_FACING)
		set udg_units02[GetConvertedPlayerId(GetTriggerPlayer())]=GetTriggerUnit()
	endif
	set ToolTipS=null
endfunction

function Trig_Spawn_Hero_Func005Func001002001001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Spawn_Hero_Func005C takes nothing returns boolean
	if ( not ( udg_boolean16 == false ) ) then
		return false
	endif
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Spawn_Hero_Func013001 takes nothing returns boolean
	return ( GetUnitTypeId(udg_units01[GetConvertedPlayerId(udg_player02)]) == 'O008' )
endfunction

function Trig_Spawn_Hero_Func014Func001001 takes nothing returns boolean
	return ( GetUnitTypeId(udg_units01[GetConvertedPlayerId(udg_player02)]) == 'H008' )
endfunction

function Trig_Spawn_Hero_Func014Func002001 takes nothing returns boolean
	return ( GetUnitTypeId(udg_units01[GetConvertedPlayerId(udg_player02)]) == 'H008' )
endfunction

function Trig_Spawn_Hero_Func015001 takes nothing returns boolean
	return ( udg_integer06 == 1 )
endfunction

function Trig_Spawn_Hero_Func016A takes nothing returns nothing
	call DeleteUnit(GetEnumUnit())
endfunction

function Trig_Spawn_Hero_Func017Func008C takes nothing returns boolean
	if ( not ( udg_integer02 == 1 ) ) then
		return false
	endif
	if ( not ( udg_integer07 >= udg_integer06 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Spawn_Hero_Func017C takes nothing returns boolean
	if ( not Trig_Spawn_Hero_Func017Func008C() ) then
		return false
	endif
	return true
endfunction

function Trig_Spawn_Hero_Func019Func001C takes nothing returns boolean
	if ( not ( udg_integer02 == 1 ) ) then
		return false
	endif
	if ( not ( udg_integer07 >= udg_integer06 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Spawn_Hero_Func019C takes nothing returns boolean
	if ( not Trig_Spawn_Hero_Func019Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Spawn_Hero_Actions takes nothing returns nothing
	call ForceAddPlayerSimple(udg_player02, udg_force01)
	set udg_booleans03[GetConvertedPlayerId(udg_player02)]=true
	set udg_integer07=( udg_integer07 + 1 )
	
	if ( Trig_Spawn_Hero_Func005C() ) then
		call CreateNUnitsAtLoc(1, GetUnitTypeId(GetTriggerUnit()), GetTriggerPlayer(), GetRectCenter(udg_rects01[GetConvertedPlayerId(GetTriggerPlayer())]), bj_UNIT_FACING)
		call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffffcc00" + ( GetPlayerName(GetTriggerPlayer()) + ( " has selected " + ( GetHeroProperName(GetLastCreatedUnit()) + "!" ) ) ) ))
		call AdjustPlayerStateBJ(600, udg_player02, PLAYER_STATE_RESOURCE_GOLD)
		call ResourseRefresh(udg_player02)

	else
		call CreateNUnitsAtLoc(1, GetUnitTypeId(GroupPickRandomUnit(GetUnitsOfPlayerMatching(Player(8), Condition(function Trig_Spawn_Hero_Func005Func001002001001002)))), udg_player02, GetRectCenter(udg_rects01[GetConvertedPlayerId(udg_player02)]), bj_UNIT_FACING)
		call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffffcc00" + ( GetPlayerName(udg_player02) + ( " has randomed " + ( GetHeroProperName(GetLastCreatedUnit()) + "! (+300 bonus gold)" ) ) ) ))
		call AdjustPlayerStateBJ(900, udg_player02, PLAYER_STATE_RESOURCE_GOLD)
        call ResourseRefresh(udg_player02)
	endif
	
	

	                                                 
	
	if GetLocalPlayer() == GetOwningPlayer(GetLastCreatedUnit()) then
	    call BlzFrameSetVisible(SpellUP[0], true)
        call BlzFrameSetTexture(SpellFR[0], LoadStr(HT_data, GetUnitTypeId(GetLastCreatedUnit()), 1), 0, true)

    endif



    call BlzUnitHideAbility(GetLastCreatedUnit(), 'A030', true)
    call BlzUnitHideAbility(GetLastCreatedUnit(), 'A031', true)
    call BlzUnitHideAbility(GetLastCreatedUnit(), 'A032', true)
    call BlzUnitHideAbility(GetLastCreatedUnit(), 'A033', true)
    call BlzUnitHideAbility(GetLastCreatedUnit(), 'A034', true)
    call BlzUnitHideAbility(GetLastCreatedUnit(), 'A03H', true)
	
	call FunctionStartUnit(GetLastCreatedUnit())
	
	call BlzSetHeroProperName(GetLastCreatedUnit(), GetPlayerName(GetOwningPlayer(GetLastCreatedUnit())))
	call ConditionalTriggerExecute(udg_trigger130)
	set udg_units01[GetConvertedPlayerId(udg_player02)]=GetLastCreatedUnit()
	call UnitAddItemByIdSwapped('ankh', GetLastCreatedUnit())
	call UnitAddItemByIdSwapped('pghe', GetLastCreatedUnit())
	call UnitAddItemByIdSwapped('I04R', GetLastCreatedUnit())
	call ResetToGameCameraForPlayer(udg_player02, 0)
	call PanCameraToTimedLocForPlayer(udg_player02, GetRectCenter(udg_rects01[GetConvertedPlayerId(udg_player02)]), 0.00)
	call SelectUnitForPlayerSingle(GetLastCreatedUnit(), udg_player02)
	if ( Trig_Spawn_Hero_Func013001() ) then
		call CreateNUnitsAtLoc(1, 'e001', udg_player02, OffsetLocation(GetUnitLoc(udg_units01[GetConvertedPlayerId(udg_player02)]), 100.00, 50.00), bj_UNIT_FACING)
	else
		call DoNothing()
	endif
	set bj_forLoopAIndex=1
	set bj_forLoopAIndexEnd=3
	loop
		exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
		if ( Trig_Spawn_Hero_Func014Func001001() ) then
			call CreateNUnitsAtLoc(1, 'e003', udg_player02, PolarProjectionBJ(GetUnitLoc(udg_units01[GetConvertedPlayerId(udg_player02)]), 50.00, ( 45.00 * I2R(GetForLoopIndexA()) )), bj_UNIT_FACING)
		else
			call DoNothing()
		endif
		if ( Trig_Spawn_Hero_Func014Func002001() ) then
			call SetUnitManaBJ(GetLastCreatedUnit(), GetRandomReal(0, GetUnitStateSwap(UNIT_STATE_MAX_MANA, GetLastCreatedUnit())))
		else
			call DoNothing()
		endif
		set bj_forLoopAIndex=bj_forLoopAIndex + 1
	endloop
	if ( Trig_Spawn_Hero_Func015001() ) then
		set udg_player01=GetOwningPlayer(GetLastCreatedUnit())
	else
		call DoNothing()
	endif
	call ForGroupBJ(GetUnitsOfPlayerAndTypeId(udg_player02, 'n00E'), function Trig_Spawn_Hero_Func016A)
	if ( Trig_Spawn_Hero_Func017C() ) then
		set udg_boolean10=true
		set udg_boolean09=true
		call PlaySoundBJ(udg_sound11)
		call DisplayTextToForce(GetPlayersAll(), "|c000070C0Get Ready!|r")
		call TriggerSleepAction(0.00)
		call ConditionalTriggerExecute(udg_trigger148)
		call ConditionalTriggerExecute(udg_trigger143)
		
		call CreateNeutralPassiveBuildings2()
	else
	endif
	call TriggerSleepAction(2)
	if ( Trig_Spawn_Hero_Func019C() ) then
		call TriggerExecute(udg_trigger109)
	else
	endif
endfunction

function Trig_Hero_Dies_Func026C takes nothing returns boolean
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetTriggerUnit()) != Player(8) ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetTriggerUnit()) != Player(11) ) ) then
		return false
	endif
	if ( not ( IsUnitInGroup(GetTriggerUnit(), udg_group02) != true ) ) then
		return false
	endif
	return true
endfunction




function Trig_Hero_Dies_Func024Func001Func001A111a takes nothing returns nothing
    


//	call DisableTrigger(udg_trigger107)
//	call KillUnit(GetEnumUnit())
//	call EnableTrigger(udg_trigger107)

endfunction


function Trig_Hero_Dies_Func024Func001Func0010010025551 takes nothing returns boolean
  
    	call KillUnit(GetFilterUnit())
	return false
endfunction


function Trig_Hero_Dies_Conditions takes nothing returns boolean
	if ( not Trig_Hero_Dies_Func026C() ) then
		return false
	endif
	                              //udg_boolean07
	if ModeNoDeath == true and udg_boolean07 == false and udg_boolean02 == false then
	   call ReviveHeroLoc(GetDyingUnit(), GetRectCenter(udg_rect09), true)
	   call PanCameraToForPlayer(GetOwningPlayer(GetDyingUnit()), GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit()))
	   
	    call ForGroupBJ(GetUnitsInRectMatching(udg_rects01[1 + GetPlayerId(GetOwningPlayer(GetDyingUnit()))], Condition(function Trig_Hero_Dies_Func024Func001Func0010010025551)), function Trig_Hero_Dies_Func024Func001Func001A111a)

	   return false
	endif
	
	if Lives[GetPlayerId(GetOwningPlayer(GetDyingUnit()))] > 0 and udg_boolean07 == false and udg_boolean02 == false then
	
	
	   call ReviveHeroLoc(GetDyingUnit(), GetRectCenter(udg_rect09), true)
	   call PanCameraToForPlayer(GetOwningPlayer(GetDyingUnit()), GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit()))
	    call ForGroupBJ(GetUnitsInRectMatching(udg_rects01[1 + GetPlayerId(GetOwningPlayer(GetDyingUnit()))], Condition(function Trig_Hero_Dies_Func024Func001Func0010010025551)), function Trig_Hero_Dies_Func024Func001Func001A111a)
	
	     set Lives[GetPlayerId(GetOwningPlayer(GetDyingUnit()))]=Lives[GetPlayerId(GetOwningPlayer(GetDyingUnit()))] - 1
	    call DisplayTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, "You have " + I2S(Lives[GetPlayerId(GetOwningPlayer(GetDyingUnit()))]) + " lives left")
	
	   return false
	endif
	
	
	return true
endfunction

function Trig_Hero_Dies_Func008A takes nothing returns nothing
	call KillUnit(GetEnumUnit())
endfunction

function Trig_Hero_Dies_Func011C takes nothing returns boolean
	if ( not ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Func013Func001001 takes nothing returns boolean
	return ( ( udg_integer31 - 5 ) >= udg_integer02 )
endfunction

function Trig_Hero_Dies_Func013Func002001001001001 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(8) )
endfunction

function Trig_Hero_Dies_Func013Func002001001001002 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(11) )
endfunction

function Trig_Hero_Dies_Func013Func002001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Func013Func002001001001001(), Trig_Hero_Dies_Func013Func002001001001002())
endfunction

function Trig_Hero_Dies_Func013Func002001001002 takes nothing returns boolean
	return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Hero_Dies_Func013Func002001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Func013Func002001001001(), Trig_Hero_Dies_Func013Func002001001002())
endfunction

function Trig_Hero_Dies_Func013Func002A takes nothing returns nothing
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_FOOD_CAP, udg_integer31)
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_FOOD_CAP_CEILING, udg_integer31)
	call ResourseRefresh(GetEnumPlayer())
endfunction

function Trig_Hero_Dies_Func013C takes nothing returns boolean
	if ( not ( udg_boolean04 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Func014Func001Func001001001 takes nothing returns boolean
	return ( udg_integer06 == 2 )
endfunction

function Trig_Hero_Dies_Func014Func001Func001001002 takes nothing returns boolean
	return ( udg_integer06 == 3 )
endfunction

function Trig_Hero_Dies_Func014Func001Func001001 takes nothing returns boolean
	return GetBooleanOr(Trig_Hero_Dies_Func014Func001Func001001001(), Trig_Hero_Dies_Func014Func001Func001001002())
endfunction

function Trig_Hero_Dies_Func014Func001Func002001 takes nothing returns boolean
	return ( udg_integer06 >= 4 )
endfunction

function Trig_Hero_Dies_Func014Func001Func003001001 takes nothing returns boolean
	return ( udg_integer06 == 2 )
endfunction

function Trig_Hero_Dies_Func014Func001Func003001002 takes nothing returns boolean
	return ( udg_integer06 == 3 )
endfunction

function Trig_Hero_Dies_Func014Func001Func003001 takes nothing returns boolean
	return GetBooleanOr(Trig_Hero_Dies_Func014Func001Func003001001(), Trig_Hero_Dies_Func014Func001Func003001002())
endfunction

function Trig_Hero_Dies_Func014Func001Func004001 takes nothing returns boolean
	return ( udg_integer06 >= 4 )
endfunction

function Trig_Hero_Dies_Func014Func001C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Func014Func002001001001001 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(8) )
endfunction

function Trig_Hero_Dies_Func014Func002001001001002 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(11) )
endfunction

function Trig_Hero_Dies_Func014Func002001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Func014Func002001001001001(), Trig_Hero_Dies_Func014Func002001001001002())
endfunction

function Trig_Hero_Dies_Func014Func002001001002 takes nothing returns boolean
	return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Hero_Dies_Func014Func002001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Func014Func002001001001(), Trig_Hero_Dies_Func014Func002001001002())
endfunction

function Trig_Hero_Dies_Func014Func002A takes nothing returns nothing
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_FOOD_CAP, udg_integer31)
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_FOOD_CAP_CEILING, udg_integer31)
	call ResourseRefresh(GetEnumPlayer())
endfunction

function Trig_Hero_Dies_Func014C takes nothing returns boolean
	if ( not ( udg_boolean07 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Func016C takes nothing returns boolean
	if ( not ( udg_boolean02 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Func024Func001Func001001002 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) == Player(11) )
endfunction

function Trig_Hero_Dies_Func024Func001Func001A takes nothing returns nothing
	call DisableTrigger(udg_trigger107)
	call KillUnit(GetEnumUnit())
	call EnableTrigger(udg_trigger107)
endfunction

function Trig_Hero_Dies_Func024Func001C takes nothing returns boolean
	if ( not ( RectContainsUnit(udg_rects01[udg_integer42], GetTriggerUnit()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Actions takes nothing returns nothing
	call StopSoundBJ(udg_sound13, false)
	call PlaySoundBJ(udg_sound13)
	call ForceAddPlayerSimple(GetOwningPlayer(GetTriggerUnit()), udg_force02)
	set udg_integer06=( udg_integer06 - 1 )
	set udg_booleans02[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
	call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffC60000" + ( GetPlayerName(GetOwningPlayer(GetTriggerUnit())) + " was defeated!|r" ) ))
	call DisableTrigger(udg_trigger16)
	call ForGroupBJ(GetUnitsOfPlayerAll(GetOwningPlayer(GetTriggerUnit())), function Trig_Hero_Dies_Func008A)
	call EnableTrigger(udg_trigger16)
	if ( Trig_Hero_Dies_Func011C() ) then
		call DialogSetMessageBJ(udg_dialog04, "Defeat!")
		call DialogDisplayBJ(true, udg_dialog04, GetOwningPlayer(GetTriggerUnit()))
	else
		call CustomDefeatBJ(GetOwningPlayer(GetTriggerUnit()), "Defeat!")
	endif
	if ( Trig_Hero_Dies_Func013C() ) then
		if ( Trig_Hero_Dies_Func013Func001001() ) then
			set udg_integer31=( udg_integer31 - 5 )
		else
			call DoNothing()
		endif
		call ForForce(GetPlayersMatching(Condition(function Trig_Hero_Dies_Func013Func002001001)), function Trig_Hero_Dies_Func013Func002A)
	else
	endif
	if ( Trig_Hero_Dies_Func014C() ) then
		if ( Trig_Hero_Dies_Func014Func001C() ) then
			if ( Trig_Hero_Dies_Func014Func001Func003001() ) then
				set udg_integer31=( 5 * ( udg_integer41 + 1 ) )
			else
				call DoNothing()
			endif
			if ( Trig_Hero_Dies_Func014Func001Func004001() ) then
				set udg_integer31=( 5 * ( udg_integer41 + 2 ) )
			else
				call DoNothing()
			endif
		else
			if ( Trig_Hero_Dies_Func014Func001Func001001() ) then
				set udg_integer31=( 10 * ( udg_integer41 + 1 ) )
			else
				call DoNothing()
			endif
			if ( Trig_Hero_Dies_Func014Func001Func002001() ) then
				set udg_integer31=( 10 * ( udg_integer41 + 2 ) )
			else
				call DoNothing()
			endif
		endif
		call ForForce(GetPlayersMatching(Condition(function Trig_Hero_Dies_Func014Func002001001)), function Trig_Hero_Dies_Func014Func002A)
	else
	endif
	if ( Trig_Hero_Dies_Func016C() ) then
		call ConditionalTriggerExecute(udg_trigger122)
	else
	endif
	call ConditionalTriggerExecute(udg_trigger118)
	call TriggerSleepAction(2)
	call StopSoundBJ(udg_sound13, true)
	call StopSoundBJ(udg_sound12, false)
	call PlaySoundBJ(udg_sound12)
	set udg_integer42=1
	loop
		exitwhen udg_integer42 > 8
		if ( Trig_Hero_Dies_Func024Func001C() ) then
			call ForGroupBJ(GetUnitsInRectMatching(udg_rects01[udg_integer42], Condition(function Trig_Hero_Dies_Func024Func001Func001001002)), function Trig_Hero_Dies_Func024Func001Func001A)
		else
		endif
		set udg_integer42=udg_integer42 + 1
	endloop
	call ConditionalTriggerExecute(udg_trigger108)
endfunction

function Trig_Hero_Dies_After_Victory_Func008C takes nothing returns boolean
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetTriggerUnit()) != Player(8) ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetTriggerUnit()) != Player(11) ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_After_Victory_Conditions takes nothing returns boolean
	if ( not Trig_Hero_Dies_After_Victory_Func008C() ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_After_Victory_Func004A takes nothing returns nothing
	call KillUnit(GetEnumUnit())
endfunction

function Trig_Hero_Dies_After_Victory_Func007Func006C takes nothing returns boolean
	if ( not ( udg_integer13 > 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_After_Victory_Func007Func007A takes nothing returns nothing
	call CustomDefeatBJ(GetEnumPlayer(), "Defeat!")
endfunction

function Trig_Hero_Dies_After_Victory_Func007C takes nothing returns boolean
	if ( not ( udg_integer06 == 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_After_Victory_Actions takes nothing returns nothing
	set udg_integer06=( udg_integer06 - 1 )
	call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffffcc00" + ( GetPlayerName(GetOwningPlayer(GetTriggerUnit())) + ( " has fallen at level " + ( I2S(udg_integer02) + "!|r" ) ) ) ))
	call DisableTrigger(udg_trigger16)
	call ForGroupBJ(GetUnitsOfPlayerAll(GetOwningPlayer(GetTriggerUnit())), function Trig_Hero_Dies_After_Victory_Func004A)
	call EnableTrigger(udg_trigger16)
	if ( Trig_Hero_Dies_After_Victory_Func007C() ) then
		call DisableTrigger(udg_trigger116)
		call DisableTrigger(GetTriggeringTrigger())
		call DisableTrigger(udg_trigger107)
		call TriggerSleepAction(2)
		if ( Trig_Hero_Dies_After_Victory_Func007Func006C() ) then
			call CustomVictoryBJ(udg_player01, true, true)
		else
			call CustomDefeatBJ(udg_player01, "Defeat!")
		endif
		call ForForce(udg_force02, function Trig_Hero_Dies_After_Victory_Func007Func007A)
	else
	endif
endfunction

function Trig_Hero_Refresh_Actions takes nothing returns nothing
	call SetUnitLifePercentBJ(udg_unit01, 100)
	call SetUnitManaPercentBJ(udg_unit01, 100)
	call UnitResetCooldown(udg_unit01)
	call UnitRemoveBuffBJ('Bvul', udg_unit01)
	call UnitRemoveBuffBJ('Bam2', udg_unit01)
	call UnitRemoveBuffBJ('BHav', udg_unit01)
	call UnitRemoveBuffBJ('BHbn', udg_unit01)
	call UnitRemoveBuffBJ('BNbr', udg_unit01)
	call UnitRemoveBuffBJ('Bbsk', udg_unit01)
	call UnitRemoveBuffBJ('Bapl', udg_unit01)
	call UnitRemoveBuffBJ('Bplg', udg_unit01)
	call UnitRemoveBuffBJ('Bena', udg_unit01)
	call UnitRemoveBuffBJ('Beng', udg_unit01)
	call UnitRemoveBuffBJ('BEer', udg_unit01)
	call UnitRemoveBuffBJ('Bfae', udg_unit01)
	call UnitRemoveBuffBJ('BUfa', udg_unit01)
	call UnitRemoveBuffBJ('Binf', udg_unit01)
	call UnitRemoveBuffBJ('Blsh', udg_unit01)
	call UnitRemoveBuffBJ('Bliq', udg_unit01)
	call UnitRemoveBuffBJ('Bpoi', udg_unit01)
	call UnitRemoveBuffBJ('Bpsd', udg_unit01)
	call UnitRemoveBuffBJ('Brej', udg_unit01)
	call UnitRemoveBuffBJ('Bdef', udg_unit01)
	call UnitRemoveBuffBJ('B002', udg_unit01)
	call UnitRemoveBuffBJ('Bslo', udg_unit01)
	call UnitRemoveBuffBJ('Bspl', udg_unit01)
	call UnitRemoveBuffBJ('BSTN', udg_unit01)
	call UnitRemoveBuffBJ('BPSE', udg_unit01)
	call UnitRemoveBuffBJ('BHtc', udg_unit01)
	call UnitRemoveBuffBJ('Buhf', udg_unit01)
endfunction

function Trig_DeathDialog_Initialization_Actions takes nothing returns nothing
	call DialogClearBJ(udg_dialog04)
	call DialogSetMessageBJ(udg_dialog04, "Defeat!")
	call DialogAddButtonBJ(udg_dialog04, "Spectate")
	set udg_buttons03[1]=GetLastCreatedButtonBJ()
	call DialogAddButtonBJ(udg_dialog04, "Leave")
	set udg_buttons03[2]=GetLastCreatedButtonBJ()
endfunction

function Trig_DeathDialog_Leave_Conditions takes nothing returns boolean
	if ( not ( GetClickedButtonBJ() == udg_buttons03[2] ) ) then
		return false
	endif
	return true
endfunction

function Trig_DeathDialog_Leave_Actions takes nothing returns nothing
	call CustomDefeatBJ(GetTriggerPlayer(), "Defeat!")
endfunction

function Trig_Pandaren_Death_Sound_Initialization_Conditions takes nothing returns boolean
	if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Pandaren_Death_Sound_Initialization_Actions takes nothing returns nothing
	call DisableTrigger(GetTriggeringTrigger())
	set udg_sounds01[1]=udg_sound17
	set udg_sounds01[2]=udg_sound18
	set udg_sounds01[3]=udg_sound19
	set udg_sounds01[4]=udg_sound20
	set udg_sounds01[5]=udg_sound21
	set udg_sounds01[6]=udg_sound22
	set udg_sounds01[7]=udg_sound23
	set udg_sounds01[8]=udg_sound24
endfunction

function Trig_Pandaren_Dies_Func001Func001C takes nothing returns boolean
	if ( not ( IsUnitDeadBJ(GetTriggerUnit()) == true ) ) then
		return false
	endif
	if ( not ( IsUnitIllusionBJ(GetTriggerUnit()) != true ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'N00R' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Pandaren_Dies_Func001Func002C takes nothing returns boolean
	if ( not ( IsUnitDeadBJ(GetTriggerUnit()) == true ) ) then
		return false
	endif
	if ( not ( IsUnitIllusionBJ(GetTriggerUnit()) != true ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'N00R' ) ) then
		return false
	endif
	if ( not ( GetItemTypeId(GetManipulatedItem()) == 'ankh' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Pandaren_Dies_Func001C takes nothing returns boolean
	if ( Trig_Pandaren_Dies_Func001Func001C() ) then
		return true
	endif
	if ( Trig_Pandaren_Dies_Func001Func002C() ) then
		return true
	endif
	return false
endfunction

function Trig_Pandaren_Dies_Conditions takes nothing returns boolean
	if ( not Trig_Pandaren_Dies_Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Pandaren_Dies_Actions takes nothing returns nothing
	call ConditionalTriggerExecute(udg_trigger85)
	call PlaySoundOnUnitBJ(udg_sounds01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))], 100, GetTriggerUnit())
endfunction

function Trig_Display_Hint_Func001Func001Func001001001001 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force06) != true )
endfunction

function Trig_Display_Hint_Func001Func001Func001001001002001 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force03) == true )
endfunction

function Trig_Display_Hint_Func001Func001Func001001001002002 takes nothing returns boolean
	return ( IsUnitInGroup(udg_units01[GetConvertedPlayerId(GetFilterPlayer())], udg_group02) != true )
endfunction

function Trig_Display_Hint_Func001Func001Func001001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Display_Hint_Func001Func001Func001001001002001(), Trig_Display_Hint_Func001Func001Func001001001002002())
endfunction

function Trig_Display_Hint_Func001Func001Func001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Display_Hint_Func001Func001Func001001001001(), Trig_Display_Hint_Func001Func001Func001001001002())
endfunction

function Trig_Display_Hint_Func001Func001Func002001001001 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force06) != true )
endfunction

function Trig_Display_Hint_Func001Func001Func002001001002001 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force03) == true )
endfunction

function Trig_Display_Hint_Func001Func001Func002001001002002 takes nothing returns boolean
	return ( IsUnitInGroup(udg_units01[GetConvertedPlayerId(GetFilterPlayer())], udg_group02) != true )
endfunction

function Trig_Display_Hint_Func001Func001Func002001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Display_Hint_Func001Func001Func002001001002001(), Trig_Display_Hint_Func001Func001Func002001001002002())
endfunction

function Trig_Display_Hint_Func001Func001Func002001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Display_Hint_Func001Func001Func002001001001(), Trig_Display_Hint_Func001Func001Func002001001002())
endfunction

function Trig_Display_Hint_Func001Func001C takes nothing returns boolean
	if ( not ( udg_boolean07 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Display_Hint_Func001Func003001001001 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force06) != true )
endfunction

function Trig_Display_Hint_Func001Func003001001002001 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force03) == true )
endfunction

function Trig_Display_Hint_Func001Func003001001002002 takes nothing returns boolean
	return ( IsUnitInGroup(udg_units01[GetConvertedPlayerId(GetFilterPlayer())], udg_group02) != true )
endfunction

function Trig_Display_Hint_Func001Func003001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Display_Hint_Func001Func003001001002001(), Trig_Display_Hint_Func001Func003001001002002())
endfunction

function Trig_Display_Hint_Func001Func003001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Display_Hint_Func001Func003001001001(), Trig_Display_Hint_Func001Func003001001002())
endfunction

function Trig_Display_Hint_Func001C takes nothing returns boolean
	if ( not ( udg_boolean04 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Display_Hint_Actions takes nothing returns nothing
	if ( Trig_Display_Hint_Func001C() ) then
		call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_Display_Hint_Func001Func003001001)), 5.00, ( "|cff0080FFHint: " + ( udg_strings01[GetRandomInt(1, udg_integers12[1])] + "|r" ) ))
	else
		if ( Trig_Display_Hint_Func001Func001C() ) then
			call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_Display_Hint_Func001Func001Func002001001)), 5.00, ( "|cff0080FFHint: " + ( udg_strings01[GetRandomInt(1, udg_integers12[2])] + "|r" ) ))
		else
			call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_Display_Hint_Func001Func001Func001001001)), 5.00, ( "|cff0080FFHint: " + ( udg_strings01[GetRandomInt(1, udg_integers12[3])] + "|r" ) ))
		endif
	endif
endfunction

function Trig_Hint_Initialization_Func019C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hint_Initialization_Actions takes nothing returns nothing
	set udg_strings01[1]="There are hints showing in-game!"
	set udg_strings01[2]="Wait a minute or two if you get stuck! The anti-stuck system is slow, but it'll get you out of there sooner or later."
	set udg_strings01[3]="Different spells can use the same hotkey!"
	set udg_strings01[4]="Maximum level of ALL abilities is 30!"
	set udg_strings01[5]="All abilities does not stack! Be sure to check if you have more than one unique attack modifier."
	set udg_strings01[6]="Rapier of the Gods damage and attack speed does stack, but the immolation does not!"
	set udg_strings01[7]="The maximum hero level is 999999."
	set udg_strings01[8]="You can turn off/on hints by using the -hint command."
	set udg_strings01[9]="Creeps are stronger when they are fewer in number. Be sure to have both single target and area of effect damage."
	set udg_strings01[10]="Press the Space Bar to center the screen on your hero."
	set udg_strings01[11]="Buck & Buster are incredibly strong early game, but they are losing stats per level!"
	set udg_strings01[12]="Xesil is a wizard who has figured out time itself and is therefore capable of using abilities without having to wait for cooldowns."
	set udg_strings01[13]="Grizwald may seem to be a weak hero, but he's getting more powerful when leveling up."
	set udg_integers12[1]=13
	set udg_strings01[14]="Won prizes will be added to your inventory as soon as you have an empty slot. Don't forget to collect it before the next PvP!"
	if ( Trig_Hint_Initialization_Func019C() ) then
		set udg_strings01[15]="It's PvP every 5th level, in which the winner receives a prize."
	else
		set udg_strings01[15]="It's PvP every 10th level, in which the winner receives a prize."
	endif
	set udg_integers12[2]=15
	set udg_strings01[16]="Players surviving all levels will settle the score in a battle royal."
	set udg_integers12[3]=16
	call EnableTrigger(udg_trigger87)
endfunction

function Trig_Map_Initialization_Func010001001001001 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(8) )
endfunction

function Trig_Map_Initialization_Func010001001001002 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(11) )
endfunction

function Trig_Map_Initialization_Func010001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Map_Initialization_Func010001001001001(), Trig_Map_Initialization_Func010001001001002())
endfunction

function Trig_Map_Initialization_Func010001001002001 takes nothing returns boolean
	return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Map_Initialization_Func010001001002002 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force07) == true )
endfunction

function Trig_Map_Initialization_Func010001001002 takes nothing returns boolean
	return GetBooleanOr(Trig_Map_Initialization_Func010001001002001(), Trig_Map_Initialization_Func010001001002002())
endfunction

function Trig_Map_Initialization_Func010001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Map_Initialization_Func010001001001(), Trig_Map_Initialization_Func010001001002())
endfunction

function Trig_Map_Initialization_Func010A takes nothing returns nothing
	set udg_integer06=( udg_integer06 + 1 )
	set udg_integer13=( udg_integer13 + 1 )
	set bj_forLoopAIndex=1
	set bj_forLoopAIndexEnd=8
	loop
		exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
		call SetPlayerAllianceStateBJ(GetEnumPlayer(), ConvertedPlayer(GetForLoopIndexA()), bj_ALLIANCE_UNALLIED_VISION)
		set bj_forLoopAIndex=bj_forLoopAIndex + 1
	endloop
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_FOOD_USED, 0)
	call ResourseRefresh(GetEnumPlayer())
	call SetPlayerAbilityAvailableBJ(false, 'A00S', GetEnumPlayer())
	call CreateFogModifierRectBJ(true, GetEnumPlayer(), FOG_OF_WAR_VISIBLE, GetPlayableMapRect())
	call CameraSetupApplyForPlayer(true, udg_camerasetup01, GetEnumPlayer(), 0.00)
endfunction

function Trig_Map_Initialization_Func011C takes nothing returns boolean
	if ( not ( udg_integer06 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Map_Initialization_Func018001001001001 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(8) )
endfunction

function Trig_Map_Initialization_Func018001001001002 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(11) )
endfunction

function Trig_Map_Initialization_Func018001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Map_Initialization_Func018001001001001(), Trig_Map_Initialization_Func018001001001002())
endfunction

function Trig_Map_Initialization_Func018001001002001 takes nothing returns boolean
	return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Map_Initialization_Func018001001002002 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force07) == true )
endfunction

function Trig_Map_Initialization_Func018001001002 takes nothing returns boolean
	return GetBooleanOr(Trig_Map_Initialization_Func018001001002001(), Trig_Map_Initialization_Func018001001002002())
endfunction

function Trig_Map_Initialization_Func018001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Map_Initialization_Func018001001001(), Trig_Map_Initialization_Func018001001002())
endfunction

function Trig_Map_Initialization_Func018A takes nothing returns nothing
	call SetPlayerAllianceStateBJ(GetEnumPlayer(), Player(8), bj_ALLIANCE_ALLIED_VISION)
endfunction

function Trig_Map_Initialization_Actions takes nothing returns nothing


	call SetMapFlag(MAP_ALLIANCE_CHANGES_HIDDEN, true)
	call SetMapFlag(MAP_LOCK_RESOURCE_TRADING, true)
	call SetTimeOfDay(12)
	set udg_boolean01=false
	call ForForce(GetPlayersMatching(Condition(function Trig_Map_Initialization_Func010001001)), function Trig_Map_Initialization_Func010A)
	if ( Trig_Map_Initialization_Func011C() ) then
		call DisableTrigger(udg_trigger118)
		call DisableTrigger(udg_trigger80)
		call EnableTrigger(udg_trigger81)
	else
	endif
	call ConditionalTriggerExecute(udg_trigger147)
	call SetUnitPositionLoc(udg_unit37, OffsetLocation(GetUnitLoc(udg_unit25), 0.00, 0.00))
	call SetUnitPositionLoc(udg_unit36, OffsetLocation(GetUnitLoc(udg_unit15), 15.00, 15.00))
	call SetUnitPositionLoc(udg_unit38, OffsetLocation(GetUnitLoc(udg_unit34), 0.00, 0.00))
	call SetUnitPositionLoc(udg_unit35, OffsetLocation(GetUnitLoc(udg_unit21), 17.00, 15.00))
	call TriggerSleepAction(0.00)
	call ForForce(GetPlayersMatching(Condition(function Trig_Map_Initialization_Func018001001)), function Trig_Map_Initialization_Func018A)
endfunction

function Trig_Melee_Initialization_Conditions takes nothing returns boolean
	if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Melee_Initialization_Func004Func001001 takes nothing returns boolean
	return ( udg_boolean16 == true )
endfunction

function Trig_Melee_Initialization_Func004C takes nothing returns boolean
	if ( not ( udg_integer07 < udg_integer06 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Melee_Initialization_Func010Func003001001001001 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(8) )
endfunction

function Trig_Melee_Initialization_Func010Func003001001001002 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(11) )
endfunction

function Trig_Melee_Initialization_Func010Func003001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Melee_Initialization_Func010Func003001001001001(), Trig_Melee_Initialization_Func010Func003001001001002())
endfunction

function Trig_Melee_Initialization_Func010Func003001001002001001 takes nothing returns boolean
	return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Melee_Initialization_Func010Func003001001002001002 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force07) == true )
endfunction

function Trig_Melee_Initialization_Func010Func003001001002001 takes nothing returns boolean
	return GetBooleanOr(Trig_Melee_Initialization_Func010Func003001001002001001(), Trig_Melee_Initialization_Func010Func003001001002001002())
endfunction

function Trig_Melee_Initialization_Func010Func003001001002002 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force01) != true )
endfunction

function Trig_Melee_Initialization_Func010Func003001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Melee_Initialization_Func010Func003001001002001(), Trig_Melee_Initialization_Func010Func003001001002002())
endfunction

function Trig_Melee_Initialization_Func010Func003001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Melee_Initialization_Func010Func003001001001(), Trig_Melee_Initialization_Func010Func003001001002())
endfunction

function Trig_Melee_Initialization_Func010Func003Func001Func003Func002001001002001 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Melee_Initialization_Func010Func003Func001Func003Func002001001002002 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Melee_Initialization_Func010Func003Func001Func003Func002001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Melee_Initialization_Func010Func003Func001Func003Func002001001002001(), Trig_Melee_Initialization_Func010Func003Func001Func003Func002001001002002())
endfunction

function Trig_Melee_Initialization_Func010Func003Func001Func003C takes nothing returns boolean
	if ( not ( udg_booleans03[GetConvertedPlayerId(GetEnumPlayer())] == false ) ) then
		return false
	endif
	if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(GetEnumPlayer(), Condition(function Trig_Melee_Initialization_Func010Func003Func001Func003Func002001001002))) == 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Melee_Initialization_Func010Func003Func001C takes nothing returns boolean
	if ( not Trig_Melee_Initialization_Func010Func003Func001Func003C() ) then
		return false
	endif
	return true
endfunction

function Trig_Melee_Initialization_Func010Func003A takes nothing returns nothing
	if ( Trig_Melee_Initialization_Func010Func003Func001C() ) then
		set udg_player02=GetEnumPlayer()
		call ConditionalTriggerExecute(udg_trigger79)
	else
	endif
endfunction

function Trig_Melee_Initialization_Func010Func004C takes nothing returns boolean
	if ( not ( udg_integer02 == 1 ) ) then
		return false
	endif
	if ( not ( udg_integer07 < udg_integer06 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Melee_Initialization_Func010C takes nothing returns boolean
	if ( not Trig_Melee_Initialization_Func010Func004C() ) then
		return false
	endif
	return true
endfunction

function Trig_Melee_Initialization_Actions takes nothing returns nothing
	call DisableTrigger(GetTriggeringTrigger())
	call TriggerSleepAction(0.50)
	if ( Trig_Melee_Initialization_Func004C() ) then
		if ( Trig_Melee_Initialization_Func004Func001001() ) then
			return
		else
			call DoNothing()
		endif
		call PlaySoundBJ(udg_sound14)
		call EnableTrigger(udg_trigger78)
		call DisplayTimedTextToForce(GetPlayersAll(), 8.00, "|cffffcc00Select your hero! (click again to confirm)|r")
		call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
		call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "Game starting in ...")
		call StartTimerBJ(GetLastCreatedTimerBJ(), false, 30.00)
	else
	endif
	call TriggerSleepAction(24.50)
	set udg_location01=OffsetLocation(GetRectCenter(GetPlayableMapRect()), - 40.00, - 50.00)
	set udg_integer19=5
	call ConditionalTriggerExecute(udg_trigger117)
	call TriggerSleepAction(5.00)
	if ( Trig_Melee_Initialization_Func010C() ) then
		call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
		call PlaySoundBJ(udg_sound11)
		call ForForce(GetPlayersMatching(Condition(function Trig_Melee_Initialization_Func010Func003001001)), function Trig_Melee_Initialization_Func010Func003A)
	else
	endif
endfunction

function Trig_Player_Region_Initialization_Actions takes nothing returns nothing
	set udg_rects01[1]=udg_rect01
	set udg_rects01[2]=udg_rect02
	set udg_rects01[3]=udg_rect03
	set udg_rects01[4]=udg_rect04
	set udg_rects01[5]=udg_rect05
	set udg_rects01[6]=udg_rect06
	set udg_rects01[7]=udg_rect07
	set udg_rects01[8]=udg_rect08
endfunction



function Trig_Moonstone_Conditions takes nothing returns boolean
	if ( not ( UnitHasItemOfTypeBJ(GetTriggerUnit(), 'I03O') == true ) ) then
		return false
	endif
	if ( not ( GetSpellAbilityId() != 'AIdb' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Moonstone_Actions takes nothing returns nothing
	call TriggerSleepAction(0.00)
	call SetUnitManaBJ(GetTriggerUnit(), ( GetUnitStateSwap(UNIT_STATE_MANA, GetTriggerUnit()) + ( GetUnitStateSwap(UNIT_STATE_MAX_MANA, GetTriggerUnit()) * 0.04 ) ))
	call AddSpecialEffectTargetUnitBJ("weapon", GetTriggerUnit(), "Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl")
	call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction

function Trig_Scepter_of_Confusion_Conditions takes nothing returns boolean
	if ( not ( UnitHasItemOfTypeBJ(GetTriggerUnit(), 'I03R') == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Scepter_of_Confusion_Func002C takes nothing returns boolean
	if ( not ( udg_integer14 != 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Scepter_of_Confusion_Actions takes nothing returns nothing
	set udg_integer14=GetRandomInt(1, 4)
	if ( Trig_Scepter_of_Confusion_Func002C() ) then
		call CreateNUnitsAtLoc(1, 'n00V', GetOwningPlayer(GetTriggerUnit()), GetUnitLoc(GetTriggerUnit()), bj_UNIT_FACING)
		call UnitApplyTimedLifeBJ(5.00, 'BTLF', GetLastCreatedUnit())
		call UnitAddItemByIdSwapped('will', GetLastCreatedUnit())
		call UnitUseItemTarget(GetLastCreatedUnit(), GetLastCreatedItem(), GetTriggerUnit())
	else
	endif
endfunction

function Trig_The_Divine_Source_Conditions takes nothing returns boolean
	if ( not ( GetItemTypeId(GetManipulatedItem()) == 'I043' ) ) then
		return false
	endif
	return true
endfunction

function Trig_The_Divine_Source_Actions takes nothing returns nothing
	call CreateNUnitsAtLoc(1, 'n00V', GetOwningPlayer(GetTriggerUnit()), GetUnitLoc(GetTriggerUnit()), bj_UNIT_FACING)
	call UnitApplyTimedLifeBJ(2.00, 'BTLF', GetLastCreatedUnit())
	call UnitRemoveBuffBJ('Bena', GetTriggerUnit())
	call UnitRemoveBuffBJ('Bens', GetTriggerUnit())
	call UnitRemoveBuffBJ('Beng', GetTriggerUnit())
	call UnitRemoveBuffBJ('Bliq', GetTriggerUnit())
	call UnitRemoveBuffBJ('Bpoi', GetTriggerUnit())
	call UnitRemoveBuffBJ('Bpsd', GetTriggerUnit())
	call UnitAddAbilityBJ('Aadm', GetLastCreatedUnit())
	call IssueTargetOrderBJ(GetLastCreatedUnit(), "autodispel", GetTriggerUnit())
endfunction

function Trig_Volcanic_Armor_Conditions takes nothing returns boolean
	if ( not ( UnitHasItemOfTypeBJ(GetTriggerUnit(), 'I03T') == true ) ) then
		return false
	endif
	if ( not ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetAttacker())) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Volcanic_Armor_Func003C takes nothing returns boolean
	if ( not ( udg_integer14 <= 15 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Volcanic_Armor_Actions takes nothing returns nothing
	set udg_integer14=GetRandomInt(1, 100)
	if ( Trig_Volcanic_Armor_Func003C() ) then
		call CreateNUnitsAtLoc(1, 'n00V', GetOwningPlayer(GetTriggerUnit()), GetUnitLoc(GetTriggerUnit()), bj_UNIT_FACING)
		call UnitApplyTimedLifeBJ(5.00, 'BTLF', GetLastCreatedUnit())
		call UnitAddAbilityBJ('A015', GetLastCreatedUnit())
		call IssueTargetOrderBJ(GetLastCreatedUnit(), "firebolt", GetAttacker())
	else
	endif
endfunction

function Trig_Xesils_Legacy_Conditions takes nothing returns boolean
	if ( not ( UnitHasItemOfTypeBJ(GetTriggerUnit(), 'I03P') == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Xesils_Legacy_Func002C takes nothing returns boolean
	if ( not ( udg_integer14 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Xesils_Legacy_Actions takes nothing returns nothing
    local unit U=  GetTriggerUnit()
    local integer Ib= GetSpellAbilityId()
    
	set udg_integer14=GetRandomInt(1, 4)
	if ( Trig_Xesils_Legacy_Func002C() ) then
		call TriggerSleepAction(0.00)
		call BlzEndUnitAbilityCooldown(U, Ib)
		call AddSpecialEffectTargetUnitBJ("origin", U, "Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl")
		call DestroyEffectBJ(GetLastCreatedEffectBJ())
	else
	endif
endfunction

function Trig_Attack_Move_Func001Func001001002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Attack_Move_Func001Func001001002002 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) == Player(11) )
endfunction

function Trig_Attack_Move_Func001Func001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Attack_Move_Func001Func001001002001(), Trig_Attack_Move_Func001Func001001002002())
endfunction

function Trig_Attack_Move_Func001Func001A takes nothing returns nothing
	call IssuePointOrderLocBJ(GetEnumUnit(), "patrol", GetRandomLocInRect(udg_rects01[udg_integer43]))
endfunction

function Trig_Attack_Move_Actions takes nothing returns nothing
	set udg_integer43=1
	loop
		exitwhen udg_integer43 > 8
		call ForGroupBJ(GetUnitsInRectMatching(udg_rects01[udg_integer43], Condition(function Trig_Attack_Move_Func001Func001001002)), function Trig_Attack_Move_Func001Func001A)
		set udg_integer43=udg_integer43 + 1
	endloop
endfunction

function Trig_Add_Unit_Abilities_Func001001 takes nothing returns boolean
	return ( udg_integer10 == 1 )
endfunction

function Trig_Add_Unit_Abilities_Func002001 takes nothing returns boolean
	return ( udg_integer11 == 1 )
endfunction

function Trig_Add_Unit_Abilities_Func003001 takes nothing returns boolean
	return ( udg_integer12 == 1 )
endfunction

function Trig_Add_Unit_Abilities_Func004001 takes nothing returns boolean
	return ( udg_integer17 == 1 )
endfunction

function Trig_Add_Unit_Abilities_Func005001 takes nothing returns boolean
	return ( udg_integer18 == 1 )
endfunction

function Trig_Add_Unit_Abilities_Func006001 takes nothing returns boolean
	return ( udg_integer20 == 1 )
endfunction

function Trig_Add_Unit_Abilities_Func007C takes nothing returns boolean
	if ( not ( udg_integer21 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Abilities_Func008C takes nothing returns boolean
	if ( not ( udg_integer23 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Abilities_Func009C takes nothing returns boolean
	if ( not ( udg_integer24 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Abilities_Func010C takes nothing returns boolean
	if ( not ( udg_integer25 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Abilities_Func011C takes nothing returns boolean
	if ( not ( udg_integer49 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Abilities_Func012C takes nothing returns boolean
	if ( not ( udg_integer50 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Abilities_Func013C takes nothing returns boolean
	if ( not ( udg_integer51 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Abilities_Func014C takes nothing returns boolean
	if ( not ( udg_integer54 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Abilities_Func015C takes nothing returns boolean
	if ( not ( udg_integer55 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Abilities_Actions takes nothing returns nothing
	if ( Trig_Add_Unit_Abilities_Func001001() ) then
		call UnitAddAbilityBJ('ACbh', GetLastCreatedUnit())
	else
		call DoNothing()
	endif
	if ( Trig_Add_Unit_Abilities_Func002001() ) then
		call UnitAddAbilityBJ('ACct', GetLastCreatedUnit())
	else
		call DoNothing()
	endif
	if ( Trig_Add_Unit_Abilities_Func003001() ) then
	    call AddUnitEvasion(GetLastCreatedUnit() , 20)
	//	call UnitAddAbilityBJ('ACev',GetLastCreatedUnit())
	else
		call DoNothing()
	endif
	if ( Trig_Add_Unit_Abilities_Func004001() ) then
		call UnitAddAbilityBJ('ACce', GetLastCreatedUnit())
	else
		call DoNothing()
	endif
	if ( Trig_Add_Unit_Abilities_Func005001() ) then
		call UnitAddAbilityBJ('SCva', GetLastCreatedUnit())
	else
		call DoNothing()
	endif
	if ( Trig_Add_Unit_Abilities_Func006001() ) then
		call UnitAddAbilityBJ('ACah', GetLastCreatedUnit())
	else
		call DoNothing()
	endif
	if ( Trig_Add_Unit_Abilities_Func007C() ) then
	else
		call UnitRemoveAbilityBJ('A00U', GetLastCreatedUnit())
	endif
	if ( Trig_Add_Unit_Abilities_Func008C() ) then
	else
		call UnitRemoveAbilityBJ('A00V', GetLastCreatedUnit())
	endif
	if ( Trig_Add_Unit_Abilities_Func009C() ) then
	else
		call UnitRemoveAbilityBJ('A00W', GetLastCreatedUnit())
	endif
	if ( Trig_Add_Unit_Abilities_Func010C() ) then
	else
		call UnitRemoveAbilityBJ('A00X', GetLastCreatedUnit())
	endif
	if ( Trig_Add_Unit_Abilities_Func011C() ) then
	else
		call UnitRemoveAbilityBJ('A013', GetLastCreatedUnit())
	endif
	if ( Trig_Add_Unit_Abilities_Func012C() ) then
	else
		call UnitRemoveAbilityBJ('A018', GetLastCreatedUnit())
	endif
	if ( Trig_Add_Unit_Abilities_Func013C() ) then
	else
		call UnitRemoveAbilityBJ('A016', GetLastCreatedUnit())
	endif
	if ( Trig_Add_Unit_Abilities_Func014C() ) then
	else
		call UnitRemoveAbilityBJ('A01A', GetLastCreatedUnit())
	endif
	if ( Trig_Add_Unit_Abilities_Func015C() ) then
	else
		call UnitRemoveAbilityBJ('A01B', GetLastCreatedUnit())
	endif
endfunction

function Trig_Add_Unit_Power_Func001Func002Func001Func001Func002Func002001 takes nothing returns boolean
	return ( udg_integer03 == 1 )
endfunction

function Trig_Add_Unit_Power_Func001Func002Func001Func001Func002Func003Func003001 takes nothing returns boolean
	return ( udg_integer03 == 1 )
endfunction

function Trig_Add_Unit_Power_Func001Func002Func001Func001Func002Func003C takes nothing returns boolean
	if ( not ( udg_integer02 <= 25 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func002Func001Func001Func002C takes nothing returns boolean
	if ( not ( udg_integer02 <= 20 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func002Func001Func001Func004001 takes nothing returns boolean
	return ( udg_integer03 == 1 )
endfunction

function Trig_Add_Unit_Power_Func001Func002Func001Func001C takes nothing returns boolean
	if ( not ( udg_integer02 <= 15 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func002Func001Func004001 takes nothing returns boolean
	return ( udg_integer03 == 1 )
endfunction

function Trig_Add_Unit_Power_Func001Func002Func001C takes nothing returns boolean
	if ( not ( udg_integer02 <= 10 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func002Func003001 takes nothing returns boolean
	return ( udg_integer03 == 1 )
endfunction

function Trig_Add_Unit_Power_Func001Func002C takes nothing returns boolean
	if ( not ( udg_integer02 <= 5 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func004Func002Func002001 takes nothing returns boolean
	return ( udg_integer03 == 1 )
endfunction

function Trig_Add_Unit_Power_Func001Func004Func002Func003Func003001 takes nothing returns boolean
	return ( udg_integer03 == 1 )
endfunction

function Trig_Add_Unit_Power_Func001Func004Func002Func003C takes nothing returns boolean
	if ( not ( udg_integer02 <= 50 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func004Func002C takes nothing returns boolean
	if ( not ( udg_integer02 <= 40 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func004Func004001 takes nothing returns boolean
	return ( udg_integer03 == 1 )
endfunction

function Trig_Add_Unit_Power_Func001Func004C takes nothing returns boolean
	if ( not ( udg_integer02 <= 30 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func006Func001Func001Func001Func001C takes nothing returns boolean
	if ( not ( udg_integer02 > 50 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func006Func001Func001Func001C takes nothing returns boolean
	if ( not Trig_Add_Unit_Power_Func001Func006Func001Func001Func001Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func006Func001Func001Func002C takes nothing returns boolean
	if ( not ( udg_integer02 > 40 ) ) then
		return false
	endif
	if ( not ( udg_integer02 <= 50 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func006Func001Func001C takes nothing returns boolean
	if ( not Trig_Add_Unit_Power_Func001Func006Func001Func001Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func006Func001Func002C takes nothing returns boolean
	if ( not ( udg_integer02 > 20 ) ) then
		return false
	endif
	if ( not ( udg_integer02 <= 40 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func006Func001C takes nothing returns boolean
	if ( not Trig_Add_Unit_Power_Func001Func006Func001Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func006Func002C takes nothing returns boolean
	if ( not ( udg_integer02 > 1 ) ) then
		return false
	endif
	if ( not ( udg_integer02 <= 20 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func006Func003Func002C takes nothing returns boolean
	if ( not ( udg_integer02 >= 8 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func006Func003Func003C takes nothing returns boolean
	if ( not ( udg_integer02 >= 16 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func006C takes nothing returns boolean
	if ( not Trig_Add_Unit_Power_Func001Func006Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func009Func001Func001Func001Func001C takes nothing returns boolean
	if ( not ( udg_integer02 > 25 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func009Func001Func001Func001C takes nothing returns boolean
	if ( not Trig_Add_Unit_Power_Func001Func009Func001Func001Func001Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func009Func001Func001Func002C takes nothing returns boolean
	if ( not ( udg_integer02 > 20 ) ) then
		return false
	endif
	if ( not ( udg_integer02 <= 25 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func009Func001Func001C takes nothing returns boolean
	if ( not Trig_Add_Unit_Power_Func001Func009Func001Func001Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func009Func001Func002C takes nothing returns boolean
	if ( not ( udg_integer02 > 10 ) ) then
		return false
	endif
	if ( not ( udg_integer02 <= 20 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func009Func001C takes nothing returns boolean
	if ( not Trig_Add_Unit_Power_Func001Func009Func001Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func009Func002C takes nothing returns boolean
	if ( not ( udg_integer02 > 1 ) ) then
		return false
	endif
	if ( not ( udg_integer02 <= 10 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func009Func003Func002C takes nothing returns boolean
	if ( not ( udg_integer02 >= 4 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func009Func003Func003C takes nothing returns boolean
	if ( not ( udg_integer02 >= 8 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001Func009C takes nothing returns boolean
	if ( not Trig_Add_Unit_Power_Func001Func009Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Func001C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Add_Unit_Power_Actions takes nothing returns nothing
	if ( Trig_Add_Unit_Power_Func001C() ) then
		if ( Trig_Add_Unit_Power_Func001Func002C() ) then
			set udg_real01=( I2R(( udg_integer02 * 1 )) / ( I2R(udg_integer03) / 2.00 ) )
			if ( Trig_Add_Unit_Power_Func001Func002Func003001() ) then
				set udg_real01=( udg_real01 / 1.50 )
			else
				call DoNothing()
			endif
		else
			if ( Trig_Add_Unit_Power_Func001Func002Func001C() ) then
				set udg_real01=( ( I2R(udg_integer02) * 1.25 ) / ( I2R(udg_integer03) / 2.00 ) )
				if ( Trig_Add_Unit_Power_Func001Func002Func001Func004001() ) then
					set udg_real01=( udg_real01 / 1.50 )
				else
					call DoNothing()
				endif
			else
				if ( Trig_Add_Unit_Power_Func001Func002Func001Func001C() ) then
					set udg_real01=( ( I2R(udg_integer02) * 1.75 ) / ( I2R(udg_integer03) / 2.00 ) )
					if ( Trig_Add_Unit_Power_Func001Func002Func001Func001Func004001() ) then
						set udg_real01=( udg_real01 / 1.50 )
					else
						call DoNothing()
					endif
				else
					if ( Trig_Add_Unit_Power_Func001Func002Func001Func001Func002C() ) then
						set udg_real01=( ( I2R(udg_integer02) * 2.50 ) / ( I2R(udg_integer03) / 2.00 ) )
						if ( Trig_Add_Unit_Power_Func001Func002Func001Func001Func002Func002001() ) then
							set udg_real01=( udg_real01 / 1.50 )
						else
							call DoNothing()
						endif
					else
						if ( Trig_Add_Unit_Power_Func001Func002Func001Func001Func002Func003C() ) then
							set udg_real01=( I2R(( udg_integer02 * 4 )) / ( I2R(udg_integer03) / 2.00 ) )
							if ( Trig_Add_Unit_Power_Func001Func002Func001Func001Func002Func003Func003001() ) then
								set udg_real01=( udg_real01 / 1.50 )
							else
								call DoNothing()
							endif
						else
							set udg_real01=( I2R(( ( udg_integer02 * udg_integer02 ) / 2 )) / ( I2R(udg_integer03) / 2.00 ) )
						endif
					endif
				endif
			endif
		endif
		if ( Trig_Add_Unit_Power_Func001Func009C() ) then
			set bj_forLoopBIndex=1
			set bj_forLoopBIndexEnd=R2I(udg_real01)
			loop
				exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
				call UnitAddItemByIdSwapped('I02L', GetLastCreatedUnit())
				if ( Trig_Add_Unit_Power_Func001Func009Func003Func002C() ) then
					call UnitAddItemByIdSwapped('I02L', GetLastCreatedUnit())
				else
				endif
				if ( Trig_Add_Unit_Power_Func001Func009Func003Func003C() ) then
					call UnitAddItemByIdSwapped('I02L', GetLastCreatedUnit())
				else
				endif
				set bj_forLoopBIndex=bj_forLoopBIndex + 1
			endloop
		else
			if ( Trig_Add_Unit_Power_Func001Func009Func001C() ) then
				set bj_forLoopBIndex=1
				set bj_forLoopBIndexEnd=( R2I(udg_real01) / 4 )
				loop
					exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
					call UnitAddItemByIdSwapped('I03K', GetLastCreatedUnit())
					set bj_forLoopBIndex=bj_forLoopBIndex + 1
				endloop
			else
				if ( Trig_Add_Unit_Power_Func001Func009Func001Func001C() ) then
					set bj_forLoopBIndex=1
					set bj_forLoopBIndexEnd=( R2I(udg_real01) / 8 )
					loop
						exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
						call UnitAddItemByIdSwapped('I03L', GetLastCreatedUnit())
						set bj_forLoopBIndex=bj_forLoopBIndex + 1
					endloop
				else
					if ( Trig_Add_Unit_Power_Func001Func009Func001Func001Func001C() ) then
						set bj_forLoopBIndex=1
						set bj_forLoopBIndexEnd=( R2I(udg_real01) / 8 )
						loop
							exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
							call UnitAddItemByIdSwapped('I03L', GetLastCreatedUnit())
							set bj_forLoopBIndex=bj_forLoopBIndex + 1
						endloop
					else
					endif
				endif
			endif
		endif
	else
		if ( Trig_Add_Unit_Power_Func001Func004C() ) then
			set udg_real01=( ( I2R(udg_integer02) * 1.75 ) / ( I2R(udg_integer03) / 2.00 ) )
			if ( Trig_Add_Unit_Power_Func001Func004Func004001() ) then
				set udg_real01=( udg_real01 / 1.50 )
			else
				call DoNothing()
			endif
		else
			if ( Trig_Add_Unit_Power_Func001Func004Func002C() ) then
				set udg_real01=( ( I2R(udg_integer02) * 2.50 ) / ( I2R(udg_integer03) / 2.00 ) )
				if ( Trig_Add_Unit_Power_Func001Func004Func002Func002001() ) then
					set udg_real01=( udg_real01 / 1.50 )
				else
					call DoNothing()
				endif
			else
				if ( Trig_Add_Unit_Power_Func001Func004Func002Func003C() ) then
					set udg_real01=( ( I2R(udg_integer02) * 4.00 ) / ( I2R(udg_integer03) / 2.00 ) )
					if ( Trig_Add_Unit_Power_Func001Func004Func002Func003Func003001() ) then
						set udg_real01=( udg_real01 / 1.50 )
					else
						call DoNothing()
					endif
				else
					set udg_real01=( I2R(( ( udg_integer02 * udg_integer02 ) / 10 )) / ( I2R(udg_integer03) / 2.00 ) )
				endif
			endif
		endif
		if ( Trig_Add_Unit_Power_Func001Func006C() ) then
			set bj_forLoopBIndex=1
			set bj_forLoopBIndexEnd=R2I(udg_real01)
			loop
				exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
				call UnitAddItemByIdSwapped('I02L', GetLastCreatedUnit())
				if ( Trig_Add_Unit_Power_Func001Func006Func003Func002C() ) then
					call UnitAddItemByIdSwapped('I02L', GetLastCreatedUnit())
				else
				endif
				if ( Trig_Add_Unit_Power_Func001Func006Func003Func003C() ) then
					call UnitAddItemByIdSwapped('I02L', GetLastCreatedUnit())
				else
				endif
				set bj_forLoopBIndex=bj_forLoopBIndex + 1
			endloop
		else
			if ( Trig_Add_Unit_Power_Func001Func006Func001C() ) then
				set bj_forLoopBIndex=1
				set bj_forLoopBIndexEnd=( R2I(udg_real01) / 4 )
				loop
					exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
					call UnitAddItemByIdSwapped('I03K', GetLastCreatedUnit())
					set bj_forLoopBIndex=bj_forLoopBIndex + 1
				endloop
			else
				if ( Trig_Add_Unit_Power_Func001Func006Func001Func001C() ) then
					set bj_forLoopBIndex=1
					set bj_forLoopBIndexEnd=( R2I(udg_real01) / 8 )
					loop
						exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
						call UnitAddItemByIdSwapped('I03L', GetLastCreatedUnit())
						set bj_forLoopBIndex=bj_forLoopBIndex + 1
					endloop
				else
					if ( Trig_Add_Unit_Power_Func001Func006Func001Func001Func001C() ) then
						set bj_forLoopBIndex=1
						set bj_forLoopBIndexEnd=( R2I(udg_real01) / 8 )
						loop
							exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
							call UnitAddItemByIdSwapped('I03L', GetLastCreatedUnit())
							set bj_forLoopBIndex=bj_forLoopBIndex + 1
						endloop
					else
					endif
				endif
			endif
		endif
	endif
endfunction

function Trig_Creep_AutoCast_Func001001002 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func001Func002Func001C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func001Func002Func002003001003001001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func001Func002Func002003001003001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) != true )
endfunction

function Trig_Creep_AutoCast_Func001Func001Func002Func002003001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func001Func002Func002003001003001001(), Trig_Creep_AutoCast_Func001Func001Func002Func002003001003001002())
endfunction

function Trig_Creep_AutoCast_Func001Func001Func002Func002003001003002001 takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEnumUnit())) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func001Func002Func002003001003002002 takes nothing returns boolean
	return ( GetUnitStateSwap(UNIT_STATE_MANA, GetFilterUnit()) >= 10.00 )
endfunction

function Trig_Creep_AutoCast_Func001Func001Func002Func002003001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func001Func002Func002003001003002001(), Trig_Creep_AutoCast_Func001Func001Func002Func002003001003002002())
endfunction

function Trig_Creep_AutoCast_Func001Func001Func002Func002003001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func001Func002Func002003001003001(), Trig_Creep_AutoCast_Func001Func001Func002Func002003001003002())
endfunction

function Trig_Creep_AutoCast_Func001Func001Func002C takes nothing returns boolean
	if ( not ( udg_integer14 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func001C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('A00V', GetEnumUnit()) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003001001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_GROUND) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003001001(), Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003001002())
endfunction

function Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003002001 takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEnumUnit())) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003002002001 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003002002002 takes nothing returns boolean
	return ( IsUnitVisible(GetFilterUnit(), GetOwningPlayer(GetEnumUnit())) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003002002001(), Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003002002002())
endfunction

function Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003002001(), Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003002002())
endfunction

function Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003001(), Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003002())
endfunction

function Trig_Creep_AutoCast_Func001Func002Func002C takes nothing returns boolean
	if ( not ( udg_integer14 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func002C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('A01A', GetEnumUnit()) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func003Func002Func001C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003001001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003001002001 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) != true )
endfunction

function Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003001002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_GROUND) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003001002001(), Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003001002002())
endfunction

function Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003001001(), Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003001002())
endfunction

function Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003002001 takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEnumUnit())) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003002002 takes nothing returns boolean
	return ( IsUnitVisible(GetFilterUnit(), GetOwningPlayer(GetEnumUnit())) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003002001(), Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003002002())
endfunction

function Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003001(), Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003002())
endfunction

function Trig_Creep_AutoCast_Func001Func003Func002C takes nothing returns boolean
	if ( not ( udg_integer14 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func003C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('A00U', GetEnumUnit()) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func004Func002Func001C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func004Func002Func002003001003001001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func004Func002Func002003001003001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) != true )
endfunction

function Trig_Creep_AutoCast_Func001Func004Func002Func002003001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func004Func002Func002003001003001001(), Trig_Creep_AutoCast_Func001Func004Func002Func002003001003001002())
endfunction

function Trig_Creep_AutoCast_Func001Func004Func002Func002003001003002 takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEnumUnit())) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func004Func002Func002003001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func004Func002Func002003001003001(), Trig_Creep_AutoCast_Func001Func004Func002Func002003001003002())
endfunction

function Trig_Creep_AutoCast_Func001Func004Func002C takes nothing returns boolean
	if ( not ( udg_integer14 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func004C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('A00W', GetEnumUnit()) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func005Func002Func001C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func005Func002Func002003001003001001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func005Func002Func002003001003001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) != true )
endfunction

function Trig_Creep_AutoCast_Func001Func005Func002Func002003001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func005Func002Func002003001003001001(), Trig_Creep_AutoCast_Func001Func005Func002Func002003001003001002())
endfunction

function Trig_Creep_AutoCast_Func001Func005Func002Func002003001003002001 takes nothing returns boolean
	return ( IsUnitAlly(GetFilterUnit(), GetOwningPlayer(GetEnumUnit())) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func005Func002Func002003001003002002 takes nothing returns boolean
	return ( GetUnitLifePercent(GetFilterUnit()) <= 75.00 )
endfunction

function Trig_Creep_AutoCast_Func001Func005Func002Func002003001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func005Func002Func002003001003002001(), Trig_Creep_AutoCast_Func001Func005Func002Func002003001003002002())
endfunction

function Trig_Creep_AutoCast_Func001Func005Func002Func002003001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func005Func002Func002003001003001(), Trig_Creep_AutoCast_Func001Func005Func002Func002003001003002())
endfunction

function Trig_Creep_AutoCast_Func001Func005Func002C takes nothing returns boolean
	if ( not ( udg_integer14 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func005C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('A00X', GetEnumUnit()) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func006Func002Func001003001003001001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func006Func002Func001003001003001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) != true )
endfunction

function Trig_Creep_AutoCast_Func001Func006Func002Func001003001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func006Func002Func001003001003001001(), Trig_Creep_AutoCast_Func001Func006Func002Func001003001003001002())
endfunction

function Trig_Creep_AutoCast_Func001Func006Func002Func001003001003002 takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEnumUnit())) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func006Func002Func001003001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func006Func002Func001003001003001(), Trig_Creep_AutoCast_Func001Func006Func002Func001003001003002())
endfunction

function Trig_Creep_AutoCast_Func001Func006Func002C takes nothing returns boolean
	if ( not ( udg_integer14 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func006C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('A013', GetEnumUnit()) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func007Func002Func001Func001Func002001001003001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func007Func002Func001Func001Func002001001003002 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) == GetOwningPlayer(GetEnumUnit()) )
endfunction

function Trig_Creep_AutoCast_Func001Func007Func002Func001Func001Func002001001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func007Func002Func001Func001Func002001001003001(), Trig_Creep_AutoCast_Func001Func007Func002Func001Func001Func002001001003002())
endfunction

function Trig_Creep_AutoCast_Func001Func007Func002Func001Func001C takes nothing returns boolean
	if ( not ( UnitHasBuffBJ(GetEnumUnit(), 'BOvd') != true ) ) then
		return false
	endif
	if ( not ( CountUnitsInGroup(GetUnitsInRangeOfLocMatching(800.00, GetUnitLoc(GetEnumUnit()), Condition(function Trig_Creep_AutoCast_Func001Func007Func002Func001Func001Func002001001003))) > 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func007Func002Func001C takes nothing returns boolean
	if ( not Trig_Creep_AutoCast_Func001Func007Func002Func001Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func007Func002C takes nothing returns boolean
	if ( not ( udg_integer14 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func007C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('A018', GetEnumUnit()) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func008Func002Func001C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func008Func002Func002003001003001001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func008Func002Func002003001003001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) != true )
endfunction

function Trig_Creep_AutoCast_Func001Func008Func002Func002003001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func008Func002Func002003001003001001(), Trig_Creep_AutoCast_Func001Func008Func002Func002003001003001002())
endfunction

function Trig_Creep_AutoCast_Func001Func008Func002Func002003001003002 takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEnumUnit())) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func008Func002Func002003001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func008Func002Func002003001003001(), Trig_Creep_AutoCast_Func001Func008Func002Func002003001003002())
endfunction

function Trig_Creep_AutoCast_Func001Func008Func002C takes nothing returns boolean
	if ( not ( udg_integer14 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func008C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('A016', GetEnumUnit()) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003001001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003001002001 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) != true )
endfunction

function Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003001002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_GROUND) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003001002001(), Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003001002002())
endfunction

function Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003001001(), Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003001002())
endfunction

function Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003002001 takes nothing returns boolean
	return ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetEnumUnit())) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003002002 takes nothing returns boolean
	return ( IsUnitVisible(GetFilterUnit(), GetOwningPlayer(GetEnumUnit())) == true )
endfunction

function Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003002001(), Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003002002())
endfunction

function Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003001(), Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003002())
endfunction

function Trig_Creep_AutoCast_Func001Func009Func002Func001Func002C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func009Func002Func001C takes nothing returns boolean
	if ( not ( CountUnitsInGroup(GetUnitsInRangeOfLocMatching(250.00, GetUnitLoc(GetEnumUnit()), Condition(function Trig_Creep_AutoCast_Func001Func009Func002Func001Func001001001003))) >= 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func009Func002C takes nothing returns boolean
	if ( not ( udg_integer14 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001Func009C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('A01B', GetEnumUnit()) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_AutoCast_Func001A takes nothing returns nothing

if ( IsUnitAliveBJ(GetEnumUnit()) == true ) then

	if ( Trig_Creep_AutoCast_Func001Func001C() ) then
		set udg_integer14=GetRandomInt(1, 5)
		if ( Trig_Creep_AutoCast_Func001Func001Func002C() ) then
			if ( Trig_Creep_AutoCast_Func001Func001Func002Func001C() ) then
				call SetUnitAbilityLevelSwapped('A00V', GetEnumUnit(), ( ( udg_integer02 * 4 ) / udg_integer03 ))
			else
				call SetUnitAbilityLevelSwapped('A00V', GetEnumUnit(), ( ( ( udg_integer02 * 4 ) / udg_integer03 ) / 2 ))
			endif
			call IssueTargetOrderBJ(GetEnumUnit(), "manaburn", GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(300.00, GetUnitLoc(GetEnumUnit()), Condition(function Trig_Creep_AutoCast_Func001Func001Func002Func002003001003))))
		else
		endif
	else
	endif
	if ( Trig_Creep_AutoCast_Func001Func002C() ) then
		set udg_integer14=GetRandomInt(1, 5)
		if ( Trig_Creep_AutoCast_Func001Func002Func002C() ) then
			call IssuePointOrderLocBJ(GetEnumUnit(), "blink", OffsetLocation(GetUnitLoc(GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800.00, GetUnitLoc(GetEnumUnit()), Condition(function Trig_Creep_AutoCast_Func001Func002Func002Func001003001001001003)))), GetRandomReal(- 100.00, 100.00), GetRandomReal(- 100.00, 100.00)))
		else
		endif
	else
	endif
	if ( Trig_Creep_AutoCast_Func001Func003C() ) then
		set udg_integer14=GetRandomInt(1, 5)
		if ( Trig_Creep_AutoCast_Func001Func003Func002C() ) then
			if ( Trig_Creep_AutoCast_Func001Func003Func002Func001C() ) then
				call SetUnitAbilityLevelSwapped('A00U', GetEnumUnit(), ( ( udg_integer02 * 4 ) / udg_integer03 ))
			else
				call SetUnitAbilityLevelSwapped('A00U', GetEnumUnit(), ( ( ( udg_integer02 * 4 ) / udg_integer03 ) / 2 ))
			endif
			call IssuePointOrderLocBJ(GetEnumUnit(), "shockwave", GetUnitLoc(GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800.00, GetUnitLoc(GetEnumUnit()), Condition(function Trig_Creep_AutoCast_Func001Func003Func002Func002003001001003)))))
		else
		endif
	else
	endif
	if ( Trig_Creep_AutoCast_Func001Func004C() ) then
		set udg_integer14=GetRandomInt(1, 5)
		if ( Trig_Creep_AutoCast_Func001Func004Func002C() ) then
			if ( Trig_Creep_AutoCast_Func001Func004Func002Func001C() ) then
				call SetUnitAbilityLevelSwapped('A00W', GetEnumUnit(), ( ( udg_integer02 * 4 ) / udg_integer03 ))
			else
				call SetUnitAbilityLevelSwapped('A00W', GetEnumUnit(), ( ( ( udg_integer02 * 4 ) / udg_integer03 ) / 2 ))
			endif
			call IssueTargetOrderBJ(GetEnumUnit(), "creepthunderbolt", GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800.00, GetUnitLoc(GetEnumUnit()), Condition(function Trig_Creep_AutoCast_Func001Func004Func002Func002003001003))))
		else
		endif
	else
	endif
	if ( Trig_Creep_AutoCast_Func001Func005C() ) then
		set udg_integer14=GetRandomInt(1, 5)
		if ( Trig_Creep_AutoCast_Func001Func005Func002C() ) then
			if ( Trig_Creep_AutoCast_Func001Func005Func002Func001C() ) then
				call SetUnitAbilityLevelSwapped('A00X', GetEnumUnit(), ( ( udg_integer02 * 4 ) / udg_integer03 ))
			else
				call SetUnitAbilityLevelSwapped('A00X', GetEnumUnit(), ( ( ( udg_integer02 * 4 ) / udg_integer03 ) / 2 ))
			endif
			call IssueTargetOrderBJ(GetEnumUnit(), "rejuvination", GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(400.00, GetUnitLoc(GetEnumUnit()), Condition(function Trig_Creep_AutoCast_Func001Func005Func002Func002003001003))))
		else
		endif
	else
	endif
	if ( Trig_Creep_AutoCast_Func001Func006C() ) then
		set udg_integer14=GetRandomInt(1, 5)
		if ( Trig_Creep_AutoCast_Func001Func006Func002C() ) then
			call IssueTargetOrderBJ(GetEnumUnit(), "slow", GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(600.00, GetUnitLoc(GetEnumUnit()), Condition(function Trig_Creep_AutoCast_Func001Func006Func002Func001003001003))))
		else
		endif
	else
	endif
	if ( Trig_Creep_AutoCast_Func001Func007C() ) then
		set udg_integer14=GetRandomInt(1, 5)
		if ( Trig_Creep_AutoCast_Func001Func007Func002C() ) then
			if ( Trig_Creep_AutoCast_Func001Func007Func002Func001C() ) then
				call IssueImmediateOrderBJ(GetEnumUnit(), "voodoo")
			else
			endif
		else
		endif
	else
	endif
	if ( Trig_Creep_AutoCast_Func001Func008C() ) then
		set udg_integer14=GetRandomInt(1, 5)
		if ( Trig_Creep_AutoCast_Func001Func008Func002C() ) then
			if ( Trig_Creep_AutoCast_Func001Func008Func002Func001C() ) then
				call SetUnitAbilityLevelSwapped('A016', GetEnumUnit(), ( ( udg_integer02 * 4 ) / udg_integer03 ))
			else
				call SetUnitAbilityLevelSwapped('A016', GetEnumUnit(), ( ( ( udg_integer02 * 4 ) / udg_integer03 ) / 2 ))
			endif
			call IssueTargetOrderBJ(GetEnumUnit(), "faeriefire", GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700.00, GetUnitLoc(GetEnumUnit()), Condition(function Trig_Creep_AutoCast_Func001Func008Func002Func002003001003))))
		else
		endif
	else
	endif
	if ( Trig_Creep_AutoCast_Func001Func009C() ) then
		set udg_integer14=GetRandomInt(1, 5)
		if ( Trig_Creep_AutoCast_Func001Func009Func002C() ) then
			if ( Trig_Creep_AutoCast_Func001Func009Func002Func001C() ) then
				if ( Trig_Creep_AutoCast_Func001Func009Func002Func001Func002C() ) then
					call SetUnitAbilityLevelSwapped('A01B', GetEnumUnit(), ( ( udg_integer02 * 4 ) / udg_integer03 ))
				else
					call SetUnitAbilityLevelSwapped('A01B', GetEnumUnit(), ( ( ( udg_integer02 * 4 ) / udg_integer03 ) / 2 ))
				endif
				call IssueImmediateOrderBJ(GetEnumUnit(), "thunderclap")
			else
			endif
		else
		endif
	else
	endif
endif
endfunction

function Trig_Creep_AutoCast_Actions takes nothing returns nothing
    local group GRP= GetUnitsOfPlayerMatching(Player(11), null)
	call ForGroupBJ(GRP, function Trig_Creep_AutoCast_Func001A)
	call DestroyGroup(GRP)
	set GRP=null
endfunction

function Trig_Creep_Dies_Conditions takes nothing returns boolean
	if ( not ( GetOwningPlayer(GetTriggerUnit()) == Player(11) ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetKillingUnitBJ()) != Player(11) ) ) then
		return false
	endif
	if ( not ( GetKillingUnitBJ() != null ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_Dies_Func003Func005001001002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Creep_Dies_Func003Func005001001002002 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) == Player(11) )
endfunction

function Trig_Creep_Dies_Func003Func005001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Creep_Dies_Func003Func005001001002001(), Trig_Creep_Dies_Func003Func005001001002002())
endfunction

function Trig_Creep_Dies_Func003C takes nothing returns boolean
	if ( not ( CountUnitsInGroup(GetUnitsInRectMatching(udg_rects01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))], Condition(function Trig_Creep_Dies_Func003Func005001001002))) == 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Creep_Dies_Actions takes nothing returns nothing
	call ConditionalTriggerExecute(udg_trigger22)
	if ( Trig_Creep_Dies_Func003C() ) then
		call AdjustPlayerStateBJ(( udg_integer59 + udg_integer61 ), GetOwningPlayer(GetKillingUnitBJ()), PLAYER_STATE_RESOURCE_GOLD)
		call ResourseRefresh(GetOwningPlayer(GetKillingUnitBJ()))
		call CreateTextTagLocBJ(( "+" + I2S(( ( udg_integer59 + udg_integer61 ) + udg_integer60 )) ), OffsetLocation(GetUnitLoc(GetTriggerUnit()), ( - 2.50 * I2R(StringLength(GetAbilityName(udg_integers14[udg_integer14]))) ), 0), 0, 10, 100.00, 80.00, 10.00, 0)
	else
		call AdjustPlayerStateBJ(udg_integer59, GetOwningPlayer(GetKillingUnitBJ()), PLAYER_STATE_RESOURCE_GOLD)
		call ResourseRefresh(GetOwningPlayer(GetKillingUnitBJ()))
		call CreateTextTagLocBJ(( "+" + I2S(( udg_integer59 + udg_integer60 )) ), OffsetLocation(GetUnitLoc(GetTriggerUnit()), ( - 2.50 * I2R(StringLength(GetAbilityName(udg_integers14[udg_integer14]))) ), 0), 0, 10, 100.00, 80.00, 10.00, 0)
	endif
	call SetTextTagVelocityBJ(GetLastCreatedTextTag(), 64, 90)
	call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
	call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 1.00)
	call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 2.00)
	call TriggerSleepAction(0.00)
	call SetUnitOwner(GetTriggerUnit(), Player(PLAYER_NEUTRAL_PASSIVE), false)
endfunction

function Trig_Generate_Next_Level_Conditions takes nothing returns boolean
	if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Generate_Next_Level_Func011C takes nothing returns boolean
	if ( not ( ( udg_integer02 + 1 ) > 5 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Generate_Next_Level_Func012C takes nothing returns boolean
	if ( not ( ( udg_integer02 + 1 ) > 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Generate_Next_Level_Func014C takes nothing returns boolean
	if ( not ( ( udg_integer02 + 1 ) <= 8 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Generate_Next_Level_Func018A takes nothing returns nothing
	call DeleteUnit(GetEnumUnit())
endfunction

function Trig_Generate_Next_Level_Func021Func001Func001C takes nothing returns boolean
	if ( not ( GetPlayerSlotState(ConvertedPlayer(udg_integer40)) != PLAYER_SLOT_STATE_EMPTY ) ) then
		return false
	endif
	if ( not ( IsPlayerInForce(ConvertedPlayer(udg_integer40), udg_force02) != true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Generate_Next_Level_Actions takes nothing returns nothing
	call DisableTrigger(GetTriggeringTrigger())
	call ConditionalTriggerExecute(udg_trigger104)
	set udg_integer04=udg_integers02[GetRandomInt(1, udg_integer22)]
	set udg_integer09=GetRandomInt(150, 400)
	set udg_integer05=GetRandomInt(1, udg_integer02)
	if ( Trig_Generate_Next_Level_Func011C() ) then
		set udg_integer10=GetRandomInt(1, 20)
		set udg_integer24=GetRandomInt(1, 20)
		set udg_integer25=GetRandomInt(1, 20)
	else
	endif
	if ( Trig_Generate_Next_Level_Func012C() ) then
		set udg_integer50=GetRandomInt(1, 20)
		set udg_integer54=GetRandomInt(1, 20)
		set udg_integer11=GetRandomInt(1, 20)
		set udg_integer12=GetRandomInt(1, 20)
		set udg_integer51=GetRandomInt(1, 20)
		set udg_integer18=GetRandomInt(1, 20)
		set udg_integer23=GetRandomInt(1, 20)
		set udg_integer21=GetRandomInt(1, 20)
		set udg_integer49=GetRandomInt(1, 20)
		set udg_integer17=GetRandomInt(1, 20)
		set udg_integer20=GetRandomInt(1, 20)
		set udg_integer55=GetRandomInt(1, 20)
	else
	endif
	if ( Trig_Generate_Next_Level_Func014C() ) then
		set udg_integer03=GetRandomInt(2, ( udg_integer02 / 2 + 4 ))
	else
		set udg_integer03=GetRandomInt(2, 25)
	endif
	
	set NumberOfUnit[0]=0
	set NumberOfUnit[1]=0
	set NumberOfUnit[2]=0
	set NumberOfUnit[3]=0
	set NumberOfUnit[4]=0
	set NumberOfUnit[5]=0
	set NumberOfUnit[6]=0
	set NumberOfUnit[7]=0
	set NumberOfUnit[8]=0
	
	set udg_integer02=( udg_integer02 + 1 )
	call ForGroupBJ(udg_group05, function Trig_Generate_Next_Level_Func018A)
	call GroupClear(udg_group05)
	set udg_integer28=1
	loop
		exitwhen udg_integer28 > udg_integer03
		set udg_integer40=1
		loop
			exitwhen udg_integer40 > 8
			if ( Trig_Generate_Next_Level_Func021Func001Func001C() ) then
				call CreateNUnitsAtLoc(1, udg_integer04, Player(11), OffsetLocation(GetRectCenter(udg_rects01[udg_integer40]), GetRandomReal(- 600.00, 600.00), GetRandomReal(- 600.00, 600.00)), GetRandomDirectionDeg())
				call GroupAddUnitSimple(GetLastCreatedUnit(), udg_group05)
                call UnitAddAbility(GetLastCreatedUnit(), 'A057')
                call BlzUnitDisableAbility(GetLastCreatedUnit(), 'A057', false, true)
                set NumberOfUnit[udg_integer40 - 1]=NumberOfUnit[udg_integer40 - 1] + 1


                if udg_integer02 < 40 then
			     call BlzSetUnitBaseDamage(GetLastCreatedUnit(), BlzGetUnitBaseDamage(GetLastCreatedUnit(), 0) + ( ( BonusNeutral + BonusNeutralPlayer[udg_integer40 - 1] ) * udg_integer02 ) / 2, 0)
			    else
			       call BlzSetUnitBaseDamage(GetLastCreatedUnit(), BlzGetUnitBaseDamage(GetLastCreatedUnit(), 0) + ( ( BonusNeutral + BonusNeutralPlayer[udg_integer40 - 1] ) * udg_integer02 ), 0)
			    endif
			    
                call AddUnitMagicDmg(GetLastCreatedUnit() , 4 * ( BonusNeutral + BonusNeutralPlayer[udg_integer40 - 1] ))
                call AddUnitMagicDef(GetLastCreatedUnit() , 0.09 * ( BonusNeutral + BonusNeutralPlayer[udg_integer40 - 1] ))
                call AddUnitEvasion(GetLastCreatedUnit() , 0.06 * ( BonusNeutral + BonusNeutralPlayer[udg_integer40 - 1] ))
                call AddUnitBlock(GetLastCreatedUnit() , 0.12 * ( BonusNeutral + BonusNeutralPlayer[udg_integer40 - 1] ))
				
                
                
                
                call AddUnitMagicDef(GetLastCreatedUnit() , 0.25 * ( udg_integer02 ))
				if udg_integer02 < 3 then
				    call BlzSetUnitBaseDamage(GetLastCreatedUnit(), BlzGetUnitBaseDamage(GetLastCreatedUnit(), 0) - 3, 0)

				elseif udg_integer02 < 8 then
			     	call BlzSetUnitBaseDamage(GetLastCreatedUnit(), BlzGetUnitBaseDamage(GetLastCreatedUnit(), 0) + 1 * udg_integer02, 0)
			     	call BlzSetUnitMaxHP(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()) + 3 * udg_integer02)
			     	call SetWidgetLife(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()))
			    elseif udg_integer02 < 11 then
			        call BlzSetUnitArmor(GetLastCreatedUnit(), BlzGetUnitArmor(GetLastCreatedUnit()) + udg_integer02 / 3)
			     	call BlzSetUnitBaseDamage(GetLastCreatedUnit(), BlzGetUnitBaseDamage(GetLastCreatedUnit(), 0) + 2 * udg_integer02, 0)
			     	call BlzSetUnitMaxHP(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()) + 10 * udg_integer02)
			     	call SetWidgetLife(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()))
			    elseif udg_integer02 < 19 then
			        call BlzSetUnitArmor(GetLastCreatedUnit(), BlzGetUnitArmor(GetLastCreatedUnit()) + udg_integer02 * 1)
			     	call BlzSetUnitBaseDamage(GetLastCreatedUnit(), BlzGetUnitBaseDamage(GetLastCreatedUnit(), 0) + 6 * udg_integer02, 0)
			     	call BlzSetUnitMaxHP(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()) + 40 * udg_integer02)
			     	call SetWidgetLife(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()))
			    elseif udg_integer02 < 24 then
			        call BlzSetUnitArmor(GetLastCreatedUnit(), BlzGetUnitArmor(GetLastCreatedUnit()) + udg_integer02 * 3)
			     	call BlzSetUnitBaseDamage(GetLastCreatedUnit(), BlzGetUnitBaseDamage(GetLastCreatedUnit(), 0) + 14 * udg_integer02, 0)
			     	call BlzSetUnitMaxHP(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()) + 45 * udg_integer02)
			     	call SetWidgetLife(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()))
			    
			    elseif udg_integer02 < 35 then
			        call BlzSetUnitArmor(GetLastCreatedUnit(), BlzGetUnitArmor(GetLastCreatedUnit()) + udg_integer02 * 5)
			     	call BlzSetUnitBaseDamage(GetLastCreatedUnit(), BlzGetUnitBaseDamage(GetLastCreatedUnit(), 0) + 55 * udg_integer02, 0)
			     	call BlzSetUnitMaxHP(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()) + 70 * udg_integer02)
			     	call SetWidgetLife(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()))
			    
			    elseif udg_integer02 < 41 then
			        call BlzSetUnitArmor(GetLastCreatedUnit(), BlzGetUnitArmor(GetLastCreatedUnit()) + udg_integer02 * 12)
			     	call BlzSetUnitBaseDamage(GetLastCreatedUnit(), BlzGetUnitBaseDamage(GetLastCreatedUnit(), 0) + 200 * udg_integer02, 0)
			     	call BlzSetUnitMaxHP(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()) + 150 * udg_integer02)
			     	call SetWidgetLife(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()))
			    elseif udg_integer02 < 45 then
			        call BlzSetUnitArmor(GetLastCreatedUnit(), BlzGetUnitArmor(GetLastCreatedUnit()) + udg_integer02 * 18)
			     	call BlzSetUnitBaseDamage(GetLastCreatedUnit(), BlzGetUnitBaseDamage(GetLastCreatedUnit(), 0) + 400 * udg_integer02, 0)
			     	call BlzSetUnitMaxHP(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()) + 305 * udg_integer02)
			     	call SetWidgetLife(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()))
                elseif udg_integer02 < 49 then
                                 
			        call BlzSetUnitArmor(GetLastCreatedUnit(), BlzGetUnitArmor(GetLastCreatedUnit()) + udg_integer02 * 20)
			     	call BlzSetUnitBaseDamage(GetLastCreatedUnit(), BlzGetUnitBaseDamage(GetLastCreatedUnit(), 0) + 500 * udg_integer02, 0)
			     	call BlzSetUnitMaxHP(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()) + 600 * udg_integer02)
			     	call SetWidgetLife(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()))
                else
                    call BlzSetUnitArmor(GetLastCreatedUnit(), BlzGetUnitArmor(GetLastCreatedUnit()) + udg_integer02 * 20)
			     	call BlzSetUnitBaseDamage(GetLastCreatedUnit(), BlzGetUnitBaseDamage(GetLastCreatedUnit(), 0) + 900 * udg_integer02, 0)
			     	call BlzSetUnitMaxHP(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()) + 1500 * udg_integer02)
			     	call SetWidgetLife(GetLastCreatedUnit(), BlzGetUnitMaxHP(GetLastCreatedUnit()))
			    endif
                 
				
				
				
				call SetUnitScalePercent(GetLastCreatedUnit(), ( 85.00 + ( ( I2R(udg_integer02) - 1.00 ) * 0.50 ) ), 100, 100)
				call ConditionalTriggerExecute(udg_trigger99)
				call ConditionalTriggerExecute(udg_trigger100)
				call SetUnitMoveSpeed(GetLastCreatedUnit(), I2R(udg_integer09))
				call SetUnitAbilityLevelSwapped('A000', GetLastCreatedUnit(), ( R2I(udg_real01) / 2 ))
				call SetUnitAbilityLevelSwapped('A002', GetLastCreatedUnit(), udg_integer05)
				call PauseUnitBJ(true, GetLastCreatedUnit())
				call SetUnitInvulnerable(GetLastCreatedUnit(), true)
				call ShowUnitHide(GetLastCreatedUnit())
			else
			endif
			set udg_integer40=udg_integer40 + 1
		endloop
		set udg_integer28=udg_integer28 + 1
	endloop
endfunction

function Trig_Unit_Type_Actions takes nothing returns nothing
	set udg_integers02[1]='n000'
	set udg_integers02[2]='n002'
	set udg_integers02[3]='n008'
	set udg_integers02[4]='n009'
	set udg_integers02[5]='n006'
	set udg_integers02[6]='n00G'
	set udg_integers02[7]='n00F'
	set udg_integers02[8]='n00H'
	set udg_integers02[9]='n00N'
	set udg_integers02[10]='n007'
	set udg_integers02[11]='n00W'
	set udg_integers02[12]='n00X'
	set udg_integers02[13]='n019'
	set udg_integers02[14]='n01B'
	set udg_integers02[15]='n01C'
	set udg_integers02[16]='n01A'
	set udg_integers02[17]='n018'
	set udg_integers02[18]='n01F'
	set udg_integers02[19]='n01K'
	set udg_integers02[20]='n01J'
	set udg_integers02[21]='n01I'
	set udg_integers02[22]='n01H'
	set udg_integers02[23]='n01G'
	set udg_integer22=23
endfunction

function Trig_Bonus_Exp_Conditions takes nothing returns boolean
	if ( not ( GetOwningPlayer(GetTriggerUnit()) == Player(11) ) ) then
		return false
	endif
	if ( not ( IsUnitIllusionBJ(GetTriggerUnit()) != true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Bonus_Exp_Func001Func001001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Bonus_Exp_Func001Func001A takes nothing returns nothing
	call AddHeroXPSwapped(( R2I(udg_real01) * 35 ), GetEnumUnit(), true)
endfunction

function Trig_Bonus_Exp_Func001Func002001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Bonus_Exp_Func001Func002A takes nothing returns nothing
	call AddHeroXPSwapped(( R2I(udg_real01) * 55 ), GetEnumUnit(), true)
endfunction

function Trig_Bonus_Exp_Func001C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Bonus_Exp_Actions takes nothing returns nothing
	if ( Trig_Bonus_Exp_Func001C() ) then
		call ForGroupBJ(GetUnitsOfPlayerMatching(GetOwningPlayer(GetKillingUnitBJ()), Condition(function Trig_Bonus_Exp_Func001Func002001002)), function Trig_Bonus_Exp_Func001Func002A)
	else
		call ForGroupBJ(GetUnitsOfPlayerMatching(GetOwningPlayer(GetKillingUnitBJ()), Condition(function Trig_Bonus_Exp_Func001Func001001002)), function Trig_Bonus_Exp_Func001Func001A)
	endif
endfunction

function Trig_Complete_Level_Move_Conditions takes nothing returns boolean
	if ( not ( IsUnitInGroup(GetTriggerUnit(), udg_group08) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Complete_Level_Move_Func003C takes nothing returns boolean
	if ( not ( IsPlayerInForce(ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))), udg_force02) != true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Complete_Level_Move_Func005Func001C takes nothing returns boolean
	if ( ( udg_boolean04 == true ) ) then
		return true
	endif
	if ( ( udg_boolean08 == true ) ) then
		return true
	endif
	return false
endfunction

function Trig_Complete_Level_Move_Func005Func002Func001C takes nothing returns boolean
	if ( not ( udg_integer02 < 8 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Complete_Level_Move_Func005Func002C takes nothing returns boolean
	if ( not ( udg_integer02 <= 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Complete_Level_Move_Func005Func003Func001C takes nothing returns boolean
	if ( not ( udg_integer02 < 4 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Complete_Level_Move_Func005Func003C takes nothing returns boolean
	if ( not ( udg_integer02 <= 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Complete_Level_Move_Func005C takes nothing returns boolean
	if ( not Trig_Complete_Level_Move_Func005Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Complete_Level_Move_Actions takes nothing returns nothing

    call Func_completeLevel(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])
	if ( Trig_Complete_Level_Move_Func003C() ) then
		call SetUnitPositionLoc(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))], GetRectCenter(udg_rect09))
		call PanCameraToTimedLocForPlayer(ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))), GetRectCenter(udg_rect09), 0.20)
	else
	endif
	if ( Trig_Complete_Level_Move_Func005C() ) then
		if ( Trig_Complete_Level_Move_Func005Func003C() ) then
			call AdjustPlayerStateBJ(( 21 * udg_integer02 ), ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))), PLAYER_STATE_RESOURCE_LUMBER)
			call ResourseRefresh(ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))))
		else
			if ( Trig_Complete_Level_Move_Func005Func003Func001C() ) then
				call AdjustPlayerStateBJ(( 11 * udg_integer02 ), ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))), PLAYER_STATE_RESOURCE_LUMBER)
				call ResourseRefresh(ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))))
			else
				call AdjustPlayerStateBJ(( R2I(( I2R(udg_integer02) / 2.00 )) * 6 ), ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))), PLAYER_STATE_RESOURCE_LUMBER)
				call ResourseRefresh(ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))))
			endif
		endif
	else
		if ( Trig_Complete_Level_Move_Func005Func002C() ) then
			call AdjustPlayerStateBJ(( 10 * udg_integer02 ), ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))), PLAYER_STATE_RESOURCE_LUMBER)
			call ResourseRefresh(ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))))
		else
			if ( Trig_Complete_Level_Move_Func005Func002Func001C() ) then
				call AdjustPlayerStateBJ(( 6 * udg_integer02 ), ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))), PLAYER_STATE_RESOURCE_LUMBER)
				call ResourseRefresh(ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))))
			else
				call AdjustPlayerStateBJ(( R2I(( I2R(udg_integer02) / 4.00 )) * 6 ), ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))), PLAYER_STATE_RESOURCE_LUMBER)
				call ResourseRefresh(ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))))
			endif
		endif
	endif
	call DeleteUnit(GetTriggerUnit())
	call ConditionalTriggerExecute(udg_trigger108)
endfunction

function Trig_Complete_Level_Player_Func006Func002001001002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Complete_Level_Player_Func006Func002001001002002 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) == Player(11) )
endfunction

function Trig_Complete_Level_Player_Func006Func002001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Complete_Level_Player_Func006Func002001001002001(), Trig_Complete_Level_Player_Func006Func002001001002002())
endfunction

function Trig_Complete_Level_Player_Func006C takes nothing returns boolean
	if ( not ( GetOwningPlayer(GetTriggerUnit()) == Player(11) ) ) then
		return false
	endif
	if ( not ( CountUnitsInGroup(GetUnitsInRectMatching(udg_rects01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))], Condition(function Trig_Complete_Level_Player_Func006Func002001001002))) == 0 ) ) then
		return false
	endif
	if ( not ( IsPlayerInForce(GetOwningPlayer(GetKillingUnitBJ()), udg_force02) != true ) ) then
		return false
	endif
	if ( not ( IsPlayerInForce(GetOwningPlayer(GetKillingUnitBJ()), udg_force03) != true ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetKillingUnitBJ()) != Player(11) ) ) then
		return false
	endif
	if ( not ( GetKillingUnitBJ() != null ) ) then
		return false
	endif
	return true
endfunction

function Trig_Complete_Level_Player_Conditions takes nothing returns boolean
	if ( not Trig_Complete_Level_Player_Func006C() ) then
		return false
	endif
	return true
endfunction

function Trig_Complete_Level_Player_Func001001 takes nothing returns boolean
	return ( udg_integer02 == 5 )
endfunction

function Trig_Complete_Level_Player_Func004001 takes nothing returns boolean
	return ( udg_integer56 > 3 )
endfunction

function Trig_Complete_Level_Player_Func005Func004001 takes nothing returns boolean
	return ( udg_boolean08 == false )
endfunction

function Trig_Complete_Level_Player_Func005C takes nothing returns boolean
	if ( not ( CountPlayersInForceBJ(udg_force03) < udg_integer56 ) ) then
		return false
	endif
//	if(not(GetUnitTypeId(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])!='N00K'))then
//		return false
//	endif
	return true
endfunction

function Trig_Complete_Level_Player_Func010C takes nothing returns boolean
	if ( not ( udg_integer48 == 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Complete_Level_Player_Actions takes nothing returns nothing
	if ( Trig_Complete_Level_Player_Func001001() ) then
		set udg_boolean09=false
	else
		call DoNothing()
	endif
	set udg_integer56=( udg_integer06 / 2 )
	if ( Trig_Complete_Level_Player_Func004001() ) then
		set udg_integer56=3
	else
		call DoNothing()
	endif
	if ( Trig_Complete_Level_Player_Func005C() ) then
		set udg_integer48=( ( udg_integer06 - ( 1 + CountPlayersInForceBJ(udg_force03) ) ) * ( udg_integer02 * 5 ) )
		set udg_integer48=( udg_integer48 * udg_integer02 )
		if ( Trig_Complete_Level_Player_Func005Func004001() ) then
			set udg_integer48=( udg_integer48 / 2 )
		else
			call DoNothing()
		endif
	else
		set udg_integer48=0
	endif
	call ForceAddPlayerSimple(GetOwningPlayer(GetKillingUnitBJ()), udg_force03)
	set udg_integer08=( udg_integer08 + 1 )
	call SetUnitInvulnerable(udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))], true)
	if ( Trig_Complete_Level_Player_Func010C() ) then
		call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffffcc00" + ( GetPlayerName(ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ())))) + " survived the level!|r" ) ))
	else
		call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffffcc00" + ( GetPlayerName(ConvertedPlayer(GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ())))) + ( " survived the level! (+" + ( I2S(udg_integer48) + " exp)|r" ) ) ) ))
		call AddHeroXPSwapped(udg_integer48, udg_units01[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))], true)
	endif
	call CreateNUnitsAtLoc(1, 'n00V', GetOwningPlayer(GetKillingUnitBJ()), GetRectCenter(GetPlayableMapRect()), bj_UNIT_FACING)
	call UnitApplyTimedLifeBJ(2.00, 'BTLF', GetLastCreatedUnit())
	call GroupAddUnitSimple(GetLastCreatedUnit(), udg_group08)
endfunction

function Trig_Level_Completed_Func001Func001001001 takes nothing returns boolean
	return ( IsTriggerEnabled(udg_trigger119) != true )
endfunction

function Trig_Level_Completed_Func001Func001001002001 takes nothing returns boolean
	return ( udg_boolean11 != true )
endfunction

function Trig_Level_Completed_Func001Func001001002002001 takes nothing returns boolean
	return ( IsTriggerEnabled(udg_trigger118) != true )
endfunction

function Trig_Level_Completed_Func001Func001001002002002 takes nothing returns boolean
	return ( udg_integer13 != 1 )
endfunction

function Trig_Level_Completed_Func001Func001001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Level_Completed_Func001Func001001002002001(), Trig_Level_Completed_Func001Func001001002002002())
endfunction

function Trig_Level_Completed_Func001Func001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Level_Completed_Func001Func001001002001(), Trig_Level_Completed_Func001Func001001002002())
endfunction

function Trig_Level_Completed_Func001Func001001 takes nothing returns boolean
	return GetBooleanOr(Trig_Level_Completed_Func001Func001001001(), Trig_Level_Completed_Func001Func001001002())
endfunction

function Trig_Level_Completed_Func001Func014Func001Func001Func002C takes nothing returns boolean
	if ( ( udg_integer02 == 5 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 10 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 15 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 20 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 25 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 30 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 35 ) ) then
		return true
	endif
	return false
endfunction

function Trig_Level_Completed_Func001Func014Func001Func001C takes nothing returns boolean
	if ( not ( udg_integer06 > 1 ) ) then
		return false
	endif
	if ( not Trig_Level_Completed_Func001Func014Func001Func001Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func014Func001C takes nothing returns boolean
	if ( not Trig_Level_Completed_Func001Func014Func001Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func014C takes nothing returns boolean
	if ( not ( udg_boolean04 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func018Func001Func004Func001C takes nothing returns boolean

    if MorePvp == 0 then
	if ( ( udg_integer02 == 10 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 20 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 30 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 40 ) ) then
		return true
	endif
	else
	
	if ( ( udg_integer02 == 5 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 10 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 15 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 20 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 25 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 30 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 35 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 40 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 45 ) ) then
		return true
	endif
	
	
	endif
	
	
	return false
endfunction

function Trig_Level_Completed_Func001Func018Func001Func004C takes nothing returns boolean
	if ( not Trig_Level_Completed_Func001Func018Func001Func004Func001C() ) then
		return false
	endif
	if ( not ( udg_integer06 > 1 ) ) then
		return false
	endif
	if ( not ( udg_boolean04 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func018Func001C takes nothing returns boolean
	if ( not Trig_Level_Completed_Func001Func018Func001Func004C() ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func018Func002Func004Func001C takes nothing returns boolean
	if ( ( udg_integer02 == 5 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 10 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 15 ) ) then
		return true
	endif
	if ( ( udg_integer02 == 20 ) ) then
		return true
	endif
	return false
endfunction

function Trig_Level_Completed_Func001Func018Func002Func004C takes nothing returns boolean
	if ( not Trig_Level_Completed_Func001Func018Func002Func004Func001C() ) then
		return false
	endif
	if ( not ( udg_integer06 > 1 ) ) then
		return false
	endif
	if ( not ( udg_boolean04 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func018Func002C takes nothing returns boolean
	if ( not Trig_Level_Completed_Func001Func018Func002Func004C() ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func018C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	if ( not ( udg_boolean04 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func023Func001Func003C takes nothing returns boolean
	if ( not ( udg_integer06 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func023Func001C takes nothing returns boolean
	if ( not ( udg_integer02 == 50 ) ) then
		return false
	endif
	if ( not ( udg_boolean04 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func023Func002Func003C takes nothing returns boolean
	if ( not ( udg_integer06 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func023Func002C takes nothing returns boolean
	if ( not ( udg_integer02 == 25 ) ) then
		return false
	endif
	if ( not ( udg_boolean04 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func023C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	if ( not ( udg_boolean04 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001Func028C takes nothing returns boolean
	if ( not ( udg_integer02 <= 3 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Func001C takes nothing returns boolean
	if ( not ( udg_integer08 >= udg_integer06 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Level_Completed_Actions takes nothing returns nothing
	if ( Trig_Level_Completed_Func001C() ) then
		if ( Trig_Level_Completed_Func001Func001001() ) then
			return
		else
			call DoNothing()
		endif
		call DisableTrigger(udg_trigger110)
		call DisableTrigger(udg_trigger116)
		call ConditionalTriggerExecute(udg_trigger122)
		call ConditionalTriggerExecute(udg_trigger119)
		set udg_boolean01=true
		set udg_integer08=0
		call PlaySoundBJ(udg_sound02)
		call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffffcc00Level Completed!" ))
		if ( Trig_Level_Completed_Func001Func014C() ) then
			if ( Trig_Level_Completed_Func001Func014Func001C() ) then
				call ConditionalTriggerExecute(udg_trigger152)
				return
			else
			endif
		else
		endif
		if ( Trig_Level_Completed_Func001Func018C() ) then
			if ( Trig_Level_Completed_Func001Func018Func002C() ) then
				call GroupClear(udg_group03)
				call ConditionalTriggerExecute(udg_trigger134)
				return
			else
			endif
		else
			if ( Trig_Level_Completed_Func001Func018Func001C() ) then
				call GroupClear(udg_group03)
				call ConditionalTriggerExecute(udg_trigger134)
				return
			else
			endif
		endif
		if ( Trig_Level_Completed_Func001Func023C() ) then
			if ( Trig_Level_Completed_Func001Func023Func002C() ) then
				if ( Trig_Level_Completed_Func001Func023Func002Func003C() ) then
					call ConditionalTriggerExecute(udg_trigger119)
				else
					call ConditionalTriggerExecute(udg_trigger42)
				endif
				return
			else
			endif
		else
			if ( Trig_Level_Completed_Func001Func023Func001C() ) then
				if ( Trig_Level_Completed_Func001Func023Func001Func003C() ) then
					call ConditionalTriggerExecute(udg_trigger119)
				else
					call ConditionalTriggerExecute(udg_trigger42)
				endif
				return
			else
			endif
		endif
		call ConditionalTriggerExecute(udg_trigger103)
		call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "Next Level ...")
		if ( Trig_Level_Completed_Func001Func028C() ) then
			call StartTimerBJ(GetLastCreatedTimerBJ(), false, 20.00)
			call TriggerSleepAction(20.00)
		else
			call StartTimerBJ(GetLastCreatedTimerBJ(), false, 15.00)
			call TriggerSleepAction(15.00)
		endif
		call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
		call TriggerExecute(udg_trigger109)
	else
	endif
endfunction

function Trig_Start_Level_Conditions takes nothing returns boolean
	if ( not ( udg_boolean09 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Start_Level_Func003Func001C takes nothing returns boolean
	if ( not ( udg_boolean12 == false ) ) then
		return false
	endif
	if ( not ( udg_integer02 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Start_Level_Func003Func006A takes nothing returns nothing
	call DeleteUnit(GetEnumUnit())
endfunction

function Trig_Start_Level_Func003C takes nothing returns boolean
	if ( not Trig_Start_Level_Func003Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Start_Level_Func011A takes nothing returns nothing
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_FOOD_USED, udg_integer02)
	call ResourseRefresh(GetEnumPlayer())
endfunction

function Trig_Start_Level_Func013Func001C takes nothing returns boolean
	if ( ( udg_boolean04 == true ) ) then
		return true
	endif
	if ( ( udg_boolean08 == true ) ) then
		return true
	endif
	return false
endfunction

function Trig_Start_Level_Func013C takes nothing returns boolean
	if ( not Trig_Start_Level_Func013Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Start_Level_Func015Func002001001001001 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(8) )
endfunction

function Trig_Start_Level_Func015Func002001001001002 takes nothing returns boolean
	return ( GetFilterPlayer() != Player(11) )
endfunction

function Trig_Start_Level_Func015Func002001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Start_Level_Func015Func002001001001001(), Trig_Start_Level_Func015Func002001001001002())
endfunction

function Trig_Start_Level_Func015Func002001001002 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force02) != true )
endfunction

function Trig_Start_Level_Func015Func002001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Start_Level_Func015Func002001001001(), Trig_Start_Level_Func015Func002001001002())
endfunction

function Trig_Start_Level_Func015Func002Func003001002001 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) != true )
endfunction

function Trig_Start_Level_Func015Func002Func003001002002 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Start_Level_Func015Func002Func003001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Start_Level_Func015Func002Func003001002001(), Trig_Start_Level_Func015Func002Func003001002002())
endfunction

function Trig_Start_Level_Func015Func002Func003Func001001 takes nothing returns boolean
	return ( GetUnitTypeId(GetEnumUnit()) == 'hphx' )
endfunction

function Trig_Start_Level_Func015Func002Func003A takes nothing returns nothing
	if ( Trig_Start_Level_Func015Func002Func003Func001001() ) then
		call DeleteUnit(GetEnumUnit())
	else
		call DoNothing()
	endif
	call ExplodeUnitBJ(GetEnumUnit())
endfunction

function Trig_Start_Level_Func015Func002Func004A takes nothing returns nothing
	call RemoveItem(GetEnumItem())
endfunction

function Trig_Start_Level_Func015Func002A takes nothing returns nothing
	set udg_booleans02[GetConvertedPlayerId(GetEnumPlayer())]=false
	set udg_booleans01[GetConvertedPlayerId(GetEnumPlayer())]=false
	call ForGroupBJ(GetUnitsOfPlayerMatching(GetEnumPlayer(), Condition(function Trig_Start_Level_Func015Func002Func003001002)), function Trig_Start_Level_Func015Func002Func003A)
	call EnumItemsInRectBJ(udg_rects01[GetConvertedPlayerId(GetEnumPlayer())], function Trig_Start_Level_Func015Func002Func004A)
	call SetUnitInvulnerable(udg_units01[GetConvertedPlayerId(GetEnumPlayer())], false)
	call StartFunctionSpell(udg_units01[GetConvertedPlayerId(GetEnumPlayer())] , 2)
	call SetUnitPositionLoc(udg_units01[GetConvertedPlayerId(GetEnumPlayer())], GetRectCenter(udg_rects01[GetConvertedPlayerId(GetEnumPlayer())]))
	set udg_unit01=udg_units01[GetConvertedPlayerId(GetEnumPlayer())]
	call ConditionalTriggerExecute(udg_trigger82)
	call SelectUnitForPlayerSingle(udg_units01[GetConvertedPlayerId(GetEnumPlayer())], GetOwningPlayer(udg_units01[GetConvertedPlayerId(GetEnumPlayer())]))
	call PanCameraToTimedLocForPlayer(GetEnumPlayer(), GetRectCenter(udg_rects01[GetConvertedPlayerId(GetEnumPlayer())]), 0)
endfunction

function Trig_Start_Level_Func015C takes nothing returns boolean
	if ( not ( udg_integer02 > 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Start_Level_Func018A takes nothing returns nothing
	call ShowUnitShow(GetEnumUnit())
	call SetUnitInvulnerable(GetEnumUnit(), false)
	//call StartFunctionSpell(GetEnumUnit(),3 ) 
	call PauseUnitBJ(false, GetEnumUnit())
endfunction

function Trig_Start_Level_Actions takes nothing returns nothing
	call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
	if ( Trig_Start_Level_Func003C() ) then
		set udg_boolean12=true
		set udg_boolean09=true
		call DisplayTextToForce(GetPlayersAll(), ( "|c00F08000Level " + ( I2S(udg_integer02) + "|r" ) ))
		call ConditionalTriggerExecute(udg_trigger143)
		call ForGroupBJ(GetUnitsOfTypeIdAll('n00E'), function Trig_Start_Level_Func003Func006A)
	else
	endif
	call ForceClear(udg_force03)
	set udg_boolean01=false
	set udg_integer08=0
	call ConditionalTriggerExecute(udg_trigger146)
	call ForForce(GetPlayersAll(), function Trig_Start_Level_Func011A)
	if ( Trig_Start_Level_Func013C() ) then
		set udg_integer59=( ( 125 * udg_integer02 ) / udg_integer03 )
		set udg_integer61=( ( 125 * udg_integer02 ) - ( udg_integer59 * udg_integer03 ) )
	else
		set udg_integer59=( ( 80 * udg_integer02 ) / udg_integer03 )
		set udg_integer61=( ( 80 * udg_integer02 ) - ( udg_integer59 * udg_integer03 ) )
	endif
	if ( Trig_Start_Level_Func015C() ) then
		call PlaySoundBJ(udg_sound03)
		call ForForce(GetPlayersMatching(Condition(function Trig_Start_Level_Func015Func002001001)), function Trig_Start_Level_Func015Func002A)
		call TriggerSleepAction(4.00)
	else
	endif
	call PlaySoundBJ(udg_sound01)
	call ForGroupBJ(udg_group05, function Trig_Start_Level_Func018A)
	call ConditionalTriggerExecute(udg_trigger98)
	set udg_integer39=0
	call EnableTrigger(udg_trigger110)
	call EnableTrigger(udg_trigger116)
	call EnableTrigger(udg_trigger103)
endfunction

function Trig_Sudden_Death_Timer_Func002Func001A takes nothing returns nothing
	call SetUnitMoveSpeed(GetEnumUnit(), ( GetUnitMoveSpeed(GetEnumUnit()) + 25.00 ))
endfunction

function Trig_Sudden_Death_Timer_Func002Func002Func001Func004C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped('A000', GetEnumUnit()) < 50 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Sudden_Death_Timer_Func002Func002Func001A takes nothing returns nothing
	call UnitAddAbilityBJ('Atru', GetEnumUnit())
	call UnitAddAbilityBJ('A00W', GetEnumUnit())
	call UnitAddAbilityBJ('A01B', GetEnumUnit())
	if ( Trig_Sudden_Death_Timer_Func002Func002Func001Func004C() ) then
		call IncUnitAbilityLevelSwapped('A000', GetEnumUnit())
	else
	endif
endfunction

function Trig_Sudden_Death_Timer_Func002Func002Func002Func001001001 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force03) != true )
endfunction

function Trig_Sudden_Death_Timer_Func002Func002Func002Func001A takes nothing returns nothing
	call SetUnitLifeBJ(udg_units01[GetConvertedPlayerId(GetEnumPlayer())], ( GetUnitStateSwap(UNIT_STATE_LIFE, udg_units01[GetConvertedPlayerId(GetEnumPlayer())]) - 1 ))
endfunction

function Trig_Sudden_Death_Timer_Func002Func002Func002C takes nothing returns boolean
	if ( not ( udg_integer39 >= 720 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Sudden_Death_Timer_Func002Func002C takes nothing returns boolean
	if ( not ( udg_integer39 >= 480 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Sudden_Death_Timer_Func002C takes nothing returns boolean
	if ( not ( udg_integer39 >= 240 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Sudden_Death_Timer_Actions takes nothing returns nothing
	set udg_integer39=( udg_integer39 + 1 )
	if ( Trig_Sudden_Death_Timer_Func002C() ) then
		call ForGroupBJ(GetUnitsInRectOfPlayer(GetPlayableMapRect(), Player(11)), function Trig_Sudden_Death_Timer_Func002Func001A)
		if ( Trig_Sudden_Death_Timer_Func002Func002C() ) then
			call ForGroupBJ(GetUnitsInRectOfPlayer(GetPlayableMapRect(), Player(11)), function Trig_Sudden_Death_Timer_Func002Func002Func001A)
			if ( Trig_Sudden_Death_Timer_Func002Func002Func002C() ) then
				call ForForce(GetPlayersMatching(Condition(function Trig_Sudden_Death_Timer_Func002Func002Func002Func001001001)), function Trig_Sudden_Death_Timer_Func002Func002Func002Func001A)
			else
			endif
		else
		endif
	else
	endif
endfunction

function Trig_Learn_Ability_Conditions takes nothing returns boolean
	if ( not ( 'I00P' != GetItemTypeId(GetManipulatedItem()) ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func006C takes nothing returns boolean
	if ( not ( udg_integer01 == 'Amnz' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func001Func002Func001C takes nothing returns boolean
	if ( not ( udg_boolean06 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func001Func002Func002Func001C takes nothing returns boolean
	if ( not ( udg_boolean06 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func001Func002Func002C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped(udg_integer01, GetTriggerUnit()) < 30 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func001Func002C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped(udg_integer01, GetTriggerUnit()) >= 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func001C takes nothing returns boolean
	if ( not ( udg_boolean05 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func001Func002Func002C takes nothing returns boolean
	if ( ( udg_integer01 == 'ANba' ) ) then
		return true
	endif
	if ( ( udg_integer01 == 'AHca' ) ) then
		return true
	endif
	if ( ( udg_integer01 == 'AHfa' ) ) then
		return true
	endif
	if ( ( udg_integer01 == 'Aliq' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func001Func002C takes nothing returns boolean
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_MELEE_ATTACKER) == true ) ) then
		return false
	endif
	if ( not Trig_Learn_Ability_Func008Func002Func001Func001Func002Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func001Func003Func002C takes nothing returns boolean
	if ( ( udg_integer01 == 'ANca' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func001Func003C takes nothing returns boolean
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_RANGED_ATTACKER) == true ) ) then
		return false
	endif
	if ( not Trig_Learn_Ability_Func008Func002Func001Func001Func003Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func001Func004Func001C takes nothing returns boolean
	if ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_MELEE_ATTACKER) == true ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'H004' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'O005' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'O001' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func001Func004Func002C takes nothing returns boolean
	if ( ( udg_integer01 == 'ANba' ) ) then
		return true
	endif
	if ( ( udg_integer01 == 'Aroc' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func001Func004C takes nothing returns boolean
	if ( not Trig_Learn_Ability_Func008Func002Func001Func001Func004Func001C() ) then
		return false
	endif
	if ( not Trig_Learn_Ability_Func008Func002Func001Func001Func004Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func001Func005Func001C takes nothing returns boolean
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'H004' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'O005' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'O001' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func001Func005Func002C takes nothing returns boolean
	if ( ( udg_integer01 == 'ACvs' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func001Func005C takes nothing returns boolean
	if ( not Trig_Learn_Ability_Func008Func002Func001Func001Func005Func001C() ) then
		return false
	endif
	if ( not Trig_Learn_Ability_Func008Func002Func001Func001Func005Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func001C takes nothing returns boolean
	if ( ( udg_integers01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] >= 10 ) ) then
		return true
	endif
	if ( Trig_Learn_Ability_Func008Func002Func001Func001Func002C() ) then
		return true
	endif
	if ( Trig_Learn_Ability_Func008Func002Func001Func001Func003C() ) then
		return true
	endif
	if ( Trig_Learn_Ability_Func008Func002Func001Func001Func004C() ) then
		return true
	endif
	if ( Trig_Learn_Ability_Func008Func002Func001Func001Func005C() ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func001Func001C takes nothing returns boolean
	if ( not ( udg_boolean06 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func001C takes nothing returns boolean
	if ( not ( udg_boolean06 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func002Func001Func002C takes nothing returns boolean
	if ( ( udg_integer01 == 'ANba' ) ) then
		return true
	endif
	if ( ( udg_integer01 == 'AHca' ) ) then
		return true
	endif
	if ( ( udg_integer01 == 'AHfa' ) ) then
		return true
	endif
	if ( ( udg_integer01 == 'Aliq' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func002Func001C takes nothing returns boolean
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_MELEE_ATTACKER) == true ) ) then
		return false
	endif
	if ( not Trig_Learn_Ability_Func008Func002Func001Func007Func002Func001Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func002Func002Func002C takes nothing returns boolean
	if ( ( udg_integer01 == 'ANca' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func002Func002C takes nothing returns boolean
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_RANGED_ATTACKER) == true ) ) then
		return false
	endif
	if ( not Trig_Learn_Ability_Func008Func002Func001Func007Func002Func002Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func002Func003Func001C takes nothing returns boolean
	if ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_MELEE_ATTACKER) == true ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'H004' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'O005' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'O001' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func002Func003Func002C takes nothing returns boolean
	if ( ( udg_integer01 == 'ANba' ) ) then
		return true
	endif
	if ( ( udg_integer01 == 'Aroc' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func002Func003C takes nothing returns boolean
	if ( not Trig_Learn_Ability_Func008Func002Func001Func007Func002Func003Func001C() ) then
		return false
	endif
	if ( not Trig_Learn_Ability_Func008Func002Func001Func007Func002Func003Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func002Func004Func001C takes nothing returns boolean
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'H004' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'O005' ) ) then
		return true
	endif
	if ( ( GetUnitTypeId(GetTriggerUnit()) == 'O001' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func002Func004Func002C takes nothing returns boolean
	if ( ( udg_integer01 == 'ACvs' ) ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func002Func004C takes nothing returns boolean
	if ( not Trig_Learn_Ability_Func008Func002Func001Func007Func002Func004Func001C() ) then
		return false
	endif
	if ( not Trig_Learn_Ability_Func008Func002Func001Func007Func002Func004Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007Func002C takes nothing returns boolean
	if ( Trig_Learn_Ability_Func008Func002Func001Func007Func002Func001C() ) then
		return true
	endif
	if ( Trig_Learn_Ability_Func008Func002Func001Func007Func002Func002C() ) then
		return true
	endif
	if ( Trig_Learn_Ability_Func008Func002Func001Func007Func002Func003C() ) then
		return true
	endif
	if ( Trig_Learn_Ability_Func008Func002Func001Func007Func002Func004C() ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func007C takes nothing returns boolean
	if ( not Trig_Learn_Ability_Func008Func002Func001Func007Func002C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001Func008C takes nothing returns boolean
	if ( not ( udg_boolean06 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func001C takes nothing returns boolean
	if ( not Trig_Learn_Ability_Func008Func002Func001Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func003Func001C takes nothing returns boolean
	if ( not ( udg_boolean06 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002Func003C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped(udg_integer01, GetTriggerUnit()) < 30 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008Func002C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped(udg_integer01, GetTriggerUnit()) == 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Ability_Func008C takes nothing returns boolean
	if ( not ( udg_boolean05 == false ) ) then
		return false
	endif
	return true
endfunction



///. TSTSTSTT


function Trig_Learn_Ability_Actions takes nothing returns nothing
	set udg_integer01='Amnz'
	call ConditionalTriggerExecute(udg_trigger112)
	if ( Trig_Learn_Ability_Func006C() ) then
		return
	else
	endif
	if ( Trig_Learn_Ability_Func008C() ) then
		if ( Trig_Learn_Ability_Func008Func002C() ) then
			if ( Trig_Learn_Ability_Func008Func002Func001C() ) then
				if ( Trig_Learn_Ability_Func008Func002Func001Func007C() ) then
					if ( Trig_Learn_Ability_Func008Func002Func001Func007Func001C() ) then
						call ConditionalTriggerExecute(udg_trigger114)
						return
					else
						if ( Trig_Learn_Ability_Func008Func002Func001Func007Func001Func001C() ) then
						
						    call AdjustPlayerStateBJ(BlzGetItemIntegerField(GetManipulatedItem(), ConvertItemIntegerField('iclr')), GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
						    
						    call ResourseRefresh(GetOwningPlayer(GetTriggerUnit()))
						//	call AdjustPlayerStateBJ((GetItemLevel(GetManipulatedItem())*10),GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_LUMBER)
						else
							call AdjustPlayerStateBJ(5, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
							call ResourseRefresh(GetOwningPlayer(GetTriggerUnit()))
						endif
						call ForceAddPlayerSimple(GetOwningPlayer(GetTriggerUnit()), bj_FORCE_PLAYER[11])
						call DisplayTimedTextToForce(bj_FORCE_PLAYER[11], 2.00, "|cffffcc00Failed to learn!")
						call ForceRemovePlayerSimple(GetOwningPlayer(GetTriggerUnit()), bj_FORCE_PLAYER[11])
						return
					endif
				else
				endif
				if ( Trig_Learn_Ability_Func008Func002Func001Func008C() ) then
					call AdjustPlayerStateBJ(BlzGetItemIntegerField(GetManipulatedItem(), ConvertItemIntegerField('iclr')), GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
					call ResourseRefresh(GetOwningPlayer(GetTriggerUnit()))
				else
					call AdjustPlayerStateBJ(5, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
					call ResourseRefresh(GetOwningPlayer(GetTriggerUnit()))
				endif
				call ForceAddPlayerSimple(GetOwningPlayer(GetTriggerUnit()), bj_FORCE_PLAYER[11])
				call DisplayTimedTextToForce(bj_FORCE_PLAYER[11], 2.00, "|cffffcc00Failed to learn!")
				call ForceRemovePlayerSimple(GetOwningPlayer(GetTriggerUnit()), bj_FORCE_PLAYER[11])
				return
			else
				set udg_integers01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=( udg_integers01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] + 1 )
				set udg_integers05[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=udg_integer01
				call UnitAddAbilityBJ(udg_integer01, GetTriggerUnit())
                call AddAbilityData(GetTriggerUnit() , udg_integer01)
                call UpdateTooltipText(GetTriggerUnit() , udg_integer01)
				call FuncEditParam(udg_integer01 , GetTriggerUnit())
				call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl")
				call DestroyEffectBJ(GetLastCreatedEffectBJ())
			endif
		else
			if ( Trig_Learn_Ability_Func008Func002Func003C() ) then
			//	call IncUnitAbilityLevelSwapped(udg_integer01,GetTriggerUnit())
                call AddSpellLvl(GetTriggerUnit() , udg_integer01)
                call UpdateTooltipText(GetTriggerUnit() , udg_integer01)
				call FuncEditParam(udg_integer01 , GetTriggerUnit())
				call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl")
				call DestroyEffectBJ(GetLastCreatedEffectBJ())
			else
				if ( Trig_Learn_Ability_Func008Func002Func003Func001C() ) then
					call AdjustPlayerStateBJ(BlzGetItemIntegerField(GetManipulatedItem(), ConvertItemIntegerField('iclr')), GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
					call ResourseRefresh(GetOwningPlayer(GetTriggerUnit()))
				else
					call AdjustPlayerStateBJ(5, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
					call ResourseRefresh(GetOwningPlayer(GetTriggerUnit()))
				endif
				call ForceAddPlayerSimple(GetOwningPlayer(GetTriggerUnit()), bj_FORCE_PLAYER[11])
				call DisplayTimedTextToForce(bj_FORCE_PLAYER[11], 2.00, "|cffffcc00Failed to learn!")
				call ForceRemovePlayerSimple(GetOwningPlayer(GetTriggerUnit()), bj_FORCE_PLAYER[11])
				return
			endif
		endif
	else
		if ( Trig_Learn_Ability_Func008Func001C() ) then
			if ( Trig_Learn_Ability_Func008Func001Func002C() ) then
				if ( Trig_Learn_Ability_Func008Func001Func002Func001C() ) then
					call AdjustPlayerStateBJ(BlzGetItemIntegerField(GetManipulatedItem(), ConvertItemIntegerField('iclr')), GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
					call ResourseRefresh(GetOwningPlayer(GetTriggerUnit()))
				else
					call AdjustPlayerStateBJ(5, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
					call ResourseRefresh(GetOwningPlayer(GetTriggerUnit()))
				endif
				call ForceAddPlayerSimple(GetOwningPlayer(GetTriggerUnit()), bj_FORCE_PLAYER[11])
				call DisplayTimedTextToForce(bj_FORCE_PLAYER[11], 2.00, "|cffffcc00Failed to learn! (Random Mode)")
				call ForceRemovePlayerSimple(GetOwningPlayer(GetTriggerUnit()), bj_FORCE_PLAYER[11])
				return
			else
				if ( Trig_Learn_Ability_Func008Func001Func002Func002C() ) then
				//	call IncUnitAbilityLevelSwapped(udg_integer01,GetTriggerUnit())
                    call AddSpellLvl(GetTriggerUnit() , udg_integer01)
                    call UpdateTooltipText(GetTriggerUnit() , udg_integer01)
					call FuncEditParam(udg_integer01 , GetTriggerUnit())
					call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl")
					call DestroyEffectBJ(GetLastCreatedEffectBJ())
				else
					if ( Trig_Learn_Ability_Func008Func001Func002Func002Func001C() ) then
						call AdjustPlayerStateBJ(BlzGetItemIntegerField(GetManipulatedItem(), ConvertItemIntegerField('iclr')), GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
						call ResourseRefresh(GetOwningPlayer(GetTriggerUnit()))
					else
						call AdjustPlayerStateBJ(5, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_LUMBER)
						call ResourseRefresh(GetOwningPlayer(GetTriggerUnit()))
					endif
					call ForceAddPlayerSimple(GetOwningPlayer(GetTriggerUnit()), bj_FORCE_PLAYER[11])
					call DisplayTimedTextToForce(bj_FORCE_PLAYER[11], 2.00, "|cffffcc00Failed to learn!")
					call ForceRemovePlayerSimple(GetOwningPlayer(GetTriggerUnit()), bj_FORCE_PLAYER[11])
					return
				endif
			endif
		else
		endif
	endif
endfunction

function Trig_Set_Ability_Func001Func001001 takes nothing returns boolean
	return ( GetItemTypeId(GetManipulatedItem()) == udg_integers09[udg_integer44] )
endfunction

function Trig_Set_Ability_Func001Func002C takes nothing returns boolean
	if ( not ( GetItemTypeId(GetManipulatedItem()) == udg_integers09[udg_integer44] ) ) then
		return false
	endif
	return true
endfunction

function Trig_Set_Ability_Actions takes nothing returns nothing
	set udg_integer44=1
	loop
		exitwhen udg_integer44 > udg_integer26
		if ( Trig_Set_Ability_Func001Func001001() ) then
			set udg_integer01=udg_integers08[udg_integer44]
		else
			call DoNothing()
		endif
		if ( Trig_Set_Ability_Func001Func002C() ) then
			set udg_integer01=udg_integers08[udg_integer44]
			return
		else
		endif
		set udg_integer44=udg_integer44 + 1
	endloop
endfunction

function Trig_Random_Ability_Conditions takes nothing returns boolean
	if ( not ( 'I02J' == GetItemTypeId(GetManipulatedItem()) ) ) then
		return false
	endif
	return true
endfunction

function Trig_Random_Ability_Actions takes nothing returns nothing
	set udg_integer37=0
	set udg_unit01=GetTriggerUnit()
	call ConditionalTriggerExecute(udg_trigger114)
endfunction

function Trig_Learn_Random_Ability_Func004Func001Func001C takes nothing returns boolean
	if ( not ( udg_integer37 > 500 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Random_Ability_Func004Func001Func002C takes nothing returns boolean
	if ( not ( udg_boolean05 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Random_Ability_Func004Func001Func005Func001Func001C takes nothing returns boolean
	if ( not ( udg_integers01[GetConvertedPlayerId(GetOwningPlayer(udg_unit01))] >= 10 ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(udg_unit01) == 'O000' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Random_Ability_Func004Func001Func005Func001Func002C takes nothing returns boolean
	if ( not ( udg_integers01[GetConvertedPlayerId(GetOwningPlayer(udg_unit01))] >= 10 ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(udg_unit01) != 'O000' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Random_Ability_Func004Func001Func005Func001C takes nothing returns boolean
	if ( Trig_Learn_Random_Ability_Func004Func001Func005Func001Func001C() ) then
		return true
	endif
	if ( Trig_Learn_Random_Ability_Func004Func001Func005Func001Func002C() ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Random_Ability_Func004Func001Func005C takes nothing returns boolean
	if ( not Trig_Learn_Random_Ability_Func004Func001Func005Func001C() ) then
		return false
	endif
	if ( not ( GetUnitAbilityLevelSwapped(udg_integers08[udg_integer14], udg_unit01) > 0 ) ) then
		return false
	endif
	if ( not ( GetUnitAbilityLevelSwapped(udg_integers08[udg_integer14], udg_unit01) < 30 ) ) then
		return false
	endif
	if ( not ( udg_integer37 <= 500 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Random_Ability_Func004Func001C takes nothing returns boolean
	if ( not Trig_Learn_Random_Ability_Func004Func001Func005C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Random_Ability_Func004Func002C takes nothing returns boolean
	if ( not ( udg_boolean05 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Random_Ability_Func004Func003Func003Func001C takes nothing returns boolean
	if ( not ( udg_integers01[GetConvertedPlayerId(GetOwningPlayer(udg_unit01))] < 10 ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(udg_unit01) == 'O000' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Random_Ability_Func004Func003Func003Func002C takes nothing returns boolean
	if ( not ( udg_integers01[GetConvertedPlayerId(GetOwningPlayer(udg_unit01))] < 10 ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(udg_unit01) != 'O000' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Random_Ability_Func004Func003Func003C takes nothing returns boolean
	if ( Trig_Learn_Random_Ability_Func004Func003Func003Func001C() ) then
		return true
	endif
	if ( Trig_Learn_Random_Ability_Func004Func003Func003Func002C() ) then
		return true
	endif
	return false
endfunction

function Trig_Learn_Random_Ability_Func004Func003C takes nothing returns boolean
	if ( not ( GetUnitAbilityLevelSwapped(udg_integers08[udg_integer14], udg_unit01) == 0 ) ) then
		return false
	endif
	if ( not ( udg_integers09[udg_integer14] != GetItemTypeId(null) ) ) then
		return false
	endif
	if ( not Trig_Learn_Random_Ability_Func004Func003Func003C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Random_Ability_Func004C takes nothing returns boolean
	if ( not Trig_Learn_Random_Ability_Func004Func003C() ) then
		return false
	endif
	return true
endfunction

function Trig_Learn_Random_Ability_Actions takes nothing returns nothing
	set udg_player02=GetOwningPlayer(udg_unit01)
	set udg_integer14=GetRandomInt(1, udg_integer26)
	if ( Trig_Learn_Random_Ability_Func004C() ) then
		if ( Trig_Learn_Random_Ability_Func004Func002C() ) then
			set udg_boolean05=false
			set udg_boolean06=true
			call UnitAddItemByIdSwapped(udg_integers09[udg_integer14], udg_units01[GetConvertedPlayerId(udg_player02)])
			set udg_boolean06=false
			set udg_boolean05=true
		else
			call UnitAddItemByIdSwapped(udg_integers09[udg_integer14], udg_units01[GetConvertedPlayerId(udg_player02)])
		endif
	else
		if ( Trig_Learn_Random_Ability_Func004Func001C() ) then
			if ( Trig_Learn_Random_Ability_Func004Func001Func002C() ) then
				set udg_boolean05=false
				set udg_boolean06=true
				call UnitAddItemByIdSwapped(udg_integers09[udg_integer14], udg_units01[GetConvertedPlayerId(udg_player02)])
				set udg_boolean06=false
				set udg_boolean05=true
			else
				call AdjustPlayerStateBJ(5, GetOwningPlayer(udg_unit01), PLAYER_STATE_RESOURCE_LUMBER)
				
				call ResourseRefresh(GetOwningPlayer(udg_unit01))
				call ForceAddPlayerSimple(GetOwningPlayer(udg_unit01), bj_FORCE_PLAYER[11])
				call DisplayTimedTextToForce(bj_FORCE_PLAYER[11], 2.00, "|cffffcc00Failed to learn!")
				call ForceRemovePlayerSimple(GetOwningPlayer(udg_unit01), bj_FORCE_PLAYER[11])
				return
			endif
		else
			if ( Trig_Learn_Random_Ability_Func004Func001Func001C() ) then
				call AdjustPlayerStateBJ(5, GetOwningPlayer(udg_unit01), PLAYER_STATE_RESOURCE_LUMBER)
					call ResourseRefresh(GetOwningPlayer(udg_unit01))
				
				call ForceAddPlayerSimple(GetOwningPlayer(udg_unit01), bj_FORCE_PLAYER[11])
				call DisplayTimedTextToForce(bj_FORCE_PLAYER[11], 2.00, "|cffffcc00Failed to learn!")
				call ForceRemovePlayerSimple(GetOwningPlayer(udg_unit01), bj_FORCE_PLAYER[11])
				return
			else
			endif
			set udg_integer37=( udg_integer37 + 1 )
			call ConditionalTriggerExecute(GetTriggeringTrigger())
		endif
	endif
endfunction

function Trig_Unlearn_Ability_Conditions takes nothing returns boolean
	if ( not ( 'I00P' == GetItemTypeId(GetManipulatedItem()) ) ) then
		return false
	endif
	return true
endfunction

function Trig_Unlearn_Ability_Func001Func003C takes nothing returns boolean
	if ( not ( udg_boolean05 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Unlearn_Ability_Func001C takes nothing returns boolean
	if ( not ( udg_boolean05 == false ) ) then
		return false
	endif
	if ( not ( udg_integers05[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] != 'Amnz' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Unlearn_Ability_Actions takes nothing returns nothing
    local integer CountS= 0
    local integer Pid= GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))
	if ( Trig_Unlearn_Ability_Func001C() ) then
		set CountS=LoadCountHeroSpell(GetTriggerUnit() , 0)
		if CountS > 0 then
            set udg_integers01[Pid]=( udg_integers01[Pid] - 1 )
            set udg_integers05[Pid]=GetInfoHeroSpell(GetTriggerUnit() , CountS)
            call SetInfoHeroSpell(GetTriggerUnit() , CountS , 0)
            call SaveCountHeroSpell(GetTriggerUnit() , CountS - 1 , 0)
            
            call AddSpecialEffectTargetUnitBJ("origin", GetTriggerUnit(), "Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl")
            call DestroyEffectBJ(GetLastCreatedEffectBJ())
            call UnitRemoveAbilityBJ(udg_integers05[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))], GetTriggerUnit())
            call FunResetAbility(udg_integers05[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] , GetTriggerUnit())
        endif
		
    
		//set udg_integers05[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]='Amnz'
	else
		call AdjustPlayerStateBJ(20, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD)
			call ResourseRefresh(GetOwningPlayer(GetTriggerUnit()))
		call ForceAddPlayerSimple(GetOwningPlayer(GetTriggerUnit()), bj_FORCE_PLAYER[11])
		if ( Trig_Unlearn_Ability_Func001Func003C() ) then
			call DisplayTimedTextToForce(bj_FORCE_PLAYER[11], 2.00, "|cffffcc00Failed to unlearn!")
		else
			call DisplayTimedTextToForce(bj_FORCE_PLAYER[11], 2.00, "|cffffcc00Failed to unlearn! (Random Mode)")
		endif
		call ForceRemovePlayerSimple(GetOwningPlayer(GetTriggerUnit()), bj_FORCE_PLAYER[11])
	endif
endfunction

function Trig_AntiStuck_Conditions takes nothing returns boolean
	if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_AntiStuck_Func002Func001Func005Func001001001002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_AntiStuck_Func002Func001Func005Func001001001002002 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) == Player(11) )
endfunction

function Trig_AntiStuck_Func002Func001Func005Func001001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_AntiStuck_Func002Func001Func005Func001001001002001(), Trig_AntiStuck_Func002Func001Func005Func001001001002002())
endfunction

function Trig_AntiStuck_Func002Func001Func005C takes nothing returns boolean
	if ( not ( CountUnitsInGroup(GetUnitsInRectMatching(udg_rects01[udg_integer27], Condition(function Trig_AntiStuck_Func002Func001Func005Func001001001002))) == 0 ) ) then
		return false
	endif
	if ( not ( IsPlayerInForce(GetOwningPlayer(udg_units01[udg_integer27]), udg_force02) != true ) ) then
		return false
	endif
	if ( not ( IsPlayerInForce(GetOwningPlayer(udg_units01[udg_integer27]), udg_force03) != true ) ) then
		return false
	endif
	if ( not ( udg_units01[udg_integer27] != null ) ) then
		return false
	endif
	return true
endfunction

function Trig_AntiStuck_Func002Func001C takes nothing returns boolean
	if ( not Trig_AntiStuck_Func002Func001Func005C() ) then
		return false
	endif
	return true
endfunction

function Trig_AntiStuck_Actions takes nothing returns nothing
	set udg_integer27=1
	loop
		exitwhen udg_integer27 > 8
		if ( Trig_AntiStuck_Func002Func001C() ) then
			call CreateNUnitsAtLoc(1, 'n00T', Player(11), GetRectCenter(udg_rects01[udg_integer27]), bj_UNIT_FACING)
			call SuspendHeroXPBJ(false, udg_units01[udg_integer27])
			call UnitDamageTargetBJ(udg_units01[udg_integer27], GetLastCreatedUnit(), 500, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL)
			call SuspendHeroXPBJ(true, udg_units01[udg_integer27])
		else
		endif
		set udg_integer27=udg_integer27 + 1
	endloop
endfunction

function Trig_Countdown_Func001Func001C takes nothing returns boolean
	if ( not ( udg_integer19 > 0 ) ) then
		return false
	endif
	if ( not ( udg_integer02 == 1 ) ) then
		return false
	endif
	if ( not ( udg_integer07 < udg_integer06 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Countdown_Func001Func002C takes nothing returns boolean
	if ( not ( udg_integer19 > 0 ) ) then
		return false
	endif
	if ( not ( udg_boolean09 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Countdown_Func001C takes nothing returns boolean
	if ( Trig_Countdown_Func001Func001C() ) then
		return true
	endif
	if ( Trig_Countdown_Func001Func002C() ) then
		return true
	endif
	return false
endfunction

function Trig_Countdown_Conditions takes nothing returns boolean
	if ( not Trig_Countdown_Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Countdown_Actions takes nothing returns nothing
	call CreateTextTagLocBJ(( I2S(udg_integer19) + " ..." ), udg_location01, 0.00, 40.00, 100, I2R(( udg_integer19 * 20 )), I2R(( udg_integer19 * 20 )), 0)
	call SetTextTagPermanentBJ(GetLastCreatedTextTag(), false)
	call SetTextTagFadepointBJ(GetLastCreatedTextTag(), 0.80)
	call SetTextTagLifespanBJ(GetLastCreatedTextTag(), 1.00)
	call PlaySoundBJ(udg_sound09)
	set udg_integer19=( udg_integer19 - 1 )
	call TriggerSleepAction(1.00)
	call ConditionalTriggerExecute(GetTriggeringTrigger())
endfunction

function Trig_Defeat_Conditions takes nothing returns boolean
	if ( not ( udg_integer06 == 0 ) ) then
		return false
	endif
	if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Defeat_Func012A takes nothing returns nothing
	call CustomDefeatBJ(GetEnumPlayer(), "Defeat!")
endfunction

function Trig_Defeat_Actions takes nothing returns nothing
	call DisableTrigger(GetTriggeringTrigger())
	call DisableTrigger(udg_trigger106)
	call DisableTrigger(udg_trigger107)
	call CinematicFilterGenericBJ(2, BLEND_MODE_BLEND, "ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp", 50.00, 0.00, 0.00, 100, 0, 0, 0, 0)
	call DisplayTimedTextToForce(GetPlayersAll(), 30, "|cffffcc00All heroes were slain and everyone was forced to admit defeat!|r")
	call EndThematicMusicBJ()
	call SetMusicVolumeBJ(0.00)
	call PlaySoundBJ(udg_sound06)
	call TriggerSleepAction(2.00)
	call DisplayTimedTextToForce(GetPlayersAll(), 26.00, "|cffffcc00But thank you for playing!!|r")
	call TriggerSleepAction(5.00)
	call ForForce(udg_force02, function Trig_Defeat_Func012A)
endfunction

function Trig_End_Game_Conditions takes nothing returns boolean
	if ( not ( udg_boolean11 == true ) ) then
		return false
	endif
	if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_Game_Func003Func007Func001C takes nothing returns boolean
	if ( ( udg_boolean07 == true ) ) then
		return true
	endif
	if ( ( udg_boolean04 == true ) ) then
		return true
	endif
	return false
endfunction

function Trig_End_Game_Func003Func007Func002C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	if ( not ( udg_integer02 == 25 ) ) then
		return false
	endif
	if ( not ( udg_boolean04 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_Game_Func003Func007Func003C takes nothing returns boolean
	if ( not ( udg_boolean08 == false ) ) then
		return false
	endif
	if ( not ( udg_integer02 == 50 ) ) then
		return false
	endif
	if ( not ( udg_boolean04 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_Game_Func003Func007C takes nothing returns boolean
	if ( Trig_End_Game_Func003Func007Func001C() ) then
		return true
	endif
	if ( Trig_End_Game_Func003Func007Func002C() ) then
		return true
	endif
	if ( Trig_End_Game_Func003Func007Func003C() ) then
		return true
	endif
	return false
endfunction

function Trig_End_Game_Func003Func009A takes nothing returns nothing
	call CustomDefeatBJ(GetEnumPlayer(), "Defeat!")
endfunction

function Trig_End_Game_Func003C takes nothing returns boolean
	if ( not Trig_End_Game_Func003Func007C() ) then
		return false
	endif
	return true
endfunction

function Trig_End_Game_Actions takes nothing returns nothing
	if ( Trig_End_Game_Func003C() ) then
		call DisableTrigger(GetTriggeringTrigger())
		set udg_boolean09=true
		call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
		call TriggerSleepAction(8.00)
		call CustomVictoryBJ(udg_player01, true, true)
		call ForForce(udg_force02, function Trig_End_Game_Func003Func009A)
	else
	endif
endfunction

function Trig_Playtime_Func002C takes nothing returns boolean
	if ( not ( udg_integers06[2] > 59 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Playtime_Actions takes nothing returns nothing
	set udg_integers06[2]=( udg_integers06[2] + 1 )
	if ( Trig_Playtime_Func002C() ) then
		set udg_integers06[2]=0
		set udg_integers06[1]=( udg_integers06[1] + 1 )
	else
	endif
endfunction

function Trig_Remove_Selection_Circles_Func001A takes nothing returns nothing
	call DeleteUnit(GetEnumUnit())
endfunction

function Trig_Remove_Selection_Circles_Func002001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Remove_Selection_Circles_Func002A takes nothing returns nothing
	call DeleteUnit(GetEnumUnit())
endfunction

function Trig_Remove_Selection_Circles_Actions takes nothing returns nothing
	call ForGroupBJ(GetUnitsOfTypeIdAll('ncop'), function Trig_Remove_Selection_Circles_Func001A)
	call ForGroupBJ(GetUnitsOfPlayerMatching(Player(8), Condition(function Trig_Remove_Selection_Circles_Func002001002)), function Trig_Remove_Selection_Circles_Func002A)
endfunction

function Trig_Victory_Func001Func001C takes nothing returns boolean
	if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
		return false
	endif
	if ( not ( udg_integer13 > 1 ) ) then
		return false
	endif
	if ( not ( udg_integer06 == 1 ) ) then
		return false
	endif
	if ( not ( udg_boolean11 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Victory_Func001Func002Func003Func001C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	if ( not ( udg_integer02 == 25 ) ) then
		return false
	endif
	if ( not ( udg_boolean04 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Victory_Func001Func002Func003Func002C takes nothing returns boolean
	if ( not ( udg_boolean08 == false ) ) then
		return false
	endif
	if ( not ( udg_integer02 == 50 ) ) then
		return false
	endif
	if ( not ( udg_boolean04 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Victory_Func001Func002Func003C takes nothing returns boolean
	if ( Trig_Victory_Func001Func002Func003Func001C() ) then
		return true
	endif
	if ( Trig_Victory_Func001Func002Func003Func002C() ) then
		return true
	endif
	return false
endfunction

function Trig_Victory_Func001Func002C takes nothing returns boolean
	if ( not ( udg_integer13 == 1 ) ) then
		return false
	endif
	if ( not ( udg_integer06 == 1 ) ) then
		return false
	endif
	if ( not Trig_Victory_Func001Func002Func003C() ) then
		return false
	endif
	return true
endfunction

function Trig_Victory_Func001C takes nothing returns boolean
	if ( Trig_Victory_Func001Func001C() ) then
		return true
	endif
	if ( Trig_Victory_Func001Func002C() ) then
		return true
	endif
	return false
endfunction

function Trig_Victory_Conditions takes nothing returns boolean
	if ( not Trig_Victory_Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Victory_Func006C takes nothing returns boolean
	if ( not ( udg_boolean02 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_Victory_Func011001002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Victory_Func011001002002001 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Victory_Func011001002002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_Victory_Func011001002002002002 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_Victory_Func011001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Victory_Func011001002002002001(), Trig_Victory_Func011001002002002002())
endfunction

function Trig_Victory_Func011001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Victory_Func011001002002001(), Trig_Victory_Func011001002002002())
endfunction

function Trig_Victory_Func011001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Victory_Func011001002001(), Trig_Victory_Func011001002002())
endfunction

function Trig_Victory_Func011Func002A takes nothing returns nothing
	call SetCameraTargetControllerNoZForPlayer(GetEnumPlayer(), GetEnumUnit(), 0, 0, false)
	call SelectUnitForPlayerSingle(GetEnumUnit(), GetEnumPlayer())
endfunction

function Trig_Victory_Func011A takes nothing returns nothing
	set udg_player01=GetOwningPlayer(GetEnumUnit())
	call ForForce(udg_force02, function Trig_Victory_Func011Func002A)
endfunction

function Trig_Victory_Func012C takes nothing returns boolean
	if ( not ( udg_integer13 == 1 ) ) then
		return false
	endif
	if ( not ( udg_integer06 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Victory_Actions takes nothing returns nothing
	set udg_boolean11=true
	call DisableTrigger(GetTriggeringTrigger())
	call DisableTrigger(udg_trigger118)
	call DisableTrigger(udg_trigger80)
	if ( Trig_Victory_Func006C() ) then
		call EnableTrigger(udg_trigger81)
	else
	endif
	call ConditionalTriggerExecute(udg_trigger119)
	call TriggerSleepAction(2)
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Victory_Func011001002)), function Trig_Victory_Func011A)
	if ( Trig_Victory_Func012C() ) then
		call DisplayTimedTextToForce(GetPlayersAll(), 30, ( "|cffffcc00" + ( "You survived all levels! Congratulations!!" ) ))
	else
		call DisplayTimedTextToForce(GetPlayersAll(), 30, ( "|cffffcc00" + ( GetPlayerName(udg_player01) + " survived longer than all other players! Congratulations!!" ) ))
	endif
	call EndThematicMusicBJ()
	call SetMusicVolumeBJ(0.00)
	call PlaySoundBJ(udg_sound05)
	call DisableTrigger(udg_trigger87)
	call TriggerSleepAction(2.00)
	call DisplayTimedTextToForce(GetPlayersAll(), 26.00, "|cffffcc00Thank you for playing!!|r")
endfunction

function Trig_Camera_Command_Func001C takes nothing returns boolean
	if ( not ( SubStringBJ(StringCase(GetEventPlayerChatString(), false), 2, 7) == "camera" ) ) then
		return false
	endif
	return true
endfunction

function Trig_Camera_Command_Func002Func001C takes nothing returns boolean
	if ( not ( S2I(SubStringBJ(GetEventPlayerChatString(), udg_integer56, StringLength(GetEventPlayerChatString()))) > 2800 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Camera_Command_Func002C takes nothing returns boolean
	if ( not ( S2I(SubStringBJ(GetEventPlayerChatString(), udg_integer56, StringLength(GetEventPlayerChatString()))) >= 1650 ) ) then
		return false
	endif
	if ( not ( S2I(SubStringBJ(GetEventPlayerChatString(), udg_integer56, StringLength(GetEventPlayerChatString()))) <= 2800 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Camera_Command_Actions takes nothing returns nothing
	if ( Trig_Camera_Command_Func001C() ) then
		set udg_integer56=9
	else
		set udg_integer56=6
	endif
	if ( Trig_Camera_Command_Func002C() ) then
		call SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, S2R(SubStringBJ(GetEventPlayerChatString(), udg_integer56, StringLength(GetEventPlayerChatString()))), 0.50)
	else
		if ( Trig_Camera_Command_Func002Func001C() ) then
			call SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, 2800.00, 0.50)
		else
			call SetCameraFieldForPlayer(GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, 1650.00, 0.50)
		endif
	endif
endfunction

function Trig_Clear_Command_Func001001001 takes nothing returns boolean
	return ( GetFilterPlayer() == GetTriggerPlayer() )
endfunction

function Trig_Clear_Command_Actions takes nothing returns nothing
	call ClearTextMessagesBJ(GetPlayersMatching(Condition(function Trig_Clear_Command_Func001001001)))
endfunction

function Trig_Hint_Command_Func001Func002001001 takes nothing returns boolean
	return ( GetFilterPlayer() == GetTriggerPlayer() )
endfunction

function Trig_Hint_Command_Func001Func004001001 takes nothing returns boolean
	return ( GetFilterPlayer() == GetTriggerPlayer() )
endfunction

function Trig_Hint_Command_Func001C takes nothing returns boolean
	if ( not ( IsPlayerInForce(GetTriggerPlayer(), udg_force06) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hint_Command_Actions takes nothing returns nothing
	if ( Trig_Hint_Command_Func001C() ) then
		call ForceRemovePlayerSimple(GetTriggerPlayer(), udg_force06)
		call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_Hint_Command_Func001Func004001001)), 3.00, "|cff959697Display Hints: ON|r")
	else
		call ForceAddPlayerSimple(GetTriggerPlayer(), udg_force06)
		call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_Hint_Command_Func001Func002001001)), 3.00, "|cff959697Display Hints: OFF|r")
	endif
endfunction

function Trig_Level_Command_Actions takes nothing returns nothing
	call ForceAddPlayerSimple(GetTriggerPlayer(), bj_FORCE_PLAYER[11])
	call DisplayTextToForce(bj_FORCE_PLAYER[11], ( "|c00F08000Level " + ( I2S(udg_integer02) + "|r" ) ))
	call ForceRemovePlayerSimple(GetTriggerPlayer(), bj_FORCE_PLAYER[11])
endfunction

function Trig_Movement_Speed_Command_Conditions takes nothing returns boolean
	if ( not ( IsUnitAliveBJ(udg_units01[GetConvertedPlayerId(GetTriggerPlayer())]) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Movement_Speed_Command_Actions takes nothing returns nothing
	call ForceAddPlayerSimple(GetTriggerPlayer(), bj_FORCE_PLAYER[11])
	call DisplayTextToForce(bj_FORCE_PLAYER[11], ( "|c00F08000Current Movement Speed: " + ( I2S(R2I(GetUnitMoveSpeed(udg_units01[GetConvertedPlayerId(GetTriggerPlayer())]))) + "|r" ) ))
	call ForceRemovePlayerSimple(GetTriggerPlayer(), bj_FORCE_PLAYER[11])
endfunction

function Trig_Playtime_Command_Func002Func001Func001Func003C takes nothing returns boolean
	if ( not ( udg_integers06[1] != 1 ) ) then
		return false
	endif
	if ( not ( udg_integers06[2] == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Playtime_Command_Func002Func001Func001C takes nothing returns boolean
	if ( not Trig_Playtime_Command_Func002Func001Func001Func003C() ) then
		return false
	endif
	return true
endfunction

function Trig_Playtime_Command_Func002Func001Func003C takes nothing returns boolean
	if ( not ( udg_integers06[1] == 1 ) ) then
		return false
	endif
	if ( not ( udg_integers06[2] != 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Playtime_Command_Func002Func001C takes nothing returns boolean
	if ( not Trig_Playtime_Command_Func002Func001Func003C() ) then
		return false
	endif
	return true
endfunction

function Trig_Playtime_Command_Func002Func003C takes nothing returns boolean
	if ( not ( udg_integers06[1] == 1 ) ) then
		return false
	endif
	if ( not ( udg_integers06[2] == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Playtime_Command_Func002C takes nothing returns boolean
	if ( not Trig_Playtime_Command_Func002Func003C() ) then
		return false
	endif
	return true
endfunction

function Trig_Playtime_Command_Actions takes nothing returns nothing
	call ForceAddPlayerSimple(GetTriggerPlayer(), bj_FORCE_PLAYER[11])
	if ( Trig_Playtime_Command_Func002C() ) then
		call DisplayTextToForce(bj_FORCE_PLAYER[11], ( "|c00F08000Current Playtime: " + ( ( I2S(udg_integers06[1]) + ( " minute and " + ( I2S(udg_integers06[2]) + " second" ) ) ) + "|r" ) ))
	else
		if ( Trig_Playtime_Command_Func002Func001C() ) then
			call DisplayTextToForce(bj_FORCE_PLAYER[11], ( "|c00F08000Current Playtime: " + ( ( I2S(udg_integers06[1]) + ( " minute and " + ( I2S(udg_integers06[2]) + " seconds" ) ) ) + "|r" ) ))
		else
			if ( Trig_Playtime_Command_Func002Func001Func001C() ) then
				call DisplayTextToForce(bj_FORCE_PLAYER[11], ( "|c00F08000Current Playtime: " + ( ( I2S(udg_integers06[1]) + ( " minutes and " + ( I2S(udg_integers06[2]) + " second" ) ) ) + "|r" ) ))
			else
				call DisplayTextToForce(bj_FORCE_PLAYER[11], ( "|c00F08000Current Playtime: " + ( ( I2S(udg_integers06[1]) + ( " minutes and " + ( I2S(udg_integers06[2]) + " seconds" ) ) ) + "|r" ) ))
			endif
		endif
	endif
	call ForceRemovePlayerSimple(GetTriggerPlayer(), bj_FORCE_PLAYER[11])
endfunction

function Trig_Player_Leaves_Conditions takes nothing returns boolean
	if ( not ( IsPlayerInForce(GetTriggerPlayer(), udg_force02) != true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Player_Leaves_Func005001 takes nothing returns boolean
	return ( GetTriggerPlayer() == udg_player03 )
endfunction

function Trig_Player_Leaves_Func007Func001Func002001001002001 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Player_Leaves_Func007Func001Func002001001002002 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Player_Leaves_Func007Func001Func002001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Player_Leaves_Func007Func001Func002001001002001(), Trig_Player_Leaves_Func007Func001Func002001001002002())
endfunction

function Trig_Player_Leaves_Func007Func001C takes nothing returns boolean
	if ( not ( udg_integer02 == 0 ) ) then
		return false
	endif
	if ( not ( CountUnitsInGroup(GetUnitsOfPlayerMatching(GetTriggerPlayer(), Condition(function Trig_Player_Leaves_Func007Func001Func002001001002))) == 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Player_Leaves_Func007Func003002001001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Player_Leaves_Func007C takes nothing returns boolean
	if ( not Trig_Player_Leaves_Func007Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Player_Leaves_Actions takes nothing returns nothing
	call PlaySoundBJ(udg_sound04)
	call ForceAddPlayerSimple(GetTriggerPlayer(), udg_force07)
	call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( ( "|cffffcc00" + GetPlayerName(GetTriggerPlayer()) ) + " has left the game!|r" ))
	if ( Trig_Player_Leaves_Func005001() ) then
		call ConditionalTriggerExecute(udg_trigger131)
	else
		call DoNothing()
	endif
	if ( Trig_Player_Leaves_Func007C() ) then
		set udg_integer07=( udg_integer07 + 1 )
		call CreateNUnitsAtLoc(1, GetUnitTypeId(GroupPickRandomUnit(GetUnitsOfPlayerMatching(Player(8), Condition(function Trig_Player_Leaves_Func007Func003002001001002)))), GetTriggerPlayer(), GetRectCenter(udg_rects01[GetConvertedPlayerId(GetTriggerPlayer())]), bj_UNIT_FACING)
		call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffffcc00" + ( GetPlayerName(GetTriggerPlayer()) + ( " has randomed " + ( GetHeroProperName(GetLastCreatedUnit()) + "! (+5 bonus gold)" ) ) ) ))
		call AdjustPlayerStateBJ(5, GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD)
		call ResourseRefresh(GetTriggerPlayer())
		set udg_units01[GetConvertedPlayerId(GetTriggerPlayer())]=GetLastCreatedUnit()
		call UnitAddItemByIdSwapped('ankh', GetLastCreatedUnit())
		call UnitAddItemByIdSwapped('pghe', GetLastCreatedUnit())
		call ResetToGameCameraForPlayer(GetTriggerPlayer(), 0)
		call PanCameraToTimedLocForPlayer(GetTriggerPlayer(), GetRectCenter(udg_rects01[GetConvertedPlayerId(GetTriggerPlayer())]), 0.10)
		call SelectUnitForPlayerSingle(GetLastCreatedUnit(), GetTriggerPlayer())
		call TriggerSleepAction(2)
		call ResetToGameCameraForPlayer(GetTriggerPlayer(), 0)
	else
	endif
endfunction

function Trig_Spacebar_Point_Func001001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Spacebar_Point_Func001A takes nothing returns nothing
	call SetCameraQuickPositionLocForPlayer(GetOwningPlayer(GetEnumUnit()), GetUnitLoc(GetEnumUnit()))
endfunction

function Trig_Spacebar_Point_Actions takes nothing returns nothing
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Spacebar_Point_Func001001002)), function Trig_Spacebar_Point_Func001A)
endfunction

function Trig_Select_Game_Master_Func001Func001C takes nothing returns boolean
	if ( not ( GetPlayerController(ConvertedPlayer(GetForLoopIndexA())) == MAP_CONTROL_USER ) ) then
		return false
	endif
	if ( not ( GetPlayerSlotState(ConvertedPlayer(GetForLoopIndexA())) == PLAYER_SLOT_STATE_PLAYING ) ) then
		return false
	endif
	return true
endfunction

function Trig_Select_Game_Master_Actions takes nothing returns nothing
	set bj_forLoopAIndex=1
	set bj_forLoopAIndexEnd=8
	loop
		exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
		if ( Trig_Select_Game_Master_Func001Func001C() ) then
			set udg_player03=ConvertedPlayer(GetForLoopIndexA())
			exitwhen true
		else
		endif
		set bj_forLoopAIndex=bj_forLoopAIndex + 1
	endloop
endfunction

function Trig_Kick_Player_Command_Conditions takes nothing returns boolean
	if ( not ( GetTriggerPlayer() == udg_player03 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Kick_Player_Command_Func002001001001001 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force07) != true )
endfunction

function Trig_Kick_Player_Command_Func002001001001002 takes nothing returns boolean
	return ( GetFilterPlayer() != udg_player03 )
endfunction

function Trig_Kick_Player_Command_Func002001001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Kick_Player_Command_Func002001001001001(), Trig_Kick_Player_Command_Func002001001001002())
endfunction

function Trig_Kick_Player_Command_Func002001001002 takes nothing returns boolean
	return ( StringCase(GetPlayerName(GetFilterPlayer()), false) == StringCase(SubStringBJ(GetEventPlayerChatString(), 7, StringLength(GetEventPlayerChatString())), false) )
endfunction

function Trig_Kick_Player_Command_Func002001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Kick_Player_Command_Func002001001001(), Trig_Kick_Player_Command_Func002001001002())
endfunction

function Trig_Kick_Player_Command_Func002A takes nothing returns nothing
	set udg_boolean17=true
	call PlaySoundBJ(udg_sound04)
	call ForceAddPlayerSimple(GetEnumPlayer(), udg_force07)
	call CustomDefeatBJ(GetEnumPlayer(), "Kicked!")
	call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffffcc00" + ( GetPlayerName(GetEnumPlayer()) + " was kicked out of the game!|r" ) ))
endfunction

function Trig_Kick_Player_Command_Func003001 takes nothing returns boolean
	return ( udg_boolean17 == true )
endfunction

function Trig_Kick_Player_Command_Func004001001 takes nothing returns boolean
	return ( GetFilterPlayer() == GetTriggerPlayer() )
endfunction

function Trig_Kick_Player_Command_Actions takes nothing returns nothing
	set udg_boolean17=false
	call ForForce(GetPlayersMatching(Condition(function Trig_Kick_Player_Command_Func002001001)), function Trig_Kick_Player_Command_Func002A)
	if ( Trig_Kick_Player_Command_Func003001() ) then
		return
	else
		call DoNothing()
	endif
	call DisplayTimedTextToForce(GetPlayersMatching(Condition(function Trig_Kick_Player_Command_Func004001001)), 5.00, ( "|cffffcc00" + ( "Couldn't kick player \"" + ( SubStringBJ(GetEventPlayerChatString(), 7, StringLength(GetEventPlayerChatString())) + "\"|r" ) ) ))
endfunction

function Trig_Player_Selection_Camera_Func001001 takes nothing returns boolean
	return ( udg_boolean12 == true )
endfunction

function Trig_Player_Selection_Camera_Func002001001 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force01) != true )
endfunction

function Trig_Player_Selection_Camera_Func002A takes nothing returns nothing
	call CameraSetupApplyForPlayer(true, udg_camerasetup01, GetEnumPlayer(), 0.00)
endfunction

function Trig_Player_Selection_Camera_Actions takes nothing returns nothing
	if ( Trig_Player_Selection_Camera_Func001001() ) then
		call DisableTrigger(GetTriggeringTrigger())
	else
		call DoNothing()
	endif
	call ForForce(GetPlayersMatching(Condition(function Trig_Player_Selection_Camera_Func002001001)), function Trig_Player_Selection_Camera_Func002A)
endfunction

function Trig_PvP_Func002001002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_PvP_Func002001002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_PvP_Func002001002002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_PvP_Func002001002002002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_PvP_Func002001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Func002001002002002001(), Trig_PvP_Func002001002002002002())
endfunction

function Trig_PvP_Func002001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Func002001002002001(), Trig_PvP_Func002001002002002())
endfunction

function Trig_PvP_Func002001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Func002001002001(), Trig_PvP_Func002001002002())
endfunction

function Trig_PvP_Func002A takes nothing returns nothing
	call GroupAddUnitSimple(GetEnumUnit(), udg_group01)
endfunction

function Trig_PvP_Func004Func001Func001001 takes nothing returns boolean
	return ( udg_integer02 == 20 )
endfunction

function Trig_PvP_Func004Func001Func002001 takes nothing returns boolean
	return ( udg_integer02 == 30 )
endfunction

function Trig_PvP_Func004Func001Func003001 takes nothing returns boolean
	return ( udg_integer02 == 40 )
endfunction

function Trig_PvP_Func004Func001Func004001 takes nothing returns boolean
	return ( udg_integer02 == 10 )
endfunction

function Trig_PvP_Func004Func001Func005001 takes nothing returns boolean
	return ( udg_integer02 == 15 )
endfunction

function Trig_PvP_Func004Func001Func006001 takes nothing returns boolean
	return ( udg_integer02 == 20 )
endfunction

function Trig_PvP_Func004Func001C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_PvP_Func004Func002001 takes nothing returns boolean
	return ( udg_integer15 == 'I01D' )
endfunction

function Trig_PvP_Func004Func003001 takes nothing returns boolean
	return ( udg_integer15 == 'I01C' )
endfunction

function Trig_PvP_Func004Func004001 takes nothing returns boolean
	return ( udg_integer15 == 'I01E' )
endfunction

function Trig_PvP_Func004A takes nothing returns nothing
	if ( Trig_PvP_Func004Func001C() ) then
		if ( Trig_PvP_Func004Func001Func004001() ) then
			call AdjustPlayerStateBJ(200, GetOwningPlayer(GetEnumUnit()), PLAYER_STATE_RESOURCE_GOLD)
		else
			call DoNothing()
		endif
		if ( Trig_PvP_Func004Func001Func005001() ) then
			call AdjustPlayerStateBJ(400, GetOwningPlayer(GetEnumUnit()), PLAYER_STATE_RESOURCE_GOLD)
		else
			call DoNothing()
		endif
		if ( Trig_PvP_Func004Func001Func006001() ) then
			call AdjustPlayerStateBJ(800, GetOwningPlayer(GetEnumUnit()), PLAYER_STATE_RESOURCE_GOLD)
		else
			call DoNothing()
		endif
	else
		if ( Trig_PvP_Func004Func001Func001001() ) then
			call AdjustPlayerStateBJ(200, GetOwningPlayer(GetEnumUnit()), PLAYER_STATE_RESOURCE_GOLD)
		else
			call DoNothing()
		endif
		if ( Trig_PvP_Func004Func001Func002001() ) then
			call AdjustPlayerStateBJ(400, GetOwningPlayer(GetEnumUnit()), PLAYER_STATE_RESOURCE_GOLD)
		else
			call DoNothing()
		endif
		if ( Trig_PvP_Func004Func001Func003001() ) then
			call AdjustPlayerStateBJ(800, GetOwningPlayer(GetEnumUnit()), PLAYER_STATE_RESOURCE_GOLD)
		else
			call DoNothing()
		endif
	endif
	if ( Trig_PvP_Func004Func002001() ) then
		call AdjustPlayerStateBJ(1400, GetOwningPlayer(GetEnumUnit()), PLAYER_STATE_RESOURCE_GOLD)
	else
		call DoNothing()
	endif
	if ( Trig_PvP_Func004Func003001() ) then
		call AdjustPlayerStateBJ(1750, GetOwningPlayer(GetEnumUnit()), PLAYER_STATE_RESOURCE_GOLD)
	else
		call DoNothing()
	endif
	if ( Trig_PvP_Func004Func004001() ) then
		call AdjustPlayerStateBJ(2750, GetOwningPlayer(GetEnumUnit()), PLAYER_STATE_RESOURCE_GOLD)
	else
		call DoNothing()
	endif
	
	call ResourseRefresh(GetOwningPlayer(GetEnumUnit()))
endfunction

function Trig_PvP_Func007C takes nothing returns boolean
	if ( not ( udg_boolean07 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_PvP_Actions takes nothing returns nothing
	call TriggerSleepAction(5.00)
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_PvP_Func002001002)), function Trig_PvP_Func002A)
	call ForGroupBJ(udg_group03, function Trig_PvP_Func004A)
	call GroupClear(udg_group03)
	if ( Trig_PvP_Func007C() ) then
		call DisplayTextToForce(GetPlayersAll(), "|cffffcc00Death Match - Survive to advance to the next level!")
	else
	endif
	call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
	call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "PvP Battle")
	call StartTimerBJ(GetLastCreatedTimerBJ(), false, 15.00)
	call TriggerSleepAction(15.00)
	call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
	call ConditionalTriggerExecute(udg_trigger136)
endfunction

function Trig_End_PvP_Conditions takes nothing returns boolean
	if ( not ( IsUnitInGroup(GetTriggerUnit(), udg_group02) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func001C takes nothing returns boolean
	if ( not ( udg_units03[1] == GetTriggerUnit() ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func019A takes nothing returns nothing
	call PanCameraToTimedLocForPlayer(GetEnumPlayer(), GetRectCenter(udg_rect09), 0.20)
endfunction

function Trig_End_PvP_Func021Func001Func001C takes nothing returns boolean
	if ( not ( udg_units03[1] == udg_unit05 ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func021C takes nothing returns boolean
	if ( not ( udg_boolean07 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func024Func001A takes nothing returns nothing
	call RemoveItem(GetEnumItem())
endfunction

function Trig_End_PvP_Func026Func007001002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_End_PvP_Func026Func007001002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) == Player(11) )
endfunction

function Trig_End_PvP_Func026Func007001002002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_End_PvP_Func026Func007001002002002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_End_PvP_Func026Func007001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_End_PvP_Func026Func007001002002002001(), Trig_End_PvP_Func026Func007001002002002002())
endfunction

function Trig_End_PvP_Func026Func007001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_End_PvP_Func026Func007001002002001(), Trig_End_PvP_Func026Func007001002002002())
endfunction

function Trig_End_PvP_Func026Func007001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_End_PvP_Func026Func007001002001(), Trig_End_PvP_Func026Func007001002002())
endfunction

function Trig_End_PvP_Func026Func007A takes nothing returns nothing
	call SetUnitPositionLoc(GetEnumUnit(), GetRectCenter(udg_rect09))
endfunction

function Trig_End_PvP_Func026Func008Func003C takes nothing returns boolean
	if ( not ( CountUnitsInGroup(udg_group03) > 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func026Func008C takes nothing returns boolean
	if ( not ( udg_integer06 > 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func001Func001Func002001 takes nothing returns boolean
	return ( udg_integer14 == 1 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func001Func001Func003001 takes nothing returns boolean
	return ( udg_integer14 == 2 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func001Func001Func004001 takes nothing returns boolean
	return ( udg_integer14 == 3 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func001Func001Func005001 takes nothing returns boolean
	return ( udg_integer14 == 4 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func001Func001Func006001 takes nothing returns boolean
	return ( udg_integer14 == 5 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func001Func001C takes nothing returns boolean
	if ( not ( udg_integer02 == 40 ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func001Func003001 takes nothing returns boolean
	return ( udg_integer14 == 1 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func001Func004001 takes nothing returns boolean
	return ( udg_integer14 == 2 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func001Func005001 takes nothing returns boolean
	return ( udg_integer14 == 3 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func001Func006001 takes nothing returns boolean
	return ( udg_integer14 == 4 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func001C takes nothing returns boolean
	if ( not ( udg_integer02 == 30 ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func003001 takes nothing returns boolean
	return ( udg_integer14 == 1 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func004001 takes nothing returns boolean
	return ( udg_integer14 == 2 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func005001 takes nothing returns boolean
	return ( udg_integer14 == 3 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001Func006001 takes nothing returns boolean
	return ( udg_integer14 == 4 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func001C takes nothing returns boolean
	if ( not ( udg_integer02 == 20 ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func026Func016Func001Func003001 takes nothing returns boolean
	return ( udg_integer14 == 1 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func004001 takes nothing returns boolean
	return ( udg_integer14 == 2 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func005001 takes nothing returns boolean
	return ( udg_integer14 == 3 )
endfunction

function Trig_End_PvP_Func026Func016Func001Func006001 takes nothing returns boolean
	return ( udg_integer14 == 4 )
endfunction

function Trig_End_PvP_Func026Func016Func001C takes nothing returns boolean
	if ( not ( udg_integer02 == 10 ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func001Func001Func002001 takes nothing returns boolean
	return ( udg_integer14 == 1 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func001Func001Func003001 takes nothing returns boolean
	return ( udg_integer14 == 2 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func001Func001Func004001 takes nothing returns boolean
	return ( udg_integer14 == 3 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func001Func001Func005001 takes nothing returns boolean
	return ( udg_integer14 == 4 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func001Func001Func006001 takes nothing returns boolean
	return ( udg_integer14 == 5 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func001Func001C takes nothing returns boolean
	if ( not ( udg_integer02 == 20 ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func001Func003001 takes nothing returns boolean
	return ( udg_integer14 == 1 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func001Func004001 takes nothing returns boolean
	return ( udg_integer14 == 2 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func001Func005001 takes nothing returns boolean
	return ( udg_integer14 == 3 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func001Func006001 takes nothing returns boolean
	return ( udg_integer14 == 4 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func001C takes nothing returns boolean
	if ( not ( udg_integer02 == 15 ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func003001 takes nothing returns boolean
	return ( udg_integer14 == 1 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func004001 takes nothing returns boolean
	return ( udg_integer14 == 2 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func005001 takes nothing returns boolean
	return ( udg_integer14 == 3 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001Func006001 takes nothing returns boolean
	return ( udg_integer14 == 4 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func001C takes nothing returns boolean
	if ( not ( udg_integer02 == 10 ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func026Func016Func002Func003001 takes nothing returns boolean
	return ( udg_integer14 == 1 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func004001 takes nothing returns boolean
	return ( udg_integer14 == 2 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func005001 takes nothing returns boolean
	return ( udg_integer14 == 3 )
endfunction

function Trig_End_PvP_Func026Func016Func002Func006001 takes nothing returns boolean
	return ( udg_integer14 == 4 )
endfunction

function Trig_End_PvP_Func026Func016Func002C takes nothing returns boolean
	if ( not ( udg_integer02 == 5 ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func026Func016C takes nothing returns boolean
	if ( not ( udg_boolean08 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func026Func018Func002A takes nothing returns nothing
	call AddSpecialEffectTargetUnitBJ("origin", GetEnumUnit(), "Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl")
	call DestroyEffectBJ(GetLastCreatedEffectBJ())
endfunction

function Trig_End_PvP_Func026Func018C takes nothing returns boolean
	if ( not ( udg_boolean07 == false ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Func026C takes nothing returns boolean
	if ( not ( CountUnitsInGroup(udg_group01) == 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_End_PvP_Actions takes nothing returns nothing
	if ( Trig_End_PvP_Func001C() ) then
		set udg_unit05=udg_units03[2]
	else
		set udg_unit05=udg_units03[1]
	endif
	call DisableTrigger(udg_trigger140)
	call DisableTrigger(udg_trigger141)
	call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffffcc00" + ( GetPlayerName(GetOwningPlayer(udg_unit05)) + ( " has defeated " + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + "!!" ) ) ) ))
	call SetUnitInvulnerable(udg_unit05, true)
	call TriggerSleepAction(4.00)
	call GroupAddUnitSimple(udg_unit05, udg_group03)
	call FunWinner(udg_unit05)
	call GroupRemoveUnitSimple(GetDyingUnit(), udg_group03)
	call GroupRemoveUnitSimple(udg_unit05, udg_group02)
	call GroupRemoveUnitSimple(GetDyingUnit(), udg_group02)
	call SetPlayerAllianceStateBJ(GetOwningPlayer(udg_units03[1]), GetOwningPlayer(udg_units03[2]), bj_ALLIANCE_UNALLIED_VISION)
	call SetPlayerAllianceStateBJ(GetOwningPlayer(udg_units03[2]), GetOwningPlayer(udg_units03[1]), bj_ALLIANCE_UNALLIED_VISION)
	call ForForce(GetPlayersAll(), function Trig_End_PvP_Func019A)
	call SetUnitPositionLoc(udg_unit05, GetRectCenter(udg_rect09))
	if ( Trig_End_PvP_Func021C() ) then
		call ReviveHeroLoc(GetDyingUnit(), GetRectCenter(udg_rect09), true)
		set udg_integer32=1
		loop
			exitwhen udg_integer32 > 6
			call RemoveItem(UnitItemInSlotBJ(udg_units03[1], udg_integer32))
			call RemoveItem(UnitItemInSlotBJ(udg_units03[2], udg_integer32))
			call UnitAddItemByIdSwapped(udg_integers03[udg_integer32], udg_units03[1])
			call UnitDropItemSlotBJ(udg_units03[1], GetLastCreatedItem(), udg_integer32)
			call UnitAddItemByIdSwapped(udg_integers04[udg_integer32], udg_units03[2])
			call UnitDropItemSlotBJ(udg_units03[2], GetLastCreatedItem(), udg_integer32)
			set udg_integer32=udg_integer32 + 1
		endloop
	else
		set udg_integer32=1
		loop
			exitwhen udg_integer32 > 6
			if ( Trig_End_PvP_Func021Func001Func001C() ) then
				call RemoveItem(UnitItemInSlotBJ(udg_units03[1], udg_integer32))
				call UnitAddItemByIdSwapped(udg_integers03[udg_integer32], udg_units03[1])
				call UnitDropItemSlotBJ(udg_units03[1], GetLastCreatedItem(), udg_integer32)
			else
				call RemoveItem(UnitItemInSlotBJ(udg_units03[2], udg_integer32))
				call UnitAddItemByIdSwapped(udg_integers04[udg_integer32], udg_units03[2])
				call UnitDropItemSlotBJ(udg_units03[2], GetLastCreatedItem(), udg_integer32)
			endif
			set udg_integer32=udg_integer32 + 1
		endloop
	endif
	call ConditionalTriggerExecute(udg_trigger54)
	call ConditionalTriggerExecute(udg_trigger122)
	set udg_integer38=1
	loop
		exitwhen udg_integer38 > 8
		call EnumItemsInRectBJ(udg_rects01[udg_integer38], function Trig_End_PvP_Func024Func001A)
		set udg_integer38=udg_integer38 + 1
	endloop
	set udg_unit05=null
	if ( Trig_End_PvP_Func026C() ) then
		call TriggerSleepAction(2)
		call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_End_PvP_Func026Func007001002)), function Trig_End_PvP_Func026Func007A)
		if ( Trig_End_PvP_Func026Func008C() ) then
			if ( Trig_End_PvP_Func026Func008Func003C() ) then
				call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "|cffffcc00The PvP battles are over and all winners will receive a prize!|r")
			else
				call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "|cffffcc00The PvP battles are over and the winner will receive a prize!|r")
			endif
		else
			return
		endif
		set udg_integer41=( udg_integer41 + 1 )
		call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
		call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "Reward in ...")
		call StartTimerBJ(GetLastCreatedTimerBJ(), false, 10.00)
		call TriggerSleepAction(10.00)
		call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
		
		if ( Trig_End_PvP_Func026Func016C() ) then
			
		  set udg_integer15=ItemN1[GetRandomInt(( ( udg_integer02 / 5 ) - 1 ) * 4 - 1, ( ( udg_integer02 / 5 ) - 1 ) * 4 + 4)]
			
		else
		
		  set udg_integer15=ItemN1[GetRandomInt(( ( udg_integer02 / 5 ) - 1 ) * 4 + 1, ( ( udg_integer02 / 5 ) - 1 ) * 4 + 4)]
			
			
		endif
		
		
		
		if ( Trig_End_PvP_Func026Func018C() ) then
			call ForGroupBJ(udg_group03, function Trig_End_PvP_Func026Func018Func002A)
		else
		endif
		call PlaySoundBJ(udg_sound07)
		call ConditionalTriggerExecute(udg_trigger138)
		call CreateItemLoc(udg_integer15, GetRectCenter(GetPlayableMapRect()))
		call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( "|cffffcc00Prize: " + ( GetItemName(GetLastCreatedItem()) + "|r" ) ))
		call RemoveItem(GetLastCreatedItem())
		call ConditionalTriggerExecute(udg_trigger136)
	else
		call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
		call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "Next PvP Battle ...")
		call StartTimerBJ(GetLastCreatedTimerBJ(), false, 10.00)
		call TriggerSleepAction(10.00)
		call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
		call ConditionalTriggerExecute(udg_trigger136)
	endif
endfunction

function Trig_PvP_Battle_Func001Func001001 takes nothing returns boolean
	return ( IsTriggerEnabled(udg_trigger119) == false )
endfunction

function Trig_PvP_Battle_Func001Func008002001002001 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_PvP_Battle_Func001Func008002001002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_PvP_Battle_Func001Func008002001002002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_PvP_Battle_Func001Func008002001002002002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_PvP_Battle_Func001Func008002001002002002002002 takes nothing returns boolean
	return ( IsUnitInGroup(GetFilterUnit(), udg_group01) == true )
endfunction

function Trig_PvP_Battle_Func001Func008002001002002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func008002001002002002002001(), Trig_PvP_Battle_Func001Func008002001002002002002002())
endfunction

function Trig_PvP_Battle_Func001Func008002001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func008002001002002002001(), Trig_PvP_Battle_Func001Func008002001002002002002())
endfunction

function Trig_PvP_Battle_Func001Func008002001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func008002001002002001(), Trig_PvP_Battle_Func001Func008002001002002002())
endfunction

function Trig_PvP_Battle_Func001Func008002001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func008002001002001(), Trig_PvP_Battle_Func001Func008002001002002())
endfunction

function Trig_PvP_Battle_Func001Func010Func001002001002001 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_PvP_Battle_Func001Func010Func001002001002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_PvP_Battle_Func001Func010Func001002001002002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_PvP_Battle_Func001Func010Func001002001002002002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_PvP_Battle_Func001Func010Func001002001002002002002002 takes nothing returns boolean
	return ( IsUnitInGroup(GetFilterUnit(), udg_group03) == true )
endfunction

function Trig_PvP_Battle_Func001Func010Func001002001002002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func010Func001002001002002002002001(), Trig_PvP_Battle_Func001Func010Func001002001002002002002002())
endfunction

function Trig_PvP_Battle_Func001Func010Func001002001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func010Func001002001002002002001(), Trig_PvP_Battle_Func001Func010Func001002001002002002002())
endfunction

function Trig_PvP_Battle_Func001Func010Func001002001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func010Func001002001002002001(), Trig_PvP_Battle_Func001Func010Func001002001002002002())
endfunction

function Trig_PvP_Battle_Func001Func010Func001002001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func010Func001002001002001(), Trig_PvP_Battle_Func001Func010Func001002001002002())
endfunction

function Trig_PvP_Battle_Func001Func010Func003002001002001 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_PvP_Battle_Func001Func010Func003002001002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_PvP_Battle_Func001Func010Func003002001002002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_PvP_Battle_Func001Func010Func003002001002002002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_PvP_Battle_Func001Func010Func003002001002002002002002 takes nothing returns boolean
	return ( IsUnitInGroup(GetFilterUnit(), udg_group01) == true )
endfunction

function Trig_PvP_Battle_Func001Func010Func003002001002002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func010Func003002001002002002002001(), Trig_PvP_Battle_Func001Func010Func003002001002002002002002())
endfunction

function Trig_PvP_Battle_Func001Func010Func003002001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func010Func003002001002002002001(), Trig_PvP_Battle_Func001Func010Func003002001002002002002())
endfunction

function Trig_PvP_Battle_Func001Func010Func003002001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func010Func003002001002002001(), Trig_PvP_Battle_Func001Func010Func003002001002002002())
endfunction

function Trig_PvP_Battle_Func001Func010Func003002001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func010Func003002001002001(), Trig_PvP_Battle_Func001Func010Func003002001002002())
endfunction

function Trig_PvP_Battle_Func001Func010C takes nothing returns boolean
	if ( not ( CountUnitsInGroup(udg_group01) >= 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_PvP_Battle_Func001Func017A takes nothing returns nothing
	call PanCameraToTimedLocForPlayer(GetEnumPlayer(), GetRectCenter(udg_rects01[udg_integer14]), 0.20)
endfunction

function Trig_PvP_Battle_Func001Func018001002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_PvP_Battle_Func001Func018001002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) != true )
endfunction

function Trig_PvP_Battle_Func001Func018001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func018001002001(), Trig_PvP_Battle_Func001Func018001002002())
endfunction

function Trig_PvP_Battle_Func001Func018Func001001 takes nothing returns boolean
	return ( GetUnitTypeId(GetEnumUnit()) == 'hphx' )
endfunction

function Trig_PvP_Battle_Func001Func018A takes nothing returns nothing
	if ( Trig_PvP_Battle_Func001Func018Func001001() ) then
		call DeleteUnit(GetEnumUnit())
	else
		call DoNothing()
	endif
	call ExplodeUnitBJ(GetEnumUnit())
endfunction

function Trig_PvP_Battle_Func001Func019A takes nothing returns nothing
	call RemoveItem(GetEnumItem())
endfunction

function Trig_PvP_Battle_Func001Func031Func003Func001C takes nothing returns boolean
	if ( not ( GetForLoopIndexA() == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_PvP_Battle_Func001Func031Func006001001001 takes nothing returns boolean
	return ( GetOwningPlayer(udg_units03[1]) != GetFilterPlayer() )
endfunction

function Trig_PvP_Battle_Func001Func031Func006001001002001 takes nothing returns boolean
	return ( GetOwningPlayer(udg_units03[2]) != GetFilterPlayer() )
endfunction

function Trig_PvP_Battle_Func001Func031Func006001001002002 takes nothing returns boolean
	return ( IsPlayerInForce(GetFilterPlayer(), udg_force02) != true )
endfunction

function Trig_PvP_Battle_Func001Func031Func006001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func031Func006001001002001(), Trig_PvP_Battle_Func001Func031Func006001001002002())
endfunction

function Trig_PvP_Battle_Func001Func031Func006001001 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_Battle_Func001Func031Func006001001001(), Trig_PvP_Battle_Func001Func031Func006001001002())
endfunction

function Trig_PvP_Battle_Func001Func031Func006Func001Func001C takes nothing returns boolean
	if ( ( GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD) > 0 ) ) then
		return true
	endif
	if ( ( GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_LUMBER) > 0 ) ) then
		return true
	endif
	return false
endfunction

function Trig_PvP_Battle_Func001Func031Func006Func001C takes nothing returns boolean
	if ( not Trig_PvP_Battle_Func001Func031Func006Func001Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_PvP_Battle_Func001Func031Func006A takes nothing returns nothing
	if ( Trig_PvP_Battle_Func001Func031Func006Func001C() ) then
		call DialogDisplayBJ(true, udg_dialogs01[1], GetEnumPlayer())
	else
	endif
endfunction

function Trig_PvP_Battle_Func001Func031C takes nothing returns boolean
	if ( not ( udg_boolean13 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_PvP_Battle_Func001Func041A takes nothing returns nothing
	set bj_forLoopAIndex=1
	set bj_forLoopAIndexEnd=3
	loop
		exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
		call DialogDisplayBJ(false, udg_dialogs01[GetForLoopIndexA()], GetEnumPlayer())
		set bj_forLoopAIndex=bj_forLoopAIndex + 1
	endloop
endfunction

function Trig_PvP_Battle_Func001C takes nothing returns boolean
	if ( not ( CountUnitsInGroup(udg_group01) >= 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_PvP_Battle_Actions takes nothing returns nothing
	if ( Trig_PvP_Battle_Func001C() ) then
		set udg_units03[1]=GroupPickRandomUnit(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_PvP_Battle_Func001Func008002001002)))
		call GroupRemoveUnitSimple(udg_units03[1], udg_group01)
		if ( Trig_PvP_Battle_Func001Func010C() ) then
			set udg_units03[2]=GroupPickRandomUnit(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_PvP_Battle_Func001Func010Func003002001002)))
		else
			set udg_units03[2]=GroupPickRandomUnit(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_PvP_Battle_Func001Func010Func001002001002)))
		endif
		call GroupRemoveUnitSimple(udg_units03[2], udg_group01)
		call PlaySoundBJ(udg_sound08)
		call DisplayTextToForce(GetPlayersAll(), ( "|cffffcc00PvP Battle: " + ( GetPlayerName(GetOwningPlayer(udg_units03[1])) + ( " Versus " + ( GetPlayerName(GetOwningPlayer(udg_units03[2])) + "!!" ) ) ) ))
		set udg_integer14=GetRandomInt(1, 8)
		call ForForce(GetPlayersAll(), function Trig_PvP_Battle_Func001Func017A)
		call ForGroupBJ(GetUnitsInRectMatching(udg_rects01[udg_integer14], Condition(function Trig_PvP_Battle_Func001Func018001002)), function Trig_PvP_Battle_Func001Func018A)
		call EnumItemsInRectBJ(udg_rects01[udg_integer14], function Trig_PvP_Battle_Func001Func019A)
		set udg_location01=OffsetLocation(GetRectCenter(udg_rects01[udg_integer14]), - 40.00, - 50.00)
		call SetUnitPositionLocFacingLocBJ(udg_units03[1], OffsetLocation(GetRectCenter(udg_rects01[udg_integer14]), - 500.00, 0), GetRectCenter(udg_rects01[udg_integer14]))
		call SetUnitPositionLocFacingLocBJ(udg_units03[2], OffsetLocation(GetRectCenter(udg_rects01[udg_integer14]), 500.00, 0), GetRectCenter(udg_rects01[udg_integer14]))
		set bj_forLoopAIndex=1
		set bj_forLoopAIndexEnd=2
		loop
			exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
			call PauseUnitBJ(true, udg_units03[GetForLoopIndexA()])
			call SelectUnitForPlayerSingle(udg_units03[GetForLoopIndexA()], GetOwningPlayer(udg_units03[GetForLoopIndexA()]))
			set udg_unit01=udg_units03[GetForLoopIndexA()]
			call ConditionalTriggerExecute(udg_trigger82)
			call GroupAddUnitSimple(udg_units03[GetForLoopIndexA()], udg_group02)
			set bj_forLoopAIndex=bj_forLoopAIndex + 1
		endloop
		call SetPlayerAllianceStateBJ(GetOwningPlayer(udg_units03[1]), GetOwningPlayer(udg_units03[2]), bj_ALLIANCE_UNALLIED)
		call SetPlayerAllianceStateBJ(GetOwningPlayer(udg_units03[2]), GetOwningPlayer(udg_units03[1]), bj_ALLIANCE_UNALLIED)
		set udg_integer33=1
		loop
			exitwhen udg_integer33 > 6
			set udg_integers03[udg_integer33]=GetItemTypeId(UnitItemInSlotBJ(udg_units03[1], udg_integer33))
			set udg_integers04[udg_integer33]=GetItemTypeId(UnitItemInSlotBJ(udg_units03[2], udg_integer33))
			set udg_integer33=udg_integer33 + 1
		endloop
		call TriggerSleepAction(0.20)
		set udg_boolean18=true
		if ( Trig_PvP_Battle_Func001Func031C() ) then
			call DialogClearBJ(udg_dialogs01[1])
			call DialogSetMessageBJ(udg_dialogs01[1], "Betting Menu")
			set bj_forLoopAIndex=1
			set bj_forLoopAIndexEnd=2
			loop
				exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
				if ( Trig_PvP_Battle_Func001Func031Func003Func001C() ) then
					call DialogAddButtonBJ(udg_dialogs01[1], ( "<< " + ( GetPlayerName(GetOwningPlayer(udg_units03[GetForLoopIndexA()])) + "   " ) ))
				else
					call DialogAddButtonBJ(udg_dialogs01[1], ( "   " + ( GetPlayerName(GetOwningPlayer(udg_units03[GetForLoopIndexA()])) + " >>" ) ))
				endif
				set udg_buttons02[GetForLoopIndexA()]=GetLastCreatedButtonBJ()
				set bj_forLoopAIndex=bj_forLoopAIndex + 1
			endloop
			call DialogAddButtonBJ(udg_dialogs01[1], "Skip")
			set udg_buttons02[3]=GetLastCreatedButtonBJ()
			call ForForce(GetPlayersMatching(Condition(function Trig_PvP_Battle_Func001Func031Func006001001)), function Trig_PvP_Battle_Func001Func031Func006A)
		else
		endif
		call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
		call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "Prepare ...")
		call StartTimerBJ(GetLastCreatedTimerBJ(), false, 10.00)
		call TriggerSleepAction(4.50)
		set udg_integer19=5
		call ConditionalTriggerExecute(udg_trigger117)
		call TriggerSleepAction(5.50)
		set udg_boolean18=false
		call ForForce(GetPlayersAll(), function Trig_PvP_Battle_Func001Func041A)
		call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
		set udg_integer39=0
		set udg_real03=100.00
		call EnableTrigger(udg_trigger140)
		call EnableTrigger(udg_trigger141)
		call PlaySoundBJ(udg_sound15)
		set bj_forLoopAIndex=1
		set bj_forLoopAIndexEnd=2
		loop
			exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
			call SetUnitInvulnerable(udg_units03[GetForLoopIndexA()], false)
		    call StartFunctionSpell(udg_units03[GetForLoopIndexA()] , 4)
			call PauseUnitBJ(false, udg_units03[GetForLoopIndexA()])
			set bj_forLoopAIndex=bj_forLoopAIndex + 1
		endloop
	else
		if ( Trig_PvP_Battle_Func001Func001001() ) then
			return
		else
			call DoNothing()
		endif
		call ConditionalTriggerExecute(udg_trigger103)
		call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "Next Level ...")
		call StartTimerBJ(GetLastCreatedTimerBJ(), false, 30)
		call TriggerSleepAction(30.00)
		call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
		call TriggerExecute(udg_trigger109)
	endif
endfunction

function Trig_PvP_No_Player_Func001Func001001002001001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_PvP_No_Player_Func001Func001001002001002 takes nothing returns boolean
	return ( IsUnitInGroup(GetFilterUnit(), udg_group02) == true )
endfunction

function Trig_PvP_No_Player_Func001Func001001002001 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_No_Player_Func001Func001001002001001(), Trig_PvP_No_Player_Func001Func001001002001002())
endfunction

function Trig_PvP_No_Player_Func001Func001001002002001 takes nothing returns boolean
	return ( GetPlayerSlotState(GetOwningPlayer(GetFilterUnit())) != PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_PvP_No_Player_Func001Func001001002002002 takes nothing returns boolean
	return ( GetPlayerController(GetOwningPlayer(GetFilterUnit())) == MAP_CONTROL_COMPUTER )
endfunction

function Trig_PvP_No_Player_Func001Func001001002002 takes nothing returns boolean
	return GetBooleanOr(Trig_PvP_No_Player_Func001Func001001002002001(), Trig_PvP_No_Player_Func001Func001001002002002())
endfunction

function Trig_PvP_No_Player_Func001Func001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_PvP_No_Player_Func001Func001001002001(), Trig_PvP_No_Player_Func001Func001001002002())
endfunction

function Trig_PvP_No_Player_Func001Func001Func001C takes nothing returns boolean
	if ( not ( RectContainsUnit(udg_rects01[udg_integer45], GetEnumUnit()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_PvP_No_Player_Func001Func001A takes nothing returns nothing
	if ( Trig_PvP_No_Player_Func001Func001Func001C() ) then
		call IssuePointOrderLocBJ(GetEnumUnit(), "attack", GetRandomLocInRect(udg_rects01[udg_integer45]))
	else
	endif
endfunction

function Trig_PvP_No_Player_Actions takes nothing returns nothing
	set udg_integer45=1
	loop
		exitwhen udg_integer45 > 8
		call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_PvP_No_Player_Func001Func001001002)), function Trig_PvP_No_Player_Func001Func001A)
		set udg_integer45=udg_integer45 + 1
	endloop
endfunction

function Trig_Receive_Prize_Conditions takes nothing returns boolean
	if ( not ( CountUnitsInGroup(udg_group03) > 0 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Receive_Prize_Func002Func002Func001C takes nothing returns boolean
	if ( not ( UnitItemInSlotBJ(GetEnumUnit(), udg_integer34) == null ) ) then
		return false
	endif
	return true
endfunction

function Trig_Receive_Prize_Func002Func003Func001C takes nothing returns boolean
	if ( not ( udg_integer56 > 0 ) ) then
		return false
	endif
	if ( not ( IsUnitAliveBJ(GetEnumUnit()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Receive_Prize_Func002Func003C takes nothing returns boolean
	if ( not Trig_Receive_Prize_Func002Func003Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Receive_Prize_Func002A takes nothing returns nothing
	set udg_integer56=0
	set udg_integer34=1
	loop
		exitwhen udg_integer34 > 6
		if ( Trig_Receive_Prize_Func002Func002Func001C() ) then
			set udg_integer56=( udg_integer56 + 1 )
		else
		endif
		set udg_integer34=udg_integer34 + 1
	endloop
	if ( Trig_Receive_Prize_Func002Func003C() ) then
		call UnitAddItemByIdSwapped(udg_integer15, GetEnumUnit())
		call GroupRemoveUnitSimple(GetEnumUnit(), udg_group03)
	else
	endif
endfunction

function Trig_Receive_Prize_Actions takes nothing returns nothing
	call ForGroupBJ(udg_group03, function Trig_Receive_Prize_Func002A)
	call TriggerSleepAction(0.50)
	call ConditionalTriggerExecute(GetTriggeringTrigger())
endfunction

function Trig_Drop_Prize_Item_Conditions takes nothing returns boolean
	if ( not ( IsItemOwned(GetManipulatedItem()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Drop_Prize_Item_Func001C takes nothing returns boolean
	if ( not ( udg_items01[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] == GetManipulatedItem() ) ) then
		return false
	endif
	return true
endfunction

function Trig_Drop_Prize_Item_Actions takes nothing returns nothing
	if ( Trig_Drop_Prize_Item_Func001C() ) then
		call UnitDropItemPointLoc(GetTriggerUnit(), GetManipulatedItem(), GetUnitLoc(GetTriggerUnit()))
		call UnitAddItemByIdSwapped(GetItemTypeId(GetManipulatedItem()), GetTriggerUnit())
		call RemoveItem(GetManipulatedItem())
	else
		call UnitDropItemPointLoc(GetTriggerUnit(), GetManipulatedItem(), GetUnitLoc(GetTriggerUnit()))
	endif
endfunction

function Trig_Sudden_Death_Damage_PvP_Conditions takes nothing returns boolean
	if ( not ( IsTriggerEnabled(udg_trigger141) == true ) ) then
		return false
	endif
	if ( not ( udg_real03 > 2.00 ) ) then
		return false
	endif
	if ( not ( udg_integer39 >= 240 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Sudden_Death_Damage_PvP_Actions takes nothing returns nothing
	set udg_real03=( udg_real03 - 1 )
endfunction

function Trig_Sudden_Death_Timer_PvP_Func002C takes nothing returns boolean
	if ( not ( udg_integer39 >= 240 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Sudden_Death_Timer_PvP_Actions takes nothing returns nothing
	set udg_integer39=( udg_integer39 + 1 )
	if ( Trig_Sudden_Death_Timer_PvP_Func002C() ) then
		call DisableTrigger(udg_trigger11)
		call DisableTrigger(udg_trigger26)
		call CreateNUnitsAtLoc(1, 'n00V', GetOwningPlayer(udg_units03[1]), GetUnitLoc(udg_units03[1]), bj_UNIT_FACING)
		call UnitApplyTimedLifeBJ(0.25, 'BTLF', GetLastCreatedUnit())
		call UnitDamageTargetBJ(GetLastCreatedUnit(), udg_units03[2], ( GetUnitStateSwap(UNIT_STATE_MAX_LIFE, udg_units03[2]) / udg_real03 ), ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL)
		call CreateNUnitsAtLoc(1, 'n00V', GetOwningPlayer(udg_units03[2]), GetUnitLoc(udg_units03[2]), bj_UNIT_FACING)
		call UnitApplyTimedLifeBJ(0.25, 'BTLF', GetLastCreatedUnit())
		call UnitDamageTargetBJ(GetLastCreatedUnit(), udg_units03[1], ( GetUnitStateSwap(UNIT_STATE_MAX_LIFE, udg_units03[1]) / udg_real03 ), ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL)
		call EnableTrigger(udg_trigger11)
		call EnableTrigger(udg_trigger26)
	else
	endif
endfunction

function Trig_Enter_Center_Conditions takes nothing returns boolean
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Enter_Center_Actions takes nothing returns nothing
	call SetUnitInvulnerable(GetTriggerUnit(), true)
	call SetUnitLifePercentBJ(GetTriggerUnit(), 100)
	call SetUnitManaPercentBJ(GetTriggerUnit(), 100)
	call UnitResetCooldown(GetTriggerUnit())
	set udg_unit01=GetTriggerUnit()
	call ConditionalTriggerExecute(udg_trigger82)
	call TriggerSleepAction(4.00)
	set udg_unit01=GetTriggerUnit()
	call ConditionalTriggerExecute(udg_trigger82)
endfunction

function Trig_Enter_Shop_Mode_Conditions takes nothing returns boolean
	if ( not ( IsTriggerEnabled(GetTriggeringTrigger()) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Enter_Shop_Mode_Func036001002001 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == true )
endfunction

function Trig_Enter_Shop_Mode_Func036001002002 takes nothing returns boolean
	return ( GetUnitTypeId(GetFilterUnit()) != 'ncop' )
endfunction

function Trig_Enter_Shop_Mode_Func036001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Enter_Shop_Mode_Func036001002001(), Trig_Enter_Shop_Mode_Func036001002002())
endfunction

function Trig_Enter_Shop_Mode_Func036A takes nothing returns nothing
	call ShowUnitShow(GetEnumUnit())
endfunction

function Trig_Enter_Shop_Mode_Func039A takes nothing returns nothing
	call DeleteUnit(GetEnumUnit())
endfunction

function Trig_Enter_Shop_Mode_Actions takes nothing returns nothing
	call DisableTrigger(GetTriggeringTrigger())
	call DisableTrigger(udg_trigger78)
	call DeleteUnit(udg_unit33)
	call DeleteUnit(udg_unit25)
	call DeleteUnit(udg_unit24)
	call DeleteUnit(udg_unit23)
	call DeleteUnit(udg_unit22)
	call DeleteUnit(udg_unit34)
	call DeleteUnit(udg_unit26)
	call DeleteUnit(udg_unit08)
	call DeleteUnit(udg_unit09)
	call DeleteUnit(udg_unit10)
	call DeleteUnit(udg_unit21)
	call DeleteUnit(udg_unit31)
	call DeleteUnit(udg_unit27)
	call DeleteUnit(udg_unit07)
	call DeleteUnit(udg_unit06)
	call DeleteUnit(udg_unit11)
	call DeleteUnit(udg_unit20)
	call DeleteUnit(udg_unit32)
	call DeleteUnit(udg_unit28)
	call DeleteUnit(udg_unit14)
	call DeleteUnit(udg_unit13)
	call DeleteUnit(udg_unit12)
	call DeleteUnit(udg_unit19)
	call DeleteUnit(udg_unit29)
	call DeleteUnit(udg_unit15)
	call DeleteUnit(udg_unit16)
	call DeleteUnit(udg_unit17)
	call DeleteUnit(udg_unit18)
	call DeleteUnit(udg_unit30)
	call DeleteUnit(CicrleUnit[0])
	call DeleteUnit(CicrleUnit[1])
	call DeleteUnit(CicrleUnit[2])
	call DeleteUnit(CicrleUnit[3])
	call DeleteUnit(CicrleUnit[4])
	call DeleteUnit(CicrleUnit[5])
	call DeleteUnit(CicrleUnit[6])
	call DeleteUnit(CicrleUnit[7])
	call DeleteUnit(CicrleUnit[8])
	call DeleteUnit(CicrleUnit[9])
	call DeleteUnit(CicrleUnit[10])
	call DeleteUnit(CicrleUnit[11])
	call DeleteUnit(CicrleUnit[12])
	call DeleteUnit(CicrleUnit[13])
	call DeleteUnit(CicrleUnit[14])
	call DeleteUnit(CicrleUnit[15])
	call DeleteUnit(CicrleUnit[16])
	call DeleteUnit(CicrleUnit[17])
	call DeleteUnit(CicrleUnit[18])
    call DeleteUnit(CicrleUnit[19])
    call DeleteUnit(CicrleUnit[20])
	call ForGroupBJ(GetUnitsOfPlayerMatching(Player(PLAYER_NEUTRAL_PASSIVE), Condition(function Trig_Enter_Shop_Mode_Func036001002)), function Trig_Enter_Shop_Mode_Func036A)
	call TriggerSleepAction(0.00)
	call ForGroupBJ(GetUnitsOfPlayerAll(Player(8)), function Trig_Enter_Shop_Mode_Func039A)
	call EnableTrigger(udg_trigger123)
	call EnableTrigger(udg_trigger127)
	call EnableTrigger(udg_trigger132)
endfunction

function Trig_Remove_Power_Ups_Conditions takes nothing returns boolean
	if ( not ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_POWERUP ) ) then
		return false
	endif
	return true
endfunction

function Trig_Remove_Power_Ups_Actions takes nothing returns nothing
	call RemoveItem(GetManipulatedItem())
endfunction

function Trig_Remove_Units_From_Center_Func001C takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'n00V' ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h015' ) ) then
		return false
	endif
    if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h014' ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'n00E' ) ) then
		return false
	endif
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) != true ) ) then
		return false
	endif
	if ( not ( IsUnitIdType(GetUnitTypeId(GetTriggerUnit()), UNIT_TYPE_HERO) != true ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'e001' ) ) then
		return false
	endif
	if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'e003' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Remove_Units_From_Center_Conditions takes nothing returns boolean
	if ( not Trig_Remove_Units_From_Center_Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Remove_Units_From_Center_Func003001 takes nothing returns boolean
	return ( GetUnitTypeId(GetTriggerUnit()) == 'hphx' )
endfunction

function Trig_Remove_Units_From_Center_Actions takes nothing returns nothing
	call TriggerSleepAction(0.00)
	if ( Trig_Remove_Units_From_Center_Func003001() ) then
		call DeleteUnit(GetTriggerUnit())
	else
		call DoNothing()
	endif
	call KillUnit(GetTriggerUnit())
endfunction

function Trig_Update_Items_Func001Func001C takes nothing returns boolean
	if ( ( udg_boolean04 == true ) ) then
		return true
	endif
	if ( ( udg_boolean08 == true ) ) then
		return true
	endif
	return false
endfunction

function Trig_Update_Items_Func001Func002Func001Func001A takes nothing returns nothing
	call ReplaceUnitBJ(GetEnumUnit(), 'n017', bj_UNIT_STATE_METHOD_RELATIVE)
endfunction

function Trig_Update_Items_Func001Func002Func001C takes nothing returns boolean
	if ( not ( udg_integer02 == 10 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Update_Items_Func001Func002Func002A takes nothing returns nothing
	call ReplaceUnitBJ(GetEnumUnit(), 'n00Z', bj_UNIT_STATE_METHOD_RELATIVE)
endfunction

function Trig_Update_Items_Func001Func002Func003A takes nothing returns nothing
	call ReplaceUnitBJ(GetEnumUnit(), 'n01D', bj_UNIT_STATE_METHOD_RELATIVE)
endfunction

function Trig_Update_Items_Func001Func002C takes nothing returns boolean
	if ( not ( udg_integer02 == 5 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Update_Items_Func001Func003Func001Func001A takes nothing returns nothing
	call ReplaceUnitBJ(GetEnumUnit(), 'n017', bj_UNIT_STATE_METHOD_RELATIVE)
endfunction

function Trig_Update_Items_Func001Func003Func001C takes nothing returns boolean
	if ( not ( udg_integer02 == 20 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Update_Items_Func001Func003Func002A takes nothing returns nothing
	call ReplaceUnitBJ(GetEnumUnit(), 'n00Z', bj_UNIT_STATE_METHOD_RELATIVE)
endfunction

function Trig_Update_Items_Func001Func003Func003A takes nothing returns nothing
	call ReplaceUnitBJ(GetEnumUnit(), 'n01D', bj_UNIT_STATE_METHOD_RELATIVE)
endfunction

function Trig_Update_Items_Func001Func003C takes nothing returns boolean
	if ( not ( udg_integer02 == 10 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Update_Items_Func001C takes nothing returns boolean
	if ( not Trig_Update_Items_Func001Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Update_Items_Actions takes nothing returns nothing
	if ( Trig_Update_Items_Func001C() ) then
		if ( Trig_Update_Items_Func001Func002C() ) then
			call ForGroupBJ(GetUnitsOfTypeIdAll('n00A'), function Trig_Update_Items_Func001Func002Func002A)
			call ForGroupBJ(GetUnitsOfTypeIdAll('n00M'), function Trig_Update_Items_Func001Func002Func003A)
		else
			if ( Trig_Update_Items_Func001Func002Func001C() ) then
				call ForGroupBJ(GetUnitsOfTypeIdAll('n004'), function Trig_Update_Items_Func001Func002Func001Func001A)
			else
			endif
		endif
	else
		if ( Trig_Update_Items_Func001Func003C() ) then
			call ForGroupBJ(GetUnitsOfTypeIdAll('n00A'), function Trig_Update_Items_Func001Func003Func002A)
			call ForGroupBJ(GetUnitsOfTypeIdAll('n00M'), function Trig_Update_Items_Func001Func003Func003A)
		else
			if ( Trig_Update_Items_Func001Func003Func001C() ) then
				call ForGroupBJ(GetUnitsOfTypeIdAll('n004'), function Trig_Update_Items_Func001Func003Func001Func001A)
			else
			endif
		endif
	endif
endfunction

function Trig_Hide_Shops_Func002001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == true )
endfunction

function Trig_Hide_Shops_Func002A takes nothing returns nothing
	set udg_integer35=( udg_integer35 + 1 )
	set udg_locations01[udg_integer35]=GetUnitLoc(GetEnumUnit())
	set udg_integers10[udg_integer35]=GetUnitTypeId(GetEnumUnit())
	call SetUnitPositionLoc(GetEnumUnit(), OffsetLocation(GetRectCenter(GetEntireMapRect()), 0, 1000000000.00))
	call DeleteUnit(GetEnumUnit())
endfunction

function Trig_Hide_Shops_Actions takes nothing returns nothing
	set udg_integer35=0
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Hide_Shops_Func002001002)), function Trig_Hide_Shops_Func002A)
endfunction

function Trig_Unhide_Shops_Func001Func001Func001Func002C takes nothing returns boolean
	if ( not ( udg_boolean05 != true ) ) then
		return false
	endif
	if ( not ( udg_integers10[udg_integer36] != 'n016' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Unhide_Shops_Func001Func001Func001C takes nothing returns boolean
	if ( ( udg_boolean05 == true ) ) then
		return true
	endif
	if ( Trig_Unhide_Shops_Func001Func001Func001Func002C() ) then
		return true
	endif
	return false
endfunction

function Trig_Unhide_Shops_Func001Func001Func003C takes nothing returns boolean
	if ( not ( GetUnitTypeId(GetLastCreatedUnit()) == 'n012' ) ) then
		return false
	endif
	return true
endfunction

function Trig_Unhide_Shops_Func001Func001C takes nothing returns boolean
	if ( not Trig_Unhide_Shops_Func001Func001Func001C() ) then
		return false
	endif
	return true
endfunction

function Trig_Unhide_Shops_Actions takes nothing returns nothing
	set udg_integer36=1
	loop
		exitwhen udg_integer36 > udg_integer35
		if ( Trig_Unhide_Shops_Func001Func001C() ) then
			call CreateNUnitsAtLoc(1, udg_integers10[udg_integer36], Player(PLAYER_NEUTRAL_PASSIVE), udg_locations01[udg_integer36], bj_UNIT_FACING)
			if ( Trig_Unhide_Shops_Func001Func001Func003C() ) then
				call TriggerRegisterUnitInRangeSimple(udg_trigger149, 300.00, GetLastCreatedUnit())
				set udg_unit04=GetLastCreatedUnit()
			else
			endif
		else
		endif
		set udg_integer36=udg_integer36 + 1
	endloop
endfunction

function Trig_Passive_Spells_II_Conditions takes nothing returns boolean
	if ( not ( IsUnitAliveBJ(GetTriggerUnit()) == true ) ) then
		return false
	endif
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
		return false
	endif
	if ( not ( IsUnitInGroup(GetTriggerUnit(), udg_group09) != true ) ) then
		return false
	endif
	if ( not ( IsUnitHiddenBJ(udg_unit04) != true ) ) then
		return false
	endif
	if ( not ( IsUnitVisible(udg_unit04, GetOwningPlayer(GetTriggerUnit())) == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Passive_Spells_II_Func001001003 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Passive_Spells_II_Func001A takes nothing returns nothing
	call GroupAddUnitSimple(GetEnumUnit(), udg_group09)
endfunction

function Trig_Passive_Spells_II_Actions takes nothing returns nothing
	call ForGroupBJ(GetUnitsInRangeOfLocMatching(512, GetUnitLoc(udg_unit04), Condition(function Trig_Passive_Spells_II_Func001001003)), function Trig_Passive_Spells_II_Func001A)
	call DisableTrigger(GetTriggeringTrigger())
	call CreateNUnitsAtLoc(1, 'n00E', GetOwningPlayer(GetTriggerUnit()), GetUnitLoc(udg_unit04), bj_UNIT_FACING)
	call UnitApplyTimedLifeBJ(4.00, 'BTLF', GetLastCreatedUnit())
	call SetUnitFlyHeightBJ(GetLastCreatedUnit(), 400.00, 0.00)
	call SetUnitFlyHeightBJ(GetLastCreatedUnit(), 200.00, 400.00)
	set udg_unit03=GetLastCreatedUnit()
	call TriggerSleepAction(6.00)
	call EnableTrigger(GetTriggeringTrigger())
endfunction

function Trig_Remove_HintEffect_Conditions takes nothing returns boolean
	if ( not ( GetTriggerUnit() == udg_unit03 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Remove_HintEffect_Actions takes nothing returns nothing
	call DeleteUnit(GetTriggerUnit())
endfunction

function Trig_Hero_Dies_Death_Match_PvP_Func019C takes nothing returns boolean
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetTriggerUnit()) != Player(8) ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetTriggerUnit()) != Player(11) ) ) then
		return false
	endif
	if ( not ( IsUnitInGroup(GetTriggerUnit(), udg_group02) == true ) ) then
		return false
	endif
	if ( not ( udg_boolean07 == true ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Death_Match_PvP_Conditions takes nothing returns boolean
	if ( not Trig_Hero_Dies_Death_Match_PvP_Func019C() ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Death_Match_PvP_Func008A takes nothing returns nothing
	call KillUnit(GetEnumUnit())
endfunction

function Trig_Hero_Dies_Death_Match_PvP_Func011C takes nothing returns boolean
	if ( not ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Death_Match_PvP_Actions takes nothing returns nothing
	call StopSoundBJ(udg_sound13, false)
	call PlaySoundBJ(udg_sound13)
	call ForceAddPlayerSimple(GetOwningPlayer(GetTriggerUnit()), udg_force02)
	set udg_integer06=( udg_integer06 - 1 )
	set udg_booleans02[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
	call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffC60000" + ( GetPlayerName(GetOwningPlayer(GetTriggerUnit())) + " was defeated!|r" ) ))
	call DisableTrigger(udg_trigger16)
	call ForGroupBJ(GetUnitsOfPlayerAll(GetOwningPlayer(GetTriggerUnit())), function Trig_Hero_Dies_Death_Match_PvP_Func008A)
	call EnableTrigger(udg_trigger16)
	if ( Trig_Hero_Dies_Death_Match_PvP_Func011C() ) then
		call DialogSetMessageBJ(udg_dialog04, "Defeat!")
		call DialogDisplayBJ(true, udg_dialog04, GetOwningPlayer(GetTriggerUnit()))
	else
		call CustomDefeatBJ(GetOwningPlayer(GetTriggerUnit()), "Defeat!")
	endif
	set udg_integer30=1
	loop
		exitwhen udg_integer30 > 5
		call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl")
		call DestroyEffectBJ(GetLastCreatedEffectBJ())
		call AddSpecialEffectTargetUnitBJ("chest", GetTriggerUnit(), "Objects\\Spawnmodels\\Orc\\OrcLargeDeathExplode\\OrcLargeDeathExplode.mdl")
		call DestroyEffectBJ(GetLastCreatedEffectBJ())
		call TriggerSleepAction(0.10)
		set udg_integer30=udg_integer30 + 1
	endloop
	call TriggerSleepAction(0.50)
	call StopSoundBJ(udg_sound13, true)
	call StopSoundBJ(udg_sound12, false)
	call PlaySoundBJ(udg_sound12)
endfunction

function Trig_Elimination_Func018Func001001002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_Elimination_Func018Func001001002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_Elimination_Func018Func001001002002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Elimination_Func018Func001001002002002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Elimination_Func018Func001001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Elimination_Func018Func001001002002002001(), Trig_Elimination_Func018Func001001002002002002())
endfunction

function Trig_Elimination_Func018Func001001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Elimination_Func018Func001001002002001(), Trig_Elimination_Func018Func001001002002002())
endfunction

function Trig_Elimination_Func018Func001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Elimination_Func018Func001001002001(), Trig_Elimination_Func018Func001001002002())
endfunction

function Trig_Elimination_Func018Func001A takes nothing returns nothing
	call SetPlayerAllianceStateBJ(GetOwningPlayer(GetEnumUnit()), ConvertedPlayer(udg_integer46), bj_ALLIANCE_UNALLIED)
endfunction

function Trig_Elimination_Func020001002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_Elimination_Func020001002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_Elimination_Func020001002002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Elimination_Func020001002002002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Elimination_Func020001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Elimination_Func020001002002002001(), Trig_Elimination_Func020001002002002002())
endfunction

function Trig_Elimination_Func020001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Elimination_Func020001002002001(), Trig_Elimination_Func020001002002002())
endfunction

function Trig_Elimination_Func020001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Elimination_Func020001002001(), Trig_Elimination_Func020001002002())
endfunction

function Trig_Elimination_Func020A takes nothing returns nothing
	set udg_integer29=( udg_integer29 + 1 )
	set udg_unit01=GetEnumUnit()
	call ConditionalTriggerExecute(udg_trigger82)
	call SetUnitPositionLocFacingLocBJ(GetEnumUnit(), PolarProjectionBJ(GetRectCenter(GetPlayableMapRect()), 750.00, ( ( ( I2R(GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))) - 1 ) * - 45.00 ) - 225.00 )), GetRectCenter(udg_rect09))
	call SelectUnitForPlayerSingle(GetEnumUnit(), GetOwningPlayer(GetEnumUnit()))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnumUnit()), GetUnitLoc(GetEnumUnit()), 0.50)
endfunction

function Trig_Elimination_Func021A takes nothing returns nothing
	call RemoveItem(GetEnumItem())
endfunction

function Trig_Elimination_Func036001002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_Elimination_Func036001002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_Elimination_Func036001002002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Elimination_Func036001002002002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Elimination_Func036001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Elimination_Func036001002002002001(), Trig_Elimination_Func036001002002002002())
endfunction

function Trig_Elimination_Func036001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Elimination_Func036001002002001(), Trig_Elimination_Func036001002002002())
endfunction

function Trig_Elimination_Func036001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Elimination_Func036001002001(), Trig_Elimination_Func036001002002())
endfunction

function Trig_Elimination_Func036A takes nothing returns nothing
	call SetUnitInvulnerable(GetEnumUnit(), false)
	
	 call StartFunctionSpell(GetEnumUnit() , 5)
endfunction

function Trig_Elimination_Func037C takes nothing returns boolean
	if ( not ( udg_integer29 == 1 ) ) then
		return false
	endif
	return true
endfunction

function Trig_Elimination_Actions takes nothing returns nothing
	call DisableTrigger(udg_trigger149)
	call KillUnit(udg_unit03)
	call TriggerSleepAction(5.00)
	call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
	call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "Elimination")
	call StartTimerBJ(GetLastCreatedTimerBJ(), false, 20.00)
	call StopMusicBJ(true)
	call TriggerSleepAction(2.00)
	call PlaySoundBJ(udg_sound16)
	call TriggerSleepAction(12.50)
	set udg_boolean03=true
	call DisplayTextToForce(GetPlayersAll(), "|cffffcc00Elimination - Survive to advance to the next level!")
	call PauseAllUnitsBJ(true)
	call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
	call ConditionalTriggerExecute(udg_trigger147)
	set udg_integer46=1
	loop
		exitwhen udg_integer46 > 8
		call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Elimination_Func018Func001001002)), function Trig_Elimination_Func018Func001A)
		set udg_integer46=udg_integer46 + 1
	endloop
	set udg_integer29=0
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Elimination_Func020001002)), function Trig_Elimination_Func020A)
	call EnumItemsInRectBJ(GetPlayableMapRect(), function Trig_Elimination_Func021A)
	call DisableTrigger(udg_trigger142)
	call DisableTrigger(udg_trigger145)
	call DisableTrigger(udg_trigger87)
	call DisableTrigger(udg_trigger80)
	call DisableTrigger(udg_trigger43)
	call EnableTrigger(udg_trigger153)
	call TriggerSleepAction(2)
	set udg_location01=OffsetLocation(GetRectCenter(GetPlayableMapRect()), - 40.00, - 50.00)
	set udg_integer19=5
	call ConditionalTriggerExecute(udg_trigger117)
	call TriggerSleepAction(5.00)
	call ResumeMusicBJ()
	call PlaySoundBJ(udg_sound15)
	call DisplayTimedTextToForce(GetPlayersAll(), 1.00, "|cffffcc00GO!!!|r")
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Elimination_Func036001002)), function Trig_Elimination_Func036A)
	if ( Trig_Elimination_Func037C() ) then
		set udg_integer06=1
		call ConditionalTriggerExecute(udg_trigger122)
	else
	endif
	call PauseAllUnitsBJ(false)
endfunction

function Trig_Hero_Dies_Elimination_Func039C takes nothing returns boolean
	if ( not ( udg_boolean03 == true ) ) then
		return false
	endif
	if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetTriggerUnit()) != Player(8) ) ) then
		return false
	endif
	if ( not ( GetOwningPlayer(GetTriggerUnit()) != Player(11) ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Elimination_Conditions takes nothing returns boolean
	if ( not Trig_Hero_Dies_Elimination_Func039C() ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Elimination_Func008A takes nothing returns nothing
	call KillUnit(GetEnumUnit())
endfunction

function Trig_Hero_Dies_Elimination_Func010001002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Hero_Dies_Elimination_Func010A takes nothing returns nothing
	call SetUnitInvulnerable(GetEnumUnit(), true)
endfunction

function Trig_Hero_Dies_Elimination_Func012C takes nothing returns boolean
	if ( not ( GetPlayerController(GetOwningPlayer(GetTriggerUnit())) == MAP_CONTROL_USER ) ) then
		return false
	endif
	return true
endfunction

function Trig_Hero_Dies_Elimination_Func018Func001001002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_Hero_Dies_Elimination_Func018Func001001002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_Hero_Dies_Elimination_Func018Func001001002002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Hero_Dies_Elimination_Func018Func001001002002002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Hero_Dies_Elimination_Func018Func001001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func018Func001001002002002001(), Trig_Hero_Dies_Elimination_Func018Func001001002002002002())
endfunction

function Trig_Hero_Dies_Elimination_Func018Func001001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func018Func001001002002001(), Trig_Hero_Dies_Elimination_Func018Func001001002002002())
endfunction

function Trig_Hero_Dies_Elimination_Func018Func001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func018Func001001002001(), Trig_Hero_Dies_Elimination_Func018Func001001002002())
endfunction

function Trig_Hero_Dies_Elimination_Func018Func001A takes nothing returns nothing
	call SetPlayerAllianceStateBJ(GetOwningPlayer(GetEnumUnit()), ConvertedPlayer(udg_integer47), bj_ALLIANCE_UNALLIED_VISION)
endfunction

function Trig_Hero_Dies_Elimination_Func021001 takes nothing returns boolean
	return ( udg_integer06 == 1 )
endfunction

function Trig_Hero_Dies_Elimination_Func030001002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_Hero_Dies_Elimination_Func030001002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_Hero_Dies_Elimination_Func030001002002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Hero_Dies_Elimination_Func030001002002002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Hero_Dies_Elimination_Func030001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func030001002002002001(), Trig_Hero_Dies_Elimination_Func030001002002002002())
endfunction

function Trig_Hero_Dies_Elimination_Func030001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func030001002002001(), Trig_Hero_Dies_Elimination_Func030001002002002())
endfunction

function Trig_Hero_Dies_Elimination_Func030001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func030001002001(), Trig_Hero_Dies_Elimination_Func030001002002())
endfunction

function Trig_Hero_Dies_Elimination_Func030A takes nothing returns nothing
	set udg_unit01=GetEnumUnit()
	call ConditionalTriggerExecute(udg_trigger82)
	call SetUnitPositionLoc(GetEnumUnit(), GetRectCenter(udg_rect09))
	call SelectUnitForPlayerSingle(GetEnumUnit(), GetOwningPlayer(GetEnumUnit()))
	call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetEnumUnit()), GetUnitLoc(GetEnumUnit()), 0.50)
	call SuspendHeroXPBJ(false, GetEnumUnit())
endfunction

function Trig_Hero_Dies_Elimination_Func031001002001001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_Hero_Dies_Elimination_Func031001002001002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_Hero_Dies_Elimination_Func031001002001002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Hero_Dies_Elimination_Func031001002001002002002001 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) != true )
endfunction

function Trig_Hero_Dies_Elimination_Func031001002001002002002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) != true )
endfunction

function Trig_Hero_Dies_Elimination_Func031001002001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func031001002001002002002001(), Trig_Hero_Dies_Elimination_Func031001002001002002002002())
endfunction

function Trig_Hero_Dies_Elimination_Func031001002001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func031001002001002002001(), Trig_Hero_Dies_Elimination_Func031001002001002002002())
endfunction

function Trig_Hero_Dies_Elimination_Func031001002001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func031001002001002001(), Trig_Hero_Dies_Elimination_Func031001002001002002())
endfunction

function Trig_Hero_Dies_Elimination_Func031001002001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func031001002001001(), Trig_Hero_Dies_Elimination_Func031001002001002())
endfunction

function Trig_Hero_Dies_Elimination_Func031001002002 takes nothing returns boolean
	return ( IsUnitIllusionBJ(GetFilterUnit()) == true )
endfunction

function Trig_Hero_Dies_Elimination_Func031001002 takes nothing returns boolean
	return GetBooleanOr(Trig_Hero_Dies_Elimination_Func031001002001(), Trig_Hero_Dies_Elimination_Func031001002002())
endfunction

function Trig_Hero_Dies_Elimination_Func031A takes nothing returns nothing
	call KillUnit(GetEnumUnit())
endfunction

function Trig_Hero_Dies_Elimination_Func032001002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(8) )
endfunction

function Trig_Hero_Dies_Elimination_Func032001002002001 takes nothing returns boolean
	return ( GetOwningPlayer(GetFilterUnit()) != Player(11) )
endfunction

function Trig_Hero_Dies_Elimination_Func032001002002002001 takes nothing returns boolean
	return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Hero_Dies_Elimination_Func032001002002002002 takes nothing returns boolean
	return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

function Trig_Hero_Dies_Elimination_Func032001002002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func032001002002002001(), Trig_Hero_Dies_Elimination_Func032001002002002002())
endfunction

function Trig_Hero_Dies_Elimination_Func032001002002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func032001002002001(), Trig_Hero_Dies_Elimination_Func032001002002002())
endfunction

function Trig_Hero_Dies_Elimination_Func032001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Hero_Dies_Elimination_Func032001002001(), Trig_Hero_Dies_Elimination_Func032001002002())
endfunction

function Trig_Hero_Dies_Elimination_Func032A takes nothing returns nothing
	call SuspendHeroXPBJ(true, GetEnumUnit())
endfunction

function Trig_Hero_Dies_Elimination_Actions takes nothing returns nothing
	call DisableTrigger(GetTriggeringTrigger())
	call StopSoundBJ(udg_sound13, false)
	call PlaySoundBJ(udg_sound13)
	call ForceAddPlayerSimple(GetOwningPlayer(GetTriggerUnit()), udg_force02)
	set udg_integer06=( udg_integer06 - 1 )
	call DisplayTimedTextToForce(GetPlayersAll(), 5.00, ( "|cffffcc00" + ( GetPlayerName(GetOwningPlayer(GetTriggerUnit())) + " was defeated!|r" ) ))
	call DisableTrigger(udg_trigger16)
	call ForGroupBJ(GetUnitsOfPlayerAll(GetOwningPlayer(GetTriggerUnit())), function Trig_Hero_Dies_Elimination_Func008A)
	call EnableTrigger(udg_trigger16)
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Hero_Dies_Elimination_Func010001002)), function Trig_Hero_Dies_Elimination_Func010A)
	if ( Trig_Hero_Dies_Elimination_Func012C() ) then
		call DialogSetMessageBJ(udg_dialog04, "Defeat!")
		call DialogDisplayBJ(true, udg_dialog04, GetOwningPlayer(GetTriggerUnit()))
	else
		call CustomDefeatBJ(GetOwningPlayer(GetTriggerUnit()), "Defeat!")
	endif
	set udg_integer30=1
	loop
		exitwhen udg_integer30 > 5
		call AddSpecialEffectLocBJ(GetUnitLoc(GetTriggerUnit()), "Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl")
		call DestroyEffectBJ(GetLastCreatedEffectBJ())
		call AddSpecialEffectTargetUnitBJ("chest", GetTriggerUnit(), "Objects\\Spawnmodels\\Orc\\OrcLargeDeathExplode\\OrcLargeDeathExplode.mdl")
		call DestroyEffectBJ(GetLastCreatedEffectBJ())
		call TriggerSleepAction(0.10)
		set udg_integer30=udg_integer30 + 1
	endloop
	call TriggerSleepAction(3.00)
	set udg_boolean03=false
	set udg_integer47=1
	loop
		exitwhen udg_integer47 > 8
		call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Hero_Dies_Elimination_Func018Func001001002)), function Trig_Hero_Dies_Elimination_Func018Func001A)
		set udg_integer47=udg_integer47 + 1
	endloop
	call ConditionalTriggerExecute(udg_trigger122)
	if ( Trig_Hero_Dies_Elimination_Func021001() ) then
		return
	else
		call DoNothing()
	endif
	call EnableTrigger(udg_trigger142)
	call EnableTrigger(udg_trigger145)
	call EnableTrigger(udg_trigger80)
	call EnableTrigger(udg_trigger87)
	call EnableTrigger(udg_trigger149)
	call DisableTrigger(udg_trigger153)
	call ConditionalTriggerExecute(udg_trigger148)
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Hero_Dies_Elimination_Func030001002)), function Trig_Hero_Dies_Elimination_Func030A)
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Hero_Dies_Elimination_Func031001002)), function Trig_Hero_Dies_Elimination_Func031A)
	call ForGroupBJ(GetUnitsInRectMatching(GetPlayableMapRect(), Condition(function Trig_Hero_Dies_Elimination_Func032001002)), function Trig_Hero_Dies_Elimination_Func032A)
	call ConditionalTriggerExecute(udg_trigger103)
	call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "Next Level ...")
	call StartTimerBJ(GetLastCreatedTimerBJ(), false, 20.00)
	call TriggerSleepAction(20.00)
	call DestroyTimerDialogBJ(GetLastCreatedTimerDialogBJ())
	call TriggerExecute(udg_trigger109)
endfunction

function main2 takes nothing returns nothing
	call SetCameraBounds(- 5376.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), - 5632.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 5376.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 5120.0 - GetCameraMargin(CAMERA_MARGIN_TOP), - 5376.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 5120.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 5376.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), - 5632.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
	call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
	call NewSoundEnvironment("Default")
	call SetAmbientDaySound("SunkenRuinsDay")
	call SetAmbientNightSound("SunkenRuinsNight")
	call SetMapMusic("Music", true, 0)
	set udg_sound01=CreateSound("Sound\\Interface\\QuestNew.wav", false, false, false, 10, 10, "")
	call SetSoundParamsFromLabel(udg_sound01, "QuestNew")
	call SetSoundDuration(udg_sound01, 3750)
	set udg_sound02=CreateSound("Sound\\Interface\\QuestCompleted.wav", false, false, false, 10, 10, "")
	call SetSoundParamsFromLabel(udg_sound02, "QuestCompleted")
	call SetSoundDuration(udg_sound02, 5154)
	set udg_sound03=CreateSound("Sound\\Interface\\QuestActivateWhat1.wav", false, false, false, 10, 10, "")
	call SetSoundParamsFromLabel(udg_sound03, "QuestLogModified")
	call SetSoundDuration(udg_sound03, 539)
	set udg_sound04=CreateSound("Sound\\Interface\\UpkeepRing.wav", false, false, false, 10, 10, "")
	call SetSoundParamsFromLabel(udg_sound04, "UpkeepLevel")
	call SetSoundDuration(udg_sound04, 1578)
	set udg_sound05=CreateSound("Sound\\Music\\mp3Music\\HeroicVictory.mp3", false, false, false, 10, 10, "")
	call SetSoundDuration(udg_sound05, 53472)
	call SetSoundChannel(udg_sound05, 0)
	call SetSoundVolume(udg_sound05, 127)
	call SetSoundPitch(udg_sound05, 1.0)
	set udg_sound06=CreateSound("Sound\\Music\\mp3Music\\TragicConfrontation.mp3", false, false, false, 10, 10, "")
	call SetSoundDuration(udg_sound06, 72254)
	call SetSoundChannel(udg_sound06, 0)
	call SetSoundVolume(udg_sound06, 127)
	call SetSoundPitch(udg_sound06, 1.0)
	set udg_sound07=CreateSound("Sound\\Interface\\ItemReceived.wav", false, false, false, 10, 10, "")
	call SetSoundParamsFromLabel(udg_sound07, "ItemReward")
	call SetSoundDuration(udg_sound07, 1483)
	set udg_sound08=CreateSound("Sound\\Interface\\ClanInvitation.wav", false, false, false, 10, 10, "")
	call SetSoundParamsFromLabel(udg_sound08, "ClanInvitation")
	call SetSoundDuration(udg_sound08, 4295)
	set udg_sound09=CreateSound("Sound\\Interface\\BattleNetTick.wav", false, false, false, 10, 10, "")
	call SetSoundParamsFromLabel(udg_sound09, "ChatroomTimerTick")
	call SetSoundDuration(udg_sound09, 476)
	set udg_sound10=CreateSound("Sound\\Interface\\NewTournament.wav", false, false, false, 10, 10, "")
	call SetSoundParamsFromLabel(udg_sound10, "NewTournament")
	call SetSoundDuration(udg_sound10, 7987)
	set udg_sound11=CreateSound("Sound\\Interface\\Rescue.wav", false, false, false, 10, 10, "")
	call SetSoundParamsFromLabel(udg_sound11, "Rescue")
	call SetSoundDuration(udg_sound11, 3796)
	set udg_sound12=CreateSound("Sound\\Dialogue\\GenericWarnings\\GenericWarningHeroFallen1.mp3", false, false, false, 10, 10, "DefaultEAXON")
	call SetSoundParamsFromLabel(udg_sound12, "HeroDiesGeneric")
	call SetSoundDuration(udg_sound12, 1593)
	call SetSoundVolume(udg_sound12, 127)
	call SetSoundPitch(udg_sound12, 0.9)
	set udg_sound13=CreateSound("Units\\Undead\\Varimathras\\VarimathrasPissed8.wav", false, false, true, 10, 10, "HeroAcksEAX")
	call SetSoundParamsFromLabel(udg_sound13, "VarimathrasPissed")
	call SetSoundDuration(udg_sound13, 8906)
	set udg_sound14=CreateSound("Sound\\Interface\\SecretFound.wav", false, false, false, 10, 10, "")
	call SetSoundParamsFromLabel(udg_sound14, "SecretFound")
	call SetSoundDuration(udg_sound14, 2525)
	set udg_sound15=CreateSound("Sound\\Interface\\ArrangedTeamInvitation.wav", false, false, false, 10, 10, "")
	call SetSoundParamsFromLabel(udg_sound15, "ArrangedTeamInvitation")
	call SetSoundDuration(udg_sound15, 2914)
	set udg_sound16=CreateSound("Sound\\Music\\mp3Music\\Tension.mp3", false, false, false, 10, 10, "")
	call SetSoundDuration(udg_sound16, 19565)
	call SetSoundChannel(udg_sound16, 0)
	call SetSoundVolume(udg_sound16, 127)
	call SetSoundPitch(udg_sound16, 1.0)
	set udg_sound17=CreateSound("Units\\Creeps\\PandarenBrewmaster\\BrewMasterDeath1.wav", false, true, true, 10, 10, "DefaultEAXON")
	call SetSoundParamsFromLabel(udg_sound17, "PandarenBrewmasterDeath")
	call SetSoundDuration(udg_sound17, 2699)
	set udg_sound18=CreateSound("Units\\Creeps\\PandarenBrewmaster\\BrewMasterDeath1.wav", false, true, true, 10, 10, "DefaultEAXON")
	call SetSoundParamsFromLabel(udg_sound18, "PandarenBrewmasterDeath")
	call SetSoundDuration(udg_sound18, 2699)
	set udg_sound19=CreateSound("Units\\Creeps\\PandarenBrewmaster\\BrewMasterDeath1.wav", false, true, true, 10, 10, "DefaultEAXON")
	call SetSoundParamsFromLabel(udg_sound19, "PandarenBrewmasterDeath")
	call SetSoundDuration(udg_sound19, 2699)
	set udg_sound20=CreateSound("Units\\Creeps\\PandarenBrewmaster\\BrewMasterDeath1.wav", false, true, true, 10, 10, "DefaultEAXON")
	call SetSoundParamsFromLabel(udg_sound20, "PandarenBrewmasterDeath")
	call SetSoundDuration(udg_sound20, 2699)
	set udg_sound21=CreateSound("Units\\Creeps\\PandarenBrewmaster\\BrewMasterDeath1.wav", false, true, true, 10, 10, "DefaultEAXON")
	call SetSoundParamsFromLabel(udg_sound21, "PandarenBrewmasterDeath")
	call SetSoundDuration(udg_sound21, 2699)
	set udg_sound22=CreateSound("Units\\Creeps\\PandarenBrewmaster\\BrewMasterDeath1.wav", false, true, true, 10, 10, "DefaultEAXON")
	call SetSoundParamsFromLabel(udg_sound22, "PandarenBrewmasterDeath")
	call SetSoundDuration(udg_sound22, 2699)
	set udg_sound23=CreateSound("Units\\Creeps\\PandarenBrewmaster\\BrewMasterDeath1.wav", false, true, true, 10, 10, "DefaultEAXON")
	call SetSoundParamsFromLabel(udg_sound23, "PandarenBrewmasterDeath")
	call SetSoundDuration(udg_sound23, 2699)
	set udg_sound24=CreateSound("Units\\Creeps\\PandarenBrewmaster\\BrewMasterDeath1.wav", false, true, true, 10, 10, "DefaultEAXON")
	call SetSoundParamsFromLabel(udg_sound24, "PandarenBrewmasterDeath")
	call SetSoundDuration(udg_sound24, 2699)
	set udg_sound25=CreateSound("Sound\\Interface\\QuestLog.wav", false, false, false, 10, 10, "")
	call SetSoundParamsFromLabel(udg_sound25, "QuestUpdate")
	call SetSoundDuration(udg_sound25, 2275)
	call CreateRegions2()
	set udg_camerasetup01=CreateCameraSetup()
	call CameraSetupSetField(udg_camerasetup01, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
	call CameraSetupSetField(udg_camerasetup01, CAMERA_FIELD_ROTATION, 90.0, 0.0)
	call CameraSetupSetField(udg_camerasetup01, CAMERA_FIELD_ANGLE_OF_ATTACK, 305.0, 0.0)
	call CameraSetupSetField(udg_camerasetup01, CAMERA_FIELD_TARGET_DISTANCE, 2855.0, 0.0)
	call CameraSetupSetField(udg_camerasetup01, CAMERA_FIELD_ROLL, 0.0, 0.0)
	call CameraSetupSetField(udg_camerasetup01, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
	call CameraSetupSetField(udg_camerasetup01, CAMERA_FIELD_FARZ, 10000.0, 0.0)
	call CameraSetupSetDestPosition(udg_camerasetup01, 0.0, - 320.0, 0.0)
	call CreateNeutralPassiveBuildings3()
	call CreateUnitsForPlayer8()
	call InitGlobals2()
//	set udg_trigger01=CreateTrigger()
//call TriggerRegisterTimerEventPeriodic(udg_trigger01,0.01)
//	call TriggerAddAction(udg_trigger01,function Trig_Antimagic_Shell_Actions)
	set udg_trigger02=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger02, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger02, Condition(function Trig_Black_Arrow_Conditions))
	call TriggerAddAction(udg_trigger02, function Trig_Black_Arrow_Actions)
	set udg_trigger03=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger03, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger03, Condition(function Trig_Carrion_Beetles_Conditions))
	call TriggerAddAction(udg_trigger03, function Trig_Carrion_Beetles_Actions)
	set udg_trigger04=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger04, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger04, Condition(function Trig_Clockwerk_Goblin_Conditions))
	call TriggerAddAction(udg_trigger04, function Trig_Clockwerk_Goblin_Actions)
	set udg_trigger05=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger05, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(udg_trigger05, Condition(function Trig_Corrosive_Skin_Conditions))
	call TriggerAddAction(udg_trigger05, function Trig_Corrosive_Skin_Actions)


	set udg_trigger09=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger09, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(udg_trigger09, Condition(function Trig_Dark_Ritual_Conditions))
	call TriggerAddAction(udg_trigger09, function Trig_Dark_Ritual_Actions)
	set udg_trigger10=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger10, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(udg_trigger10, Condition(function Trig_Death_Pact_Conditions))
	call TriggerAddAction(udg_trigger10, function Trig_Death_Pact_Actions)
	set udg_trigger11=CreateTrigger()
	call TriggerAddCondition(udg_trigger11, Condition(function Trig_Devastating_Blow_Conditions))
	call TriggerAddAction(udg_trigger11, function Trig_Devastating_Blow_Actions)
	set udg_trigger12=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(udg_trigger12, 0.25)
	call TriggerAddAction(udg_trigger12, function Trig_Devastating_Blow_Ennhance_Actions)
	set udg_trigger13=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger13, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger13, Condition(function Trig_Devastating_Blow_Add_Conditions))
	call TriggerAddAction(udg_trigger13, function Trig_Devastating_Blow_Add_Actions)
	set udg_trigger14=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger14, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger14, Condition(function Trig_Dreadlords_Thirst_Conditions))
	call TriggerAddAction(udg_trigger14, function Trig_Dreadlords_Thirst_Actions)
	set udg_trigger15=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(udg_trigger15, 1.00)
	call TriggerAddAction(udg_trigger15, function Trig_Faerie_Dragon_Actions)
	set udg_trigger16=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger16, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger16, Condition(function Trig_Faerie_Dragon_or_Wisp_Dies_Conditions))
	call TriggerAddAction(udg_trigger16, function Trig_Faerie_Dragon_or_Wisp_Dies_Actions)
	set udg_trigger17=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger17, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger17, Condition(function Trig_Healing_Ward_Conditions))
	call TriggerAddAction(udg_trigger17, function Trig_Healing_Ward_Actions)
	set udg_trigger18=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger18, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger18, Condition(function Trig_Inferno_Conditions))
	call TriggerAddAction(udg_trigger18, function Trig_Inferno_Actions)
	set udg_trigger19=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger19, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger19, Condition(function Trig_Mountain_Giant_Conditions))
	call TriggerAddAction(udg_trigger19, function Trig_Mountain_Giant_Actions)
	set udg_trigger20=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger20, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger20, Condition(function Trig_Parasite_Conditions))
	call TriggerAddAction(udg_trigger20, function Trig_Parasite_Actions)
	set udg_trigger21=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger21, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger21, Condition(function Trig_Phoenix_Conditions))
	call TriggerAddAction(udg_trigger21, function Trig_Phoenix_Actions)
	set udg_trigger22=CreateTrigger()
	call TriggerAddCondition(udg_trigger22, Condition(function Trig_Pillage_Conditions))
	set udg_trigger23=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger23, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(udg_trigger23, Condition(function Trig_Plague_Conditions))
	call TriggerAddAction(udg_trigger23, function Trig_Plague_Actions)
	set udg_trigger24=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger24, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger24, Condition(function Trig_Plague_Remove_Conditions))
	call TriggerAddAction(udg_trigger24, function Trig_Plague_Remove_Actions)
	set udg_trigger25=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger25, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger25, Condition(function Trig_Pocket_Factory_Conditions))
	call TriggerAddAction(udg_trigger25, function Trig_Pocket_Factory_Actions)

	set udg_trigger27=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger27, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger27, Condition(function Trig_Pulverize_Add_Conditions))
	call TriggerAddAction(udg_trigger27, function Trig_Pulverize_Add_Actions)
	set udg_trigger28=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger28, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger28, Condition(function Trig_Raise_Dead_Conditions))
	call TriggerAddAction(udg_trigger28, function Trig_Raise_Dead_Actions)
	set udg_trigger29=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger29, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger29, Condition(function Trig_Skeletal_Brute_Conditions))
	call TriggerAddAction(udg_trigger29, function Trig_Skeletal_Brute_Actions)
	set udg_trigger30=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger30, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger30, Condition(function Trig_Summon_Bear_Conditions))
	call TriggerAddAction(udg_trigger30, function Trig_Summon_Bear_Actions)
	set udg_trigger31=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger31, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger31, Condition(function Trig_Summon_Hawk_Conditions))
	call TriggerAddAction(udg_trigger31, function Trig_Summon_Hawk_Actions)
	set udg_trigger32=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger32, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger32, Condition(function Trig_Summon_Quilbeast_Conditions))
	call TriggerAddAction(udg_trigger32, function Trig_Summon_Quilbeast_Actions)
	set udg_trigger33=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger33, EVENT_PLAYER_UNIT_SPELL_CAST)
	call TriggerRegisterAnyUnitEventBJ(udg_trigger33, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerRegisterAnyUnitEventBJ(udg_trigger33, EVENT_PLAYER_UNIT_SPELL_FINISH)
	call TriggerAddCondition(udg_trigger33, Condition(function Trig_Time_Wizard_Cooldown_Conditions))
	call TriggerAddAction(udg_trigger33, function Trig_Time_Wizard_Cooldown_Actions)
	set udg_trigger34=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger34, GetPlayableMapRect())
	call TriggerAddCondition(udg_trigger34, Condition(function Trig_Ward_Location_Conditions))
	call TriggerAddAction(udg_trigger34, function Trig_Ward_Location_Actions)
	set udg_trigger35=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(udg_trigger35, 1.00)
	call TriggerAddAction(udg_trigger35, function Trig_Wisp_Actions)
	set udg_trigger36=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger36, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddAction(udg_trigger36, function Trig_Disable_Abilities_Actions)
	set udg_trigger37=CreateTrigger()
	call TriggerAddCondition(udg_trigger37, Condition(function Trig_Cast_Channeling_Ability_Conditions))
	call TriggerAddAction(udg_trigger37, function Trig_Cast_Channeling_Ability_Actions)
	set udg_trigger38=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger38, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(udg_trigger38, Condition(function Trig_Acquire_Item_Conditions))
	call TriggerAddAction(udg_trigger38, function Trig_Acquire_Item_Actions)
	set udg_trigger39=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger39, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(udg_trigger39, Condition(function Trig_Drop_Item_Conditions))
	call TriggerAddAction(udg_trigger39, function Trig_Drop_Item_Actions)
	set udg_trigger40=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger40, EVENT_PLAYER_UNIT_DROP_ITEM)
	call TriggerAddCondition(udg_trigger40, Condition(function Trig_Give_Item_Conditions))
	call TriggerAddAction(udg_trigger40, function Trig_Give_Item_Actions)
	set udg_trigger41=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger41, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger41, Condition(function Trig_Remove_Dummies_Conditions))
	call TriggerAddAction(udg_trigger41, function Trig_Remove_Dummies_Actions)
	set udg_trigger42=CreateTrigger()
	call TriggerAddAction(udg_trigger42, function Trig_Battle_Royal_Actions)
	set udg_trigger43=CreateTrigger()
	call DisableTrigger(udg_trigger43)
	call TriggerRegisterAnyUnitEventBJ(udg_trigger43, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger43, Condition(function Trig_Hero_Dies_Battle_Royal_Conditions))
	call TriggerAddAction(udg_trigger43, function Trig_Hero_Dies_Battle_Royal_Actions)
	set udg_trigger44=CreateTrigger()
	call TriggerRegisterTimerEventSingle(udg_trigger44, 30.00)
	call TriggerAddCondition(udg_trigger44, Condition(function Trig_Betting_Initialization_Conditions))
	call TriggerAddAction(udg_trigger44, function Trig_Betting_Initialization_Actions)
	set udg_trigger45=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger45, udg_dialogs01[1])
	call TriggerAddCondition(udg_trigger45, Condition(function Trig_Place_Bet_PvP1_Conditions))
	call TriggerAddAction(udg_trigger45, function Trig_Place_Bet_PvP1_Actions)
	set udg_trigger46=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger46, udg_dialogs01[1])
	call TriggerAddCondition(udg_trigger46, Condition(function Trig_Place_Bet_PvP2_Conditions))
	call TriggerAddAction(udg_trigger46, function Trig_Place_Bet_PvP2_Actions)
	set udg_trigger47=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger47, udg_dialogs01[1])
	call TriggerAddCondition(udg_trigger47, Condition(function Trig_Skip_Bet_Conditions))
	call TriggerAddAction(udg_trigger47, function Trig_Skip_Bet_Actions)
	set udg_trigger48=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger48, udg_dialogs01[2])
	call TriggerAddCondition(udg_trigger48, Condition(function Trig_Place_Bet_Gold_Conditions))
	call TriggerAddAction(udg_trigger48, function Trig_Place_Bet_Gold_Actions)
	set udg_trigger49=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger49, udg_dialogs01[2])
	call TriggerAddCondition(udg_trigger49, Condition(function Trig_Place_Bet_Lumber_Conditions))
	call TriggerAddAction(udg_trigger49, function Trig_Place_Bet_Lumber_Actions)
	set udg_trigger50=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger50, udg_dialogs01[2])
	call TriggerAddCondition(udg_trigger50, Condition(function Trig_Place_Bet_GoldLumber_Conditions))
	call TriggerAddAction(udg_trigger50, function Trig_Place_Bet_GoldLumber_Actions)
	set udg_trigger51=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger51, udg_dialogs01[3])
	call TriggerAddCondition(udg_trigger51, Condition(function Trig_Place_Bet_Conditions))
	call TriggerAddAction(udg_trigger51, function Trig_Place_Bet_Actions)
	set udg_trigger52=CreateTrigger()
	call TriggerAddAction(udg_trigger52, function Trig_Eligible_Amount_Actions)
	set udg_trigger53=CreateTrigger()
	call TriggerAddCondition(udg_trigger53, Condition(function Trig_Eligible_Amount_Loop_Conditions))
	call TriggerAddAction(udg_trigger53, function Trig_Eligible_Amount_Loop_Actions)
	set udg_trigger54=CreateTrigger()
	call TriggerAddCondition(udg_trigger54, Condition(function Trig_Betting_Complete_Conditions))
	call TriggerAddAction(udg_trigger54, function Trig_Betting_Complete_Actions)
	set udg_trigger55=CreateTrigger()
	call DisableTrigger(udg_trigger55)
	call TriggerAddAction(udg_trigger55, function Trig_Dialog_Initialization_Actions)
	set udg_trigger56=CreateTrigger()
	call TriggerRegisterTimerEventSingle(udg_trigger56, 0.00)
	call TriggerAddAction(udg_trigger56, function Trig_Voting_Rights_Initialization_Actions)
	set udg_trigger57=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger57, udg_dialog06)
	call TriggerAddCondition(udg_trigger57, Condition(function Trig_Game_Master_Selects_Conditions))
	call TriggerAddAction(udg_trigger57, function Trig_Game_Master_Selects_Actions)
	set udg_trigger58=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger58, udg_dialog06)
	call TriggerAddCondition(udg_trigger58, Condition(function Trig_Everyone_Votes_Conditions))
	call TriggerAddAction(udg_trigger58, function Trig_Everyone_Votes_Actions)
	set udg_trigger59=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger59, udg_dialog01)
	call TriggerAddCondition(udg_trigger59, Condition(function Trig_Dialog_25_Conditions))
	call TriggerAddAction(udg_trigger59, function Trig_Dialog_25_Actions)
	set udg_trigger60=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger60, udg_dialog01)
	call TriggerAddCondition(udg_trigger60, Condition(function Trig_Dialog_50_Conditions))
	call TriggerAddAction(udg_trigger60, function Trig_Dialog_50_Actions)
	set udg_trigger61=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger61, udg_dialog01)
	call TriggerAddCondition(udg_trigger61, Condition(function Trig_Doesnt_Matter_Conditions))
	call TriggerAddAction(udg_trigger61, function Trig_Doesnt_Matter_Actions)
	set udg_trigger62=CreateTrigger()
	call TriggerAddAction(udg_trigger62, function Trig_Skip_Betting_Menu_Actions)
	set udg_trigger63=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger63, udg_dialog02)
	call TriggerAddCondition(udg_trigger63, Condition(function Trig_Normal_Mode_Conditions))
	call TriggerAddAction(udg_trigger63, function Trig_Normal_Mode_Actions)
	set udg_trigger64=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger64, udg_dialog02)
	call TriggerAddCondition(udg_trigger64, Condition(function Trig_Elimination_Mode_Conditions))
	call TriggerAddAction(udg_trigger64, function Trig_Elimination_Mode_Actions)
	set udg_trigger65=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger65, udg_dialog02)
	call TriggerAddCondition(udg_trigger65, Condition(function Trig_Death_Match_Mode_Conditions))
	call TriggerAddAction(udg_trigger65, function Trig_Death_Match_Mode_Actions)
	set udg_trigger66=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger66, udg_dialog02)
	call TriggerAddCondition(udg_trigger66, Condition(function Trig_Doesnt_Matter_Mode_Conditions))
	call TriggerAddAction(udg_trigger66, function Trig_Doesnt_Matter_Mode_Actions)
	set udg_trigger67=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger67, udg_dialog03)
	call TriggerAddCondition(udg_trigger67, Condition(function Trig_Pick_Abilities_Conditions))
	call TriggerAddAction(udg_trigger67, function Trig_Pick_Abilities_Actions)
	set udg_trigger68=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger68, udg_dialog03)
	call TriggerAddCondition(udg_trigger68, Condition(function Trig_Random_Abilities_Conditions))
	call TriggerAddAction(udg_trigger68, function Trig_Random_Abilities_Actions)
	set udg_trigger69=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger69, udg_dialog03)
	call TriggerAddCondition(udg_trigger69, Condition(function Trig_Doesnt_Matter_Abilities_Conditions))
	call TriggerAddAction(udg_trigger69, function Trig_Doesnt_Matter_Abilities_Actions)
	set udg_trigger70=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger70, udg_dialog07)
	call TriggerAddCondition(udg_trigger70, Condition(function Trig_Pick_Hero_Conditions))
	call TriggerAddAction(udg_trigger70, function Trig_Pick_Hero_Actions)
	set udg_trigger71=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger71, udg_dialog07)
	call TriggerAddCondition(udg_trigger71, Condition(function Trig_Random_Hero_Conditions))
	call TriggerAddAction(udg_trigger71, function Trig_Random_Hero_Actions)
	set udg_trigger72=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger72, udg_dialog07)
	call TriggerAddCondition(udg_trigger72, Condition(function Trig_Doesnt_Matter_Hero_Conditions))
	call TriggerAddAction(udg_trigger72, function Trig_Doesnt_Matter_Hero_Actions)
	set udg_trigger73=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger73, udg_dialog05)
	call TriggerAddCondition(udg_trigger73, Condition(function Trig_Show_Betting_Menu_Conditions))
	call TriggerAddAction(udg_trigger73, function Trig_Show_Betting_Menu_Actions)
	set udg_trigger74=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger74, udg_dialog05)
	call TriggerAddCondition(udg_trigger74, Condition(function Trig_Hide_Betting_Menu_Conditions))
	call TriggerAddAction(udg_trigger74, function Trig_Hide_Betting_Menu_Actions)
	set udg_trigger75=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger75, udg_dialog05)
	call TriggerAddCondition(udg_trigger75, Condition(function Trig_Disable_Betting_Menu_Conditions))
	call TriggerAddAction(udg_trigger75, function Trig_Disable_Betting_Menu_Actions)
	set udg_trigger76=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger76, udg_dialog05)
	call TriggerAddCondition(udg_trigger76, Condition(function Trig_Doesnt_Matter_Betting_Menu_Conditions))
	call TriggerAddAction(udg_trigger76, function Trig_Doesnt_Matter_Betting_Menu_Actions)
	set udg_trigger77=CreateTrigger()
	call TriggerAddCondition(udg_trigger77, Condition(function Trig_Dialog_Complete_Conditions))
	call TriggerAddAction(udg_trigger77, function Trig_Dialog_Complete_Actions)
	set udg_trigger78=CreateTrigger()
	call DisableTrigger(udg_trigger78)
	call TriggerRegisterPlayerSelectionEventBJ(udg_trigger78, Player(0), true)
	call TriggerRegisterPlayerSelectionEventBJ(udg_trigger78, Player(1), true)
	call TriggerRegisterPlayerSelectionEventBJ(udg_trigger78, Player(2), true)
	call TriggerRegisterPlayerSelectionEventBJ(udg_trigger78, Player(3), true)
	call TriggerRegisterPlayerSelectionEventBJ(udg_trigger78, Player(4), true)
	call TriggerRegisterPlayerSelectionEventBJ(udg_trigger78, Player(5), true)
	call TriggerRegisterPlayerSelectionEventBJ(udg_trigger78, Player(6), true)
	call TriggerRegisterPlayerSelectionEventBJ(udg_trigger78, Player(7), true)
	call TriggerAddCondition(udg_trigger78, Condition(function Trig_Choose_Hero_Conditions))
	call TriggerAddAction(udg_trigger78, function Trig_Choose_Hero_Actions)
	set udg_trigger79=CreateTrigger()
	call TriggerAddAction(udg_trigger79, function Trig_Spawn_Hero_Actions)
	set udg_trigger80=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger80, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger80, Condition(function Trig_Hero_Dies_Conditions))
	call TriggerAddAction(udg_trigger80, function Trig_Hero_Dies_Actions)
	set udg_trigger81=CreateTrigger()
	call DisableTrigger(udg_trigger81)
	call TriggerRegisterAnyUnitEventBJ(udg_trigger81, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger81, Condition(function Trig_Hero_Dies_After_Victory_Conditions))
	call TriggerAddAction(udg_trigger81, function Trig_Hero_Dies_After_Victory_Actions)
	set udg_trigger82=CreateTrigger()
	call TriggerAddAction(udg_trigger82, function Trig_Hero_Refresh_Actions)
	set udg_trigger83=CreateTrigger()
	call TriggerRegisterTimerEventSingle(udg_trigger83, 0.00)
	call TriggerAddAction(udg_trigger83, function Trig_DeathDialog_Initialization_Actions)
	set udg_trigger84=CreateTrigger()
	call TriggerRegisterDialogEventBJ(udg_trigger84, udg_dialog04)
	call TriggerAddCondition(udg_trigger84, Condition(function Trig_DeathDialog_Leave_Conditions))
	call TriggerAddAction(udg_trigger84, function Trig_DeathDialog_Leave_Actions)
	set udg_trigger85=CreateTrigger()
	call TriggerAddCondition(udg_trigger85, Condition(function Trig_Pandaren_Death_Sound_Initialization_Conditions))
	call TriggerAddAction(udg_trigger85, function Trig_Pandaren_Death_Sound_Initialization_Actions)
	set udg_trigger86=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger86, EVENT_PLAYER_UNIT_DEATH)
	call TriggerRegisterAnyUnitEventBJ(udg_trigger86, EVENT_PLAYER_UNIT_DROP_ITEM)
	call TriggerAddCondition(udg_trigger86, Condition(function Trig_Pandaren_Dies_Conditions))
	call TriggerAddAction(udg_trigger86, function Trig_Pandaren_Dies_Actions)
	set udg_trigger87=CreateTrigger()
	call DisableTrigger(udg_trigger87)
	call TriggerRegisterTimerEventPeriodic(udg_trigger87, 60.00)
	call TriggerAddAction(udg_trigger87, function Trig_Display_Hint_Actions)
	set udg_trigger88=CreateTrigger()
	call TriggerRegisterTimerEventSingle(udg_trigger88, 30.00)
	call TriggerAddAction(udg_trigger88, function Trig_Hint_Initialization_Actions)
	set udg_trigger89=CreateTrigger()
	call TriggerAddAction(udg_trigger89, function Trig_Map_Initialization_Actions)
	set udg_trigger90=CreateTrigger()
	call TriggerAddCondition(udg_trigger90, Condition(function Trig_Melee_Initialization_Conditions))
	call TriggerAddAction(udg_trigger90, function Trig_Melee_Initialization_Actions)
	set udg_trigger91=CreateTrigger()
	call TriggerAddAction(udg_trigger91, function Trig_Player_Region_Initialization_Actions)
	set udg_trigger92=CreateTrigger()
	call TriggerAddAction(udg_trigger92, function Trig_Spell_Initialization_Actions)
	set udg_trigger93=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger93, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(udg_trigger93, Condition(function Trig_Moonstone_Conditions))
	call TriggerAddAction(udg_trigger93, function Trig_Moonstone_Actions)
	set udg_trigger94=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger94, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(udg_trigger94, Condition(function Trig_Scepter_of_Confusion_Conditions))
	call TriggerAddAction(udg_trigger94, function Trig_Scepter_of_Confusion_Actions)
	set udg_trigger95=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger95, EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(udg_trigger95, Condition(function Trig_The_Divine_Source_Conditions))
	call TriggerAddAction(udg_trigger95, function Trig_The_Divine_Source_Actions)
	set udg_trigger96=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger96, EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(udg_trigger96, Condition(function Trig_Volcanic_Armor_Conditions))
	call TriggerAddAction(udg_trigger96, function Trig_Volcanic_Armor_Actions)
	set udg_trigger97=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger97, EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(udg_trigger97, Condition(function Trig_Xesils_Legacy_Conditions))
	call TriggerAddAction(udg_trigger97, function Trig_Xesils_Legacy_Actions)
	set udg_trigger98=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(udg_trigger98, 6.00)
	call TriggerAddAction(udg_trigger98, function Trig_Attack_Move_Actions)
	set udg_trigger99=CreateTrigger()
	call TriggerAddAction(udg_trigger99, function Trig_Add_Unit_Abilities_Actions)
	set udg_trigger100=CreateTrigger()
	call TriggerAddAction(udg_trigger100, function Trig_Add_Unit_Power_Actions)
	set udg_trigger101=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(udg_trigger101, 1.00)
	call TriggerAddAction(udg_trigger101, function Trig_Creep_AutoCast_Actions)
	set udg_trigger102=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger102, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger102, Condition(function Trig_Creep_Dies_Conditions))
	call TriggerAddAction(udg_trigger102, function Trig_Creep_Dies_Actions)
	set udg_trigger103=CreateTrigger()
	call TriggerAddCondition(udg_trigger103, Condition(function Trig_Generate_Next_Level_Conditions))
	call TriggerAddAction(udg_trigger103, function Trig_Generate_Next_Level_Actions)
	set udg_trigger104=CreateTrigger()
	call TriggerAddAction(udg_trigger104, function Trig_Unit_Type_Actions)
	set udg_trigger105=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger105, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger105, Condition(function Trig_Bonus_Exp_Conditions))
	call TriggerAddAction(udg_trigger105, function Trig_Bonus_Exp_Actions)
	set udg_trigger106=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger106, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger106, Condition(function Trig_Complete_Level_Move_Conditions))
	call TriggerAddAction(udg_trigger106, function Trig_Complete_Level_Move_Actions)
	set udg_trigger107=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger107, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger107, Condition(function Trig_Complete_Level_Player_Conditions))
	call TriggerAddAction(udg_trigger107, function Trig_Complete_Level_Player_Actions)
	set udg_trigger108=CreateTrigger()
	call TriggerAddAction(udg_trigger108, function Trig_Level_Completed_Actions)
	set udg_trigger109=CreateTrigger()
	call TriggerAddCondition(udg_trigger109, Condition(function Trig_Start_Level_Conditions))
	call TriggerAddAction(udg_trigger109, function Trig_Start_Level_Actions)
	set udg_trigger110=CreateTrigger()
	call DisableTrigger(udg_trigger110)
	call TriggerRegisterTimerEventPeriodic(udg_trigger110, 0.25)
	call TriggerAddAction(udg_trigger110, function Trig_Sudden_Death_Timer_Actions)
	set udg_trigger111=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger111, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(udg_trigger111, Condition(function Trig_Learn_Ability_Conditions))
	call TriggerAddAction(udg_trigger111, function Trig_Learn_Ability_Actions)
	set udg_trigger112=CreateTrigger()
	call TriggerAddAction(udg_trigger112, function Trig_Set_Ability_Actions)
	set udg_trigger113=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger113, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(udg_trigger113, Condition(function Trig_Random_Ability_Conditions))
	call TriggerAddAction(udg_trigger113, function Trig_Random_Ability_Actions)
	set udg_trigger114=CreateTrigger()
	call TriggerAddAction(udg_trigger114, function Trig_Learn_Random_Ability_Actions)
	set udg_trigger115=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger115, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(udg_trigger115, Condition(function Trig_Unlearn_Ability_Conditions))
	call TriggerAddAction(udg_trigger115, function Trig_Unlearn_Ability_Actions)
	set udg_trigger116=CreateTrigger()
	call DisableTrigger(udg_trigger116)
	call TriggerRegisterTimerEventPeriodic(udg_trigger116, 0.50)
	call TriggerAddCondition(udg_trigger116, Condition(function Trig_AntiStuck_Conditions))
	call TriggerAddAction(udg_trigger116, function Trig_AntiStuck_Actions)
	set udg_trigger117=CreateTrigger()
	call TriggerAddCondition(udg_trigger117, Condition(function Trig_Countdown_Conditions))
	call TriggerAddAction(udg_trigger117, function Trig_Countdown_Actions)
	set udg_trigger118=CreateTrigger()
	call TriggerAddCondition(udg_trigger118, Condition(function Trig_Defeat_Conditions))
	call TriggerAddAction(udg_trigger118, function Trig_Defeat_Actions)
	set udg_trigger119=CreateTrigger()
	call TriggerAddCondition(udg_trigger119, Condition(function Trig_End_Game_Conditions))
	call TriggerAddAction(udg_trigger119, function Trig_End_Game_Actions)
	set udg_trigger120=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(udg_trigger120, 1.00)
	call TriggerAddAction(udg_trigger120, function Trig_Playtime_Actions)
	set udg_trigger121=CreateTrigger()
	call DisableTrigger(udg_trigger121)
	call TriggerAddAction(udg_trigger121, function Trig_Remove_Selection_Circles_Actions)
	set udg_trigger122=CreateTrigger()
	call TriggerAddCondition(udg_trigger122, Condition(function Trig_Victory_Conditions))
	call TriggerAddAction(udg_trigger122, function Trig_Victory_Actions)
	set udg_trigger123=CreateTrigger()
	call DisableTrigger(udg_trigger123)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(0), "-camera ", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(0), "-cam", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(1), "-camera ", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(1), "-cam", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(2), "-camera ", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(2), "-cam", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(3), "-camera ", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(3), "-cam", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(4), "-camera ", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(4), "-cam", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(5), "-camera ", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(5), "-cam", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(6), "-camera ", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(6), "-cam", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(7), "-camera ", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger123, Player(7), "-cam", false)
	call TriggerAddAction(udg_trigger123, function Trig_Camera_Command_Actions)
	set udg_trigger124=CreateTrigger()
	call TriggerRegisterPlayerChatEvent(udg_trigger124, Player(0), "-clear", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger124, Player(1), "-clear", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger124, Player(2), "-clear", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger124, Player(3), "-clear", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger124, Player(4), "-clear", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger124, Player(5), "-clear", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger124, Player(6), "-clear", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger124, Player(7), "-clear", true)
	call TriggerAddAction(udg_trigger124, function Trig_Clear_Command_Actions)
	set udg_trigger125=CreateTrigger()
	call TriggerRegisterPlayerChatEvent(udg_trigger125, Player(0), "-hint", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger125, Player(1), "-hint", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger125, Player(2), "-hint", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger125, Player(3), "-hint", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger125, Player(4), "-hint", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger125, Player(5), "-hint", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger125, Player(6), "-hint", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger125, Player(7), "-hint", true)
	call TriggerAddAction(udg_trigger125, function Trig_Hint_Command_Actions)
	set udg_trigger126=CreateTrigger()
	call DisableTrigger(udg_trigger126)
	call TriggerRegisterPlayerChatEvent(udg_trigger126, Player(0), "-level", true)
	call TriggerAddAction(udg_trigger126, function Trig_Level_Command_Actions)
	set udg_trigger127=CreateTrigger()
	call DisableTrigger(udg_trigger127)
	call TriggerRegisterPlayerChatEvent(udg_trigger127, Player(0), "-ms", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger127, Player(1), "-ms", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger127, Player(2), "-ms", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger127, Player(3), "-ms", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger127, Player(4), "-ms", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger127, Player(5), "-ms", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger127, Player(6), "-ms", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger127, Player(7), "-ms", true)
	call TriggerAddCondition(udg_trigger127, Condition(function Trig_Movement_Speed_Command_Conditions))
	call TriggerAddAction(udg_trigger127, function Trig_Movement_Speed_Command_Actions)
	set udg_trigger128=CreateTrigger()
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(0), "-pt", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(0), "-time", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(1), "-pt", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(1), "-time", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(2), "-pt", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(2), "-time", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(3), "-pt", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(3), "-time", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(4), "-pt", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(4), "-time", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(5), "-pt", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(5), "-time", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(6), "-pt", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(6), "-time", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(7), "-pt", true)
	call TriggerRegisterPlayerChatEvent(udg_trigger128, Player(7), "-time", true)
	call TriggerAddAction(udg_trigger128, function Trig_Playtime_Command_Actions)
	set udg_trigger129=CreateTrigger()
	call TriggerRegisterPlayerEventLeave(udg_trigger129, Player(0))
	call TriggerRegisterPlayerEventLeave(udg_trigger129, Player(1))
	call TriggerRegisterPlayerEventLeave(udg_trigger129, Player(2))
	call TriggerRegisterPlayerEventLeave(udg_trigger129, Player(3))
	call TriggerRegisterPlayerEventLeave(udg_trigger129, Player(4))
	call TriggerRegisterPlayerEventLeave(udg_trigger129, Player(5))
	call TriggerRegisterPlayerEventLeave(udg_trigger129, Player(6))
	call TriggerRegisterPlayerEventLeave(udg_trigger129, Player(7))
	call TriggerAddCondition(udg_trigger129, Condition(function Trig_Player_Leaves_Conditions))
	call TriggerAddAction(udg_trigger129, function Trig_Player_Leaves_Actions)
	set udg_trigger130=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(udg_trigger130, 4)
	call TriggerAddAction(udg_trigger130, function Trig_Spacebar_Point_Actions)
	set udg_trigger131=CreateTrigger()
	call TriggerAddAction(udg_trigger131, function Trig_Select_Game_Master_Actions)
	set udg_trigger132=CreateTrigger()
	call DisableTrigger(udg_trigger132)
	call TriggerRegisterPlayerChatEvent(udg_trigger132, Player(0), "-kick", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger132, Player(1), "-kick", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger132, Player(2), "-kick", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger132, Player(3), "-kick", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger132, Player(4), "-kick", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger132, Player(5), "-kick", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger132, Player(6), "-kick", false)
	call TriggerRegisterPlayerChatEvent(udg_trigger132, Player(7), "-kick", false)
	call TriggerAddCondition(udg_trigger132, Condition(function Trig_Kick_Player_Command_Conditions))
	call TriggerAddAction(udg_trigger132, function Trig_Kick_Player_Command_Actions)
	set udg_trigger133=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(udg_trigger133, 0.02)
	call TriggerAddAction(udg_trigger133, function Trig_Player_Selection_Camera_Actions)
	set udg_trigger134=CreateTrigger()
	call TriggerAddAction(udg_trigger134, function Trig_PvP_Actions)
	set udg_trigger135=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger135, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger135, Condition(function Trig_End_PvP_Conditions))
	call TriggerAddAction(udg_trigger135, function Trig_End_PvP_Actions)
	set udg_trigger136=CreateTrigger()
	call TriggerAddAction(udg_trigger136, function Trig_PvP_Battle_Actions)
	set udg_trigger137=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(udg_trigger137, 6.00)
	call TriggerAddAction(udg_trigger137, function Trig_PvP_No_Player_Actions)
	set udg_trigger138=CreateTrigger()
	call TriggerAddCondition(udg_trigger138, Condition(function Trig_Receive_Prize_Conditions))
	call TriggerAddAction(udg_trigger138, function Trig_Receive_Prize_Actions)
	set udg_trigger139=CreateTrigger()
	call DisableTrigger(udg_trigger139)
	call TriggerRegisterAnyUnitEventBJ(udg_trigger139, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(udg_trigger139, Condition(function Trig_Drop_Prize_Item_Conditions))
	call TriggerAddAction(udg_trigger139, function Trig_Drop_Prize_Item_Actions)
	set udg_trigger140=CreateTrigger()
	call DisableTrigger(udg_trigger140)
	call TriggerRegisterTimerEventPeriodic(udg_trigger140, 1.25)
	call TriggerAddCondition(udg_trigger140, Condition(function Trig_Sudden_Death_Damage_PvP_Conditions))
	call TriggerAddAction(udg_trigger140, function Trig_Sudden_Death_Damage_PvP_Actions)
	set udg_trigger141=CreateTrigger()
	call DisableTrigger(udg_trigger141)
	call TriggerRegisterTimerEventPeriodic(udg_trigger141, 0.25)
	call TriggerAddAction(udg_trigger141, function Trig_Sudden_Death_Timer_PvP_Actions)
	set udg_trigger142=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger142, udg_rect09)
	call TriggerAddCondition(udg_trigger142, Condition(function Trig_Enter_Center_Conditions))
	call TriggerAddAction(udg_trigger142, function Trig_Enter_Center_Actions)
	set udg_trigger143=CreateTrigger()
	call TriggerAddCondition(udg_trigger143, Condition(function Trig_Enter_Shop_Mode_Conditions))
	call TriggerAddAction(udg_trigger143, function Trig_Enter_Shop_Mode_Actions)
	set udg_trigger144=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger144, EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(udg_trigger144, Condition(function Trig_Remove_Power_Ups_Conditions))
	call TriggerAddAction(udg_trigger144, function Trig_Remove_Power_Ups_Actions)
	set udg_trigger145=CreateTrigger()
	call TriggerRegisterEnterRectSimple(udg_trigger145, udg_rect09)
	call TriggerAddCondition(udg_trigger145, Condition(function Trig_Remove_Units_From_Center_Conditions))
	call TriggerAddAction(udg_trigger145, function Trig_Remove_Units_From_Center_Actions)
	set udg_trigger146=CreateTrigger()
	call TriggerAddAction(udg_trigger146, function Trig_Update_Items_Actions)
	set udg_trigger147=CreateTrigger()
	call TriggerAddAction(udg_trigger147, function Trig_Hide_Shops_Actions)
	set udg_trigger148=CreateTrigger()
	call TriggerAddAction(udg_trigger148, function Trig_Unhide_Shops_Actions)
	set udg_trigger149=CreateTrigger()
	call TriggerAddCondition(udg_trigger149, Condition(function Trig_Passive_Spells_II_Conditions))
	call TriggerAddAction(udg_trigger149, function Trig_Passive_Spells_II_Actions)
	set udg_trigger150=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger150, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger150, Condition(function Trig_Remove_HintEffect_Conditions))
	call TriggerAddAction(udg_trigger150, function Trig_Remove_HintEffect_Actions)
	set udg_trigger151=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(udg_trigger151, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger151, Condition(function Trig_Hero_Dies_Death_Match_PvP_Conditions))
	call TriggerAddAction(udg_trigger151, function Trig_Hero_Dies_Death_Match_PvP_Actions)
	set udg_trigger152=CreateTrigger()
	call TriggerAddAction(udg_trigger152, function Trig_Elimination_Actions)
	set udg_trigger153=CreateTrigger()
	call DisableTrigger(udg_trigger153)
	call TriggerRegisterAnyUnitEventBJ(udg_trigger153, EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(udg_trigger153, Condition(function Trig_Hero_Dies_Elimination_Conditions))
	call TriggerAddAction(udg_trigger153, function Trig_Hero_Dies_Elimination_Actions)
	call ConditionalTriggerExecute(udg_trigger08)
	call ConditionalTriggerExecute(udg_trigger89)
	call ConditionalTriggerExecute(udg_trigger91)
	call ConditionalTriggerExecute(udg_trigger92)
	call ConditionalTriggerExecute(udg_trigger103)
endfunction

function main3 takes nothing returns nothing
	call SetCameraBounds(- 5376.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), - 5632.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 5376.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 5120.0 - GetCameraMargin(CAMERA_MARGIN_TOP), - 5376.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 5120.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 5376.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), - 5632.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
	call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
	call NewSoundEnvironment("Default")
	call SetAmbientDaySound("SunkenRuinsDay")
	call SetAmbientNightSound("SunkenRuinsNight")
	call SetMapMusic("Music", true, 0)
	call InitGlobals3()
	call ExecuteFunc("main2")
endfunction

function InitTrig_init_Copy takes nothing returns nothing
	
	call ExecuteFunc("main3")
endfunction                                                 
//===========================================================================
// Trigger: InitData Copy
//===========================================================================
 
 
 function InitNagradi takes nothing returns nothing
 
 set ItemN1[1]='I01I' //5
 set ItemN1[2]='I01F'
 set ItemN1[3]='I01G'
 set ItemN1[4]='I01H'
 
 set ItemN1[5]='I01J' //10
 set ItemN1[6]='I01K'
 set ItemN1[7]='I01L'
 set ItemN1[8]='I01M'
 
 set ItemN1[9]='I01N' //15
 set ItemN1[10]='I01O'
 set ItemN1[11]='I01P'
 set ItemN1[12]='I01Q'
 

 set ItemN1[13]='I01D' //20
 set ItemN1[14]='I01C'
 set ItemN1[15]='I03O'
 set ItemN1[16]='I03P'
 
 
 
 set ItemN1[17]='I06K' //25
 set ItemN1[18]='I04V'
 set ItemN1[19]='I04W'
 set ItemN1[20]='I061'
 
 
 set ItemN1[21]='I04Q' //30
 set ItemN1[22]='I065'
 set ItemN1[23]='I06H'
 set ItemN1[24]='I04J'
 
 
 set ItemN1[25]='I06J' //35
 set ItemN1[26]='I05G'
 set ItemN1[27]='I064'
 set ItemN1[28]='I05A'
 

 set ItemN1[29]='I066' //40
 set ItemN1[30]='I059'
 set ItemN1[31]='I06B'
 set ItemN1[32]='I05L'
 
 
 set ItemN1[33]='I04P' //45
 set ItemN1[34]='I05D'
 set ItemN1[35]='I05B'
 set ItemN1[36]='I05U'
   
 
 
 
 endfunction

function Trig_InitData_Copy_Actions takes nothing returns nothing
call InitNagradi()
call InitBuffForLevel()
endfunction

//===========================================================================
function InitTrig_InitData_Copy takes nothing returns nothing
    set gg_trg_InitData_Copy=CreateTrigger()
    call TriggerAddAction(gg_trg_InitData_Copy, function Trig_InitData_Copy_Actions)
endfunction


//===========================================================================
// Trigger: A044 Copy
//===========================================================================
function Trig_A044_Copy_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A044' ) ) then
        return false
    endif
    return true
endfunction

function Trig_A044_Copy_Actions takes nothing returns nothing
    if Trig_Disable_Abilities_Func001C() == false then
    call StartFunctionSpell(GetTriggerUnit() , 6)
    endif
endfunction

//===========================================================================
function InitTrig_A044_Copy takes nothing returns nothing
    set gg_trg_A044_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_A044_Copy, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_A044_Copy, Condition(function Trig_A044_Copy_Conditions))
    call TriggerAddAction(gg_trg_A044_Copy, function Trig_A044_Copy_Actions)
endfunction

//===========================================================================
// Trigger: AutoCastSpells Copy
//===========================================================================


function InitArcaneTalant takes nothing returns nothing
    set ListAAT[0]='AHbn'
    set ListAAT[1]='AHfs'
    set ListAAT[2]='AHbz'
    set ListAAT[3]='Ainf'
    set ListAAT[4]='AOhw'
    set ListAAT[5]='AOsw'
    set ListAAT[6]='AOsh'
    set ListAAT[7]='Asta'
    set ListAAT[8]='AUin'
    set ListAAT[9]='AUfu'
    set ListAAT[10]='AUdd'
    set ListAAT[11]='AUcs'
    set ListAAT[12]='AUim'
    set ListAAT[13]='Aam2'
    set ListAAT[14]='Auhf'
    set ListAAT[15]='Arej'
    set ListAAT[16]='ANhs'
    set ListAAT[17]='ANvc'
    set ListAAT[18]='ANst'
    set ListAAT[18]='ANst'
    set ListAAT[19]='ANcs'
    set ListAAT[20]='ANsi'
    set ListAAT[21]='ANrf'
    set ListAAT[22]='ANbf'
    set ListAAT[23]='ANsy'
    set ListAAT[24]='ACls'
    set ListAAT[25]='A046'
    set ListAAT[26]='A017'
    set ListAAT[27]='A05X'
    set ListAAT[28]='Ablo'
    set ListAAT[29]='Ahwd'
    set ListAAT[30]='ANmo'
    set ListAAT[31]='Aclf'
    set ListAAT[32]='AHhb'
    set ListAAT[33]='Arej'
    set CountAAT=33
    
    
    set HolyShieldS[0]='AHhb'
    set HolyShieldS[1]='Ahwd'
    set HolyShieldS[2]='AOhw'
    set HolyShieldS[3]='Arej'
    
    set CountHolyShieldS=3
endfunction


function CastAbility takes unit u,integer sp,integer lvl returns nothing
    local unit DummyU= CreateUnit(GetOwningPlayer(u), 'h015', GetUnitX(u), GetUnitY(u), GetUnitFacing(u))
    local integer Type= LoadInteger(HT_AbilityData, sp, 1)
    local string Order= LoadStr(HT_AbilityData, sp, 2)
    local boolean CAST= false
    

    
    
    call UnitAddAbility(DummyU, sp)
    call SetUnitAbilityLevel(DummyU, sp, lvl)
    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(DummyU, sp), ConvertAbilityRealLevelField('aran'), lvl - 1, 9999999)


    call UnitApplyTimedLife(DummyU, 'BTLF', 21)
    set CAST=IssueTargetOrder(DummyU, Order, u)
        
    if CAST == false then
        set CAST=IssuePointOrder(DummyU, Order, GetUnitX(u), GetUnitY(u))
        
        if CAST == false then
            set CAST=IssuePointOrderById(DummyU, OrderId(Order), GetUnitX(u), GetUnitY(u))
        endif
    endif
       


    
     set Order=null
     set DummyU=null
endfunction



function UseSpellsAT takes unit u returns nothing
local integer i= 0

    loop
        exitwhen i > CountAAT
        
        if GetNumHeroSpell(u , ListAAT[i]) != 0 then
          call CastAbility(u , ListAAT[i] , GetUnitAbilityLevel(u, ListAAT[i]))
        endif
        
        
        set i=i + 1
    endloop


endfunction



function UseSpellsHolyShield takes unit u returns nothing
local integer i= 0

    loop
        exitwhen i > CountHolyShieldS
        
        if GetNumHeroSpell(u , HolyShieldS[i]) != 0 then
          call CastAbility(u , HolyShieldS[i] , GetUnitAbilityLevel(u, HolyShieldS[i]))
        endif
        
        
        set i=i + 1
    endloop


endfunction

//===========================================================================
// Trigger: RbAbil Copy
//===========================================================================



function InitDataRA4 takes nothing returns nothing

   set AbilSpellRB1[0]='AHtb'
   set AbilSpellRB1[1]='AHbn'
   set AbilSpellRB1[2]='AOhx'
   set AbilSpellRB1[3]='AOcl'
   set AbilSpellRB1[4]='AUfn'
   set AbilSpellRB1[5]='Auhf'
   set AbilSpellRB1[6]='Acrs'
   set AbilSpellRB1[7]='AEsh'
   set AbilSpellRB1[8]='Afae'
   set AbilSpellRB1[9]='AEer'
   set AbilSpellRB1[10]='ANab'
   set AbilSpellRB1[11]='ANso'
   set AbilSpellRB1[12]='ANdh'
   set AbilSpellRB1[13]='ANfl'
   set AbilSpellRB1[14]='ACls'
   set AbilSpellRB1[15]='ANpa'
   set AbilSpellRB1[16]='ANen'
   
   
   set AbilSRB1_count=16
      

   set AbilSpellRB2[0]='AHfs'
   set AbilSpellRB2[1]='AHbz'
   set AbilSpellRB2[2]='AOsh'
   set AbilSpellRB2[3]='AUim'
   set AbilSpellRB2[4]='AUdd'
   set AbilSpellRB2[5]='AUcs'
   set AbilSpellRB2[6]='ANst'
   set AbilSpellRB2[7]='ANhs'
   set AbilSpellRB2[8]='ANcs'
   set AbilSpellRB2[9]='ANsi'
   set AbilSpellRB2[10]='ANrf'
   set AbilSpellRB2[11]='ANbf'
   set AbilSpellRB2[12]='A046'
   set AbilSpellRB2[13]='Aclf'
   set AbilSpellRB2[14]='Asta'
   set AbilSpellRB2[15]='ANmo'
   set AbilSpellRB2[16]='A05X'
   set AbilSpellRB2[17]='A017'
   set AbilSpellRB2[18]='A046'
   set AbilSRB2_count=18
   
   set AbilSpellRB3[0]='AHtc'
   set AbilSpellRB3[1]='AOws'
   set AbilSpellRB3[2]='AEsf'
   set AbilSpellRB3[3]='AEfk'
   set AbilSpellRB3[4]='ANht'
   set AbilSpellRB3[5]='AOsw'
   set AbilSpellRB3[6]='AOsf'
   set AbilSpellRB3[7]='AHwe'
      
   set AbilSRB3_count=7
   
   
   
   
   
   
   
   
   

endfunction


function GetRandomAbility1_B takes nothing returns integer
local integer I1= GetRandomInt(0, AbilSRB1_count + AbilSRB2_count + AbilSRB3_count + 2)


if I1 <= AbilSRB1_count then

return AbilSpellRB1[I1]

elseif I1 <= AbilSRB1_count + AbilSRB2_count + 1 then

return AbilSpellRB2[I1 - AbilSRB1_count - 1]

else
return AbilSpellRB3[I1 - AbilSRB1_count - AbilSRB2_count - 2]

endif




return AbilSpellRB1[GetRandomInt(0, AbilSRB1_count)]
endfunction









function Trig_RbAbil_Copy_Actions takes nothing returns nothing

call InitDataRA4()
endfunction

//===========================================================================
function InitTrig_RbAbil_Copy takes nothing returns nothing
    set gg_trg_RbAbil_Copy=CreateTrigger()
    call TriggerRegisterTimerEventSingle(gg_trg_RbAbil_Copy, 0.00)
    call TriggerAddAction(gg_trg_RbAbil_Copy, function Trig_RbAbil_Copy_Actions)
endfunction


//===========================================================================
// Trigger: AbilS Copy
//===========================================================================

function SaveAbilData takes integer Abil,string order,integer typ returns nothing

    call SaveInteger(HT_AbilityData, Abil, 1, typ)
    call SaveStr(HT_AbilityData, Abil, 2, order)
endfunction


function InitDataA1 takes nothing returns nothing
   call SaveAbilData('Aclf' , "cloudoffog" , 2)
   call SaveAbilData('AHtb' , "thunderbolt" , 1)
   call SaveAbilData('AHbn' , "banish" , 1)
   call SaveAbilData('AHfs' , "flamestrike" , 2)
   call SaveAbilData('AHwe' , "waterelemental" , 3)
   call SaveAbilData('AHtc' , "thunderclap" , 3)
   call SaveAbilData('AHhb' , "holybolt" , 1)
   call SaveAbilData('AHbz' , "blizzard" , 2)
   call SaveAbilData('AHpx' , "summonphoenix" , 3)
   call SaveAbilData('Ainf' , "innerfire" , 1)
   
   
    call SaveAbilData('AOww' , "whirlwind" , 3)
    call SaveAbilData('AOhw' , "healingwave" , 1)
    call SaveAbilData('AOws' , "stomp" , 3)
    call SaveAbilData('AOls' , "Locustswarm" , 3)
    call SaveAbilData('AOsw' , "ward" , 2)
    call SaveAbilData('AOhx' , "hex" , 3)
    call SaveAbilData('AOvd' , "voodoo" , 3)
    call SaveAbilData('AOwk' , "windwalk" , 3)
    call SaveAbilData('AOsh' , "shockwave" , 2)
    call SaveAbilData('AOcl' , "chainlightning" , 1)
    call SaveAbilData('Absk' , "berserk" , 3)
    call SaveAbilData('Aspl' , "spiritlink" , 1)
    call SaveAbilData('Ablo' , "bloodlust" , 1)
    call SaveAbilData('Ahwd' , "healingward" , 2)
    call SaveAbilData('Asta' , "stasistrap" , 2)
    
    
    
    call SaveAbilData('AUfn' , "frostnova" , 1)
    call SaveAbilData('AUcb' , "Carrionscarabs" , 3)
    call SaveAbilData('AUin' , "dreadlordinferno" , 2)
    call SaveAbilData('AUfu' , "frostarmor" , 1)
    call SaveAbilData('AUim' , "impale" , 2)
    call SaveAbilData('AUdp' , "deathpact" , 1)
    call SaveAbilData('AUdd' , "deathanddecay" , 2)
    call SaveAbilData('AUcs' , "carrionswarm" , 2)
    call SaveAbilData('Aam2' , "antimagicshell" , 1)
    call SaveAbilData('Arai' , "raisedead" , 3)
    call SaveAbilData('Auhf' , "unholyfrenzy" , 1)
    call SaveAbilData('Acrs' , "curse" , 1)
   
    
    
    call SaveAbilData('AEsv' , "spiritofvengeance" , 3)
    call SaveAbilData('AEfk' , "fanofknives" , 3)
    call SaveAbilData('AEer' , "entanglingroots" , 1)
    call SaveAbilData('AEsf' , "starfall" , 3)
    call SaveAbilData('AEim' , "immolation" , 3)
    call SaveAbilData('AHfa' , "flamingarrows" , 1)
    call SaveAbilData('AEtq' , "tranquility" , 3)
    call SaveAbilData('AEsh' , "shadowstrike" , 1)
    call SaveAbilData('Afae' , "faeriefire" , 1)
    call SaveAbilData('Arej' , "rejuvination" , 1)
    
    
    
    call SaveAbilData('ANhs' , "healingspray" , 2)
    call SaveAbilData('ANbr' , "battleroar" , 3)
    call SaveAbilData('ANvc' , "volcano" , 2)
    call SaveAbilData('ANst' , "stampede" , 2)
    call SaveAbilData('ANcs' , "clusterrockets" , 2)
    call SaveAbilData('ANab' , "acidbomb" , 1)
    call SaveAbilData('ANsi' , "silence" , 2)
    call SaveAbilData('ANrf' , "rainoffire" , 2)
    call SaveAbilData('ANbf' , "breathoffire" , 2)
    call SaveAbilData('ANsy' , "summonfactory" , 2)
    
    
    call SaveAbilData('Arsq' , "summonquillbeast" , 3)
    call SaveAbilData('ANsg' , "summongrizzly" , 3)
    call SaveAbilData('ANlm' , "slimemonster" , 3)
    call SaveAbilData('ANsw' , "summonwareagle" , 3)
    call SaveAbilData('ANfl' , "forkedlightning" , 1)
    call SaveAbilData('ANso' , "soulburn" , 1)
    call SaveAbilData('ACls' , "lightningshield" , 1)

    call SaveAbilData('ANdh' , "drunkenhaze" , 1)
    call SaveAbilData('A046' , "breathoffrost" , 2)
    call SaveAbilData('ANpa' , "parasite" , 1)
    call SaveAbilData('ANen' , "ensnare" , 1)
     call SaveAbilData('ANht' , "howlofterror" , 3)

     call SaveAbilData('ANmo' , "monsoon" , 2)
     call SaveAbilData('AOsf' , "spiritwolf" , 3)
     
     call SaveAbilData('A05X' , "channel" , 2)
     call SaveAbilData('A017' , "channel" , 2)
     call SaveAbilData('ANsi' , "silence" , 2)
endfunction 

function InitDataRA2 takes nothing returns nothing

   set AbilSpellRA1[0]='AHtb'
   set AbilSpellRA1[1]='AHbn'
   set AbilSpellRA1[2]='AOhx'
   set AbilSpellRA1[3]='AOcl'
   set AbilSpellRA1[4]='AUfn'
   set AbilSpellRA1[5]='Auhf'
   set AbilSpellRA1[6]='Acrs'
   set AbilSpellRA1[7]='AEsh'
   set AbilSpellRA1[8]='Afae'
   set AbilSpellRA1[9]='AEer'
   set AbilSpellRA1[10]='ANab'
   set AbilSpellRA1[11]='ANso'
   set AbilSpellRA1[12]='ANdh'
   set AbilSpellRA1[13]='ANfl'
   set AbilSpellRA1[14]='ACls'
   set AbilSpellRA1[15]='ANpa'
   set AbilSpellRA1[16]='ANen'
   
   
   set AbilSRA1_count=16
      

   set AbilSpellRA2[0]='AHfs'
   set AbilSpellRA2[1]='AHbz'
   set AbilSpellRA2[2]='AOsh'
   set AbilSpellRA2[3]='AUim'
   set AbilSpellRA2[4]='AUdd'
   set AbilSpellRA2[5]='AUcs'
   set AbilSpellRA2[6]='ANst'
   set AbilSpellRA2[7]='ANhs'
   set AbilSpellRA2[8]='ANcs'
   set AbilSpellRA2[9]='ANsi'
   set AbilSpellRA2[10]='ANrf'
   set AbilSpellRA2[11]='ANbf'
   set AbilSpellRA2[12]='A046'
   set AbilSpellRA2[13]='Aclf'
   set AbilSpellRA2[14]='Asta'
   set AbilSpellRA2[15]='ANmo'
   set AbilSpellRA2[16]='A05X'
   set AbilSpellRA2[17]='A017'
   set AbilSpellRA2[18]='A046'
   
   set AbilSRA2_count=18
   
   set AbilSpellRA3[0]='AHtc'
   set AbilSpellRA3[1]='AOws'
   set AbilSpellRA3[2]='AEsf'
   set AbilSpellRA3[3]='AEfk'
   set AbilSpellRA3[4]='ANht'
   set AbilSRA3_count=4
   
   
   
   
   
   
   
   
   

endfunction



function Trig_AbilS_Copy_Actions takes nothing returns nothing
call InitDataA1()
call InitDataRA2()
endfunction

//===========================================================================
function InitTrig_AbilS_Copy takes nothing returns nothing
    set gg_trg_AbilS_Copy=CreateTrigger()
    call TriggerRegisterTimerEventSingle(gg_trg_AbilS_Copy, 0.00)
    call TriggerAddAction(gg_trg_AbilS_Copy, function Trig_AbilS_Copy_Actions)
endfunction


//===========================================================================
// Trigger: RaAbil Copy
//===========================================================================
                        function GetRandomAbility1 takes nothing returns integer
local integer I1= GetRandomInt(0, AbilSRA1_count + AbilSRA2_count + AbilSRA3_count + 2)


if I1 <= AbilSRA1_count then

return AbilSpellRA1[I1]

elseif I1 <= AbilSRA1_count + AbilSRA2_count + 1 then

return AbilSpellRA2[I1 - AbilSRA1_count - 1]

else
return AbilSpellRA3[I1 - AbilSRA1_count - AbilSRA2_count - 2]

endif




return AbilSpellRA1[GetRandomInt(0, AbilSRA1_count)]
endfunction


function GetRandomAbility2 takes nothing returns integer
local integer I1= GetRandomInt(0, AbilSRA2_count + AbilSRA3_count + 1)


if I1 <= AbilSRA2_count then

return AbilSpellRA2[I1]

else

return AbilSpellRA3[I1 - AbilSRA2_count - 1]

endif




return AbilSpellRA2[GetRandomInt(0, AbilSRA2_count)]
endfunction





function CastRandomSpell1Timer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    
    local unit u= LoadUnitHandle(HT, i, 1)
    local integer sp= LoadInteger(HT, i, 2)
    local integer lvl= LoadInteger(HT, i, 3)
    local unit u2= LoadUnitHandle(HT, i, 4)
    local real x1= LoadReal(HT, i, 5)
    local real y1= LoadReal(HT, i, 6)

    local unit DummyU= CreateUnit(GetOwningPlayer(u), 'h015', GetUnitX(u), GetUnitY(u), GetUnitFacing(u))
    local integer Type= LoadInteger(HT_AbilityData, sp, 1)
    local string Order= LoadStr(HT_AbilityData, sp, 2)
    local boolean CAST= false
    
    if GetUnitTypeId(u2) == 'h00T' or GetUnitTypeId(u2) == 'h014' or GetUnitTypeId(u2) == 'h015' then
    
        set u2=udg_units01[GetConvertedPlayerId(GetOwningPlayer(u2))]
    
    endif
    
    
    call UnitAddAbility(DummyU, sp)
    call SetUnitAbilityLevel(DummyU, sp, lvl)
    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(DummyU, sp), ConvertAbilityRealLevelField('aran'), lvl - 1, 9999999)


    call UnitApplyTimedLife(DummyU, 'BTLF', 21)
    if Type == 1 then
       set CAST=IssueTargetOrder(DummyU, Order, u2)
        
        if CAST == false then
                set sp=GetRandomAbility2()
                call UnitAddAbility(DummyU, sp)
                call SetUnitAbilityLevel(DummyU, sp, lvl)
                call BlzSetAbilityRealLevelField(BlzGetUnitAbility(DummyU, sp), ConvertAbilityRealLevelField('aran'), lvl - 1, 9999999)
                set Type=LoadInteger(HT_AbilityData, sp, 1)
                set Order=LoadStr(HT_AbilityData, sp, 2)
        endif
       
       
    endif
    if Type == 2 then
        if u2 != null then
             set CAST=IssuePointOrder(DummyU, Order, GetUnitX(u2), GetUnitY(u2))
        else
             set CAST=IssuePointOrder(DummyU, Order, x1, y1)
        endif
    endif
    if Type == 3 then
        if u2 != null then
             call SetUnitX(DummyU, GetUnitX(u2))
             call SetUnitY(DummyU, GetUnitY(u2))
             set CAST=IssueImmediateOrder(DummyU, Order)
        else
             call SetUnitX(DummyU, x1)
             call SetUnitY(DummyU, y1)
             set CAST=IssueImmediateOrder(DummyU, Order)
        endif
    endif
    
    
     if CAST == false then
         call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, GetObjectName(sp) + "ERROR: " + Order + " " + I2S(Type))
     endif
     
     call DestroyTimer(t)
     call FlushChildHashtable(HT, i)
    
    call SaveInteger(HT, GetHandleId(u), - 4555101, lvl)
    
     set t=null
     set u=null
     set u2=null
     set Order=null
     set DummyU=null
endfunction


function CastRandomSpell1 takes unit u,integer sp,integer lvl,unit u2,real x1,real y1 returns nothing
    local timer t= CreateTimer()
    local integer i= GetHandleId(t)
    
    call SaveUnitHandle(HT, i, 1, u)
    call SaveInteger(HT, i, 2, sp)
    call SaveInteger(HT, i, 3, lvl)
    call SaveUnitHandle(HT, i, 4, u2)
    call SaveReal(HT, i, 5, x1)
    call SaveReal(HT, i, 6, y1)

 
    call TimerStart(t, 0, false, function CastRandomSpell1Timer)

    set t=null
    set u=null
    set u2=null
    
endfunction











function Trig_RaAbil_Copy_Actions takes nothing returns nothing
local unit u= GetTriggerUnit()
local unit u2= GetSpellTargetUnit()
local real x1= GetSpellTargetX()
local real y1= GetSpellTargetY()
local integer ID= 0


  
call AbilityChanelCst(u , u2 , x1 , y1 , GetSpellAbilityId())
  
if Trig_Disable_Abilities_Func001C() == false and BlzGetAbilityCooldown(GetSpellAbilityId(), GetUnitAbilityLevel(GetTriggerUnit(), GetSpellAbilityId()) - 1) > 0 then
if GetUnitAbilityLevel(u, 'A04L') > 0 then

if u2 != null and u != u2 then
    set ID=GetRandomAbility1()
    call ElemFuncStart(u , 'A04L')
    call CreateTextTagTimerColor("CHAOS MAGIC " + GetObjectName(ID) , 1 , GetUnitX(u) , GetUnitY(u) , 50 , 1 , 122 , 50 , 255)
    call CastRandomSpell1(u , ID , GetUnitAbilityLevel(u, 'A04L') , u2 , 0 , 0)

elseif x1 != 0 and y1 != 0 then
    call ElemFuncStart(u , 'A04L')
      set ID=GetRandomAbility2()
       call CreateTextTagTimerColor("CHAOS MAGIC  " + GetObjectName(ID) , 1 , GetUnitX(u) , GetUnitY(u) , 50 , 1 , 122 , 50 , 255)

  call CastRandomSpell1(u , ID , GetUnitAbilityLevel(u, 'A04L') , null , x1 , y1)

endif
     



endif
endif



set u=null
set u2=null



endfunction


//===========================================================================
function InitTrig_RaAbil_Copy takes nothing returns nothing
    set gg_trg_RaAbil_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_RaAbil_Copy, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddAction(gg_trg_RaAbil_Copy, function Trig_RaAbil_Copy_Actions)
    call InitArcaneTalant()
endfunction


//===========================================================================
// Trigger: AbilDragonStaff Copy
//===========================================================================

function EndTimerTr takes nothing returns nothing
    local timer Tr= GetExpiredTimer()
    local unit u= LoadUnitHandle(HT_it, GetHandleId(Tr), 1)
    local integer i1= LoadInteger(HT_it, GetHandleId(Tr), 2)
    local integer i2= LoadInteger(HT_it, GetHandleId(Tr), 3)
    
    call SetHeroAgi(u, GetHeroAgi(u, false) + i1, false)
    call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) - i2, 0)
    
    call FlushChildHashtable(HT_it, GetHandleId(Tr))
    call DestroyTimer(Tr)
    set Tr=null
    set u=null
endfunction

function Trig_AbilDragonStaff_Copy_Actions takes nothing returns nothing
local timer Tr= null
local integer i1= 0
local integer i2= 0
local unit u=  GetTriggerUnit()

if GetSpellAbilityId() == 'A03B' then

        
    call BlzSetAbilityRealLevelField(GetSpellAbility(), ConvertAbilityRealLevelField('Ocl1'), 0, GetHeroInt(u, true) * 5)

elseif GetSpellAbilityId() == 'A049' and Trig_Disable_Abilities_Func001C() == false then
    set i1=GetHeroAgi(u, true) * 3
    set i2=i1 * 2
    
    call SetHeroAgi(u, GetHeroAgi(u, false) - i1, false)
    call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + i2, 0)

     set Tr=CreateTimer()
     call SaveUnitHandle(HT_it, GetHandleId(Tr), 1, u)
     call SaveInteger(HT_it, GetHandleId(Tr), 2, i1)
     call SaveInteger(HT_it, GetHandleId(Tr), 3, i2)
     call TimerStart(Tr, 15, false, function EndTimerTr)
     
     set Tr=null
endif

    set u=null
endfunction

//===========================================================================
function InitTrig_AbilDragonStaff_Copy takes nothing returns nothing
    set gg_trg_AbilDragonStaff_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_AbilDragonStaff_Copy, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerAddAction(gg_trg_AbilDragonStaff_Copy, function Trig_AbilDragonStaff_Copy_Actions)
endfunction


//===========================================================================
// Trigger: AbilityData
//===========================================================================
function AbilityDataOrTempAD takes unit u,integer id,real lvl returns integer
    if GetUnitAbilityLevel(u, id) > 0 then
        return GetAbilityData(u , id)
    else
        return TempAbilityData(id , lvl)
    endif
endfunction
//===========================================================================
// Trigger: Spell Death Pact
//===========================================================================
function CastDeathPact takes unit u,unit target,real lvl returns nothing
    local integer A= AbilityDataOrTempAD(u , 'A00M' , lvl)
    local real healAmount= GetWidgetLife(target) * s__AbilityData_GetParam1(A)

    call HealUnit(u , target , healAmount)
    
    call AddSpecialEffectTargetTimer("Abilities\\Spells\\Undead\\DeathPact\\DeathPactCaster.mdl" , u , "origin" , 2)
    call AddSpecialEffectTargetTimer("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl" , target , "origin" , 2)
    
    call s__AbilityData_MayByRemove(A)
endfunction
//===========================================================================
// Trigger: Spell Holy Light
//===========================================================================
function HolyLight takes unit u,unit u2,real lvl returns nothing
    local integer A= AbilityDataOrTempAD(u , 'A084' , lvl)

    if IsUnitEnemy(u, GetOwningPlayer(u2)) then
        call MagicDamage(u , u2 , s__AbilityData_GetDamage1(A) , 'A084')
    else
        call HealUnit(u , u2 , s__AbilityData_GetParam1(A))
    endif
    call AddSpecialEffectTargetTimer("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl" , u2 , "chest" , 2)

    call s__AbilityData_MayByRemove(A)
endfunction
//===========================================================================
// Trigger: Spell Tranquility
//===========================================================================

function TranquilityStartBoolexpr takes nothing returns boolean
    if GetWidgetLife(GetFilterUnit()) > 0.405 and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GLOB_TRANQUILITY_U)) == false then
        call HealUnit(GLOB_TRANQUILITY_U , GetFilterUnit() , GLOB_TRANQUILITY_HEAL)
        call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "HEAL")
    endif
    
    return false
endfunction


function TranquilityTimer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local unit u1= LoadUnitHandle(HT, i, 1)
    local real duration= LoadReal(HT, i, 2)
    local real heal= LoadReal(HT, i, 3)
    local real per= LoadReal(HT, i, 4)
    local real area= LoadReal(HT, i, 5)
    
    
    if duration <= 0 then
        call DestroyTimer(t)
        call FlushChildHashtable(HT, i)
    else
        set GLOB_TRANQUILITY_U=u1
        set GLOB_TRANQUILITY_HEAL=heal
        call GroupEnumUnitsInRange(AbilTranquilityGroup, GetUnitX(u1), GetUnitY(u1), area, TranquilityBoolexpr)
        call SaveReal(HT, i, 2, duration - per)
    endif
    

    
    set u1=null
    set t=null
endfunction




function TranquilityStart takes unit u1,real heal,real per,real duration,real area returns nothing
    local timer t= CreateTimer()
    local integer i= GetHandleId(t)

    call SaveUnitHandle(HT, i, 1, u1)
    call SaveReal(HT, i, 2, duration)
    call SaveReal(HT, i, 3, heal)
    call SaveReal(HT, i, 4, per)
    call SaveReal(HT, i, 5, area)
    
    call AddSpecialEffectTargetTimer("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl" , u1 , "head" , duration)

    call TimerStart(t, per, true, function TranquilityTimer)
    
    set t=null
endfunction
//===========================================================================
// Trigger: Spell Rejuvination
//===========================================================================
function RejuvinationTimer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local unit u1= LoadUnitHandle(HT, i, 1)
    local unit u2= LoadUnitHandle(HT, i, 2)
    local real duration= LoadReal(HT, i, 3)
    local real heal= LoadReal(HT, i, 4)
    local real manaR= LoadReal(HT, i, 5)
    
    
    if GetUnitAbilityLevel(u2, 'Brej') > 0 then
        call HealUnit(u1 , u2 , 0.1 * heal / duration)
        call SetUnitState(u2, UNIT_STATE_MANA, GetUnitState(u2, UNIT_STATE_MANA) + 0.1 * manaR / duration)
    else
        call DestroyTimer(t)
        call FlushChildHashtable(HT, i)
    endif
    

    
    set u1=null
    set u2=null
    set t=null
endfunction




function RejuvinationStart takes unit u1,unit u2,real heal,real manaR,real duration1,real duration2 returns nothing
    local timer t= CreateTimer()
    local integer i= GetHandleId(t)

    call SaveUnitHandle(HT, i, 1, u1)
    call SaveUnitHandle(HT, i, 2, u2)
    
    if IsUnitType(u2, UNIT_TYPE_HERO) then
        call SaveReal(HT, i, 3, duration1)
        call SetBuff(u2 , 4 , duration1)
    else
        call SaveReal(HT, i, 3, duration2)
        call SetBuff(u2 , 4 , duration2)
    endif
    call SaveReal(HT, i, 4, heal)
    call SaveReal(HT, i, 5, manaR)
    
            
    call TimerStart(t, 0.1, true, function RejuvinationTimer)
    

    set t=null
endfunction
//===========================================================================
// Trigger: Abil Healing Ward
//===========================================================================

function HealingWardStartBoolexpr takes nothing returns boolean
    if GetWidgetLife(GetFilterUnit()) > 0.405 and IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GLOB_HEALING_WARD_U2)) == false then
        call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, R2S(GLOB_HEALING_WARD_HEAL))
        call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl" , GetFilterUnit() , "chest"))
        call HealUnit(GLOB_HEALING_WARD_U , GetFilterUnit() , GLOB_HEALING_WARD_HEAL)
    endif
    
    return false
endfunction


function HealingWardStartTimer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local unit u= LoadUnitHandle(HT, i, 1)
    local unit u2= LoadUnitHandle(HT, i, 2)
    local real heal= LoadReal(HT, i, 3)
    local real area= LoadReal(HT, i, 4)

    if u2 == null or GetWidgetLife(u2) <= 0.405 then
        call DestroyTimer(t)
        call FlushChildHashtable(HT, i)

    else
        set GLOB_HEALING_WARD_U=u
        set GLOB_HEALING_WARD_U2=u2
        set GLOB_HEALING_WARD_HEAL=heal
        call GroupEnumUnitsInRange(AbilHealingWardGroup, GetUnitX(u2), GetUnitY(u2), area, HealingWardBoolexpr)
    endif

    set u=null
    set u2=null
    set t=null
endfunction



function HealingWardStart takes unit u,real x,real y,real heal,real area,real time returns nothing
    local unit u2= CreateUnit(GetOwningPlayer(u), 'ohwd', x, y, 0)
    local timer t= CreateTimer()
    call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, R2S(x))
     call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, R2S(y))
    
    call SaveUnitHandle(HT, GetHandleId(t), 1, u)
    call SaveUnitHandle(HT, GetHandleId(t), 2, u2)
    call SaveReal(HT, GetHandleId(t), 3, heal)
    call SaveReal(HT, GetHandleId(t), 4, area)

    call TimerStart(t, 1, true, function HealingWardStartTimer)
    call UnitApplyTimedLife(u2, 'ohwd', time)
    

    set u2=null
    set t=null
endfunction


//===========================================================================
// Trigger: Abil Healing Wave
//===========================================================================
function WaveEnd takes nothing returns nothing
    local timer t= GetExpiredTimer()

    call DestroyLightning(LoadLightningHandle(HT, GetHandleId(t), 1))
    call FlushChildHashtable(HT, GetHandleId(t))
    call DestroyTimer(t)
    set t=null
endfunction

function Wave takes real x1,real y1,real x2,real y2,string line,real time returns nothing
    local lightning l= AddLightningEx(line, true, x1, y1, 40, x2, y2, 40)
    local timer t= CreateTimer()
    call SaveLightningHandle(HT, GetHandleId(t), 1, l)
    call TimerStart(t, time, false, function WaveEnd)
    set l=null
    set t=null
endfunction


function Play3dSound takes string s,real x,real y returns nothing
    local sound snd=  CreateSound(s, false, true, true, 0, 0, "DefaultEAXON")
    call SetSoundChannel(snd, 0)
    call SetSoundDistances(snd, 600.00, 10000.00)
    call SetSoundDistanceCutoff(snd, 3000.00)
    call SetSoundDuration(snd, GetSoundFileDuration(s))
    call SetSoundVolume(snd, 127)
    call SetSoundConeAngles(snd, 0.0, 0.0, 127)
    call SetSoundConeOrientation(snd, 0.0, 0.0, 0.0)
    call SetSoundPitch(snd, 1.0)
    call SetSoundPosition(snd, x, y, 40)
    call SetSoundVolume(snd, 120)
    call StartSound(snd)
    call KillSoundWhenDone(snd)
    
    set snd=null
endfunction




function StartWave takes unit u1,unit u2,real dmg,real heal,real x,real y returns nothing
    call Wave(x , y , GetUnitX(u2) , GetUnitY(u2) , "HWPB" , 0.2)
    call Play3dSound("Abilities/Spells/Orc/HealingWave/HealingWave.flac" , x , y)
    
      //  call AddSpecialEffectTargetTimer( "Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", u2, "chest",2)
        
        
    if IsUnitEnemy(u1, GetOwningPlayer(u2)) then
        call MagicDamage(u1 , u2 , dmg , 'A085')
    else
        call HealUnit(u1 , u2 , heal)
    endif
endfunction 

function HealingWaveFunc takes nothing returns boolean

    if GLOB_HW_ACTIVE and GetWidgetLife(GetFilterUnit()) > 0.405 and IsUnitInGroup(GetFilterUnit(), GLOB_HW_G) == false and GetFilterUnit() != GLOB_HW_U2 then
        
        call StartWave(GLOB_HW_U1 , GetFilterUnit() , GLOB_HW_DMG , GLOB_HW_HEAL , GLOB_HW_X , GLOB_HW_Y)
        set GLOB_HW_U2=GetFilterUnit()
        call GroupAddUnit(GLOB_HW_G, GetFilterUnit())
        set GLOB_HW_COUNT=GLOB_HW_COUNT - 1
        set GLOB_HW_ACTIVE=false
        set GLOB_HW_X=GetUnitX(GLOB_HW_U2)
        set GLOB_HW_Y=GetUnitY(GLOB_HW_U2)

    endif

    return false
endfunction

function TimerHealingWave takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local integer i= GetHandleId(t)
    local real range= LoadReal(HT, i, 7)
    set GLOB_HW_I=i
    set GLOB_HW_COUNT=LoadInteger(HT, i, 1)
    set GLOB_HW_U1=LoadUnitHandle(HT, i, 2)
    set GLOB_HW_U2=LoadUnitHandle(HT, i, 3)
    set GLOB_HW_DMG=LoadReal(HT, i, 4)
    set GLOB_HW_HEAL=LoadReal(HT, i, 5)
    set GLOB_HW_G=LoadGroupHandle(HT, i, 6)
    set GLOB_HW_X=LoadReal(HT, i, 8)
    set GLOB_HW_Y=LoadReal(HT, i, 9)
    
    set GLOB_HW_ACTIVE=true
    
    call GroupEnumUnitsInRange(GLOB_HW_G, GLOB_HW_X, GLOB_HW_Y, range, HealingWave1)
    
    
    if GLOB_HW_COUNT > 0 and GLOB_HW_ACTIVE == false then
        call SaveInteger(HT, GetHandleId(t), 1, GLOB_HW_COUNT)
      //  call SaveUnitHandle(HT,GetHandleId(t),2,GLOB_HW_U1)
        call SaveUnitHandle(HT, GetHandleId(t), 3, GLOB_HW_U2)
      //  call SaveReal(HT,GetHandleId(t),4,GLOB_HW_DMG)
      //  call SaveReal(HT,GetHandleId(t),5,GLOB_HW_HEAL)
      //  call SaveGroupHandle(HT,GetHandleId(t),6,GLOB_HW_G)
      
      call SaveReal(HT, GetHandleId(t), 7, GLOB_HW_X)
      call SaveReal(HT, GetHandleId(t), 8, GLOB_HW_Y)
    else
        call DestroyTimer(t)
        call DestroyGroup(GLOB_HW_G)
        call FlushChildHashtable(HT, i)
    endif

    set t=null
endfunction 




function HealingWaveStart takes unit u1,unit u2,integer count,real heal,real dmg,real range2 returns nothing
    local group g= CreateGroup()
    local timer t= CreateTimer()
    
    call GroupAddUnit(g, u2)
    call StartWave(u1 , u2 , dmg , heal , GetUnitX(u1) , GetUnitY(u1))
    
    call SaveInteger(HT, GetHandleId(t), 1, count - 1)
    call SaveUnitHandle(HT, GetHandleId(t), 2, u1)
    call SaveUnitHandle(HT, GetHandleId(t), 3, u2)
    call SaveReal(HT, GetHandleId(t), 4, dmg)
    call SaveReal(HT, GetHandleId(t), 5, heal)
    call SaveGroupHandle(HT, GetHandleId(t), 6, g)
    call SaveReal(HT, GetHandleId(t), 7, range2)
    call SaveReal(HT, GetHandleId(t), 8, GetUnitX(u2))
    call SaveReal(HT, GetHandleId(t), 9, GetUnitY(u2))
    
    call TimerStart(t, 0.2, true, function TimerHealingWave)
    set t=null
    set g=null
endfunction
//===========================================================================
// Trigger: Cast
//===========================================================================
function UsOrderUTimer51 takes unit u1,unit u2,real dmg returns nothing
    local real x= GetUnitX(u1)
    local real y= GetUnitY(u1)
    local boolean check= false
    local unit Caster1= CreateUnit(GetOwningPlayer(u1), 'h015', x, y, 0)
    call UnitAddAbility(Caster1, 'A07Y')

    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(Caster1, 'A07Y'), ABILITY_RLF_DAMAGE_CTB1, 0, dmg)
    set check=IssueTargetOrder(Caster1, "thunderbolt", u2)
    
    call UnitApplyTimedLife(Caster1, 'B000', 3)
    set Caster1=null
    set u1=null
    set u2=null
endfunction


function realaisFrostBolt takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u1= LoadUnitHandle(HT, GetHandleId(t), 3)
    local unit u2= LoadUnitHandle(HT, GetHandleId(t), 4)
    local integer count= LoadInteger(HT, GetHandleId(t), 1)

    if count == 0 then
        call FlushChildHashtable(HT, GetHandleId(t))
        call DestroyTimer(t)
    else
        set count=count - 1
        call UsOrderUTimer51(u1 , u2 , LoadReal(HT, GetHandleId(t), 2))
        call SaveInteger(HT, GetHandleId(t), 1, count)
    endif
    set t=null
    set u1=null
    set u2=null
endfunction

function UsFrostBolt takes unit u1,unit u2,real dmg,integer count returns nothing
    local timer t= CreateTimer()
    call SaveInteger(HT, GetHandleId(t), 1, count)
    call SaveReal(HT, GetHandleId(t), 2, dmg)
    call SaveUnitHandle(HT, GetHandleId(t), 3, u1)
    call SaveUnitHandle(HT, GetHandleId(t), 4, u2)
    call TimerStart(t, 0.45, true, function realaisFrostBolt)
    set t=null
endfunction

function SandRefreshAbility takes unit hero,real time returns nothing
   local integer i1= 0
   local integer SpellId= 0
   local real cur_time
   loop
        exitwhen i1 > 10
        set SpellId=GetInfoHeroSpell(hero , i1)
        if LoadBoolean(Elem, SpellId, 4) then
            set cur_time=time * 2
        else
            set cur_time=time
        endif
        if BlzGetUnitAbilityCooldownRemaining(hero, SpellId) > 0 then
            call BlzStartUnitAbilityCooldown(hero, SpellId, BlzGetUnitAbilityCooldownRemaining(hero, SpellId) - time)
            elseif BlzGetUnitAbilityCooldownRemaining(hero, SpellId) < time then
              call BlzEndUnitAbilityCooldown(hero, SpellId)
        endif
        set i1=i1 + 1
    endloop
endfunction

function AbilityChannel takes nothing returns nothing
    local unit u= GLOB_AB_CH
    local unit u2= GLOB_TR_CH
    local real x1= GLOB_X1_CH
    local real y1= GLOB_Y1_CH
    local integer lvl= GLOB_LV_CH
    local integer ID= 0
    local integer id= GLOB_ID_CH
    local integer A= 0
   // local AbilityLvl = 0

    if GetUnitTypeId(u) == 'h00T' or GetUnitTypeId(u) == 'h014' or GetUnitTypeId(u) == 'h015' then
        set u=udg_units01[GetConvertedPlayerId(GetOwningPlayer(u))]
    endif

    if id == 'A07U' then
        if u2 != null and u != u2 then
            set ID=GetRandomAbility1()
            call CastRandomSpell1(u , ID , lvl , u2 , 0 , 0)
            set ID=GetRandomAbility1()
            call CastRandomSpell1(u , ID , lvl , u2 , 0 , 0)
        elseif x1 != 0 and y1 != 0 then
          set ID=GetRandomAbility2()
          call CastRandomSpell1(u , ID , lvl , null , x1 , y1)
          set ID=GetRandomAbility2()
          call CastRandomSpell1(u , ID , lvl , null , x1 , y1)
        endif
    endif

    if id == 'A07X' then
        call UsFrostBolt(u , u2 , 120 * GetUnitAbilityLevel(u, 'A07X') * ( 1 + 0.25 * R2I(GetClassUnitSpell(u , 7)) ) , GetClassUnitSpell(u , 9))
    endif

    if id == 'A083' then
        call SandRefreshAbility(u , 1.75 + 0.25 * I2R(GetUnitAbilityLevel(u, 'A083')))
    endif

    if id == 'A084' then
        call HolyLight(u , u2 , lvl)
    endif
    
    if id == 'A00M' then
        call CastDeathPact(u , u2 , lvl)
    endif

    if id == 'A085' then
        set A=AbilityDataOrTempAD(u , 'A085' , lvl)
        call HealingWaveStart(u , u2 , 4 , s__AbilityData_GetParam1(A) , s__AbilityData_GetDamage1(A) , s__AbilityData_GetRange2(A))
        call s__AbilityData_MayByRemove(A)
    endif

    if id == 'A086' then
        set A=AbilityDataOrTempAD(u , 'A086' , lvl)
        
        if u2 == null then
            call HealingWardStart(u , x1 , y1 , s__AbilityData_GetParam1(A) , s__AbilityData_GetArea1(A) , s__AbilityData_GetDurationNormal1(A))
        else
                    call HealingWardStart(u , x1 , y1 , s__AbilityData_GetParam1(A) , s__AbilityData_GetArea1(A) , s__AbilityData_GetDurationNormal1(A))
         //   call HealingWardStart(u,GetUnitX(u2),GetUnitY(u2),A.GetParam1(),A.GetArea1(),A.GetDurationNormal1() )    
        endif
        
        call s__AbilityData_MayByRemove(A)
    endif
    
    if id == 'A087' then
        set A=AbilityDataOrTempAD(u , 'A087' , lvl)
        call RejuvinationStart(u , u2 , s__AbilityData_GetParam1(A) , s__AbilityData_GetParam2(A) , s__AbilityData_GetDurationHero1(A) , s__AbilityData_GetDurationNormal1(A))
        call s__AbilityData_MayByRemove(A)
    endif
    

    if id == 'A089' then
        set A=AbilityDataOrTempAD(u , 'A089' , lvl)
        call TranquilityStart(u , s__AbilityData_GetParam1(A) , s__AbilityData_GetParam2(A) , s__AbilityData_GetDurationHero1(A) , s__AbilityData_GetArea1(A))
        call s__AbilityData_MayByRemove(A)
    endif
    


    set u=null
    set u2=null
endfunction




//===========================================================================
// Trigger: Multicast Copy
//===========================================================================


function MultiBonusCast takes nothing returns nothing
local integer id_spell= GetSpellAbilityId()
local unit caster= GetTriggerUnit()
local unit Beg= GetSpellTargetUnit()
local real GetX= GetSpellTargetX()
local real GetY= GetSpellTargetY()
local integer OrderUnit= GetUnitCurrentOrder(caster)
local real GetU
local timer Tim1
local real AbilLvl= GetUnitAbilityLevel(caster, 'A04F')
local real Chance= 0
local integer Mult= 0
local integer i1= 1
local integer OGRE_i
local integer OGRE_i2

    local real luck=  GetUnitLuck(caster)



if UnitHasItemS(caster , 'I08X') and LoadBoolean(Elem, id_spell, 1) then
    set Mult=2
endif


if AbilLvl == 0 and GetUnitTypeId(caster) != 'H01E' and Mult == 0 then
    set caster=null
    set Beg=null
    return
endif



if Trig_Disable_Abilities_Func001C() == false then

    if AbilLvl > 0 then

        if GetRandomReal(0, 100) <= ( 1.9 + 0.1 * AbilLvl ) * luck then
            set Mult=5 + Mult
        elseif GetRandomReal(0, 100) <= ( 3.85 + 0.15 * AbilLvl ) * luck then
            set Mult=4 + Mult
        elseif GetRandomReal(0, 100) <= ( 4.8 + 0.2 * AbilLvl ) * luck then
            set Mult=3 + Mult
        elseif GetRandomReal(0, 100) <= ( 8.75 + 0.25 * AbilLvl ) * luck then
            set Mult=2 + Mult
        elseif GetRandomReal(0, 100) <= ( 13.6 + 0.4 * AbilLvl ) * luck then
            set Mult=1 + Mult
        else
          set Mult=0 + Mult
        endif

    endif


    if GetUnitTypeId(caster) == 'H01E' then
      set OGRE_i=15 + GetHeroLevel(caster) * 2
      set OGRE_i2=OGRE_i / 100
      set OGRE_i=OGRE_i - OGRE_i2 * 100
      
      set Mult=Mult + OGRE_i2
      
      if GetRandomInt(1, 100) <= OGRE_i * luck then
      
        set Mult=Mult + 1
      
      endif
    endif





if Mult == 0 then

set caster=null
set Beg=null
set Tim1=null
return
endif
 
call CreateTextTagTimerColor("MULTICAST X" + I2S(Mult + 1) + "!" , 1 , GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , 50 , 1 , 50 , 50 , 255)

loop
exitwhen i1 > Mult

set Tim1=CreateTimer()
call SaveInteger(HY2, GetHandleId(Tim1), 1, id_spell)
call SaveUnitHandle(HY2, GetHandleId(Tim1), 2, caster)
call SaveUnitHandle(HY2, GetHandleId(Tim1), 3, Beg)
call SaveReal(HY2, GetHandleId(Tim1), 4, GetX)
call SaveReal(HY2, GetHandleId(Tim1), 5, GetY)
call SaveInteger(HY2, GetHandleId(Tim1), 6, OrderUnit)
call TimerStart(Tim1, 0.5 + I2R(i1) / 2, false, function MultiUnitBonus)

set i1=i1 + 1
endloop
endif
set caster=null
set Beg=null
set Tim1=null
endfunction

//===========================================================================
function InitTrig_Multicast_Copy takes nothing returns nothing
    set gg_trg_Multicast_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Multicast_Copy, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddAction(gg_trg_Multicast_Copy, function MultiBonusCast)
endfunction


//===========================================================================
// Trigger: AEah_Thorns
//===========================================================================
//Damaged 

//===========================================================================
// Trigger: AUts_Spiked Carapace
//===========================================================================
//Damaged 

//===========================================================================
// Trigger: I05G_MagicNecklaceOfAbsorption
//===========================================================================
//Damaged 

//===========================================================================
// Trigger: I07O_BoneArmor
//===========================================================================
//Damaged 

//===========================================================================
// Trigger: Astu Copy
//===========================================================================

 function GetCurrentSource takes unit u returns unit
    local integer CuId= GetUnitTypeId(u)
    if CuId == 'h015' or CuId == 'h014' or CuId == 'h00T' or CuId == 'n00V' then
        return udg_units01[GetConvertedPlayerId(GetOwningPlayer(u))]
    endif
    return u
 endfunction


function endTimerStone takes nothing returns nothing
    local timer t= GetExpiredTimer()
    local unit u1= LoadUnitHandle(HT, GetHandleId(t), 1)
    local unit u2= LoadUnitHandle(HT, GetHandleId(t), 2)
    call UnitShareVision(u2, GetOwningPlayer(u1), false)
    call SaveBoolean(ShateHT, GetHandleId(u2), GetHandleId(u1), false)
    call FlushChildHashtable(HT, GetHandleId(t))
    call DestroyTimer(t)
    set t=null
    set u1=null
    set u2=null
endfunction

function UsOrderU1 takes unit u1,unit u2,real x,real y,integer idsp,string ordstr,real life_1,abilityreallevelfield REALF returns boolean
    local boolean BL
    local unit Caster1= CreateUnit(GetOwningPlayer(u1), 'h015', x, y, Rad2Deg(Atan2(GetUnitY(u2) - y, GetUnitX(u2) - x)))
    call UnitAddAbility(Caster1, idsp)
    call BlzSetAbilityRealLevelField(BlzGetUnitAbility(Caster1, idsp), REALF, 0, life_1)
    set BL=IssueTargetOrder(Caster1, ordstr, u2)
    call UnitApplyTimedLife(Caster1, 'B000', 6)
    set Caster1=null
    return BL
endfunction

function stoneProtectA takes nothing returns nothing
local timer t= GetExpiredTimer()
local integer i= GetHandleId(t)
local unit u1= LoadUnitHandle(HT, i, 1)
local unit u2= LoadUnitHandle(HT, i, 2)
local boolean Bil= false
call DestroyTimer(t)
call FlushChildHashtable(HT, i)

    if BlzGetUnitAbilityCooldownRemaining(u1, 'A060') <= 0.001 then
    
        if LoadBoolean(ShateHT, GetHandleId(u2), GetHandleId(u1)) == false and IsUnitVisible(u2, GetOwningPlayer(u1)) == false then
            call UnitShareVision(u2, GetOwningPlayer(u1), true)
            set t=CreateTimer()
            call SaveUnitHandle(HT, GetHandleId(t), 1, u2)
            call SaveUnitHandle(HT, GetHandleId(t), 2, u1)
            call TimerStart(t, 3, false, function endTimerStone)
            call SaveBoolean(ShateHT, GetHandleId(u2), GetHandleId(u1), true)
            
        endif
        set Bil=UsOrderU1(u1 , u2 , GetUnitX(u1) , GetUnitY(u1) , 'A061' , "creepthunderbolt" , 200 * GetUnitAbilityLevel(u1, 'A060') , ABILITY_RLF_DAMAGE_CTB1)

    endif
    if Bil == true then
        if IsHeroUnitId(GetUnitTypeId(u2)) then
            call AbilStartCD(u1 , 'A060' , 9)
        else
            call AbilStartCD(u1 , 'A060' , 0.9)
        endif
    else
    endif
set u1=null
set u2=null
set t=null
endfunction

function stoneProtect takes unit u1,unit u2 returns nothing
    local timer t= CreateTimer()
    local integer i= GetHandleId(t)
    
    call SaveUnitHandle(HT, i, 1, u1)
    call SaveUnitHandle(HT, i, 2, u2)
    
    call TimerStart(t, 0, false, function stoneProtectA)
    
    
    set u1=null
    set u2=null
    set t=null
endfunction
//===========================================================================
// Trigger: Crit Copy
//===========================================================================

//===========================================================================
// Trigger: PhysDmg Copy
//===========================================================================



function TakePhysDmg takes unit u_a,unit u_t returns nothing
    local integer i= 0
    local real lvl= 0
    local real luck= 1
    local real BaseCrit= 0
    local real BaseChCr= 0
    local real area= 0
    local real AbilDamage= 0
    local real Dmg= GetEventDamage()
    local real lifesteal= 0
    local real CritDmg= 0
    local timer t= null
    local boolean Halfcr= false
    local boolean AbilA= true
    local integer A
    
    if TypeDmg_b == 2 then
        set AbilA=false
    endif
 
 
    set luck=GetUnitLuck(u_a)
 
    

    set lvl=GetUnitSpell(u_a , 'Awar')
    if lvl > 0 and AbilA then
       set A=GetAbilityData(u_a , 'Awar')
        if GetRandomReal(0, 100) <= s__AbilityData_Param1[A] * luck then
           call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", GetUnitX(u_a), GetUnitY(u_a)))
           call AreaDamage(u_a , GetUnitX(u_a) , GetUnitY(u_a) , s__AbilityData_GetDamage1(A) , s__AbilityData_GetArea1(A) , 'Awar')
       endif
    endif
    
    set lvl=GetUnitSpell(u_a , 'ACpv')
    if lvl > 0 and AbilA then
        set A=GetAbilityData(u_a , 'ACpv')
        if GetRandomReal(0, 100) <= s__AbilityData_Param1[A] * luck then
           call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", GetUnitX(u_t), GetUnitY(u_t)))
           call AreaDamage(u_a , GetUnitX(u_t) , GetUnitY(u_t) , s__AbilityData_GetDamage1(A) , s__AbilityData_GetArea1(A) , 'ACpv')
        endif
    endif
    
    
    set lvl=GetUnitSpell(u_a , 'A06S') //bash 
	 if lvl > 0 and GetRandomReal(0, 100) <= lvl * luck and AbilA and GetUnitAbilityLevel(u_t, 'BSTN') == 0 then
    	call UsOrderU(u_a , u_t , GetUnitX(u_t) , GetUnitY(u_t) , 'A06T' , "thunderbolt" , lvl * 100 + GetHeroStr(u_a, true) / 2 , ABILITY_RLF_DAMAGE_HTB1)
    endif
    
    
    
    //Critt
    set lvl=GetUnitSpell(u_a , 'A033') //HeroPassive
    if lvl > 0 then
        set BaseCrit=BaseCrit + 0.05 * I2R(GetHeroLevel(u_a))
        if GetRandomReal(0, 100) <= 11 * luck + BaseChCr then
            set CritDmg=CritDmg + Dmg * 0.05
        endif
    endif
    
    if UnitHasItemS(u_a , 'I082') then
        set BaseCrit=BaseCrit + 1.5
        set BaseChCr=BaseChCr + 5
        set lifesteal=0.05
    endif
    
    
    set lvl=GetUnitSpell(u_a , 'AOcr') //Critical Strike 
    if lvl > 0 and GetRandomReal(0, 100) <= 20 * luck + BaseChCr then
        set CritDmg=CritDmg + Dmg * ( 1.7 + 0.3 * lvl )
    endif
    
    
    set lvl=GetUnitSpell(u_a , 'Acdb') //Drink
    if lvl > 0 and GetRandomReal(0, 100) <= 30 * luck + BaseChCr then
        set CritDmg=CritDmg + i * 100
    endif
    
    set lvl=GetUnitSpell(u_a , 'A02C') //Frostmorn
    if lvl > 0 and GetRandomReal(0, 100) <= 5 * luck + BaseChCr then
        set CritDmg=CritDmg + Dmg * 9
    endif
    
    set lvl=GetUnitSpell(u_a , 'A05D') //creep
    if lvl > 0 and GetRandomReal(0, 100) <= 20 * luck + BaseChCr then
        set CritDmg=CritDmg + Dmg
    endif
    
    set lvl=GetUnitSpell(u_a , 'AIcs') //Item
    if lvl > 0 and GetRandomReal(0, 100) <= 20 * luck + BaseChCr then
        set CritDmg=CritDmg + Dmg
    endif
    
    
    if UnitHasItemS(u_a , 'I084') then
            if GetRandomReal(0, 100) <= 50 * luck then
                set CritDmg=0
            endif
            set Halfcr=true

    endif
    
    if UnitHasItemS(u_a , 'I092') then
        set CritDmg=0
    endif

    if CritDmg != 0 then
        set CritDmg=CritDmg + BaseCrit * Dmg
        if Halfcr then
            set CritDmg=CritDmg / 2
        endif
        if UnitHasItemS(u_t , 'I091') and BlzGetUnitAbilityCooldownRemaining(u_t, 'A07J') <= 0.001 then
            call AbilStartCD(u_t , 'A07J' , 8)
            set Dmg=0
            set CritDmg=0
        endif
        call BlzSetEventDamage(Dmg + CritDmg)
        call CreateTextTagTimerColor(I2S(R2I(Dmg + CritDmg)) + "!" , 1 , GetUnitX(u_t) , GetUnitY(u_t) , 50 , 1 , 177 , 0 , 0)
        if lifesteal > 0 then
            call SetWidgetLife(u_a, GetWidgetLife(u_a) + GetEventDamage() * lifesteal)
            call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl" , u_a , "chest"))
        endif
    endif
    
    set t=null

endfunction
//===========================================================================
// Trigger: MagicDmg Copy
//===========================================================================
function TakeMagickDmg takes unit Dealing,unit Trigger returns nothing
    local integer i= 0
    local real luck= 1
    local real BaseCrit= 0
    local real BaseChCr= 0
    local real area= 0
    local real Dmg= GetEventDamage()
    local real CritDmg= 0
    local real lifesteal= 0
    local timer t= null
    local boolean AbilA= false
    local boolean Halfcr= false
    
    if TypeDmg_b == 2 then
        set AbilA=false
    endif
    
    
    
    
  //  set i = GetUnitSpell(Dealing,'A033') //HeroPassive
    if i > 0 then
        set BaseCrit=BaseCrit + 0.05 * I2R(GetHeroLevel(Dealing))
    endif
    
    if UnitHasItemS(Dealing , 'I082') then
        set BaseCrit=BaseCrit + 1.5
        set BaseChCr=BaseChCr + 5
        set lifesteal=0.05
    endif

    
    set luck=GetUnitLuck(Dealing)
    
    if UnitHasItemS(Dealing , 'I086') and GetRandomReal(0, 100) <= 30 * luck + BaseChCr then
        set CritDmg=CritDmg + Dmg * 1.5
    endif
    
  //  set i = GetUnitSpell(Dealing,'A06U') //Critical Strike Magick 
    if i > 0 and GetRandomReal(0, 100) <= 20 * luck + BaseChCr then
        set CritDmg=CritDmg + Dmg * ( 1.75 + 0.25 * I2R(i) )
    endif

    if UnitHasItemS(Dealing , 'I084') then
            if GetRandomReal(0, 100) <= 50 * luck then
                set CritDmg=0
            endif
            set Halfcr=true

    endif


    if UnitHasItemS(Dealing , 'I092') then
        set CritDmg=0
    endif
        
    if CritDmg != 0 then
        set CritDmg=CritDmg + BaseCrit * Dmg
        if Halfcr then
            set CritDmg=CritDmg / 2
        endif
        if UnitHasItemS(Trigger , 'I091') and BlzGetUnitAbilityCooldownRemaining(Trigger, 'A07J') <= 0.001 then
            call AbilStartCD(Trigger , 'A07J' , 8)
            set Dmg=0
            set CritDmg=0
        endif
        call BlzSetEventDamage(Dmg + CritDmg)
        call CreateTextTagTimerColor(I2S(R2I(Dmg + CritDmg)) + "!" , 1 , GetUnitX(Trigger) , GetUnitY(Trigger) , 50 , 1 , 0 , 0 , 177)
        
        if lifesteal > 0 then
            call SetWidgetLife(Dealing, GetWidgetLife(Dealing) + GetEventDamage() * lifesteal)
            call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl" , Dealing , "chest"))
        endif
    endif
    
endfunction
//===========================================================================
// Trigger: Damage Controller After Copy
//===========================================================================



 function LastBreathEnd takes nothing returns nothing
    local timer tim= GetExpiredTimer()
    local unit u= LoadUnitHandle(HT, GetHandleId(tim), 1)
    local effect eff= LoadEffectHandle(HT, GetHandleId(tim), 2)
    call SaveInteger(HT, GetHandleId(u), 'A05R', 0)
    call DestroyEffect(eff)
    call FlushChildHashtable(HT, GetHandleId(tim))
    call DestroyTimer(tim)
    set tim=null
    set eff=null
    set u=null
 endfunction
 
 
 function LastBreath takes nothing returns nothing
    local timer tim
    local unit u= GetTriggerUnit()
    local real lvlAbility= GetUnitAbilityLevel(u, 'A05R')
    local real Hp
    
	if lvlAbility > 0 then
        if LoadInteger(HT, GetHandleId(u), 'A05R') == 1 then
            set Hp=GetWidgetLife(u)
            set Hp=Hp - GetEventDamage()
            if Hp < 1 then
                set Hp=1
            endif
            call SetWidgetLife(u, Hp)
            call BlzSetEventDamage(0)
        elseif GetWidgetLife(u) <= GetEventDamage() + 0.405 and BlzGetUnitAbilityCooldownRemaining(u, 'A05R') <= 0.501 then
            set tim=CreateTimer()
            call BlzSetEventDamage(0)
            call SetWidgetLife(u, 1.405)
            call AbilStartCD(u , 'A05R' , 60 + BlzGetUnitAbilityCooldownRemaining(u, 'A05R'))
            call SaveInteger(HT, GetHandleId(u), 'A05R', 1)
            call SaveUnitHandle(HT, GetHandleId(tim), 1, GetTriggerUnit())
            call SaveEffectHandle(HT, GetHandleId(tim), 2, AddSpecialEffectTarget(LastBreathAnim, u, "origin"))
            
            
            if GetOwningPlayer(GetEventDamageSource()) == Player(11) then
                call TimerStart(tim, 0.4 + 0.1 * lvlAbility, false, function LastBreathEnd)
            else
                call TimerStart(tim, 0.8 + 0.2 * lvlAbility, false, function LastBreathEnd)
            endif
	    endif
        
        
	endif
    set tim=null
 endfunction


function GetTimerCD takes unit U1,integer id,real timeT returns boolean
    local timer tim
    if LoadTimerHandle(DataUnitHT, GetHandleId(U1), id) == null then
        set tim=CreateTimer()
        call TimerStart(tim, timeT, false, null)
        call SaveTimerHandle(DataUnitHT, GetHandleId(U1), id, tim)
        set tim=null
        return true
    else
        set tim=LoadTimerHandle(DataUnitHT, GetHandleId(U1), id)
        if TimerGetRemaining(tim) <= 0.0001 then
            call TimerStart(tim, timeT, false, null)
            set tim=null
            return true
        else
            set tim=null
            return false
        endif
    endif
    return false
    
endfunction
 

function EndZeroTimer takes nothing returns nothing
    local timer tim= GetExpiredTimer()
    local unit u= LoadUnitHandle(DataUnitHT, GetHandleId(tim), 1)
    local integer id= LoadInteger(DataUnitHT, GetHandleId(tim), 2)

   call SaveTimerHandle(DataUnitHT, GetHandleId(u), id, null)
   call FlushChildHashtable(DataUnitHT, GetHandleId(tim))
   call DestroyTimer(tim)
   set tim=null
   set u=null
endfunction
 
 
function ZetoTimerStart takes unit u,integer id returns boolean
    local timer tim
    
    if LoadTimerHandle(DataUnitHT, GetHandleId(u), id) == null then
        set tim=CreateTimer()
        call SaveUnitHandle(DataUnitHT, GetHandleId(tim), 1, u)
        call SaveInteger(DataUnitHT, GetHandleId(tim), 2, id)
        call SaveTimerHandle(DataUnitHT, GetHandleId(u), id, tim)
        call TimerStart(tim, 0, false, function EndZeroTimer)
        set tim=null
        return true
    endif

 
    return false
endfunction

function CheckTimerZero takes unit u,integer id returns boolean
    if LoadTimerHandle(DataUnitHT, GetHandleId(u), id) == null then
        return false
    endif
    return true
endfunction

function Trig_Damage_Controller_After_Copy_Actions takes nothing returns nothing
    local unit u_t= GetTriggerUnit()
    local unit u_a= GetEventDamageSource()
    local integer u_id= GetUnitTypeId(u_a)
 local unit GUS= udg_units01[GetConvertedPlayerId(GetOwningPlayer(u_a))]
 local unit GUT= udg_units01[GetConvertedPlayerId(GetOwningPlayer(u_t))]
    local damagetype DmgType= BlzGetEventDamageType()
    local real Damage= GetEventDamage()
    local integer i= 0
    local real r3= 0
    local real r2= 0
    local real r1= 0
    local integer i1= 0
    local integer i2= 0
    local integer i3= 0
    local real luck_t= 1
    local real luck_a= 1
    local boolean is_attack=  BlzGetEventIsAttack()
    local unit CrUnitS= u_a
    local integer A= 0

    if u_id == 'h015' or u_id == 'h014' or u_id == 'h00T' or u_id == 'n00V' then
        set u_a=GUS
        set CrUnitS=GUS
    endif
	if Damage == 0 then
		set GUS=null
		set GUT=null
        set CrUnitS=null
		return
	endif
    if u_a == null then
        set GUS=null
    endif
    set luck_t=GetUnitLuck(u_t)
    set luck_a=GetUnitLuck(u_a)
    


    if UnitHasItemS(u_t , 'I07M') then
        set r1=I2R(GetHeroStr(u_t, true)) * 0.08
        
        if r1 >= GetEventDamage() then
            call BlzSetEventDamage(0)
            set GUS=null
            set GUT=null
            return
        else
            set Damage=Damage - r1
        endif
    endif
    if UnitHasItemS(u_t , 'I07P') and IsHeroUnitId(GetUnitTypeId(u_a)) == false and BlzGetEventDamageType() == DAMAGE_TYPE_NORMAL then
        set Damage=Damage / 2
    endif
    if UnitHasItemS(u_a , 'I07T') and BlzGetEventDamageType() == DAMAGE_TYPE_NORMAL then
        call SetUnitX(u_a, GetUnitX(u_t))
        call SetUnitY(u_a, GetUnitY(u_t))
    endif
	if GetUnitAbilityLevel(GUS, 'B00E') >= 1 then
		if GetRandomReal(0, 100) <= 5 * luck_a then
            set Damage=Damage + Damage * ( GetUnitAbilityLevel(u_a, 'A02M') / 2 )
			call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Undead\\Darksummoning\\DarkSummonTarget.mdl" , u_t , "chest"))
		endif
	endif

	if LoadInteger(HTi, GetHandleId(GUT), 2) == 1 then
        set Damage=Damage * 0.66
	endif

	if LoadInteger(HTi, GetHandleId(u_a), 2) == 1 then
        set Damage=Damage * 0.66
	endif

	if LoadInteger(HTi, GetHandleId(u_a), 1) == 1 then
        set r2=( Damage / 4 )
        call Vamp(u_a , u_t , r2)
		call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl" , u_a , "chest"))
        set Damage=Damage * 0.75
	endif


//textmacro instance: AUav_Vampirism()
set r1=GetUnitAbilityLevel(u_a, 'AUav')
if r1 > 0 then
    set r2=Damage * ( 0.005 + 0.005 * r1 + LoadReal(HT, GetHandleId(u_a), - 32145) * 0.02 )
    call Vamp(u_a , u_t , r2)
    call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl" , u_a , "chest"))
endif
//end of: AUav_Vampirism()
//textmacro instance: O002_DreadLord()
if GetUnitTypeId(u_a) == 'O002' then
    set r2=Damage * ( 0.02 * I2R(GetHeroLevel(u_a)) )
    call Vamp(u_a , u_t , r2)
    call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl" , u_a , "chest"))
endif
//end of: O002_DreadLord()
//textmacro instance: H01H_Ghoul()
if GetUnitTypeId(u_a) == 'H01H' and is_attack then
    set r2=i * 12
    call Vamp(u_a , u_t , r2)
    set i=GetHeroLevel(u_a)
    set Damage=Damage + i * 12
    call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl" , u_a , "chest"))
endif
//end of: H01H_Ghoul()
//textmacro instance: I07O_BoneArmor()
set i=SkeletonDefender[GetPlayerId(GetOwningPlayer(GUT))]
if i > 0 and IsHeroUnitId(GetUnitTypeId(u_t)) then
    set Damage=Damage - Damage * I2R(i) * 0.08
endif
//end of: I07O_BoneArmor()
//textmacro instance: I05G_MagicNecklaceOfAbsorption()
if GetUnitAbilityLevel(u_t, 'B00R') >= 1 and BlzGetEventDamageType() != DAMAGE_TYPE_NORMAL then
    if u_t == u_a then
        call AddHeroXP(u_t, R2I(Damage * 0.015), true)
    else
        call AddHeroXP(u_t, R2I(Damage * 0.15), true)
    endif
    call SetUnitState(u_t, UNIT_STATE_MANA, GetUnitState(u_t, UNIT_STATE_MANA) + Damage * 0.75)
endif
//end of: I05G_MagicNecklaceOfAbsorption()

//textmacro instance: AEah_Thorns()
 
 

if is_attack and GetUnitSpell(u_t , 'AEah') > 0 then
    set A=GetAbilityData(u_t , 'AEah')
    call LossHp(u_t , u_a , s__AbilityData_GetParam1(A) * Damage)

endif
//end of: AEah_Thorns()
//textmacro instance: AUts_Spiked_Carapace()
 
 

if is_attack and GetUnitSpell(u_t , 'AUts') > 0 and IsUnitType(u_a, UNIT_TYPE_MELEE_ATTACKER) then
    set A=GetAbilityData(u_t , 'AUts')
    call LossHp(u_t , u_a , s__AbilityData_GetParam1(A) * Damage)

endif
//end of: AUts_Spiked_Carapace()


if DmgType == DAMAGE_TYPE_NORMAL then //////////////
    
    
    if IsHeroUnitId(GetUnitTypeId(u_t)) == false then
        set i=UnitHasItemI(u_a , 'I078')
        if i > 0 then
            set r2=Damage * ( 0.25 * I2R(i) )
            call Vamp(u_a , u_t , r2)
		call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl" , u_a , "chest"))
        endif
   endif
   
    if GetUnitAbilityLevel(u_a, 'A04G') > 0 and ( BlzGetUnitAbilityCooldownRemaining(GUS, 'A04G') <= 0 or CheckTimerZero(GUS , 'A04G') ) then
          if ZetoTimerStart(GUS , 'A04G') then
            call AbilStartCD(u_a , 'A04G' , 0.3)
          endif
          set Damage=Damage + 10 * GetUnitAbilityLevel(u_a, 'A04G')
          call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl" , u_t , "chest"))
    endif
    
    
    
    
    
    
else ///////////
    
    
    
    if GetUnitAbilityLevel(GUS, 'B00O') >= 1 then
        set r2=Damage * 0.33
        call Vamp(u_a , u_t , r2)
		call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl" , GUS , "chest"))
	endif
    
    
    if GetUnitAbilityLevel(GUS, 'A04H') > 0 and ( BlzGetUnitAbilityCooldownRemaining(GUS, 'A04H') <= 0 or CheckTimerZero(GUS , 'A04H') ) then
          if ZetoTimerStart(GUS , 'A04H') then
            call AbilStartCD(GUS , 'A04H' , 0.3)
          endif
          set Damage=Damage + 10 * GetUnitAbilityLevel(GUS, 'A04H')
          call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl" , u_t , "chest"))
    endif
    
endif //////////////////

	



	if GetUnitAbilityLevel(GUS, 'B008') >= 1 then
	   call SetWidgetLife(GUS, GetWidgetLife(GUS) + ( Damage / 4 ))
	   call DestroyEffect(AddSpecialEffectTargetFix("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodCryptFiend.mdl" , u_a , "chest"))
	endif
	
	
	set i=UnitHasItemI(u_a , 'I07I')
	if i > 0 and IsUnitType(u_a, UNIT_TYPE_MELEE_ATTACKER) then
	    set r1=( GetWidgetLife(u_t) / 100 ) * 1.5 * I2R(i)
        call Vamp(u_a , u_t , r1)
        set Damage=Damage + r1
	    call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl" , u_t , "chest"))
	endif
    
    if GLOB_cuttting then
        call Vamp(u_a , u_t , Damage / 2)
        call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl" , u_a , "chest"))
        call DestroyEffect(AddSpecialEffectTargetFix("Objects\\Spawnmodels\\Other\\PandarenBrewmasterBlood\\PandarenBrewmasterBlood.mdl" , u_t , "chest"))
    endif
    

	if GetUnitAbilityLevel(GUS, 'A02N') >= 1 then
		if 100 * ( GetWidgetLife(u_t) - Damage ) / GetUnitState(u_t, UNIT_STATE_MAX_LIFE) <= R2I(GetUnitAbilityLevel(u_a, 'A02N')) then
            set Damage=Damage + GetUnitState(u_t, UNIT_STATE_LIFE)
			call DestroyEffect(AddSpecialEffectTargetFix("Objects\\Spawnmodels\\Orc\\OrcLargeDeathExplode\\OrcLargeDeathExplode.mdl" , u_t , "chest"))
		endif
	endif
    
    if GetUnitAbilityLevel(u_t, 'A07T') > 0 then
        set r1=LoadReal(HT, GetHandleId(u_t), 82340)
        set r2=LoadReal(HT, GetHandleId(u_t), 82341)
        set r3=1 - 0.01 * I2R(GetUnitAbilityLevel(u_t, 'A07T'))
        
        if r1 == 0 then
            set r2=20000
        endif
        
        set r1=r1 + Damage
            loop
            exitwhen r3 * r2 > r1
            set r1=r1 - r2 * r3
            set r2=r2 + 250
            call SetHeroStr(u_t, GetHeroStr(u_t, false) + 2, false)

            set i1=0
            loop
                exitwhen i1 > 10
                set i2=GetInfoHeroSpell(u_t , i1)
                
                if BlzGetUnitAbilityCooldownRemaining(u_t, i2) > 0 and i2 != 'A07S' and i2 != 'A05R' then
                    call BlzStartUnitAbilityCooldown(u_t, i2, BlzGetUnitAbilityCooldownRemaining(u_t, i2) - 1 - 0.25 * I2R(GetUnitAbilityLevel(u_t, 'A07T')))
                    elseif BlzGetUnitAbilityCooldownRemaining(u_t, i2) < 1 + 0.25 * I2R(GetUnitAbilityLevel(u_t, 'A07T')) then
                      call BlzEndUnitAbilityCooldown(u_t, i2)
                endif
                set i1=i1 + 1
            endloop
            
            call RemoveDebuff(u_t)
        endloop
        call SaveReal(HT, GetHandleId(u_t), 82340, r1)
        call SaveReal(HT, GetHandleId(u_t), 82341, r2)
    endif
    
    if GetUnitTypeId(u_t) == 'H01I' then
        if Damage >= GetUnitState(u_t, UNIT_STATE_MANA) then
            call SetUnitState(u_t, UNIT_STATE_MANA, 0)
            set Damage=Damage + GetUnitState(u_t, UNIT_STATE_MAX_LIFE)
        else
           call SetUnitState(u_t, UNIT_STATE_MANA, GetUnitState(u_t, UNIT_STATE_MANA) - Damage)
           set Damage=0
        endif
    endif

    if UnitHasItemS(u_t , 'I07U') then
        if BlzGetUnitMaxHP(u_t) > BlzGetUnitMaxMana(u_t) then
            if Damage > BlzGetUnitMaxHP(u_t) / 5 then
                set Damage=BlzGetUnitMaxHP(u_t) / 5
            endif
        elseif Damage > BlzGetUnitMaxMana(u_t) / 5 then
            set Damage=BlzGetUnitMaxMana(u_t) / 5
        endif
    endif

    if GetUnitAbilityLevel(u_t, 'A060') > 0 and BlzGetUnitAbilityCooldownRemaining(u_t, 'A060') <= 0.001 then
        call stoneProtect(u_t , CrUnitS)
    endif
    
	if GetUnitAbilityLevel(u_a, 'A02S') >= 1 and is_attack then
    	call UsOrderU(u_a , u_t , GetUnitX(u_a) , GetUnitY(u_a) , 'A02R' , "chainlightning" , GetHeroInt(u_a, true) * ( 20 + 8 * I2R(GetUnitAbilityLevel(u_a, 'A02S')) ) / 100 , ABILITY_RLF_DAMAGE_PER_TARGET_OCL1)
    endif
    
    
    call BlzSetEventDamage(Damage)
    set GLOB_ABIL_ID=0
    
	set GUS=null
	set GUT=null
    set u_t=null
    set u_a=null
endfunction




//===========================================================================
function InitTrig_Damage_Controller_After_Copy takes nothing returns nothing
    set gg_trg_Damage_Controller_After_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Damage_Controller_After_Copy, EVENT_PLAYER_UNIT_DAMAGED)
    call TriggerAddAction(gg_trg_Damage_Controller_After_Copy, function Trig_Damage_Controller_After_Copy_Actions)
    call TriggerAddAction(gg_trg_Damage_Controller_After_Copy, function LastBreath)
endfunction


//===========================================================================
// Trigger: Damage Controller Befor Copy
//===========================================================================
 
 
 function SetTypeDamage takes unit u returns nothing
    set IdDamage=0
    

            
    if GetEventDamage() < - 890000 then
    
        if GetUnitTypeId(u) == 'n01N' then
            set u=udg_units01[GetPlayerId(GetOwningPlayer(u)) + 1]
        endif
        
        
        set IdDamage=LoadInteger(HT_abilsys, R2I(GetEventDamage()), 3)
        set GLOB_ABIL_ID=s__DamageAbility_id[IdDamage]
        
        
        
        
        
        if s__DamageAbility_number[IdDamage] == 1 then
            call BlzSetEventDamage(s__AbilityData_GetDamage1(GetAbilityData(u , GLOB_ABIL_ID)))
        elseif s__DamageAbility_number[IdDamage] == 2 then
            call BlzSetEventDamage(s__AbilityData_GetDamage2(GetAbilityData(u , GLOB_ABIL_ID)))
        elseif s__DamageAbility_number[IdDamage] == 3 then
            call BlzSetEventDamage(s__AbilityData_GetDamage3(GetAbilityData(u , GLOB_ABIL_ID)))
        endif
        
    elseif GetEventDamage() > 890000 and GetEventDamage() - I2R(R2I(GetEventDamage())) == 0.125 then
        set IdDamage=LoadInteger(HT_abilsys, R2I(GetEventDamage()), 3)
        set GLOB_ABIL_ID=s__DamageAbility_id[IdDamage]
        
        if s__DamageAbility_number[IdDamage] == 1 then
            call BlzSetEventDamage(s__AbilityData_GetDamage1(GetAbilityData(u , GLOB_ABIL_ID)))
        elseif s__DamageAbility_number[IdDamage] == 2 then
            call BlzSetEventDamage(s__AbilityData_GetDamage2(GetAbilityData(u , GLOB_ABIL_ID)))
        elseif s__DamageAbility_number[IdDamage] == 3 then
            call BlzSetEventDamage(s__AbilityData_GetDamage3(GetAbilityData(u , GLOB_ABIL_ID)))
        endif

    endif
 

    
    
    

   if BlzGetEventDamageType() != DAMAGE_TYPE_SPIRIT_LINK then
        if BlzGetEventIsAttack() or GLOB_typeDmg == 2 then
            set GLOB_typeDmg=0
            call BlzSetEventDamageType(DAMAGE_TYPE_NORMAL)
        else
        
            call BlzSetEventDamageType(DAMAGE_TYPE_MAGIC)
        endif
        if GetUnitTypeId(u) == 'H01L' then
            if BlzGetEventDamageType() == DAMAGE_TYPE_NORMAL then
                call BlzSetEventDamageType(DAMAGE_TYPE_MAGIC)
            else
                call BlzSetEventDamageType(DAMAGE_TYPE_NORMAL)
            endif
        else
            if UnitHasItemS(GetEventDamageSource() , 'I080') then
                call BlzSetEventDamageType(DAMAGE_TYPE_MAGIC)
            endif
        endif
  endif

 endfunction
 
 
  function DivineBubbleEnd takes nothing returns nothing
    local timer tim= GetExpiredTimer()
    local unit u= LoadUnitHandle(HT, GetHandleId(tim), 1)
    local effect eff= LoadEffectHandle(HT, GetHandleId(tim), 2)
    call SaveBoolean(HT, GetHandleId(u), 'A07S', false)
    call DestroyEffect(eff)
    call FlushChildHashtable(HT, GetHandleId(tim))
    call DestroyTimer(tim)
    set tim=null
    set eff=null
    set u=null
 endfunction
 

 
 function Trig_Damage_Controller_Befor_Copy_Actions takes nothing returns nothing
  local unit TriigerU= GetTriggerUnit()
 local unit AttackerU= GetEventDamageSource()
	
 local integer PidT= GetPlayerId(GetOwningPlayer(TriigerU))
 local integer PidA= GetPlayerId(GetOwningPlayer(AttackerU))
	
 local integer HandleId1= GetHandleId(TriigerU)
 local unit GUS= udg_units01[GetConvertedPlayerId(GetOwningPlayer(AttackerU))]
 local unit GUT= udg_units01[GetConvertedPlayerId(GetOwningPlayer(TriigerU))]
 local damagetype DmgType
 local real DMG_1= 0
 local timer tim= null
 local real DMG_DF= 0
    local boolean is_attack= BlzGetEventIsAttack()
    local real Admg
 local real DMG_M= 1
    local real II= 0
    local integer CuId= GetUnitTypeId(AttackerU)
    local real luck= 1
    local real luck_t= 1
    local boolean AbilA= true
    local boolean Bfirst= false
    local integer A= 0
        
    if AttackerU == null then
        set GUS=null
    endif

    if CuId == 'h015' or CuId == 'h014' or CuId == 'h00T' or CuId == 'n00V' then
        set AttackerU=GUS
    endif
    
  
    set luck=GetUnitLuck(AttackerU)
    set luck_t=GetUnitLuck(TriigerU)
    
    call SetTypeDamage(AttackerU)
    set DmgType=BlzGetEventDamageType()
    
    
    if DmgType == DAMAGE_TYPE_NORMAL then
        call TakePhysDmg(AttackerU , TriigerU)
    else
        call TakeMagickDmg(AttackerU , TriigerU)
    endif

    if TypeDmg_b == 2 then
        set AbilA=false
    endif
    set TypeDmg_b=0
    
    
    
    set GLOB_cuttting=false
    set II=GetUnitAbilityLevel(AttackerU, 'A081')
    if II > 0 and is_attack and GetRandomReal(1, 100) < 20 * luck then
        call BlzSetEventDamage(GetEventDamage() + II * 100)
        set GLOB_cuttting=true
    endif
    
    if GetUnitAbilityLevel(TriigerU, 'A07S') > 0 then
        if LoadBoolean(HT, GetHandleId(TriigerU), 'A07S') then
            call BlzSetEventDamage(0)
            call RemoveDebuff(TriigerU)
        elseif BlzGetUnitAbilityCooldownRemaining(TriigerU, 'A07S') <= 0.001 then
            set tim=CreateTimer()
            call BlzSetEventDamage(0)
            call RemoveDebuff(TriigerU)
            call AbilStartCD(TriigerU , 'A07S' , 60)
            call SaveBoolean(HT, GetHandleId(TriigerU), 'A07S', true)
            call SaveUnitHandle(HT, GetHandleId(tim), 1, GetTriggerUnit())
            call SaveEffectHandle(HT, GetHandleId(tim), 2, AddSpecialEffectTarget("RighteousGuard.mdx", TriigerU, "origin"))
            call TimerStart(tim, 1.50 + 0.15 * I2R(GetUnitAbilityLevel(TriigerU, 'A07S')), false, function DivineBubbleEnd)
        endif
    endif
    
	if GetEventDamage() == 0 then
        set TriigerU=null
        set AttackerU=null
		set GUS=null
		set GUT=null
		return
	endif
	
	if GetUnitAbilityLevel(GetTriggerUnit(), 'B00B') >= 1 then
		if GetRandomReal(1, 100) <= 14 * luck_t then
			call BlzSetEventDamage(0)
			call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl" , GetTriggerUnit() , "chest"))
			set GUS=null
		    set GUT=null
		    return
		endif
	endif

	if GetUnitAbilityLevel(GetTriggerUnit(), 'B00D') >= 1 then
		if GetRandomInt(1, 100) <= GetUnitAbilityLevel(GUT, 'A02L') then
			call BlzSetEventDamage(0)
			call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl" , GetTriggerUnit() , "chest"))
	    	set GUS=null
		    set GUT=null
	    	return
		endif
	endif
	
	

    if UnitHasItemS(TriigerU , 'I060') then
        if DmgType == DAMAGE_TYPE_NORMAL then
            if LoadTimerHandle(DataUnitHT, HandleId1, 10001) == null then
                set tim=CreateTimer()
                call TimerStart(tim, 2, false, null)
                call SaveTimerHandle(DataUnitHT, HandleId1, 10001, tim)
                call BlzSetEventDamage(0)
                call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl" , TriigerU , "chest"))
                set tim=null
                set GUS=null
	            set GUT=null
	            set TriigerU=null
            	set AttackerU=null
                return
            endif
            set tim=LoadTimerHandle(DataUnitHT, HandleId1, 10001)
            if TimerGetRemaining(tim) <= 0.0001 then
                call TimerStart(tim, 1, false, null)
                call BlzSetEventDamage(0)
                call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl" , TriigerU , "chest"))
                set tim=null
                set GUS=null
	            set GUT=null
                set TriigerU=null
	           set AttackerU=null
            endif
        
        else
        
            if LoadTimerHandle(DataUnitHT, HandleId1, 10002) == null then
                set tim=CreateTimer()
                call TimerStart(tim, 3, false, null)
                call SaveTimerHandle(DataUnitHT, HandleId1, 10002, tim)
                call BlzSetEventDamage(0)
                call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl" , TriigerU , "chest"))
                set tim=null
                set GUS=null
	            set GUT=null
	            set TriigerU=null
            	set AttackerU=null
                return
            endif
            set tim=LoadTimerHandle(DataUnitHT, HandleId1, 10002)
            if TimerGetRemaining(tim) <= 0.0001 then
                call TimerStart(tim, 3, false, null)
                call BlzSetEventDamage(0)
                call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl" , TriigerU , "chest"))
                set tim=null
                set GUS=null
	            set GUT=null
                return
            endif
        endif
        if LoadTimerHandle(DataUnitHT, HandleId1, 10003) == null then
            set tim=CreateTimer()
            call TimerStart(tim, 5, false, null)
            call SaveTimerHandle(DataUnitHT, HandleId1, 10003, tim)
            call RemoveDebuff(TriigerU)
            call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Items\\AIta\\CrystalBallCaster.mdl" , TriigerU , "chest"))
            set tim=null
            return
        endif
        set tim=LoadTimerHandle(DataUnitHT, HandleId1, 10003)
        if TimerGetRemaining(tim) <= 0.0001 then
            call TimerStart(tim, 5, false, null)
            call RemoveDebuff(TriigerU)
            call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Items\\AIta\\CrystalBallCaster.mdl" , TriigerU , "chest"))
            set tim=null
        endif
    endif

    if UnitHasItemS(TriigerU , 'I06K') and BlzGetUnitArmor(TriigerU) <= 50 then
         call BlzSetEventDamage(GetEventDamage() * 0.7)
    endif

    if GetUnitTypeId(AttackerU) == 'H01B' and is_attack then
        if GetTimerCD(AttackerU , 10201 , 2) then
               call ElemFuncStart(AttackerU , 'H01B')
               call BlzSetEventDamage(GetEventDamage() + 70 * GetUnitLevel(AttackerU))
               call DestroyEffect(AddSpecialEffectTargetFix("Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl" , TriigerU , "chest"))
         endif
     endif
     
     
    set II=UnitHasItemI(AttackerU , 'I064')
    if II > 0 and DmgType == DAMAGE_TYPE_NORMAL then
        if BlzGetUnitAbilityCooldownRemaining(AttackerU, 'A051') <= 0 then
	     call AbilStartCD(AttackerU , 'A051' , 15 / ( BlzGetUnitAttackCooldown(AttackerU, 0) ))
         call BlzSetEventDamage(GetEventDamage() + II * ( 2.2 * GetHeroStr(AttackerU, true) - GetHeroAgi(AttackerU, true) ))
         call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Weapons\\BallistaMissile\\BallistaMissileTarget.mdl" , TriigerU , "chest"))
        endif
    endif
        
        
        
    if UnitHasItemS(AttackerU , 'I06H') and is_attack then
        if BlzGetUnitAbilityCooldownRemaining(AttackerU, 'A04Y') <= 0 then
              call AbilStartCD(AttackerU , 'A04Y' , 8)
              call USOrder4field(AttackerU , GetUnitX(TriigerU) , GetUnitY(TriigerU) , 'A04R' , "stomp" , GetEventDamage() , ABILITY_RLF_DAMAGE_INCREASE , 500 , ABILITY_RLF_CAST_RANGE , 1 , ABILITY_RLF_DURATION_HERO , 0.05 , ABILITY_RLF_DURATION_NORMAL)
         endif
    endif
    
    set II=GetUnitAbilityLevel(AttackerU, 'A067')
    if II > 0 and DmgType == DAMAGE_TYPE_NORMAL and ( BlzGetUnitAbilityCooldownRemaining(AttackerU, 'A067') <= 0.001 or CheckTimerZero(GUS , 'A067') ) then
        call BlzSetEventDamage(GetEventDamage() + GetEventDamage() * ( 2.5 + II / 2 ))
        call DestroyEffect(AddSpecialEffectTargetFix("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl" , TriigerU , "chest"))
        if ZetoTimerStart(AttackerU , 'A067') then
            call AbilStartCD(AttackerU , 'A067' , 6)
        endif
    endif

    if UnitHasItemS(AttackerU , 'I061') then
        if DmgType == DAMAGE_TYPE_NORMAL then
            if GetTimerCD(AttackerU , 10101 , 12) then
                        call ElemFuncStart(AttackerU , 'I061')
               call BlzSetEventDamage(GetEventDamage() * 2.6)
               call CreateTextTagTimer(R2S(GetEventDamage()) + "!" , 1 , GetUnitX(TriigerU) , GetUnitY(TriigerU) , 50 , 1)
            elseif GetTimerCD(AttackerU , 10102 , 12) then
                    call ElemFuncStart(AttackerU , 'I061')
               call BlzSetEventDamage(GetEventDamage() * 2.6)
               call CreateTextTagTimer(R2S(GetEventDamage()) + "!" , 1 , GetUnitX(TriigerU) , GetUnitY(TriigerU) , 50 , 1)
            elseif GetTimerCD(AttackerU , 10103 , 12) then
                    call ElemFuncStart(AttackerU , 'I061')
               call BlzSetEventDamage(GetEventDamage() * 2.6)
               call CreateTextTagTimer(R2S(GetEventDamage()) + "!" , 1 , GetUnitX(TriigerU) , GetUnitY(TriigerU) , 50 , 1)
            endif
        endif
    endif
    
     
   
   
   if IsHeroUnitId(GetUnitTypeId(TriigerU)) then
       call BlzSetEventDamage(GetEventDamage() + ( GetEventDamage() * ( GetUnitPvpBonus(AttackerU) - GetUnitPvpBonus(TriigerU) ) / 100 ))
   endif
    if GetUnitTypeId(AttackerU) == 'H01C' and DmgType == DAMAGE_TYPE_NORMAL then
        if GetTimerCD(AttackerU , 10301 , 8) then
                call ElemFuncStart(AttackerU , 'H01C')
              call USOrder4field(AttackerU , GetUnitX(TriigerU) , GetUnitY(TriigerU) , 'A047' , "stomp" , GetHeroStr(AttackerU, true) / 10 + 30 * GetHeroLevel(AttackerU) , ABILITY_RLF_DAMAGE_INCREASE , 300 , ABILITY_RLF_CAST_RANGE , 1 , ABILITY_RLF_DURATION_HERO , 1 , ABILITY_RLF_DURATION_NORMAL)
         endif
     endif
      
    if GetUnitAbilityLevel(TriigerU, 'A053') > 0 and BlzGetUnitAbilityCooldownRemaining(TriigerU, 'A053') <= 0 then
          call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl" , TriigerU , "chest"))
          call BlzSetEventDamage(GetEventDamage() / 5)
          call AbilStartCD(TriigerU , 'A053' , 2.05 - 0.05 * I2R(GetUnitAbilityLevel(TriigerU, 'A053')))
    endif



    if LoadTimerHandle(HT_timerSpell, HandleId1, 3) != null then
		call BlzSetEventDamage(GetEventDamage() / 10)
	endif


	if GetUnitTypeId(AttackerU) == 'H018' and DmgType != DAMAGE_TYPE_NORMAL then
        if LoadInteger(DataUnitHT, GetHandleId(AttackerU), 3) == 1 then
                call ElemFuncStart(AttackerU , 'H018')
            call DestroyEffect(LoadEffectHandle(DataUnitHT, GetHandleId(AttackerU), 1))
            call DestroyEffect(LoadEffectHandle(DataUnitHT, GetHandleId(AttackerU), 2))
            call SaveInteger(DataUnitHT, GetHandleId(AttackerU), 3, 0)
            set tim=CreateTimer()
            call TimerStart(tim, 8, false, function EndLichTimer)
            call SaveUnitHandle(DataUnitHT, GetHandleId(tim), 1, AttackerU)
            call UsOrderU2(AttackerU , TriigerU , GetUnitX(AttackerU) , GetUnitY(AttackerU) , 'A03J' , "frostnova" , GetHeroLevel(AttackerU) * 60 , GetHeroLevel(GUS) * 60 , ABILITY_RLF_AREA_OF_EFFECT_DAMAGE , ABILITY_RLF_SPECIFIC_TARGET_DAMAGE_UFN2)
            set tim=null
        endif
	endif
	
	if GetUnitAbilityLevel(GUS, 'A02T') >= 1 then
        if GetUnitAbilityLevel(TriigerU, 'Bams') > 0 or GetUnitAbilityLevel(TriigerU, 'Bam2') > 0 then
        
            call BlzSetEventDamage(GetEventDamage() + ( I2R(GetUnitAbilityLevel(GUS, 'A02T')) * GetHeroAgi(GUS, true) ) / 40)
        else
            call BlzSetEventDamage(GetEventDamage() + ( I2R(GetUnitAbilityLevel(GUS, 'A02T')) * GetHeroAgi(GUS, true) ) / 20)
        endif
		call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl" , TriigerU , "chest"))
	endif



	if GetUnitAbilityLevel(AttackerU, 'B00L') >= 1 and DmgType != DAMAGE_TYPE_NORMAL then
     	set DMG_M=DMG_M + ( BlzGetUnitMaxMana(TriigerU) - GetUnitState(TriigerU, UNIT_STATE_MANA) ) / 90000
	endif
	
	if DmgType != DAMAGE_TYPE_NORMAL then
    	if DMG_M != 1 or GetUnitMagicDmg(AttackerU) > 0 then
    		call BlzSetEventDamage(GetEventDamage() * ( DMG_M + GetUnitMagicDmg(AttackerU) / 100 ))
    	endif
    
        set DMG_DF=GetUnitMagicDef(TriigerU)
        if DMG_DF > 0 then
           call BlzSetEventDamage(GetEventDamage() * ( 50 / ( 50 + DMG_DF ) ))
        endif
	endif
	
	
	if GetUnitBlock(TriigerU) != 0 then
		set DMG_1=GetEventDamage()
		set DMG_1=DMG_1 - GetUnitBlock(TriigerU)
		if DMG_1 < 0 then
			call BlzSetEventDamage(0)
		else
			call BlzSetEventDamage(DMG_1)
		endif
	
	endif
    
    

    if DmgType == DAMAGE_TYPE_NORMAL then
    
    
        set II=GetUnitAbilityLevel(AttackerU, 'A06Q')
            if II > 0 and AbilA then
            
                if GetUnitAbilityLevel(TriigerU, 'B016') == 0 then
                    set Bfirst=true
                    else
                    set Bfirst=false
                endif
                call SetBuff(TriigerU , 3 , 8)
                call PerodicDmg(AttackerU , TriigerU , 40 * II + GetUnitMagicDmg(AttackerU) * 5 , 0 , 1 , 3.01 , 'B016' , Bfirst , 'A06Q')
        endif
        
        
        set II=GetUnitAbilityLevel(AttackerU, 'A06O')
            if II > 0 and AbilA then
                if GetUnitAbilityLevel(TriigerU, 'B015') == 0 then
                    set Bfirst=true
                else
                    set Bfirst=false
                endif
                call SetBuff(TriigerU , 2 , 11)
                call PerodicDmg(AttackerU , TriigerU , 10 * II , 0.5 , 1 , 8.01 , 'B015' , Bfirst , 'A06Q')
        endif
    
    
     //inse
        set II=GetUnitAbilityLevel(AttackerU, 'A06M')
        if II > 0 and AbilA then
            if GetUnitAbilityLevel(TriigerU, 'B014') > 0 then
                set Admg=II * 5 + LoadInteger(HT, GetHandleId(TriigerU), - 300001)
            else
                set Admg=II * 5
            endif
            call SaveInteger(HT, GetHandleId(TriigerU), - 300001, R2I(Admg))
            call SaveInteger(HT, GetHandleId(TriigerU), - 300002, R2I(II) * 100)
            call SaveUnitHandle(HT, GetHandleId(TriigerU), - 300003, AttackerU)
            call SaveInteger(HT, GetHandleId(TriigerU), - 300004, Glob_time)
            call SetBuff(TriigerU , 1 , 5)
            
            if GetEventDamage() > 0 then
                call BlzSetEventDamage(GetEventDamage() + Admg)
            endif
        
        endif
    endif
    
    
    set II=GetUnitAbilityLevel(TriigerU, 'A080')
    if II > 0 and IsHeroUnitId(GetUnitTypeId(AttackerU)) then
        if BlzGetUnitAbilityCooldownRemaining(TriigerU, 'A080') <= 0 then
            call AbilStartCD(TriigerU , 'A080' , 9)
            call AddCooldowns(AttackerU , 0.95 + ( II ) * 0.05)
            call MagicDamage(TriigerU , AttackerU , 200 * II , 'A080')
            call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl" , AttackerU , "chest"))
        endif
    endif
	
	set II=UnitHasItemI(TriigerU , 'I06E')
    if II > 0 then
        if GetRandomReal(1, 100) <= II * 8 * luck then
        
         if GetUnitState(TriigerU, UNIT_STATE_MANA) >= 750 then
            call CastRandomSpell1(TriigerU , GetRandomAbility1_B() , 15 , AttackerU , GetUnitX(AttackerU) , GetUnitY(AttackerU))
            call SetUnitState(TriigerU, UNIT_STATE_MANA, GetUnitState(TriigerU, UNIT_STATE_MANA) - 750)
         endif
        endif
    endif

	set GUS=null
	set GUT=null
	set TriigerU=null
	set AttackerU=null
endfunction

//===========================================================================
function InitTrig_Damage_Controller_Befor_Copy takes nothing returns nothing
    set gg_trg_Damage_Controller_Befor_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Damage_Controller_Befor_Copy, EVENT_PLAYER_UNIT_DAMAGING)
    call TriggerAddAction(gg_trg_Damage_Controller_Befor_Copy, function Trig_Damage_Controller_Befor_Copy_Actions)
endfunction

//===========================================================================
// Trigger: ItemBonus Copy
//===========================================================================

function DestrTimer takes nothing returns nothing
 local timer Time2= GetExpiredTimer()
 local unit U2= LoadUnitHandle(HTi, GetHandleId(Time2), 1)
 local integer Id2= LoadInteger(HTi, GetHandleId(Time2), 2)
 local integer Pid= GetPlayerId(GetOwningPlayer(U2))
 local integer i= 0
 local integer i2= 0
 local integer r=  0
	


	if Id2 == 'I04T' then
    	if UnitHasItemS(U2 , Id2) then
    		call SaveInteger(HTi, GetHandleId(U2), 1, 1)
    	else
    		call SaveInteger(HTi, GetHandleId(U2), 1, 0)
    	endif
	endif

	if Id2 == 'I04U' then
    	if UnitHasItemS(U2 , Id2) then
    		call SaveInteger(HTi, GetHandleId(U2), 2, 1)
    	else
    		call SaveInteger(HTi, GetHandleId(U2), 2, 0)
    	endif
	endif


	
	
	if Id2 == 'I05E' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 3)
        call AddUnitMagicDmg(U2 , 50 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 3, i)
	endif
	
	
	if Id2 == 'I05C' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 4)
        call AddUnitMagicDmg(U2 , 30 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 4, i)
	endif
	
	if Id2 == 'I05B' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 5)
        call AddUnitMagicDmg(U2 , 65 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 5, i)
	endif
	
	
	
	if Id2 == 'I04C' then
	    set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 6)
        call AddUnitMagicDef(U2 , 10 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 6, i)
	endif
	
	
	if Id2 == 'I05G' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 7)
        call AddUnitMagicDef(U2 , 75 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 7, i)
	endif
	
	
	if Id2 == 'I059' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 8)
        call AddUnitBlock(U2 , 500 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 8, i)
	endif
	
	if Id2 == 'I06X' then
    	set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 9)
    	
    	//set PvpBonus[Pid] = PvpBonus[Pid] + 5*(i-i2)
        call AddUnitPvpBonus(U2 , 5 * ( i - i2 ))
    	call AddUnitEvasion(U2 , 20 * I2R(i - i2))
    	call BlzSetUnitRealField(U2, ConvertUnitRealField('uagp'), BlzGetUnitRealField(U2, ConvertUnitRealField('uagp')) + 10 * ( i - i2 ))
    	call SaveInteger(HTi, GetHandleId(U2), 9, i)
	endif
	
	if Id2 == 'I06Y' then
    	set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 10)
    	
    	//set PvpBonus[Pid] = PvpBonus[Pid] + 5*(i-i2)
        call AddUnitPvpBonus(U2 , 5 * ( i - i2 ))
    	call AddUnitBlock(U2 , 900 * I2R(i - i2))
    	call BlzSetUnitRealField(U2, ConvertUnitRealField('ustp'), BlzGetUnitRealField(U2, ConvertUnitRealField('ustp')) + 10 * ( i - i2 ))
    	call SaveInteger(HTi, GetHandleId(U2), 10, i)
	endif
    
 
 
	if Id2 >= 'I071' and Id2 <= 'I073' then
    	set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 11 + ( Id2 - 'I071' ))
    	call AddUnitBlock(U2 , - 20 * ( i - i2 ))
    	call SaveInteger(HTi, GetHandleId(U2), 11 + ( Id2 - 'I071' ), i)
	endif


    
    
    if Id2 == 'I07A' then
    	set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 14)
    	if i > 0 then
    	   if GetUnitAbilityLevel(U2, 'A05K') == 0 then
    	       call UnitAddAbility(U2, 'A05K')
    	   endif
    	    call BlzUnitHideAbility(U2, 'A05K', true)
    	    call SetUnitAbilityLevel(U2, 'A05K', 2)
            call BlzSetAbilityRealLevelField(BlzGetUnitAbility(U2, 'A05K'), ABILITY_RLF_ARMOR_BONUS_HAD1, 0, - i * 50)
            call SetUnitAbilityLevel(U2, 'A05K', 1)
    	else
    	   call UnitRemoveAbility(U2, 'A05K')
    	endif
    	call SaveInteger(HTi, GetHandleId(U2), 14, i)
	endif


	if Id2 == 'I07B' then

	set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 15)
	call AddUnitMagicDmg(U2 , 20 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 15, i)
	endif


	if Id2 == 'I07E' then

	set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 16)
	call AddUnitMagicDmg(U2 , 10 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 16, i)
	endif


	if Id2 == 'I07G' then
	set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 17)
	call AddUnitBlock(U2 , 50 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 17, i)
	endif


    

	if Id2 == 'I07H' then
	set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 18)
	call AddUnitBlock(U2 , 200 * I2R(i - i2))
	call AddUnitMagicDef(U2 , 25 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 18, i)
	endif
    
    
    if Id2 == 'I07T' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 19)
    	call AddUnitEvasion(U2 , 10 * I2R(i - i2))
        call BlzSetUnitWeaponIntegerField(U2, ConvertUnitWeaponIntegerField('ua1r'), 0, BlzGetUnitWeaponIntegerField(U2, ConvertUnitWeaponIntegerField('ua1r'), 0) + 1128 * ( i - i2 ))
    	call SaveInteger(HTi, GetHandleId(U2), 19, i)
	endif
    
    
    if Id2 == 'I07T' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 19)
    	call AddUnitEvasion(U2 , 10 * I2R(i - i2))
        call BlzSetUnitWeaponIntegerField(U2, ConvertUnitWeaponIntegerField('ua1r'), 0, BlzGetUnitWeaponIntegerField(U2, ConvertUnitWeaponIntegerField('ua1r'), 0) + 1128 * ( i - i2 ))
    	call SaveInteger(HTi, GetHandleId(U2), 19, i)
	endif
    
    if Id2 == 'I07V' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 20)
        
        call AddUnitMagicDmg(U2 , 125 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 20, i)
	endif
	

    if Id2 == 'I07W' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 21)
        
        call AddUnitMagicDef(U2 , 25 * I2R(i - i2))
        call AddUnitBlock(U2 , 50 * I2R(i - i2))
    	call AddUnitEvasion(U2 , 15 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 21, i)
	endif
    
    
    if Id2 == 'I076' then
    	set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 22)
    	call AddUnitEvasion(U2 , 10 * I2R(i - i2))
    	call AddUnitMagicDef(U2 , 10 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 22, i)
	endif

	if Id2 == 'I077' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 23)
    	call AddUnitBlock(U2 , 30 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 23, i)
	endif
    
    if Id2 == 'I07Y' then
        set i=UnitHasItemI(U2 , Id2)
        if i > 2 then
            set i=2
        endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 24)
    	call AddUnitBlock(U2 , 750 * I2R(i - i2))
        call AddUnitEvasion(U2 , 30 * I2R(i - i2))
    	call AddUnitMagicDef(U2 , 60 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 24, i)
	endif
    
    
    if Id2 == 'I06V' then
    	set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 25)
    	//set PvpBonus[Pid] = PvpBonus[Pid] + 5*(i-i2)
        call AddUnitPvpBonus(U2 , 5 * ( i - i2 ))
    	call AddUnitMagicDmg(U2 , 40 * I2R(i - i2))
    	call BlzSetUnitRealField(U2, ConvertUnitRealField('uinp'), BlzGetUnitRealField(U2, ConvertUnitRealField('uinp')) + 10 * ( i - i2 ))
    	call SaveInteger(HTi, GetHandleId(U2), 25, i)
	endif
    
    if Id2 == 'I080' then
        set i=UnitHasItemI(U2 , Id2)
        if i > 1 then
            set i=1
            call BlzSetUnitWeaponIntegerField(U2, UNIT_WEAPON_IF_ATTACK_ATTACK_TYPE, 0, 7)
        else
           call BlzSetUnitWeaponIntegerField(U2, UNIT_WEAPON_IF_ATTACK_ATTACK_TYPE, 0, 8)
        endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 26)
    	call SaveInteger(HTi, GetHandleId(U2), 26, i)
	endif
    
	
    
     if Id2 == 'I083' then
    	set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 27)
    	call AddUnitLuck(U2 , 0.15 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 27, i)
	endif
    
     if Id2 == 'I08L' then
    	set i=UnitHasItemI(U2 , Id2)
    	set i2=LoadInteger(HTi, GetHandleId(U2), 28)
    	call AddUnitPowerRune(U2 , 50 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 28, i)
	endif
    
    if Id2 == 'I08N' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 29)
    	call AddUnitPowerRune(U2 , 75 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 29, i)
	endif
    
    if Id2 == 'I08P' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 30)
    	call AddUnitPowerRune(U2 , 100 * I2R(i - i2))
        call AddUnitPowerRune(U2 , 20 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 30, i)
	endif
    if Id2 == 'I08Q' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 31)
    	call AddUnitPowerRune(U2 , 100 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 31, i)
	endif
    if Id2 == 'I08R' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 32)
    	call AddUnitPowerRune(U2 , 100 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 32, i)
	endif
    
    if Id2 == 'I08S' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 33)
    	call AddUnitPowerRune(U2 , 100 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 33, i)
	endif
    
    
    if Id2 == 'I08X' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 34)
    	call AddUnitMagicDmg(U2 , 35 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 34, i)
	endif
    
     if Id2 == 'I08Z' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 35)
    	call AddUnitEvasion(U2 , 30 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 35, i)
	endif
    
      if Id2 == 'I090' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 36)
    	call AddUnitBlock(U2 , 1000 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 36, i)
	endif
    
    
    if Id2 == 'I091' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 37)
    	call AddUnitMagicDef(U2 , 50 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 37, i)
	endif
    
    if Id2 == 'I092' then
	    if UnitHasItemS(U2 , Id2) then
	       set i=1
	    else
	       set i=0
	    endif
    	set i2=LoadInteger(HTi, GetHandleId(U2), 38)
        call AddUnitMagicDmg(U2 , - 50 * I2R(i - i2))
    	call AddUnitMagicDef(U2 , 200 * I2R(i - i2))
    	call SaveInteger(HTi, GetHandleId(U2), 38, i)
	endif
    
	call FlushChildHashtable(HTi, GetHandleId(Time2))
	call DestroyTimer(Time2)
	set Time2=null
	set U2=null
endfunction




function Trig_ItemBonus_Copy_Actions takes nothing returns nothing
 local timer Time1= null


	set Time1=CreateTimer()


	call SaveUnitHandle(HTi, GetHandleId(Time1), 1, GetTriggerUnit())
	call SaveInteger(HTi, GetHandleId(Time1), 2, GetItemTypeId(GetManipulatedItem()))
    
	call TimerStart(Time1, 0, false, function DestrTimer)




	set Time1=null

endfunction
//call SaveInteger(HTi,GetHandleId(GetTriggerUnit()),1,1)	
//===========================================================================
function InitTrig_ItemBonus_Copy takes nothing returns nothing
    set gg_trg_ItemBonus_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_ItemBonus_Copy, EVENT_PLAYER_UNIT_DROP_ITEM)
    call TriggerRegisterAnyUnitEventBJ(gg_trg_ItemBonus_Copy, EVENT_PLAYER_UNIT_PICKUP_ITEM)
    call TriggerAddAction(gg_trg_ItemBonus_Copy, function Trig_ItemBonus_Copy_Actions)
endfunction


//===========================================================================
// Trigger: EvaryChk Copy 2
//===========================================================================
function FunctionAttackSpeedA takes unit u returns nothing
    local real r1= LoadReal(HT, GetHandleId(u), - 1001)
    local real r2= 0
    local real i1= I2R(GetUnitAbilityLevel(u, 'A02O'))
    local real i2= UnitHasItemI(u , 'I066')
	


    if i1 > 0 then
        set r2=0.92 - 0.02 * i1

    else

       set r2=r1
    endif

    set r2=r2 + i2 * 1.4


    if UnitHasItemS(u , 'I06B') then
      set r2=r2 * 0.8
    endif

    if GetUnitTypeId(u) == 'O00A' then

	set r2=r2 * 100 / ( I2R(100 + GetHeroLevel(u)) )
    endif

  //  call DisplayTextToPlayer(GetLocalPlayer(),0,0,R2S(r2))
    call BlzSetUnitAttackCooldown(u, r2, 0)



endfunction



function AABfunction takes unit u returns nothing


if GetUnitAbilityLevel(u, 'A05Z') > 0 and BlzGetUnitAbilityCooldownRemaining(u, 'A05Z') <= 0.001 and BlzIsUnitInvulnerable(u) == false then
    call UseSpellsAT(u)
    call AbilStartCD(u , 'A05Z' , 45 - GetUnitAbilityLevel(u, 'A05Z'))
endif



if GetUnitAbilityLevel(u, 'A066') > 0 and BlzGetUnitAbilityCooldownRemaining(u, 'A066') <= 0.001 and BlzIsUnitInvulnerable(u) == false and GetWidgetLife(u) / I2R(BlzGetUnitMaxHP(u)) < 0.75 then
    call UseSpellsHolyShield(u)
    call AbilStartCD(u , 'A066' , 10)
endif


if GetUnitAbilityLevel(u, 'A073') > 0 and BlzGetUnitAbilityCooldownRemaining(u, 'A073') <= 0.001 and BlzIsUnitInvulnerable(u) == false and GetUnitState(u, UNIT_STATE_MANA) >= 2000 then
    call CreateRandomRune(0 , GetUnitX(u) , GetUnitY(u) , u)
    call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) - 2000)
    call AbilStartCD(u , 'A073' , 20)
endif

if GetUnitAbilityLevel(u, 'A07L') > 0 and BlzGetUnitAbilityCooldownRemaining(u, 'A07L') <= 0.001 and BlzIsUnitInvulnerable(u) == false then

    call USOrder4field(u , GetUnitX(u) , GetUnitY(u) , 'A07M' , "thunderclap" , GetUnitAbilityLevel(u, 'A07L') * 100 , ABILITY_RLF_DAMAGE_INCREASE , 600 , ABILITY_RLF_CAST_RANGE , 0.5 , ABILITY_RLF_DURATION_HERO , 0.5 , ABILITY_RLF_DURATION_NORMAL)
    call AbilStartCD(u , 'A07L' , 5)
endif


endfunction

function FunUpdateSkill takes integer i returns nothing
local integer i1= 1
local player Pl= Player(i)
local integer SpellId= 0
local string textureS= ""
local integer unitId= GetUnitTypeId(udg_units01[NumPlayerLast[i] + 1])

if unitId != 0 and i != NumPlayerLast[i] then
    if GetLocalPlayer() == Pl then
        set textureS=LoadStr(HT_data, unitId, 1)
        call BlzFrameSetVisible(SpellUP[100], true)
        call BlzFrameSetTexture(SpellFR[100], textureS, 0, true)
    endif
else
    if GetLocalPlayer() == Pl then
        call BlzFrameSetVisible(SpellUP[100], false)
    endif
endif

loop
exitwhen i1 > 21


    set SpellId=GetInfoHeroSpell(udg_units01[NumPlayerLast[i] + 1] , i1)
if SpellId != 0 then
    set textureS=BlzGetAbilityIcon(SpellId)

    if GetLocalPlayer() == Pl then
      call BlzFrameSetVisible(SpellUP[100 + i1], true)
      call BlzFrameSetTexture(SpellFR[100 + i1], textureS, 0, true)
    endif

else

    if GetLocalPlayer() == Pl then
      call BlzFrameSetVisible(SpellUP[100 + i1], false)
    endif

endif


set i1=i1 + 1
endloop

 

endfunction




function Trig_EvaryChk_Copy_2_Actions takes nothing returns nothing
local integer II= 0

local real ARMORN= 0
local real ARMORN2= 0
local real ARMFIN= 0
local real ARMG= 0
local real HpR= 0
local real MpR= 0
local integer MANA1= 0
local integer MANA2= 0

local real r1= 0
local real r2= 0

local integer i1= 0
local integer i2= 0


local real Agi1= 0
local real Agi2= 0
local real Str1= 0
local real Str2= 0
local real Int1= 0
local real Int2= 0

local real Smat1= 0
local real Smat2= 0
local real HpBonus= 0


loop
exitwhen II > 8



	call FunUpdateSkill(II)

	if GetWidgetLife(udg_units01[II]) > 0 then

    call SaveReal(HT, GetHandleId(udg_units01[II]), - 32145, GetClassUnitSpell(udg_units01[II] , 11))

	call FunctionAttackSpeedA(udg_units01[II])
	if GetUnitAbilityLevel(udg_units01[II], 'B00F') >= 1 then

		set ARMORN=BlzGetUnitArmor(udg_units01[II])
		set ARMORN2=LoadReal(HT, GetHandleId(udg_units01[II]), 11)

		set ARMFIN=ARMORN - ARMORN2

		set ARMG=ARMFIN - ARMORN2

		call SaveReal(HT, GetHandleId(udg_units01[II]), 11, ARMORN2 + ARMG)
		call BlzSetUnitArmor(udg_units01[II], ARMORN + ARMG)

	elseif LoadReal(HT, GetHandleId(udg_units01[II]), 11) != 0 then
		call BlzSetUnitArmor(udg_units01[II], BlzGetUnitArmor(udg_units01[II]) - LoadReal(HT, GetHandleId(udg_units01[II]), 11))
		call SaveReal(HT, GetHandleId(udg_units01[II]), 11, 0)
		

	endif
	

	
	if GetUnitAbilityLevel(udg_units01[II], 'B00S') >= 1 then
		set Agi1=GetHeroAgi(udg_units01[II], false)
		set Agi2=LoadReal(HT, GetHandleId(udg_units01[II]), 1001)
       	        set Smat1=R2I(( Agi1 - Agi2 ) * 0.35) //?????? ????
		call SaveReal(HT, GetHandleId(udg_units01[II]), 1001, Smat1)
		call SetHeroAgi(udg_units01[II], R2I(Agi1 + Smat1 - Agi2), false)
		set Str1=GetHeroStr(udg_units01[II], false)
		set Str2=LoadReal(HT, GetHandleId(udg_units01[II]), 1002)
       	        set Smat1=R2I(( Str1 - Str2 ) * 0.35) //?????? ????
		call SaveReal(HT, GetHandleId(udg_units01[II]), 1002, Smat1)
		call SetHeroStr(udg_units01[II], R2I(Str1 + Smat1 - Str2), false)
		set Int1=GetHeroInt(udg_units01[II], false)
		set Int2=LoadReal(HT, GetHandleId(udg_units01[II]), 1003)
       	        set Smat1=R2I(( Int1 - Int2 ) * 0.35) //?????? ????
		call SaveReal(HT, GetHandleId(udg_units01[II]), 1003, Smat1)
		call SetHeroInt(udg_units01[II], R2I(Int1 + Smat1 - Int2), false)

	elseif ( LoadReal(HT, GetHandleId(udg_units01[II]), 1001) != 0 ) or ( LoadReal(HT, GetHandleId(udg_units01[II]), 1002) != 0 ) or ( LoadReal(HT, GetHandleId(udg_units01[II]), 1003) != 0 ) then
		call SetHeroAgi(udg_units01[II], R2I(GetHeroAgi(udg_units01[II], false) - ( LoadReal(HT, GetHandleId(udg_units01[II]), 1001) )), false)
		call SaveReal(HT, GetHandleId(udg_units01[II]), 1001, 0)
		call SetHeroStr(udg_units01[II], R2I(GetHeroStr(udg_units01[II], false) - ( LoadReal(HT, GetHandleId(udg_units01[II]), 1002) )), false)
		call SaveReal(HT, GetHandleId(udg_units01[II]), 1002, 0)
		call SetHeroInt(udg_units01[II], R2I(GetHeroInt(udg_units01[II], false) - ( LoadReal(HT, GetHandleId(udg_units01[II]), 1003) )), false)
		call SaveReal(HT, GetHandleId(udg_units01[II]), 1003, 0)
	endif
	
	
	if GetUnitAbilityLevel(udg_units01[II], 'B00Q') >= 1 then
	       set HpR=BlzGetUnitMaxHP(udg_units01[II]) - GetWidgetLife(udg_units01[II])
	       if HpR > 0 then
	       
	           set MpR=GetUnitState(udg_units01[II], UNIT_STATE_MANA) / 100
	           if MpR > HpR then
	               call SetUnitState(udg_units01[II], UNIT_STATE_MANA, GetUnitState(udg_units01[II], UNIT_STATE_MANA) - HpR)
	               call SetWidgetLife(udg_units01[II], GetWidgetLife(udg_units01[II]) + HpR)
	           else
	               call SetUnitState(udg_units01[II], UNIT_STATE_MANA, GetUnitState(udg_units01[II], UNIT_STATE_MANA) - MpR)
	               call SetWidgetLife(udg_units01[II], GetWidgetLife(udg_units01[II]) + MpR)
	           endif
	       endif
	endif
	
    



	if GetWidgetLife(udg_units01[II]) > 0 then

    set HpBonus=0

    if GetUnitAbilityLevel(udg_units01[II], 'B00N') >= 1 then
        set HpBonus=HpBonus + 1
    endif
    
    set i1=GetUnitAbilityLevel(udg_units01[II], 'A07P')
    if i1 >= 1 then
        set i1=i1 * GetClassUnitSpell(udg_units01[II] , 8)
        set HpBonus=HpBonus + 0.005 * I2R(i1)
    endif
    
    set i1=GetUnitAbilityLevel(udg_units01[II], 'A082')
    if i1 >= 1 then
        set HpBonus=HpBonus + 0.05 * I2R(i1)
    endif
    
    call SetUnitProcHp(udg_units01[II] , HpBonus)
    
    
    if BlzIsUnitInvulnerable(udg_units01[II]) == false then
        set i1=GetUnitAbilityLevel(udg_units01[II], 'A07Q')
        if i1 >= 1 then
            set i1=i1 * GetClassUnitSpell(udg_units01[II] , 7)
            call AoeDrainAura(udg_units01[II] , ( 0.5 * I2R(i1) ) , 500 , false)
        endif
        
        set i1=GetUnitAbilityLevel(udg_units01[II], 'A023')
        if i1 >= 1 then
            call AoeDrainAura(udg_units01[II] , I2R(i1) , 500 , true)
        endif
    endif
    call AABfunction(udg_units01[II])
    
    
    if GetUnitTypeId(udg_units01[II]) == 'H01I' then
        set i1=( BlzGetUnitMaxHP(udg_units01[II]) * 3 ) / 4
        set i2=LoadInteger(HT, GetHandleId(udg_units01[II]), 'H01I')
        
        call BlzSetUnitMaxMana(udg_units01[II], BlzGetUnitMaxMana(udg_units01[II]) + i1 - i2)
        call SaveInteger(HT, GetHandleId(udg_units01[II]), 'H01I', i1)
    
    endif
    
    
    
	if GetUnitAbilityLevel(udg_units01[II], 'B00L') >= 1 then

		set ARMORN=R2I(( BlzGetUnitMaxMana(udg_units01[II]) - GetUnitState(udg_units01[II], UNIT_STATE_MANA) ) / 300)
		set ARMORN2=LoadReal(HT, GetHandleId(udg_units01[II]), 291)

		set ARMFIN=BlzGetUnitArmor(udg_units01[II])

		set ARMG=ARMORN + ARMFIN - ARMORN2

		call SaveReal(HT, GetHandleId(udg_units01[II]), 291, ARMORN)
		call BlzSetUnitArmor(udg_units01[II], ARMG)

	elseif LoadReal(HT, GetHandleId(udg_units01[II]), 291) != 0 then
		call BlzSetUnitArmor(udg_units01[II], BlzGetUnitArmor(udg_units01[II]) - LoadReal(HT, GetHandleId(udg_units01[II]), 291))
		call SaveReal(HT, GetHandleId(udg_units01[II]), 291, 0)
	endif
	endif
        
    set i1=GetUnitAbilityLevel(udg_units01[II], 'A07B')
    set i2=LoadInteger(HT, GetHandleId(udg_units01[II]), 'A07B')
    if i1 >= 1 or i2 != 0 then
        set i1=i1 * GetClassUnitSpell(udg_units01[II] , 1)
        call AddUnitMagicDmg(udg_units01[II] , 0.5 * I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(udg_units01[II]), 'A07B', i1)
    endif

    set i1=GetUnitAbilityLevel(udg_units01[II], 'A07C')
    set i2=LoadInteger(HT, GetHandleId(udg_units01[II]), 'A07C')
    if i1 >= 1 or i2 != 0 then
        set i1=i1 * GetClassUnitSpell(udg_units01[II] , 2)
        call BlzSetUnitMaxMana(udg_units01[II], BlzGetUnitMaxMana(udg_units01[II]) + 100 * ( i1 - i2 ))
    	call SaveInteger(HT, GetHandleId(udg_units01[II]), 'A07C', i1)
    endif
    
    
    set i1=GetUnitAbilityLevel(udg_units01[II], 'A07E')
    set i2=LoadInteger(HT, GetHandleId(udg_units01[II]), 'A07E')
    if i1 >= 1 or i2 != 0 then
        set i1=i1 * GetClassUnitSpell(udg_units01[II] , 3)
        call AddUnitEvasion(udg_units01[II] , 0.5 * I2R(i1 - i2))
        call SetHeroAgi(udg_units01[II], GetHeroAgi(udg_units01[II], false) + 10 * ( i1 - i2 ), false)
    	call SaveInteger(HT, GetHandleId(udg_units01[II]), 'A07E', i1)
    endif
    
    
    set i1=GetUnitAbilityLevel(udg_units01[II], 'A07D')
    set i2=LoadInteger(HT, GetHandleId(udg_units01[II]), 'A07D')
    if i1 >= 1 or i2 != 0 then
        set i1=i1 * GetClassUnitSpell(udg_units01[II] , 4)
        call AddUnitBlock(udg_units01[II] , 20 * I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(udg_units01[II]), 'A07D', i1)
    endif

    set i1=GetUnitAbilityLevel(udg_units01[II], 'A07R')
    set i2=LoadInteger(HT, GetHandleId(udg_units01[II]), 'A07R')
    if i1 >= 1 or i2 != 0 then
        set i1=i1 * GetClassUnitSpell(udg_units01[II] , 11)
        call SetHeroStr(udg_units01[II], GetHeroStr(udg_units01[II], false) + 12 * ( i1 - i2 ), false)
    	call SaveInteger(HT, GetHandleId(udg_units01[II]), 'A07R', i1)
    endif



    set i1=GetUnitAbilityLevel(udg_units01[II], 'A07K')
    set i2=LoadInteger(HT, GetHandleId(udg_units01[II]), 'A07K')
    if i1 >= 1 or i2 != 0 then
        set i1=i1 * GetClassUnitSpell(udg_units01[II] , 5)
        call AddUnitSummonStronger(udg_units01[II] , 1 * I2R(i1 - i2))
    	call SaveInteger(HT, GetHandleId(udg_units01[II]), 'A07K', i1)
    endif



	if GetUnitAbilityLevel(udg_units01[II], 'A02X') >= 1 then
		set MANA1=LoadInteger(HT, GetHandleId(udg_units01[II]), 12)
		set MANA2=10000 * GetUnitAbilityLevel(udg_units01[II], 'A02X')
		if MANA1 != MANA2 then
			call BlzSetUnitMaxMana(udg_units01[II], BlzGetUnitMaxMana(udg_units01[II]) + MANA2 - MANA1)
			call SaveInteger(HT, GetHandleId(udg_units01[II]), 12, MANA2)
		endif
        elseif LoadInteger(HT, GetHandleId(udg_units01[II]), 12) != 0 then
	       	call BlzSetUnitMaxMana(udg_units01[II], BlzGetUnitMaxMana(udg_units01[II]) - LoadInteger(HT, GetHandleId(udg_units01[II]), 12))
	       	call SaveInteger(HT, GetHandleId(udg_units01[II]), 12, 0)
    	endif
	endif
 set II=II + 1
endloop




endfunction

//===========================================================================
function InitTrig_EvaryChk_Copy_2 takes nothing returns nothing
    set gg_trg_EvaryChk_Copy_2=CreateTrigger()
    call TriggerRegisterTimerEventPeriodic(gg_trg_EvaryChk_Copy_2, 0.1)
    call TriggerAddAction(gg_trg_EvaryChk_Copy_2, function Trig_EvaryChk_Copy_2_Actions)
endfunction


//===========================================================================
// Trigger: Killing Copy
//===========================================================================
function TimerMagDmg takes nothing returns nothing
local timer t= GetExpiredTimer()
local unit u= LoadUnitHandle(HT, GetHandleId(t), 1)

call AddUnitMagicDmg(u , - 15 * LoadInteger(HT, GetHandleId(t), 2))


call FlushChildHashtable(HT, GetHandleId(t))
call DestroyTimer(t)

set t=null
set u=null

endfunction



function Trig_Killing_Copy_Actions takes nothing returns nothing
local unit u= GetTriggerUnit()
local integer uid= GetHandleId(u)
local unit k= GetKillingUnit()
local player Pu= GetOwningPlayer(u)
local player Pk= GetOwningPlayer(k)
local integer PidU=  GetPlayerId(Pu)
local integer PidK=  GetPlayerId(Pk)
local unit Gu= udg_units01[PidU + 1]
local unit Ku= udg_units01[PidK + 1]
local integer i= 0

local timer t



if LoadInteger(HT, GetHandleId(u), - 300004) + 500 > Glob_time then

    call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl" , u , "head"))
     call AreaDamage(LoadUnitHandle(HT, uid, - 300003) , GetUnitX(u) , GetUnitY(u) , LoadInteger(HT, uid, - 300002) , 300 , 'B014')

endif


if IsHeroUnitId(GetUnitTypeId(u)) == false then






set i=UnitHasItemI(Ku , 'I079')
if i > 0 and k != null then
  	call SetWidgetLife(Ku, GetWidgetLife(Ku) + BlzGetUnitMaxHP(Ku) * 0.1 * I2R(i))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", Ku, "chest"))
endif




set i=UnitHasItemI(Ku , 'I07E')
if i > 0 and GetOwningPlayer(u) == Player(11) then

call AddUnitMagicDmg(Ku , i * 15)

set t=CreateTimer()
call SaveUnitHandle(HT, GetHandleId(t), 1, Ku)
call SaveInteger(HT, GetHandleId(t), 2, i)
call TimerStart(t, 10, false, function TimerMagDmg)


    
endif


call FixUnit(GetTriggerUnit())
endif
set t=null
set u=null
set k=null
set Ku=null
set Gu=null
endfunction

//===========================================================================
function InitTrig_Killing_Copy takes nothing returns nothing
    set gg_trg_Killing_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Killing_Copy, EVENT_PLAYER_UNIT_DEATH)
    call TriggerAddAction(gg_trg_Killing_Copy, function Trig_Killing_Copy_Actions)
endfunction


//===========================================================================
// Trigger: It Copy 3
//===========================================================================
function Trig_It_Copy_3_Conditions takes nothing returns boolean
    if ( not ( GetItemTypeId(GetManipulatedItem()) == 'I04K' ) ) then
        return false
    endif
    return true
endfunction

function Trig_It_Copy_3_Actions takes nothing returns nothing
    call SetPlayerTechResearchedSwap('R000', ( 1 + GetPlayerTechCountSimple('R000', GetOwningPlayer(GetTriggerUnit())) ), GetOwningPlayer(GetTriggerUnit()))
endfunction

//===========================================================================
function InitTrig_It_Copy_3 takes nothing returns nothing
    set gg_trg_It_Copy_3=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_It_Copy_3, EVENT_PLAYER_UNIT_PICKUP_ITEM)
    call TriggerAddCondition(gg_trg_It_Copy_3, Condition(function Trig_It_Copy_3_Conditions))
    call TriggerAddAction(gg_trg_It_Copy_3, function Trig_It_Copy_3_Actions)
endfunction


//===========================================================================
// Trigger: It Copy Copy
//===========================================================================
function Trig_It_Copy_Copy_Conditions takes nothing returns boolean
    if ( not ( GetItemTypeId(GetManipulatedItem()) == 'I04L' ) ) then
        return false
    endif
    return true
endfunction

function Trig_It_Copy_Copy_Actions takes nothing returns nothing
    call SetPlayerTechResearchedSwap('R001', ( 1 + GetPlayerTechCountSimple('R001', GetOwningPlayer(GetTriggerUnit())) ), GetOwningPlayer(GetTriggerUnit()))
endfunction

//===========================================================================
function InitTrig_It_Copy_Copy takes nothing returns nothing
    set gg_trg_It_Copy_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_It_Copy_Copy, EVENT_PLAYER_UNIT_PICKUP_ITEM)
    call TriggerAddCondition(gg_trg_It_Copy_Copy, Condition(function Trig_It_Copy_Copy_Conditions))
    call TriggerAddAction(gg_trg_It_Copy_Copy, function Trig_It_Copy_Copy_Actions)
endfunction

//===========================================================================
// Trigger: It Copy 2 Copy
//===========================================================================
function Trig_It_Copy_2_Copy_Conditions takes nothing returns boolean
    if ( not ( GetItemTypeId(GetManipulatedItem()) == 'I04M' ) ) then
        return false
    endif
    return true
endfunction

function Trig_It_Copy_2_Copy_Actions takes nothing returns nothing
    call SetPlayerTechResearchedSwap('R002', ( 1 + GetPlayerTechCountSimple('R002', GetOwningPlayer(GetTriggerUnit())) ), GetOwningPlayer(GetTriggerUnit()))
endfunction

//===========================================================================
function InitTrig_It_Copy_2_Copy takes nothing returns nothing
    set gg_trg_It_Copy_2_Copy=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_It_Copy_2_Copy, EVENT_PLAYER_UNIT_PICKUP_ITEM)
    call TriggerAddCondition(gg_trg_It_Copy_2_Copy, Condition(function Trig_It_Copy_2_Copy_Conditions))
    call TriggerAddAction(gg_trg_It_Copy_2_Copy, function Trig_It_Copy_2_Copy_Actions)
endfunction


//===========================================================================
// Trigger: ElementStartAbility
//===========================================================================

function ElementStartAbility takes unit u,integer id returns nothing
    local unit U= null
    local real luck= GetUnitLuck(u)
    
        if UnitHasItemS(u , 'I08P') and LoadBoolean(Elem, id, 1) then
            if BlzGetUnitAbilityCooldownRemaining(u, 'A076') <= 0.001 and BlzIsUnitInvulnerable(u) == false and GetUnitState(u, UNIT_STATE_MANA) >= 1000 then
                 call UnitAddItem(u, CreateRune(0 , 0 , 0 , u , 3))
                call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) - 1000)
                call AbilStartCD(u , 'A076' , 3)
            endif
        endif
        
        if UnitHasItemS(u , 'I08Q') and LoadBoolean(Elem, id, 2) then
            if BlzGetUnitAbilityCooldownRemaining(u, 'A077') <= 0.001 and BlzIsUnitInvulnerable(u) == false and GetUnitState(u, UNIT_STATE_MANA) >= 1000 then
                 call UnitAddItem(u, CreateRune(0 , 0 , 0 , u , 9))
                call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) - 1000)
                call AbilStartCD(u , 'A077' , 3)
            endif
        endif
        
        if UnitHasItemS(u , 'I08R') and LoadBoolean(Elem, id, 4) then
            if BlzGetUnitAbilityCooldownRemaining(u, 'A078') <= 0.001 and BlzIsUnitInvulnerable(u) == false and GetUnitState(u, UNIT_STATE_MANA) >= 1000 then
                 call UnitAddItem(u, CreateRune(0 , 0 , 0 , u , 8))
                call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) - 1000)
                call AbilStartCD(u , 'A078' , 8)
            endif
        endif
        
        if UnitHasItemS(u , 'I08S') and LoadBoolean(Elem, id, 3) then
            if BlzGetUnitAbilityCooldownRemaining(u, 'A079') <= 0.001 and BlzIsUnitInvulnerable(u) == false and GetUnitState(u, UNIT_STATE_MANA) >= 500 then
                 call UnitAddItem(u, CreateRune(0 , 0 , 0 , u , 10))
                call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) - 500)
                call AbilStartCD(u , 'A079' , 12)
            endif
        endif
        
        
        if GetUnitAbilityLevel(u, 'A07B') > 0 and LoadBoolean(Elem, id, 1) then
            call AddStateTemp(u , 1 , 4 , 10)

        endif
        
 
        
        if GetUnitAbilityLevel(u, 'A07C') > 0 and LoadBoolean(Elem, id, 2) then
            call SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MANA) + ( GetUnitState(u, UNIT_STATE_MAX_MANA) ) * .02)
        endif
        
        if GetUnitAbilityLevel(u, 'A07E') > 0 and LoadBoolean(Elem, id, 3) then
            call AddHeroTempAgi(u , 25 , 9)
            call AddStateTemp(u , 3 , 5 , 9)
        endif
        

        if GetUnitAbilityLevel(u, 'A07D') > 0 and LoadBoolean(Elem, id, 4) then
            call AddStateTemp(u , 4 , 50 , 15)
        endif
        
        if GetUnitAbilityLevel(u, 'A07Q') > 0 and LoadBoolean(Elem, id, 7) then
            call AoeDrainAura2(u , 4 , 500 , false)
        endif
        
        if GetUnitAbilityLevel(u, 'A07V') > 0 and LoadBoolean(Elem, id, 9) then
            call AbsoluteColdCooldown(u)
        endif
        
        if GetUnitAbilityLevel(u, 'A07P') > 0 and LoadBoolean(Elem, id, 8) then
            call SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_LIFE) + ( GetUnitState(u, UNIT_STATE_LIFE) ) * .025)
        endif
 
         if GetUnitAbilityLevel(u, 'A07K') > 0 and LoadBoolean(Elem, id, 5) then
                set U=CreateUnit(GetOwningPlayer(u), 'h01N', GetUnitX(u) + 40 * CosBJ(- 30 + GetUnitFacing(u)), GetUnitY(u) + 40 * SinBJ(- 30 + GetUnitFacing(u)), GetUnitFacing(u))
                call BlzSetUnitMaxHP(U, BlzGetUnitMaxHP(U) - 1000 + GetHeroLevel(u) * ( 1000 ))
                call BlzSetUnitBaseDamage(U, BlzGetUnitBaseDamage(U, 0) + 150 + ( 50 ) * GetHeroLevel(u), 0)
                call SetWidgetLife(U, BlzGetUnitMaxHP(U))
                call UnitApplyTimedLife(U, 'A041', 15)
        endif
        
        
        if UnitHasItemS(u , 'I090') and LoadBoolean(Elem, id, 4) then
            if GetRandomReal(0, 100) <= 30 * luck then
                set U=CreateUnit(GetOwningPlayer(u), 'h01M', GetUnitX(u) + 40 * CosBJ(- 30 + GetUnitFacing(u)), GetUnitY(u) + 40 * SinBJ(- 30 + GetUnitFacing(u)), GetUnitFacing(u))
                call BlzSetUnitMaxHP(U, BlzGetUnitMaxHP(U) - 3000 + GetHeroLevel(u) * ( 2500 + 50 * GetHeroLevel(u) ))
                call AddUnitBlock(U , 100 + 50 * GetHeroLevel(u))
                call BlzSetUnitBaseDamage(U, BlzGetUnitBaseDamage(U, 0) + 200 + ( 50 + GetHeroLevel(u) ) * GetHeroLevel(u), 0)
                call SetWidgetLife(U, BlzGetUnitMaxHP(U))
                call UnitApplyTimedLife(U, 'A041', 30)
        
            endif
        endif
               
               
               

   set u=null
   set U=null

endfunction


function ElemStartTimer takes nothing returns nothing
    local timer t= GetExpiredTimer()
    call ElementStartAbility(LoadUnitHandle(HT, GetHandleId(t), 1) , LoadInteger(HT, GetHandleId(t), 2))
    call FlushChildHashtable(HT, GetHandleId(t))
    call DestroyTimer(t)
    set t=null
endfunction


function ElementStartAbilityS takes nothing returns nothing
    local timer t= CreateTimer()
    call SaveUnitHandle(HT, GetHandleId(t), 1, GLOB_ELEM_U)
    call SaveInteger(HT, GetHandleId(t), 2, GLOB_ELEM_I)
    call TimerStart(t, 0, false, function ElemStartTimer)
 
    set t=null
endfunction
//===========================================================================
// Trigger: InitElements
//===========================================================================


function SetAbilityElement takes integer i,integer i2 returns nothing
call SaveBoolean(Elem, i, i2, true)
endfunction


function Trig_InitElements_Actions takes nothing returns nothing

//Fire 1
call SetAbilityElement('AHfs' , 1)
call SetAbilityElement('AHpx' , 1)
call SetAbilityElement('Aliq' , 1)
call SetAbilityElement('AEim' , 1)
call SetAbilityElement('AHfa' , 1)
call SetAbilityElement('AImp' , 1)
call SetAbilityElement('ANvc' , 1)
call SetAbilityElement('ANic' , 1)
call SetAbilityElement('ANrf' , 1)
call SetAbilityElement('ANbf' , 1)
call SetAbilityElement('ANlm' , 1)
call SetAbilityElement('ANso' , 1)
call SetAbilityElement('A02U' , 1)
call SetAbilityElement('A06Q' , 1)
call SetAbilityElement('A06M' , 1)
call SetAbilityElement('A04H' , 1)
call SetAbilityElement('Ainf' , 1)
call SetAbilityElement('A07B' , 1)
call SetAbilityElement('A052' , 1)
call SetAbilityElement('A050' , 1)
call SetAbilityElement('A06N' , 1)
call SetAbilityElement('AUin' , 1)
call SetAbilityElement('Afae' , 1)
call SetAbilityElement('H016' , 1)
call SetAbilityElement('A076' , 1)
call SetAbilityElement('O005' , 1)
//Water 2
call SetAbilityElement('AHwe' , 2)
call SetAbilityElement('AHbz' , 2)
call SetAbilityElement('AUfn' , 2)
call SetAbilityElement('AUfu' , 2)
call SetAbilityElement('AHca' , 2)
call SetAbilityElement('A02Z' , 2)
call SetAbilityElement('A01Y' , 2)
call SetAbilityElement('A03J' , 2)
call SetAbilityElement('A053' , 2)
call SetAbilityElement('A03J' , 2)
call SetAbilityElement('Aclf' , 2)
call SetAbilityElement('AHab' , 2)
call SetAbilityElement('ANms' , 2)
call SetAbilityElement('ANto' , 2)
call SetAbilityElement('A046' , 2)
call SetAbilityElement('A07C' , 2)
call SetAbilityElement('AHab' , 2)
call SetAbilityElement('ANms' , 2)
call SetAbilityElement('A02X' , 2)
call SetAbilityElement('O006' , 2)
call SetAbilityElement('H018' , 2)
call SetAbilityElement('H003' , 2)
call SetAbilityElement('H001' , 2)
call SetAbilityElement('A077' , 2)
call SetAbilityElement('ANmo' , 2)
call SetAbilityElement('A07X' , 2)
//Wind 3
call SetAbilityElement('AHtc' , 3)
call SetAbilityElement('AOcl' , 3)
call SetAbilityElement('ANmo' , 3)
call SetAbilityElement('ANfl' , 3)
call SetAbilityElement('ACls' , 3)
call SetAbilityElement('A02T' , 3)
call SetAbilityElement('A02S' , 3)
call SetAbilityElement('A02I' , 3)
call SetAbilityElement('A03B' , 3)
call SetAbilityElement('A075' , 3)
call SetAbilityElement('AOwk' , 3)
call SetAbilityElement('Aclf' , 3)
call SetAbilityElement('Ac7E' , 3)
call SetAbilityElement('A06C' , 3)
call SetAbilityElement('A05X' , 3)
call SetAbilityElement('AHtb' , 3)
call SetAbilityElement('AHtc' , 3)
call SetAbilityElement('AEev' , 3)
call SetAbilityElement('A03U' , 3)
call SetAbilityElement('A02O' , 3)
call SetAbilityElement('A01Y' , 3)
call SetAbilityElement('H008' , 3)
call SetAbilityElement('O001' , 3)
call SetAbilityElement('O00A' , 3)
call SetAbilityElement('O00C' , 3)
call SetAbilityElement('A07E' , 3)
call SetAbilityElement('A079' , 3)
call SetAbilityElement('A07N' , 3)
//Earth 4
call SetAbilityElement('AOws' , 4)
call SetAbilityElement('AOsh' , 4)
call SetAbilityElement('Awar' , 4)
call SetAbilityElement('AEer' , 4)
call SetAbilityElement('ANvc' , 4)
call SetAbilityElement('A060' , 4)
call SetAbilityElement('A07D' , 4)
call SetAbilityElement('AHtc' , 4)
call SetAbilityElement('AUim' , 4)
call SetAbilityElement('AEsv' , 4)
call SetAbilityElement('AEah' , 4)
call SetAbilityElement('H01C' , 4)
call SetAbilityElement('H017' , 4)
call SetAbilityElement('H019' , 4)
call SetAbilityElement('Assk' , 4)
call SetAbilityElement('AUin' , 4)
call SetAbilityElement('A07J' , 4)
call SetAbilityElement('A07L' , 4)
call SetAbilityElement('AHav' , 4)
call SetAbilityElement('A078' , 4)
call SetAbilityElement('H00A' , 4)
call SetAbilityElement('A083' , 4)
//Wild 5
call SetAbilityElement('A06X' , 5)
call SetAbilityElement('AEah' , 5)
call SetAbilityElement('AEer' , 5)
call SetAbilityElement('AEtq' , 5)
call SetAbilityElement('Afae' , 5)
call SetAbilityElement('Arej' , 5)
call SetAbilityElement('ANbr' , 5)
call SetAbilityElement('ANst' , 5)
call SetAbilityElement('Arsq' , 5)
call SetAbilityElement('ANsg' , 5)
call SetAbilityElement('ANsw' , 5)
call SetAbilityElement('N00P' , 5)
call SetAbilityElement('O008' , 5)
call SetAbilityElement('H006' , 5)
call SetAbilityElement('AEsv' , 5)
call SetAbilityElement('A07K' , 5)
//Energy 6
call SetAbilityElement('A06S' , 6)
call SetAbilityElement('A05Z' , 6)
call SetAbilityElement('A06U' , 6)
call SetAbilityElement('AHav' , 6)
call SetAbilityElement('AHtb' , 6)
call SetAbilityElement('AOea' , 6)
call SetAbilityElement('AOws' , 6)
call SetAbilityElement('AOsh' , 6)
call SetAbilityElement('Aakb' , 6)
call SetAbilityElement('Awar' , 6)
call SetAbilityElement('AEsf' , 6)
call SetAbilityElement('ANr2' , 6)
call SetAbilityElement('ACac' , 6)
call SetAbilityElement('ACpv' , 6)
call SetAbilityElement('A022' , 6)
call SetAbilityElement('A02X' , 6)
call SetAbilityElement('A040' , 6)
call SetAbilityElement('H01B' , 6)
call SetAbilityElement('H01L' , 6)
call SetAbilityElement('H01J' , 6)
call SetAbilityElement('H000' , 6)
call SetAbilityElement('H01G' , 6)
call SetAbilityElement('O000' , 6)
//Dark 7
call SetAbilityElement('A05R' , 7)
call SetAbilityElement('AUcb' , 7)
call SetAbilityElement('AUin' , 7)
call SetAbilityElement('AUau' , 7)
call SetAbilityElement('AUim' , 7)
call SetAbilityElement('AUdp' , 7)
call SetAbilityElement('AUdd' , 7)
call SetAbilityElement('AUcs' , 7)
call SetAbilityElement('AUts' , 7)
call SetAbilityElement('Aam2' , 7)
call SetAbilityElement('Arai' , 7)
call SetAbilityElement('Auhf' , 7)
call SetAbilityElement('Acrs' , 7)
call SetAbilityElement('ANsi' , 7)
call SetAbilityElement('ANdr' , 7)
call SetAbilityElement('ANht' , 7)
call SetAbilityElement('ANba' , 7)
call SetAbilityElement('Afod' , 7)
call SetAbilityElement('A042' , 7)
call SetAbilityElement('A02M' , 7)
call SetAbilityElement('A02K' , 7)
call SetAbilityElement('N00O' , 7)
call SetAbilityElement('N00B' , 7)
call SetAbilityElement('O003' , 7)
call SetAbilityElement('H000' , 7)
call SetAbilityElement('H005' , 7)
call SetAbilityElement('A07Q' , 7)
call SetAbilityElement('A023' , 7)
call SetAbilityElement('O002' , 7)
call SetAbilityElement('O003' , 7)
call SetAbilityElement('H018' , 7)
call SetAbilityElement('A07X' , 7)
//Light 8
call SetAbilityElement('A05R' , 8)
call SetAbilityElement('AHad' , 8)
call SetAbilityElement('AHds' , 8)
call SetAbilityElement('AHhb' , 8)
call SetAbilityElement('Ainf' , 8)
call SetAbilityElement('AOhw' , 8)
call SetAbilityElement('Ahwd' , 8)
call SetAbilityElement('AEtq' , 8)
call SetAbilityElement('Arej' , 8)
call SetAbilityElement('ANr2' , 8)
call SetAbilityElement('A04E' , 8)
call SetAbilityElement('A041' , 8)
call SetAbilityElement('A03X' , 8)
call SetAbilityElement('A04K' , 8)
call SetAbilityElement('A03Q' , 8)
call SetAbilityElement('A045' , 8)
call SetAbilityElement('A02L' , 8)
call SetAbilityElement('H002' , 8)
call SetAbilityElement('E000' , 8)
call SetAbilityElement('A07P' , 8)
call SetAbilityElement('A04G' , 8)
call SetAbilityElement('A082' , 8)
// Cold 9
call SetAbilityElement('A053' , 9)
call SetAbilityElement('AHbz' , 9)
call SetAbilityElement('AUfn' , 9)
call SetAbilityElement('AUfu' , 9)
call SetAbilityElement('AHca' , 9)
call SetAbilityElement('ANht' , 9)
call SetAbilityElement('H018' , 9)
call SetAbilityElement('N02K' , 9)
call SetAbilityElement('A07N' , 9)
call SetAbilityElement('H018' , 9)
call SetAbilityElement('A02Z' , 9)
call SetAbilityElement('A07X' , 9)
call SetAbilityElement('A07V' , 9)
call SetAbilityElement('A080' , 9)
call SetAbilityElement('A046' , 9)



// Posion 10
call SetAbilityElement('A06O' , 10)
call SetAbilityElement('AEsh' , 10)
call SetAbilityElement('ANab' , 10)
call SetAbilityElement('ANdh' , 10)
call SetAbilityElement('ACvs' , 10)
call SetAbilityElement('ANpa' , 10)
call SetAbilityElement('ANhs' , 10)
// Blood 11
call SetAbilityElement('A067' , 11)
call SetAbilityElement('AOcr' , 11)
call SetAbilityElement('Absk' , 11)
call SetAbilityElement('Ablo' , 11)
call SetAbilityElement('AUav' , 11)
call SetAbilityElement('A02N' , 11)
call SetAbilityElement('A02K' , 11)
call SetAbilityElement('H007' , 11)
call SetAbilityElement('N00C' , 11)
call SetAbilityElement('O002' , 11)
call SetAbilityElement('H01H' , 11)
call SetAbilityElement('A07R' , 11)
call SetAbilityElement('A023' , 11)
call SetAbilityElement('A07T' , 11)
call SetAbilityElement('N024' , 11)
call SetAbilityElement('H01H' , 11)
call SetAbilityElement('A081' , 11)
//divinity 12
call SetAbilityElement('A07S' , 12)
call SetAbilityElement('A04E' , 12)
call SetAbilityElement('A045' , 12)
call SetAbilityElement('A02L' , 12)
call SetAbilityElement('A082' , 12)
//arcane 13
call SetAbilityElement('A06U' , 13)
call SetAbilityElement('A05Z' , 13)
call SetAbilityElement('A03Y' , 13)
call SetAbilityElement('A022' , 13)
call SetAbilityElement('A03P' , 13)
call SetAbilityElement('A06Z' , 13)
call SetAbilityElement('H01L' , 13)
call SetAbilityElement('H01E' , 13)
call SetAbilityElement('O004' , 13)
call SetAbilityElement('A083' , 13)
//Time 14
call SetAbilityElement('A03Y' , 14)
call SetAbilityElement('A022' , 14)
call SetAbilityElement('A040' , 14)
call SetAbilityElement('A083' , 14)

//Spirit 15
call SetAbilityElement('H01D' , 15)
call SetAbilityElement('H01I' , 15)
call SetAbilityElement('O003' , 15)


call SetAbilityElement('A07U' , 1)
call SetAbilityElement('A07U' , 2)
call SetAbilityElement('A07U' , 3)
call SetAbilityElement('A07U' , 4)
call SetAbilityElement('A07U' , 5)
call SetAbilityElement('A07U' , 6)
call SetAbilityElement('A07U' , 7)
call SetAbilityElement('A07U' , 8)
call SetAbilityElement('A07U' , 9)
call SetAbilityElement('A07U' , 10)
call SetAbilityElement('A07U' , 11)
call SetAbilityElement('A07U' , 12)
call SetAbilityElement('A07U' , 13)
call SetAbilityElement('A07U' , 14)

call SetAbilityElement('A04L' , 1)
call SetAbilityElement('A04L' , 2)
call SetAbilityElement('A04L' , 3)
call SetAbilityElement('A04L' , 4)
call SetAbilityElement('A04L' , 5)
call SetAbilityElement('A04L' , 6)
call SetAbilityElement('A04L' , 7)
call SetAbilityElement('A04L' , 8)
call SetAbilityElement('A04L' , 9)
call SetAbilityElement('A04L' , 10)
call SetAbilityElement('A04L' , 11)
call SetAbilityElement('A04L' , 12)
call SetAbilityElement('A04L' , 13)
call SetAbilityElement('A04L' , 14)
endfunction

//===========================================================================
function InitTrig_InitElements takes nothing returns nothing
    set gg_trg_InitElements=CreateTrigger()
    call TriggerAddAction(gg_trg_InitElements, function Trig_InitElements_Actions)
endfunction


//===========================================================================
// Trigger: RuneCast
//===========================================================================
function Trig_RuneCast_Actions takes nothing returns nothing
    if Trig_Disable_Abilities_Func001C() == false then
        call ElementStartAbility(GetTriggerUnit() , GetSpellAbilityId())
    endif
endfunction

//===========================================================================
function InitTrig_RuneCast takes nothing returns nothing
    set gg_trg_RuneCast=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_RuneCast, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddAction(gg_trg_RuneCast, function Trig_RuneCast_Actions)
endfunction


//===========================================================================
// Trigger: MyRune
//===========================================================================
function Trig_MyRune_Conditions takes nothing returns boolean
    if GetSpellAbilityId() == 'A072' and Trig_Disable_Abilities_Func001C() == false then
        call UnitAddItem(GetTriggerUnit(), CreateRandomRune(0 , GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , GetTriggerUnit()))
        call UnitAddItem(GetTriggerUnit(), CreateRandomRune(0 , GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , GetTriggerUnit()))
        call UnitAddItem(GetTriggerUnit(), CreateRandomRune(0 , GetUnitX(GetTriggerUnit()) , GetUnitY(GetTriggerUnit()) , GetTriggerUnit()))
    endif
    return false
endfunction



function InitTrig_MyRune takes nothing returns nothing
    set gg_trg_MyRune=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_MyRune, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerAddCondition(gg_trg_MyRune, Condition(function Trig_MyRune_Conditions))

endfunction


//===========================================================================
// Trigger: RuneState
//===========================================================================


function GetRuneOwner takes item i returns player
    return Player(0)
endfunction


function GetRunePower takes item i returns real
    return 1. + LoadReal(HT, GetHandleId(i), 2) / 100
endfunction
//===========================================================================
// Trigger: RuneEvent
//===========================================================================



function CreateRuneAction takes code c returns trigger
    local trigger t= CreateTrigger()
    call TriggerAddCondition(t, Condition(c))
    return t
endfunction

//TriggerEvaluate
//===========================================================================
// Trigger: RuneOfAttack
//===========================================================================


function RuneOfAttack takes nothing returns boolean
   local unit u= GLOB_RUNE_U
   local real power= GLOB_RUNE_POWER
   call BlzSetUnitBaseDamage(u, BlzGetUnitBaseDamage(u, 0) + R2I(RuneOfAttack_base * power), 0)
   return false
endfunction
//===========================================================================
// Trigger: RuneOfEarth
//===========================================================================


function RuneOfEarth takes nothing returns boolean
   local unit u= GLOB_RUNE_U
   local real power= GLOB_RUNE_POWER
   call USOrder4field(u , GetUnitX(u) , GetUnitY(u) , 'A074' , "stomp" , GetEventDamage() , ABILITY_RLF_DAMAGE_INCREASE , 500 + 100 * power , ABILITY_RLF_CAST_RANGE , 1000 * power , ABILITY_RLF_DAMAGE_WRS1 , 2 , ABILITY_RLF_DURATION_NORMAL)

   return false
endfunction
//===========================================================================
// Trigger: RuneOfPower
//===========================================================================


function RuneOfPower takes nothing returns boolean
   local unit u= GLOB_RUNE_U
   local real power= GLOB_RUNE_POWER
   call AddUnitMagicDmg(u , 0.25 * power)
   return false
endfunction
//===========================================================================
// Trigger: RuneOfHealing
//===========================================================================

function RuneOfHealing takes nothing returns boolean
   local unit u= GLOB_RUNE_U
   local real power= GLOB_RUNE_POWER
   
   call SetWidgetLife(u, GetWidgetLife(u) + BlzGetUnitMaxHP(u) * 0.20 * power)
   return false
endfunction
//===========================================================================
// Trigger: RuneOfLife
//===========================================================================


function RuneOfLife takes nothing returns boolean
   local unit u= GLOB_RUNE_U
   local real power= GLOB_RUNE_POWER
   call BlzSetUnitMaxHP(u, BlzGetUnitMaxHP(u) + R2I(RuneOfLife_base * power))
   return false
endfunction
//===========================================================================
// Trigger: RuneOfMagic
//===========================================================================


function RuneOfMagic takes nothing returns boolean
   local unit u= GLOB_RUNE_U
   local real power= GLOB_RUNE_POWER
   local integer i1= 0
   local integer SpellId= 0
   
   loop
        exitwhen i1 > 10
        set SpellId=GetInfoHeroSpell(u , i1)
        if BlzGetUnitAbilityCooldownRemaining(u, SpellId) > 0 then
            call BlzStartUnitAbilityCooldown(u, SpellId, BlzGetUnitAbilityCooldownRemaining(u, SpellId) - RuneOfMagic_base * power)
            elseif BlzGetUnitAbilityCooldownRemaining(u, SpellId) < RuneOfMagic_base * power then
              call BlzEndUnitAbilityCooldown(u, SpellId)
        endif
        set i1=i1 + 1
    endloop
  
    
  
   return false
endfunction
//===========================================================================
// Trigger: RuneOfFire
//===========================================================================


function RuneOfFire takes nothing returns boolean
   local unit u= GLOB_RUNE_U
   local real power= GLOB_RUNE_POWER



   call USOrderA(u , GetUnitX(u) , GetUnitY(u) , 'A02V' , "fanofknives" , R2I(4000 * power) , ConvertAbilityRealLevelField('Ocl1'))
   return false
endfunction
//===========================================================================
// Trigger: RuneOfChaos
//===========================================================================


function CastRuneOfChaos takes nothing returns boolean

    if IsUnitEnemy(GLOB_RUNE_U, GetOwningPlayer(GetFilterUnit())) and GetWidgetLife(GetFilterUnit()) > 0.405 then
            
            call CastRandomSpell1(GLOB_RUNE_U , GetRandomAbility1() , GLOB_LVL_abil , GetFilterUnit() , 0 , 0)
    endif
    return false
endfunction

function RuneOfChaos takes nothing returns boolean
   local unit u= GLOB_RUNE_U
   local real power= GLOB_RUNE_POWER
   local integer lvl= 10 + R2I(( power - 1 ) * 10)
   local integer lp= 0
   local integer i= 0
    if lvl > 30 then
        set lp=( lp + lvl - 30 ) / 3
        set lvl=30
    endif
    
    loop
        set GLOB_LVL_abil=lvl
        call GroupEnumUnitsInRange(GL_GR, GetUnitX(u), GetUnitY(u), 400 + 75 * power, RuneOfChaos_b)
        set i=i + 1
        exitwhen i >= lp
    endloop

   return false
endfunction
//===========================================================================
// Trigger: RuneOfStorm
//===========================================================================


function CastRuneOfStorm takes nothing returns boolean

    if IsUnitEnemy(GLOB_RUNE_U, GetOwningPlayer(GetFilterUnit())) then
            
        call SetUnitX(GetFilterUnit(), GetUnitX(GLOB_RUNE_U) + GetRandomReal(- 50, 50))
        call SetUnitY(GetFilterUnit(), GetUnitY(GLOB_RUNE_U) + GetRandomReal(- 50, 50))
        call DestroyEffect(AddSpecialEffectTargetFix("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveMissile.mdl" , GetFilterUnit() , "chest"))
        call UnitDamageTarget(GLOB_RUNE_U, GetFilterUnit(), 1000 * GLOB_RUNE_POWER, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
    endif
    return false
endfunction

function RuneOfStorm takes nothing returns boolean
   local unit u= GLOB_RUNE_U
   local real power= GLOB_RUNE_POWER

    call GroupEnumUnitsInRange(GL_GR, GetUnitX(u), GetUnitY(u), 300 + 100 * power, RuneOfStorm_b)



   return false
endfunction
//===========================================================================
// Trigger: RuneOfAir
//===========================================================================


function CastRuneOfWinds takes nothing returns boolean

    if IsUnitEnemy(GLOB_RUNE_U, GetOwningPlayer(GetFilterUnit())) and GetUnitTypeId(GetFilterUnit()) != 'h015' then
        call UsOrderU2(GLOB_RUNE_U , GetFilterUnit() , GetUnitX(GLOB_RUNE_U) , GetUnitY(GLOB_RUNE_U) , 'A075' , "entanglingroots" , 500 * GLOB_RUNE_POWER , 4 , ABILITY_RLF_DAMAGE_PER_SECOND_EER1 , ABILITY_RLF_DURATION_NORMAL)
        
    endif
    return false
endfunction

function RuneOfWinds takes nothing returns boolean
   local unit u= GLOB_RUNE_U
   local real power= GLOB_RUNE_POWER

    call GroupEnumUnitsInRange(GL_GR, GetUnitX(u), GetUnitY(u), 400 + 100 * power, RuneOfWinds_b)



   return false
endfunction
//===========================================================================
// Trigger: InitRune
//===========================================================================

function AddRune takes integer i,code c,string s returns nothing
    set RuneCount=RuneCount + 1
    set Runes[RuneCount]=i
    set RunesName[RuneCount]=s
    call SaveInteger(HT, i, 1, RuneCount)
    set RunesTriggers[RuneCount]=CreateRuneAction(c)

    
endfunction

function InitRuneId takes nothing returns nothing

    call AddRune('I08D' , function RuneOfAttack , "Rune of attack")
    set RuneOfChaos_b=Condition(function CastRuneOfChaos)
    call AddRune('I08J' , function RuneOfChaos , "Rune of chaos")
    call AddRune('I08G' , function RuneOfFire , "Rune of fire")
    call AddRune('I088' , function RuneOfLife , "Rune of life")
    call AddRune('I08B' , function RuneOfMagic , "Rune of magic")
    call AddRune('I08F' , function RuneOfHealing , "Rune of Healing")
    call AddRune('I08C' , function RuneOfPower , "Rune of power")
    call AddRune('I08H' , function RuneOfEarth , "Rune of earth")
    set RuneOfStorm_b=Condition(function CastRuneOfStorm)
    call AddRune('I08I' , function RuneOfStorm , "Rune of the Storm")
    set RuneOfWinds_b=Condition(function CastRuneOfWinds)
    call AddRune('I08O' , function RuneOfWinds , "Rune of the winds")
        
endfunction
//===========================================================================
// Trigger: InitRuneTrigger
//===========================================================================
function Trig_InitRuneTrigger takes nothing returns nothing
    local integer IdRune= 0
    set IdRune=LoadInteger(HT, GetItemTypeId(GetManipulatedItem()), 1)
    if IdRune > 0 then
        set GLOB_RUNE_U=GetTriggerUnit()
        set GLOB_RUNE_POWER=GetRunePower(GetManipulatedItem())
        call CreateTextTagTimerColor(RunesName[IdRune] + " " + I2S(R2I(GLOB_RUNE_POWER * 100)) + "%" , 1 , GetUnitX(GLOB_RUNE_U) , GetUnitY(GLOB_RUNE_U) , 50 + GetRandomInt(0, 150) , 1 , 122 , 50 , 255)
        call TriggerEvaluate(RunesTriggers[IdRune])
    endif
endfunction


function Trig_InitRuneTrigger_Actions takes nothing returns nothing
    call InitRuneId()
endfunction

//===========================================================================
function InitTrig_InitRuneTrigger takes nothing returns nothing
    local trigger ActI= CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(ActI, EVENT_PLAYER_UNIT_DROP_ITEM)
    call TriggerAddAction(ActI, function Trig_InitRuneTrigger)
    set gg_trg_InitRuneTrigger=CreateTrigger()
    call TriggerRegisterTimerEventSingle(gg_trg_InitRuneTrigger, 0.01)
    call TriggerAddAction(gg_trg_InitRuneTrigger, function Trig_InitRuneTrigger_Actions)
endfunction


//===========================================================================
// Trigger: InitBoolx
//===========================================================================



function InitBoolExpr takes nothing returns nothing

    set PULV1=Condition(function Trig_Pulverize_Func003Func004001003)
    set PULV2=Condition(function Trig_Pulverize_Func003Func005001003)
    set AbsoluteIceFuncBool=Condition(function AbsoluteIceFunc)
    set AbsoluteColdBool=Condition(function AbsoluteColdFunc)
        set HealingWardBoolexpr=Condition(function HealingWardStartBoolexpr)
        
     set TranquilityBoolexpr=Condition(function TranquilityStartBoolexpr)
    
    
    set HealingWave1=Condition(function HealingWaveFunc)
endfunction


function Trig_InitBoolx_Actions takes nothing returns nothing
call InitBoolExpr()
call InitDamageArea()
endfunction

//===========================================================================
function InitTrig_InitBoolx takes nothing returns nothing
    set gg_trg_InitBoolx=CreateTrigger()
    call TriggerRegisterTimerEventSingle(gg_trg_InitBoolx, 0.00)
    call TriggerAddAction(gg_trg_InitBoolx, function Trig_InitBoolx_Actions)
endfunction


//===========================================================================
// Trigger: EffectInit
//===========================================================================
function DataEffect takes integer spell,integer id,integer fieldId returns nothing
call SaveInteger(HT, spell, - 23000 + id, fieldId)
endfunction




function Trig_EffectInit_Actions takes nothing returns nothing

call DataEffect('Aclf' , 0 , 'ahdu')
call DataEffect('Aclf' , 1 , 'aare')
call DataEffect('Aclf' , 2 , 'Nsi3')

call DataEffect('AHav' , 0 , 'Hav3')
call DataEffect('AHav' , 1 , 'Hav1')
call DataEffect('AHav' , 2 , 'Hav2')

call DataEffect('AHad' , 0 , 'Had1')

call DataEffect('AHab' , 0 , 'Hab1')

call DataEffect('AHds' , 0 , 'ahdu')

call DataEffect('AHtb' , 0 , 'Htb1')
call DataEffect('AHtb' , 1 , 'ahdu')

call DataEffect('AHbn' , 0 , 'ahdu')

call DataEffect('AHds' , 0 , 'Hfs1')
call DataEffect('AHds' , 1 , 'Hfs3')

call DataEffect('AHtc' , 0 , 'Htc1')

call DataEffect('AHnb' , 0 , 'Hhb1')

call DataEffect('AHbz' , 0 , 'Hnz2')

call DataEffect('Ainf' , 0 , 'Inf2')
call DataEffect('Ainf' , 1 , 'Inf1')

call DataEffect('Aoar' , 0 , 'Oar1')

call DataEffect('AOr2' , 0 , 'Oae2')
call DataEffect('AOr2' , 1 , 'Oae1')

call DataEffect('AOae' , 0 , 'Oae1')
call DataEffect('AOae' , 1 , 'Oae2')

call DataEffect('AOhv' , 0 , 'Ocl1')

call DataEffect('AOws' , 0 , 'Wrs1')
call DataEffect('AOws' , 1 , 'ahdu')
call DataEffect('AOws' , 2 , 'aduu')

call DataEffect('AOsh' , 0 , 'Osh1')

call DataEffect('AOcl' , 0 , 'Ocl1')

call DataEffect('Absk' , 0 , 'ahdu')

call DataEffect('Aakb' , 0 , 'Akb1')

call DataEffect('Ablo' , 0 , 'Blo1')
call DataEffect('Ablo' , 1 , 'Blo2')
call DataEffect('Ablo' , 2 , 'Blo3')


call DataEffect('Asta' , 0 , 'Sta4')


endfunction

//===========================================================================
function InitTrig_EffectInit takes nothing returns nothing
    set gg_trg_EffectInit=CreateTrigger()
    call TriggerAddAction(gg_trg_EffectInit, function Trig_EffectInit_Actions)
endfunction


//===========================================================================
function InitCustomTriggers takes nothing returns nothing
    call InitTrig_InitDescription()
    //Function not found: call InitTrig_Storm_bolt()
    //Function not found: call InitTrig_Inner_fire()
    //Function not found: call InitTrig_Holy_Light()
    //Function not found: call InitTrig_Flame_Strike()
    //Function not found: call InitTrig_Fog()
    //Function not found: call InitTrig_Blizzard()
    //Function not found: call InitTrig_Thunder_Clap()
    //Function not found: call InitTrig_Banish()
    //Function not found: call InitTrig_Divine_Shield()
    //Function not found: call InitTrig_Avatar()
    //Function not found: call InitTrig_Summon_Water_Elemental()
    //Function not found: call InitTrig_Phoenix()
    //Function not found: call InitTrig_Multishot()
    //Function not found: call InitTrig_Devation_Aura()
    //Function not found: call InitTrig_Brilliance_Aura()
    //Function not found: call InitTrig_War_Stomp()
    //Function not found: call InitTrig_Berserk()
    //Function not found: call InitTrig_War_Drums()
    //Function not found: call InitTrig_Pilage()
    //Function not found: call InitTrig_Shockwave()
    //Function not found: call InitTrig_Spirit_Link()
    //Function not found: call InitTrig_Chain_Lightning()
    //Function not found: call InitTrig_HealingWave()
    //Function not found: call InitTrig_Slow_Aura()
    //Function not found: call InitTrig_Endurance_Aura()
    //Function not found: call InitTrig_Feral_Spirit()
    //Function not found: call InitTrig_Serpent_Ward()
    //Function not found: call InitTrig_Mirror_Image()
    //Function not found: call InitTrig_Critical_Strike()
    //Function not found: call InitTrig_Big_Bad_Voodoo()
    //Function not found: call InitTrig_Wind_Walk()
    //Function not found: call InitTrig_Bloodlust()
    //Function not found: call InitTrig_Healing_Ward()
    //Function not found: call InitTrig_Stasis_Trap()
    //Function not found: call InitTrig_Pulverize()
    //Function not found: call InitTrig_Vampirism()
    //Function not found: call InitTrig_Carrion_Beetles()
    //Function not found: call InitTrig_Inferno()
    //Function not found: call InitTrig_Carrion_Swarm()
    //Function not found: call InitTrig_Death_and_Decay()
    //Function not found: call InitTrig_Death_Pact()
    //Function not found: call InitTrig_Frost_Armor()
    //Function not found: call InitTrig_Frost_Nova()
    //Function not found: call InitTrig_Impale()
    //Function not found: call InitTrig_Spiked_Carapace()
    //Function not found: call InitTrig_Unholy_Aura()
    //Function not found: call InitTrig_AntiMagic_Shell()
    //Function not found: call InitTrig_Curse()
    //Function not found: call InitTrig_Raise_Dead()
    //Function not found: call InitTrig_Unholy_Frenzy()
    //Function not found: call InitTrig_Blink()
    //Function not found: call InitTrig_Entangling_Roots()
    //Function not found: call InitTrig_Rejuvenation()
    //Function not found: call InitTrig_Tranquility()
    //Function not found: call InitTrig_Thorns()
    //Function not found: call InitTrig_Evasion()
    //Function not found: call InitTrig_Fan_of_Knives()
    //Function not found: call InitTrig_Immolation()
    //Function not found: call InitTrig_Searing_Arrows()
    //Function not found: call InitTrig_Shadow_Strike()
    //Function not found: call InitTrig_Starfall()
    //Function not found: call InitTrig_Summon_Mountain_Giant()
    //Function not found: call InitTrig_Trueshot_Aura()
    //Function not found: call InitTrig_Faerie_Fire()
    //Function not found: call InitTrig_Hardened_Skin()
    //Function not found: call InitTrig_Phase_Shift()
    //Function not found: call InitTrig_DamageAbilty()
    call InitTrig_InitSpells()
    call InitTrig_test()
    call InitTrig_Abil()
    call InitTrig_Untitled_Trigger_002()
    call InitTrig_UnitStateSys()
    //Function not found: call InitTrig_LossHp()
    //Function not found: call InitTrig_HealController()
    //Function not found: call InitTrig_VampirsmController()
    //Function not found: call InitTrig_AOE_DMG()
    //Function not found: call InitTrig_Glory()
    //Function not found: call InitTrig_Functions()
    //Function not found: call InitTrig_StartFunction()
    call InitTrig_Toms()
    call InitTrig_Event_lich()
    call InitTrig_Untitled_Trigger_005()
    //Function not found: call InitTrig_bonus1()
    call InitTrig_Init()
    call InitTrig_UpdateFrame()
    //Function not found: call InitTrig_InitAbility_Copy()
    call InitTrig_AbsoluteAbilityUpgrade_Copy()
    call InitTrig_Timer_Copy()
    call InitTrig_Cooldown_Copy()
    //Function not found: call InitTrig_functions_Copy()
    call InitTrig_InAl_Copy()
    call InitTrig_FixUnit_Copy()
    call InitTrig_InitHash_Copy()
    call InitTrig_Whirlwind_Damage_Copy()
    call InitTrig_reset_cooldown_spell_Copy()
    call InitTrig_axe_recipe_Copy()
    call InitTrig_ring_recipe_Copy()
    call InitTrig_pitlord_passive_cleave_Copy()
    call InitTrig_Zoom_Copy()
    call InitTrig_AttackController_Copy()
    call InitTrig_EvaryChk_Copy_Copy()
    call InitTrig_HeroLvl_Copy()
    call InitTrig_AbilityCast_Copy()
    call InitTrig_Effect_Copy()
    call InitTrig_init_Copy()
    call InitTrig_InitData_Copy()
    call InitTrig_A044_Copy()
    //Function not found: call InitTrig_AutoCastSpells_Copy()
    call InitTrig_RbAbil_Copy()
    call InitTrig_AbilS_Copy()
    call InitTrig_RaAbil_Copy()
    call InitTrig_AbilDragonStaff_Copy()
    //Function not found: call InitTrig_AbilityData()
    //Function not found: call InitTrig_Spell_Death_Pact()
    //Function not found: call InitTrig_Spell_Holy_Light()
    //Function not found: call InitTrig_Spell_Tranquility()
    //Function not found: call InitTrig_Spell_Rejuvination()
    //Function not found: call InitTrig_Abil_Healing_Ward()
    //Function not found: call InitTrig_Abil_Healing_Wave()
    //Function not found: call InitTrig_Cast()
    call InitTrig_Multicast_Copy()
    //Function not found: call InitTrig_AEah_Thorns()
    //Function not found: call InitTrig_AUts_Spiked_Carapace()
    //Function not found: call InitTrig_I05G_MagicNecklaceOfAbsorption()
    //Function not found: call InitTrig_I07O_BoneArmor()
    //Function not found: call InitTrig_Astu_Copy()
    //Function not found: call InitTrig_Crit_Copy()
    //Function not found: call InitTrig_PhysDmg_Copy()
    //Function not found: call InitTrig_MagicDmg_Copy()
    call InitTrig_Damage_Controller_After_Copy()
    call InitTrig_Damage_Controller_Befor_Copy()
    call InitTrig_ItemBonus_Copy()
    call InitTrig_EvaryChk_Copy_2()
    call InitTrig_Killing_Copy()
    call InitTrig_It_Copy_3()
    call InitTrig_It_Copy_Copy()
    call InitTrig_It_Copy_2_Copy()
    //Function not found: call InitTrig_ElementStartAbility()
    call InitTrig_InitElements()
    call InitTrig_RuneCast()
    call InitTrig_MyRune()
    //Function not found: call InitTrig_RuneState()
    //Function not found: call InitTrig_RuneEvent()
    //Function not found: call InitTrig_RuneOfAttack()
    //Function not found: call InitTrig_RuneOfEarth()
    //Function not found: call InitTrig_RuneOfPower()
    //Function not found: call InitTrig_RuneOfHealing()
    //Function not found: call InitTrig_RuneOfLife()
    //Function not found: call InitTrig_RuneOfMagic()
    //Function not found: call InitTrig_RuneOfFire()
    //Function not found: call InitTrig_RuneOfChaos()
    //Function not found: call InitTrig_RuneOfStorm()
    //Function not found: call InitTrig_RuneOfAir()
    //Function not found: call InitTrig_InitRune()
    call InitTrig_InitRuneTrigger()
    call InitTrig_InitBoolx()
    call InitTrig_EffectInit()
endfunction

//===========================================================================
function RunInitializationTriggers takes nothing returns nothing
    call ConditionalTriggerExecute(gg_trg_InitDescription)
    call ConditionalTriggerExecute(gg_trg_HeroLvl_Copy)
    call ConditionalTriggerExecute(gg_trg_InitData_Copy)
    call ConditionalTriggerExecute(gg_trg_InitElements)
    call ConditionalTriggerExecute(gg_trg_EffectInit)
endfunction

//***************************************************************************
//*
//*  Players
//*
//***************************************************************************

function InitCustomPlayerSlots takes nothing returns nothing

    // Player 0
    call SetPlayerStartLocation(Player(0), 0)
    call SetPlayerColor(Player(0), ConvertPlayerColor(0))
    call SetPlayerRacePreference(Player(0), RACE_PREF_RANDOM)
    call SetPlayerRaceSelectable(Player(0), true)
    call SetPlayerController(Player(0), MAP_CONTROL_USER)

    // Player 1
    call SetPlayerStartLocation(Player(1), 1)
    call SetPlayerColor(Player(1), ConvertPlayerColor(1))
    call SetPlayerRacePreference(Player(1), RACE_PREF_RANDOM)
    call SetPlayerRaceSelectable(Player(1), true)
    call SetPlayerController(Player(1), MAP_CONTROL_USER)

    // Player 2
    call SetPlayerStartLocation(Player(2), 2)
    call SetPlayerColor(Player(2), ConvertPlayerColor(2))
    call SetPlayerRacePreference(Player(2), RACE_PREF_RANDOM)
    call SetPlayerRaceSelectable(Player(2), true)
    call SetPlayerController(Player(2), MAP_CONTROL_USER)

    // Player 3
    call SetPlayerStartLocation(Player(3), 3)
    call SetPlayerColor(Player(3), ConvertPlayerColor(3))
    call SetPlayerRacePreference(Player(3), RACE_PREF_RANDOM)
    call SetPlayerRaceSelectable(Player(3), true)
    call SetPlayerController(Player(3), MAP_CONTROL_USER)

    // Player 4
    call SetPlayerStartLocation(Player(4), 4)
    call SetPlayerColor(Player(4), ConvertPlayerColor(4))
    call SetPlayerRacePreference(Player(4), RACE_PREF_RANDOM)
    call SetPlayerRaceSelectable(Player(4), true)
    call SetPlayerController(Player(4), MAP_CONTROL_USER)

    // Player 5
    call SetPlayerStartLocation(Player(5), 5)
    call SetPlayerColor(Player(5), ConvertPlayerColor(5))
    call SetPlayerRacePreference(Player(5), RACE_PREF_RANDOM)
    call SetPlayerRaceSelectable(Player(5), true)
    call SetPlayerController(Player(5), MAP_CONTROL_USER)

    // Player 6
    call SetPlayerStartLocation(Player(6), 6)
    call SetPlayerColor(Player(6), ConvertPlayerColor(6))
    call SetPlayerRacePreference(Player(6), RACE_PREF_RANDOM)
    call SetPlayerRaceSelectable(Player(6), true)
    call SetPlayerController(Player(6), MAP_CONTROL_USER)

    // Player 7
    call SetPlayerStartLocation(Player(7), 7)
    call SetPlayerColor(Player(7), ConvertPlayerColor(7))
    call SetPlayerRacePreference(Player(7), RACE_PREF_RANDOM)
    call SetPlayerRaceSelectable(Player(7), true)
    call SetPlayerController(Player(7), MAP_CONTROL_USER)

    // Player 8
    call SetPlayerStartLocation(Player(8), 8)
    call SetPlayerColor(Player(8), ConvertPlayerColor(8))
    call SetPlayerRacePreference(Player(8), RACE_PREF_RANDOM)
    call SetPlayerRaceSelectable(Player(8), true)
    call SetPlayerController(Player(8), MAP_CONTROL_COMPUTER)

    // Player 11
    call SetPlayerStartLocation(Player(11), 9)
    call SetPlayerColor(Player(11), ConvertPlayerColor(11))
    call SetPlayerRacePreference(Player(11), RACE_PREF_RANDOM)
    call SetPlayerRaceSelectable(Player(11), true)
    call SetPlayerController(Player(11), MAP_CONTROL_COMPUTER)

endfunction

function InitCustomTeams takes nothing returns nothing
    // Force: TRIGSTR_012
    call SetPlayerTeam(Player(0), 0)
    call SetPlayerTeam(Player(1), 0)
    call SetPlayerTeam(Player(2), 0)
    call SetPlayerTeam(Player(3), 0)
    call SetPlayerTeam(Player(4), 0)
    call SetPlayerTeam(Player(5), 0)
    call SetPlayerTeam(Player(6), 0)
    call SetPlayerTeam(Player(7), 0)
    call SetPlayerTeam(Player(8), 0)

    // Force: TRIGSTR_013
    call SetPlayerTeam(Player(11), 1)

endfunction

function InitAllyPriorities takes nothing returns nothing

    call SetStartLocPrioCount(0, 8)
    call SetStartLocPrio(0, 0, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(0, 1, 2, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(0, 2, 3, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(0, 3, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(0, 4, 5, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(0, 5, 6, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(0, 6, 7, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(0, 7, 9, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(1, 8)
    call SetStartLocPrio(1, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(1, 1, 2, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(1, 2, 3, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(1, 3, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(1, 4, 5, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(1, 5, 6, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(1, 6, 7, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(1, 7, 9, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(2, 8)
    call SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(2, 1, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(2, 2, 3, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(2, 3, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(2, 4, 5, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(2, 5, 6, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(2, 6, 7, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(2, 7, 9, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(3, 8)
    call SetStartLocPrio(3, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(3, 1, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(3, 2, 2, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(3, 3, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(3, 4, 5, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(3, 5, 6, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(3, 6, 7, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(3, 7, 9, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(4, 8)
    call SetStartLocPrio(4, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(4, 1, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(4, 2, 2, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(4, 3, 3, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(4, 4, 5, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(4, 5, 6, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(4, 6, 7, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(4, 7, 9, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(5, 8)
    call SetStartLocPrio(5, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(5, 1, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(5, 2, 2, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(5, 3, 3, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(5, 4, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(5, 5, 6, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(5, 6, 7, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(5, 7, 9, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(6, 8)
    call SetStartLocPrio(6, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(6, 1, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(6, 2, 2, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(6, 3, 3, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(6, 4, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(6, 5, 5, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(6, 6, 7, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(6, 7, 9, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(7, 8)
    call SetStartLocPrio(7, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(7, 1, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(7, 2, 2, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(7, 3, 3, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(7, 4, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(7, 5, 5, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(7, 6, 6, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(7, 7, 9, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(8, 5)
    call SetStartLocPrio(8, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(8, 1, 3, MAP_LOC_PRIO_LOW)
    call SetStartLocPrio(8, 2, 6, MAP_LOC_PRIO_LOW)
    call SetStartLocPrio(8, 3, 9, MAP_LOC_PRIO_HIGH)

    call SetStartLocPrioCount(9, 8)
    call SetStartLocPrio(9, 0, 0, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(9, 1, 1, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(9, 2, 2, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(9, 3, 3, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(9, 4, 4, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(9, 5, 5, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(9, 6, 6, MAP_LOC_PRIO_HIGH)
    call SetStartLocPrio(9, 7, 7, MAP_LOC_PRIO_HIGH)
endfunction

//***************************************************************************
//*
//*  Main Initialization
//*
//***************************************************************************

//===========================================================================
function main takes nothing returns nothing
    call SetCameraBounds(- 5376.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), - 5632.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 5376.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 5120.0 - GetCameraMargin(CAMERA_MARGIN_TOP), - 5376.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 5120.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 5376.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), - 5632.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
    call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
    call NewSoundEnvironment("Default")
    call SetAmbientDaySound("IceCrownDay")
    call SetAmbientNightSound("IceCrownNight")
    call SetMapMusic("Music", true, 0)
    call InitSounds()
    call CreateRegions()
    call CreateAllUnits()
    call InitBlizzard()

call ExecuteFunc("jasshelper__initstructs1672614187")
call ExecuteFunc("InitStringArray")

    call InitGlobals()
    call InitCustomTriggers()
    call RunInitializationTriggers()

endfunction

//***************************************************************************
//*
//*  Map Configuration
//*
//***************************************************************************

function config takes nothing returns nothing
    call SetMapName("TRIGSTR_001")
    call SetMapDescription("TRIGSTR_3907")
    call SetPlayers(10)
    call SetTeams(10)
    call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)

    call DefineStartLocation(0, 0.0, - 320.0)
    call DefineStartLocation(1, 0.0, - 320.0)
    call DefineStartLocation(2, 0.0, - 320.0)
    call DefineStartLocation(3, 0.0, - 320.0)
    call DefineStartLocation(4, 0.0, - 320.0)
    call DefineStartLocation(5, 0.0, - 320.0)
    call DefineStartLocation(6, 0.0, - 320.0)
    call DefineStartLocation(7, 0.0, - 320.0)
    call DefineStartLocation(8, 0.0, - 320.0)
    call DefineStartLocation(9, 0.0, - 320.0)

    // Player setup
    call InitCustomPlayerSlots()
    call InitCustomTeams()
    call InitAllyPriorities()
endfunction




//Struct method generated initializers/callers:
function sa__AbilityData_GedLevel takes nothing returns boolean
local integer this=f__arg_this
set f__result_real= s__AbilityData_Level[this] + s__AbilityData_BonusLevel[this]
   return true
endfunction

function jasshelper__initstructs1672614187 takes nothing returns nothing
    set st__AbilityData_GedLevel=CreateTrigger()
    call TriggerAddCondition(st__AbilityData_GedLevel,Condition( function sa__AbilityData_GedLevel))



endfunction

